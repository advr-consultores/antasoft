(function(e){function a(a){for(var o,s,n=a[0],c=a[1],l=a[2],d=0,m=[];d<n.length;d++)s=n[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(a);while(m.length)m.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var e,a=0;a<i.length;a++){for(var t=i[a],o=!0,n=1;n<t.length;n++){var c=t[n];0!==r[c]&&(o=!1)}o&&(i.splice(a--,1),e=s(s.s=t[0]))}return e}var o={},r={app:0},i=[];function s(a){if(o[a])return o[a].exports;var t=o[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=o,s.d=function(e,a,t){s.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,a){if(1&a&&(e=s(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)s.d(t,o,function(a){return e[a]}.bind(null,o));return t},s.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(a,"a",a),a},s.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},s.p="/antasoft/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=a,n=n.slice();for(var l=0;l<n.length;l++)a(n[l]);var u=c;i.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"126a":function(e,a,t){},"2df6":function(e,a,t){"use strict";t("b6d9")},"491a":function(e,a,t){"use strict";t("126a")},"56d7":function(e,a,t){"use strict";t.r(a);var o=t("2b0e"),r=t("7496"),i=t("40dc"),s=t("a523"),n=t("2fa4"),c=t("2a7f"),l=function(){var e=this,a=e._self._c;return a(r["a"],[a(i["a"],{attrs:{app:"",color:"info",flat:"",dark:""}},[e.isUsuarioAutenticado?a("encabezado"):a(s["a"],{staticClass:"py-0 fill-height"},[a(c["a"],[e._v("Antasoft")]),a(n["a"])],1)],1),a(s["a"],{staticClass:"grey lighten-2",staticStyle:{height:"100vh"},attrs:{fluid:""}},[a("router-view"),a("alerta")],1)],1)},u=[],d=t("8336"),m=t("132d"),p=(t("14d9"),function(){var e=this,a=e._self._c;return a(s["a"],{staticClass:"py-0 fill-height"},[a(d["a"],{attrs:{icon:""},on:{click:function(a){e.$router.push({name:"Home"}).catch(()=>{})}}},[a(m["a"],{attrs:{"x-large":""}},[e._v("mdi-home-circle")])],1),a(d["a"],{attrs:{icon:""},on:{click:function(a){e.$router.push({name:"inuembles-coordinador",params:{nombre_usuario:e.nombre_usuario}}).catch(()=>{})}}},[a(m["a"],{attrs:{"x-large":""}},[e._v("mdi-home-circle")])],1),a("menu-navegacion-principal"),a(n["a"]),a("notificaciones"),a("crear-nuevo"),a("ver-perfil-y-mas")],1)}),b=[],_=t("99d9"),g=function(){var e=this,a=e._self._c;return a(_["a"],e._l(e.links,(function(t,o){return a(d["a"],{key:o,attrs:{text:""},on:{click:function(a){return e.redireccionar(t.nombre)}}},[e._v(" "+e._s(t.texto)+" ")])})),1)},f=[],h={data:()=>({links:[{texto:"Pagos",nombre:"pagos"}]}),computed:{username(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},methods:{redireccionar(e){this.$router.push({name:e,params:{nombreUsuario:this.username}}).catch(()=>{})}}},v=h,y=t("2877"),j=Object(y["a"])(v,g,f,!1,null,null,null),x=j.exports,C=t("8212"),k=t("4ca6"),$=t("b0af"),w=t("ce7e"),I=t("8860"),S=t("da13"),A=t("1800"),P=t("5d23"),T=t("1baa"),E=t("e449"),O=t("afd9"),M=function(){var e=this,a=e._self._c;return a(E["a"],{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(C["a"],e._g(e._b({},"v-avatar",t,!1),o),[a(k["a"],{attrs:{overlap:"",bordered:"",content:e.numeroNotificaciones,color:"error"}},[a(m["a"],[e._v(" mdi-bell")])],1)],1)]}}])},[a($["a"],[a(O["a"],[a("span",[e._v("Tus notificaciones")]),a(n["a"]),a(d["a"],{attrs:{icon:""}},[a(m["a"],{on:{click:e.traerNotificaciones}},[e._v("mdi-reload")])],1)],1),a(w["a"]),a(I["a"],{attrs:{"two-line":""}},[a(T["a"],{attrs:{"active-class":"blue--text"},model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}},[e._l(e.items,(function(t,o){return[a(S["a"],{key:t.title,scopedSlots:e._u([{key:"default",fn:function({}){return[a(P["b"],[a(P["d"],{domProps:{textContent:e._s(t.title)}}),a(P["c"],{staticClass:"text--primary",domProps:{textContent:e._s(t.headline)}}),a(P["c"],{domProps:{textContent:e._s(t.subtitle)}})],1),a(A["a"],[a(P["a"],{domProps:{textContent:e._s(t.action)}})],1)]}}],null,!0)}),o<e.items.length-1?a(w["a"],{key:o}):e._e()]}))],2)],1),a(w["a"]),a(O["a"],[a(n["a"]),a(d["a"],{attrs:{small:"",text:""}},[e._v("Ver todas")])],1)],1)],1)},F=[],D={data:()=>({selected:[],items:[{action:"1 dia",headline:"trabajo id 1",subtitle:"Este tabajo fue modificado",title:"Trabajos notificación prueba #8"},{action:"2 dia",headline:"Recurso 3 comentario 2",subtitle:"El usuario 2 hizo un comentario",title:"Comentarios recursos notificación prueba #4"},{action:"6 dia",headline:"Recurso 3 archivo 2",subtitle:"El usuario 1 subió un archivo",title:"Archivo recursos notificación prueba #3"}]}),computed:{notificaciones(){return this.$store.getters["MOD_notificaciones/getNotificaciones"]},id_usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},numeroNotificaciones(){var e=0;const{notificaciones:a,selected:t}=this;for(let o=0;o<a.length;o++)a[o].is_read||(e+=1,t.push(o));return e}},created(){},methods:{async traerNotificaciones(){const{id_usuario:e}=this,{error:a}=await this.$store.dispatch("MOD_notificaciones/traerNotificaciones",{id_usuario:e});a&&alert(a)},isComentario(e){return"comentario"==e},async verTrabajo({id:e,user:a,is_read:t,extra_id:o}){this.$store.commit("trabajo/setTrabajo",{id:o,name:""}),console.log(!t),t||this.$store.dispatch("MOD_notificaciones/actualizarNotificaciones",{id:e,user:a,is_read:!0}),this.$router.push({name:"ArchivosTrabajo",params:{nombreUsuario:this.$store.getters["MOD_autenticacion/getNombreUsuario"]}})}}},V=D,N=Object(y["a"])(V,M,F,!1,null,null,null),R=N.exports,z=t("cc20"),U=t("adda"),B=function(){var e=this,a=e._self._c;return a(E["a"],{attrs:{bottom:"","offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(z["a"],e._g(e._b({staticClass:"ma-2"},"v-chip",t,!1),o),[a(C["a"],{attrs:{color:"grey",left:""}},[null!==e.fotoUsuario?a(U["a"],{attrs:{src:e.$store.getters["MOD_autenticacion/getFotoUsuario"]}}):a(m["a"],[e._v(e._s(e.usernname[0])+" ")])],1),e._v(" "+e._s(e.usernname)+" "),a(m["a"],{attrs:{right:""}},[e._v(e._s("true"===t["aria-expanded"]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}])},[a(I["a"],[a(S["a"],{attrs:{link:""},on:{click:function(a){return e.redireccionar("personal")}}},[a(P["d"],[e._v("Administrar usuarios")])],1),a(S["a"],{attrs:{link:""},on:{click:function(a){return e.cerrarSesion()}}},[a(P["d"],[e._v("Salir")])],1)],1)],1)},L=[];const q="initStoreModule",H="logoutFunction";var G=t("bc3a");const X=G["a"].create({baseURL:"https://advrapi.advr.mx"});var J={instance:X};const Y=e=>{const a=localStorage.getItem(e);try{return JSON.parse(a)}catch(t){return console.error({error:t,propertyName:e,stringProperty:a}),null}},K=(e,a)=>{const t=JSON.stringify(a);localStorage.setItem(e,t)},Q={token:null,usuario:[]},Z={setTokens(e,a){K("token",a),e.token=a},setUsuario(e,a){K("usuario",a),e.usuario=a},limpiarTokens(e){K("token",null),e.token=null},limpiarUsuario(e){K("usuario",{}),e.usuario={}}},W={[q]({dispatch:e}){e("iniciarAutenticacion")},[H]({commit:e}){e("limpiarTokens"),e("limpiarUsuario")},iniciarAutenticacion({commit:e}){const a=Y("token"),t=Y("usuario");e("setTokens",a),e("setUsuario",t)},async login({commit:e},{correo:a,nombreUsuario:t,password:o}){try{const{data:r,status:i}=await J.instance.post("login/",{email:a,username:t,password:o}),{token:s,user:n,message:c}=r,{groups:l,id:u,email:d,username:m,is_staff:p,name:b,last_name:_,image:g,is_active:f}=n;return e("setTokens",s),e("setUsuario",{id:u,privilegios:l,usuario:m,email:d,nombre:b,apellidos:_,imagen:g,is_active:f,is_staff:p}),{mensaje:c,estado:i}}catch(r){return{error:r}}},async cerrarSesion(e,a){try{const{data:e}=await J.instance.post("logout/?token="+a),{session_messege:t}=e;return{message:t}}catch(t){const e=String(t.response.data.error);return{error:e,message:e}}}},ee={isUsuarioAutenticado:e=>Boolean(e.token),getUsuarioAutenticado:e=>e.usuario,getPrivilegios:e=>e.usuario.privilegios,getUserPermissions:e=>e.usuario.permisoUsuario,getFotoUsuario:e=>e.usuario.imagen,getNombreUsuario:e=>e.usuario.usuario,obtenerNombreUsuario:e=>e.usuario.nombre,obtenerApellidosUsuario:e=>e.usuario.apellidos,obtenerIdUsuario:e=>e.usuario.id,getToken:e=>e.token};var ae={namespaced:!0,state:Q,actions:W,mutations:Z,getters:ee},te={namespaced:!0,state:{usuario:{id:-1,nombre:"",apellidos:"",nombre_usuario:"",correo:"",pwd:"",is_activo:!1,is_personal:!1,grupos:[],estados:[]},usuarios:[],mensaje:"",is_cargando:!1},mutations:{setUsuario(e,a){e.usuario=a},setUsuarios(e,a){e.usuarios=a},cleanUsuarios(e){e.usuarios=[]},addUsuario(e,a){e.usuarios.push(a)},updateUsuarioPermisos(e,{indice:a,is_activo:t,is_personal:o}){e.usuarios[a].is_activo=t,e.usuarios[a].is_personal=o},updatePrivilegiosPersonal(e,{id:a,grupos:t}){let o=e.usuarios.find(e=>e.id===a),r=e.usuarios.indexOf(o);e.usuarios[r].grupos=t},updateEstadosCargo(e,{id:a,estados:t}){let o=e.usuarios.find(e=>e.id===a),r=e.usuarios.indexOf(o);e.usuarios[r].estados_cargo=t},setCargando(e,a){e.is_cargando=a}},actions:{async obtenerUsuarios({commit:e},{privilegio:a}){try{const{data:o,status:r}=await J.instance.get("usuarios/usuario/?grupo="+a,{headers:{Authorization:"Bearer "+Y("token")}}),{items:i,message:s}=o;var t=[];return i.forEach(e=>{t.push({id:e.id,nombre:e.name,apellidos:e.last_name,nombre_usuario:e.username,correo_electronico:e.email,imagen:e.image,is_activo:e.is_active,is_personal:e.is_staff,is_superusuario:e.is_superuser,ultimo_acceso:e.last_login,grupos:e.groups,estados_cargo:e.provinces_charge?e.provinces_charge.provinces:[]})}),e("setUsuarios",t),{mensaje:s,estado:r}}catch(o){return e("cleanUsuarios"),{error:o}}},async crearUsuario({state:e,commit:a}){try{a("setCargando",!0);const{usuario:t}=e,o={username:t.nombre_usuario,email:t.correo,password:t.pwd,name:t.nombre,last_name:t.apellidos,is_staff:!0,groups:t.grupos},r={Authorization:"Bearer "+Y("token")},{data:i,status:s}=await J.instance.post("/usuarios/usuario/",o,{headers:r}),{message:n,items:c}=i,{id:l,username:u,email:d,name:m,last_name:p,image:b,is_active:_,is_staff:g,groups:f,is_superuser:h}=c,v={id:l,nombre:m,apellidos:p,nombre_usuario:u,correo_electronico:d,imagen:b,is_superusuario:h,is_activo:_,is_personal:g,grupos:f};return a("addUsuario",v),a("setCargando",!1),{mensaje:n,estado:s}}catch(t){return a("setCargando",!1),{error:t}}},async actulizarPermisos({commit:e},{id:a,indice:t,is_activo:o,is_personal:r}){try{const i={Authorization:"Bearer "+Y("token")},{data:s,status:n}=await J.instance.put(`usuarios/usuario/${a}/permisos/`,{is_active:o,is_staff:r},{headers:i}),{items:c,message:l}=s,{is_active:u,is_staff:d}=c;return e("updateUsuarioPermisos",{indice:t,is_activo:u,is_personal:d}),{mensaje:l,estado:n}}catch(i){return{error:i}}},async actulizarPrivilegiosPersonal({commit:e},{id:a,grupos:t}){try{const o={Authorization:"Bearer "+Y("token")},{data:r,status:i}=await J.instance.patch(`usuarios/usuario/${a}/grupos/`,{id:a,groups:t},{headers:o}),{items:s,message:n}=r;return e("updatePrivilegiosPersonal",{id:a,grupos:s.groups}),{mensaje:n,estado:i}}catch(o){return{error:o}}},async desactivarUsuarioPersonal(e,a){try{const e={Authorization:"Bearer "+Y("token")},{data:t,status:o}=await J.instance.delete(`usuarios/usuario/${a}/`,{headers:e}),{message:r}=t;return{mensaje:r,estado:o}}catch(t){return{error:t}}},async recuperarEstadoUsuarioCargo({commit:e},a){try{const{data:t,status:o}=await J.instance.get("usuarios/cargo/?cargo="+a),{items:r,message:i}=t,{provinces:s}=r;return e("updateEstadosCargo",{id:a,estados:s}),{mensaje:i,status:o}}catch(t){return{error:t}}},async asignarEstadosUsuario({commit:e},{id:a,estados_cargo:t}){try{const o={charge:a,provinces:t},{data:r,status:i}=await J.instance.post("usuarios/cargo/",o),{items:s,message:n}=r,{charge:c,provinces:l}=s;return e("updateEstadosCargo",{id:c,estados:l}),{mensaje:n,status:i}}catch(o){return{error:o}}}},getters:{getUsuarios:e=>e.usuarios,getUsuario:e=>e.usuario,getCargando:e=>e.is_cargando}};const oe={contactos:[],contacto:{id:null,nombre:"",apellidos:"",numero_telefonico_1:"",numero_telefonico_2:"",correo_electronico:"",municipios:[]},mensaje:"",is_cargando:!1},re={setContactos(e,a){e.contactos=a},addContacto(e,a){e.contactos.push(a)},setContacto(e,a){e.contacto=a},setCargando(e,a){e.is_cargando=a},clearContacto(e){e.contacto={id:null,nombre:"",apellidos:"",numero_telefonico_1:"",numero_telefonico_2:"",correo_electronico:"",municipios:[]}}},ie={async recuperarContactos({commit:e}){try{const{data:t,status:o}=await J.instance.get("/usuarios/cantacto/",{headers:{Authorization:"Bearer "+Y("token")}}),{items:r,message:i}=t;var a=[];for(const e of r)a.push({id:e.id,nombre:e.name,apellidos:e.last_name,correo_electronico:e.email,numero_telefonico_1:e.phone_one,numero_telefonico_2:e.phone_two,municipios:e.municipalities});return e("setContactos",a),{mensaje:i,estado:o}}catch(t){return{error:t}}},async crearNuevoContacto({commit:e},{nombre:a,apellidos:t,correo_electronico:o,numero_telefonico_1:r,municipios:i}){try{e("setCargando",!0);const s={name:a,last_name:t,phone_one:r,email:o,municipalities:i},{data:n,status:c}=await J.instance.post("/usuarios/cantacto/",s),{message:l,items:u}=n,{id:d,name:m,last_name:p,phone_one:b,phone_two:_,email:g,municipalities:f}=u,h={id:void 0===d?null:d,nombre:m,apellidos:p,correo_electronico:g,numero_telefonico_1:b,numero_telefonico_2:void 0===_?"":_,municipios:f};return e("addContacto",h),e("setCargando",!1),{mensaje:l,estado:c}}catch(s){return e("setCargando",!1),{error:s}}}},se={getContactos:e=>e.contactos,getContacto:e=>e.contacto};var ne={namespaced:!0,state:oe,mutations:re,actions:ie,getters:se};const ce={grupos:[],grupos_permisos:[],rolMiembro:{},is_cargando:!1},le={MUT_EstablecerRolMiembro(e,a){e.rolMiembro=a},clearRolMiembro(e){e.rolMiembro={}},setGrupos(e,a){e.grupos=a},addGrupo(e,a){e.grupos.push(a)},setCargando(e,a){e.is_cargando=a}},ue={async obtenerGrupos({commit:e}){try{e("setCargando",!0);const{data:a,status:t}=await J.instance.get("grupos/grupo/"),{items:o,message:r}=a,i=[];for(const e of o)i.push({id:e.id,nombre:e.name,permisos:e.permissions.length});return e("setGrupos",i),e("setCargando",!1),{mensaje:r,estado:t}}catch(a){return e("setCargando",!1),{error:a}}},async obtenerPermisos(){try{const{data:e}=await J.instance.get("roles/permiso/"),{items:a}=e;return{items:a}}catch(e){const a=String(e.response.data.error);return{error:a}}},async AXN_ActualizarRolMiembro(e,{usuario:a,rol:t}){try{const{data:e}=await J.instance.put(`roles/usuario/${a}/`,{user:a,rol:t}),{message:o}=e;return{message:o}}catch(o){const e=String(o.response.data.error);return{error:e}}},async AXN_AsignarRolMiembro(e,{usuario:a,rol:t}){try{const{data:e}=await J.instance.post("roles/usuario/",{user:a,rol:t}),{message:o}=e;return{message:o}}catch(o){const e=String(o.response.data.error);return{error:e}}},async AXN_ObtenerRolMiembro({commit:e},{id:a}){try{const{data:t}=await J.instance.get(`/roles/usuario/${a}/`),{items:o}=t;return e("MUT_EstablecerRolMiembro",o.rol),{message:"Ok"}}catch(t){return{message:"No tiene un rol.",error:t}}}},de={GET_idRolMiembro:e=>e.rolMiembro.id,getCargando:e=>e.is_cargando,getGrupos:e=>e.grupos};var me={namespaced:!0,state:ce,mutations:le,actions:ue,getters:de},pe={namespaced:!0,state:{cliente:{},clientes:[],cargando:!1,mensaje:"",isActivoFormularioCrearNuevoCliente:!1},mutations:{setClientes(e,a){K("clientes",a),e.clientes=a},setCliente(e,a){K("cliente",a),e.cliente=a},setCargando(e,a){e.cargando=a},setIsActivoFormularioCrearNuevoCliente(e,a){e.isActivoFormularioCrearNuevoCliente=a},setMensaje(e,a){e.mensaje=a},cleanModCliente({commit:e}){e("cleanCliente"),e("cleanClientes")},cleanCliente(e){K("cliente",{}),e.cliente={}},cleanClientes(e){K("clientes",[]),e.clientes=[]},deleteCliente(e,a){e.clientes.splice(a,1)}},actions:{[q]({dispatch:e}){e("iniciarModCliente")},[H]({commit:e}){e("cleanModCliente")},iniciarModCliente({commit:e}){const a=Y("clientes")?Y("clientes"):[],t=Y("cliente")?Y("cliente"):{};e("setClientes",a),e("setCliente",t)},async obtenerClientes({commit:e}){try{e("setCargando",!0);const{data:t,status:o}=await J.instance.get("/clientes/cliente/",{headers:{Authorization:"Bearer "+Y("token")}}),{items:r,message:i}=t;var a=[];return r.forEach(e=>{a.push({id:e.id,nombre:e.name,rfc:e.rfc,direccion:e.address})}),e("setClientes",a),e("setCargando",!1),{mensaje:i,estado:o}}catch(t){return e("cleanModCliente"),e("setCargando",!1),{error:t}}},async recuperarCliente({commit:e},a){try{return e("setCliente",a),{mensaje:"Se pudo establecer el cliente.",status:200}}catch(t){return{mensaje:"No se establecio el cliente.",error:"error",status:400}}},async nuevo({state:e,commit:a},{nombre:t,direccion:o,rfc:r}){try{a("setCargando",!0);const i={name:t,address:o,rfc:r},{data:s,status:n}=await J.instance.post("clientes/cliente/",i),{items:c,message:l}=s,u={nombre:c.name,rfc:c.rfc,id:c.id,direccion:c.address};return e.clientes.push(u),a("setCliente",u),a("setCargando",!1),{mensaje:l,estado:n}}catch(i){return a("setCargando",!1),{error:i}}},async eliminar({commit:e},{id:a,indice:t}){try{const{data:o}=await J.instance.delete(`clientes/cliente/${a}/`),{message:r}=o;return e("deleteCliente",t),{mensaje:r}}catch(o){return{error:o.response.data.error,mensaje:o.response.data.message}}}},getters:{getCliente:e=>e.cliente,getClientes:e=>e.clientes,getCargando:e=>e.cargando,getIsActivoFormularioCrearNuevoCliente:e=>e.isActivoFormularioCrearNuevoCliente,getMensaje:e=>e.mensaje,isClientes:e=>Boolean(e.clientes.length)}},be=(t("0541"),{namespaced:!0,state:{inmueble:{id:null,cliente:{},nombre:"",clave:"",sirh:"",estado:{},municipio:{},direccion:""},inmuebles:[],inmueblesSeleccionados:[],inmuebles_verificados:[],verificarInmuebles:[],indice_inmueble:-1,numeroInmueblesCreados:0,total_inmuebles_verificados:0,is_dialogo_formulario_crear_nuevo_inmuble:!1,array_intrucciones_formulario:[[{icon:"mdi-checkbox-blank-circle",color:"grey",text:"Elegir un cliente."},{icon:"mdi-checkbox-blank-circle",color:"grey",text:"Escoger un archivo Excel."},{icon:"mdi-checkbox-blank-circle",color:"grey",text:'Haz clic en "Continuar".'}],[{icon:"mdi-arrow-left-bold-circle",color:"primary",text:'Haz clic en "Regresar" para ir al Paso 1.'},{icon:"mdi-information",color:"info",text:'Haz clic en "Crear" o "Borrar" inmuebles.'},{icon:"mdi-information",color:"info",text:'Haz clic en "✏️" o "🗑" para manipular inmueble.'},{icon:"mdi-logout-variant",color:"error",text:'Haz clic en "Cancelar" para terminar.'}]],cargando:!1},mutations:{setInmueble(e,a){e.inmueble=a},setInmuebles(e,a){e.inmuebles=a},addInmuebles(e,a){e.inmuebles.push(a)},updateInmueblePorIndice(e,{name:a,property_key:t,sirh:o,province:r,municipality:i,address:s}){e.inmuebles[e.indice_inmueble].nombre=a,e.inmuebles[e.indice_inmueble].clave=t,e.inmuebles[e.indice_inmueble].sirh=o,e.inmuebles[e.indice_inmueble].estado={id:r.id,nombre:r.name},e.inmuebles[e.indice_inmueble].municipio={id:i.id,nombre:i.name},e.inmuebles[e.indice_inmueble].direccion=s},cleanInmuebles(e){e.inmuebles=[]},cleanInmueble(e){e.inmueble={}},setCargando(e,a){e.cargando=a},setInmueblesSeleccionados(e,a){e.inmueblesSeleccionados=a},cleanInmueblesSeleccionados(e){e.inmueblesSeleccionados=[]},eliminarInmueble(e,a){e.inmuebles.splice(a,1)},updateInmuebleVerificadoPorIndice(e,{inmueble:a,indice:t}){e.inmuebles_verificados[t].nombre=a.nombre,e.inmuebles_verificados[t].clave=a.clave,e.inmuebles_verificados[t].sirh=a.sirh,e.inmuebles_verificados[t].estado=a.estado,e.inmuebles_verificados[t].municipio=a.municipio,e.inmuebles_verificados[t].direccion=a.direccion},splitInmueblesVerificados(e,a){e.inmuebles_verificados.splice(a,1)},splitVerificarInmuebles(e,a){e.verificarInmuebles.splice(a,1)},setInmueblesVerificados(e,a){e.inmuebles_verificados=a},setVerificarInmuebles(e,a){e.verificarInmuebles=a},cleanInmueblesVerificados(e){e.inmuebles_verificados=[]},cleanVerificarInmuebles(e){e.verificarInmuebles=[]},updateInmuebleVerificado(e,{indice:a,inmueble:t}){"property_key"in t&&(e.inmuebles_verificados[a].clave=t.property_key[0]+"("+e.verificarInmuebles[a].clave+")"),"name"in t&&(e.inmuebles_verificados[a].nombre=t.name[0]+"("+e.verificarInmuebles[a].nombre+")"),"province"in t&&(e.inmuebles_verificados[a].estado=t.province[0]+"("+e.verificarInmuebles[a].estado+")"),"municipality"in t&&(e.inmuebles_verificados[a].municipio=t.municipality[0]+"("+e.verificarInmuebles[a].municipio+")")},setNumeroInmueblesCreados(e,a){e.numeroInmueblesCreados=a},setTotalInmueblesVerificados(e,a){e.total_inmuebles_verificados=a},setStatusInmuebleVerificado(e,{indice:a,status:t}){e.inmuebles_verificados[a].status=t},setIsDialogoFormularioCrearNuevoInmuble(e,a){e.is_dialogo_formulario_crear_nuevo_inmuble=a},setIndiceInmueble(e,a){e.indice_inmueble=a},updateArrayIntrucciones(e,{paso:a,sub_paso:t,instruccion:o}){e.array_intrucciones_formulario[a][t].icon=o.icon,e.array_intrucciones_formulario[a][t].color=o.color}},actions:{async crearInmueble({commit:e},{nombre:a,clave:t,sirh:o,direccion:r,estado:i,municipio:s,localidad:n,cliente:c}){try{e("setCargando",!0);const{data:l,status:u}=await J.instance.post("inmuebles/inmueble/",{name:a,property_key:t,sirh:o,address:r,province:i.id,municipality:s.id,locality:n,client:c.id}),{items:d,message:m}=l,{id:p,name:b,property_key:_,address:g,province:f,municipality:h,locality:v,client:y}=d,j={id:p,nombre:b,clave:_,direccion:g,estado:f,municipio:h,localidad:v,cliente:y};return e("addInmuebles",j),e("setCargando",!1),{mensaje:m,estado:u}}catch(l){return e("setCargando",!1),{error:l}}},async verificarInmuebles({commit:e,dispatch:a},t){try{e("setCargando",!0);var o=[];t.forEach(e=>{o.push({name:e.nombre,property_key:e.clave,sirh:e.sirh,address:e.direccion,province:e.estado,municipality:e.municipio,locality:e.localidad,client:e.cliente.id})});const{data:r,status:i}=await J.instance.post("inmuebles/inmueble/verificacion/",{properties:o}),{items:s,message:n}=r;let c=[];for(let e of s)c.push({status:await a("isValidoInmueble",e),nombre:e.name,clave:e.property_key,sirh:e.sirh,cliente:e.client?{id:e.client.id,nombre:e.client.name}:null,estado:e.province?{id:e.province.id,nombre:e.province.name}:null,municipio:e.municipality?{id:e.municipality.id,nombre:e.municipality.name}:null,localidad:e.locality?{id:e.locality.id,nombre:e.locality.name}:null,direccion:e.address});return e("setInmueblesVerificados",c),e("setCargando",!1),{mensaje:n,estado:i,error:null}}catch(r){return e("setCargando",!1),{error:r}}},async crearMultiplesInmuebles({commit:e,state:a},t){try{e("setCargando",!0);var o=[];t.forEach(e=>{o.push({name:e.nombre,property_key:e.clave,sirh:e.sirh,address:e.direccion,province:e.estado?e.estado.id:null,municipality:e.municipio?e.municipio.id:null,locality:e.localidad?e.localidad.id:null,client:e.cliente?e.cliente.id:null})}),e("setTotalInmueblesVerificados",t.length);const{data:i,status:s}=await J.instance.post("inmuebles/inmueble/confirmacion/",{properties:o});var r=0;const{items:n,message:c}=i;for(const t of n)"error"in t?(e("updateInmuebleVerificado",{indice:r,inmueble:t.error}),e("setStatusInmuebleVerificado",{inmueble:a.inmuebles_verificados[r],indice:r}),r+=1):(e("splitInmueblesVerificados",r),e("splitVerificarInmuebles",r));return e("setNumeroInmueblesCreados",n.length-r),e("setCargando",!1),{mensaje:c,estado:s}}catch(i){return e("setCargando",!1),{error:i}}},async actualizarInmueble({commit:e},{id:a,cliente:t,nombre:o,clave:r,sirh:i,estado:s,municipio:n,direccion:c}){try{e("setCargando",!0);const l={client:t.id,name:o,property_key:r,sirh:i,province:s.id,municipality:n.id,address:c},{data:u,status:d}=await J.instance.put(`inmuebles/inmueble/${a}/`,l),{items:m,message:p}=u;return e("updateInmueblePorIndice",m),e("setCargando",!1),{mensaje:p,estado:d}}catch(l){return e("setCargando",!1),{error:l}}},async recuperarInmueble({commit:e},a){try{e("setCargando",!0);const t=Object.hasOwn(a,"id_inmueble")?a.id_inmueble+"/":"?clave="+a.clave_inmueble,{data:o,status:r}=await J.instance.get("inmuebles/inmueble/".concat("",t)),{items:i,message:s}=o,{id:n,name:c,property_key:l,sirh:u,address:d,province:m,municipality:p,locality:b,client:_}=i,g={id:n,clave:l,sirh:u,nombre:c,estado:{id:m.id,nombre:m.name,usuario_cargo:m.users_charge},municipio:{id:p.id,nombre:p.name,usuario_campo:p.users_field},localidad:b,direccion:d,cliente:"object"===typeof _?{id:_.id,nombre:_.name}:_};return e("setInmueble",g),e("setCargando",!1),{mensaje:s,status:r}}catch(t){return e("setCargando",!1),{error:t}}},async listarInmueblesUsuarioCargo({commit:e},{id_usuario:a,cliente:t,estado:o,municipio:r}){try{e("setCargando",!0),e("cleanInmuebles");let i=[];const s=`cliente=${Object.hasOwn(t,"id")?t.id:""}&estado=${Object.hasOwn(o,"id")?o.id:""}&municipio=${Object.hasOwn(r,"id")?r.id:""}`,{data:n,status:c}=await J.instance.get(`inmuebles/cargo/${a}/`.concat("?",s)),{items:l,message:u}=n;return l.forEach(e=>{i.push({id:e.id,clave:e.property_key,sirh:e.sirh,nombre:e.name,estado:e.province,municipio:e.municipality,localidad:e.locality,direccion:e.address,cliente:e.client})}),e("setInmuebles",i),e("setCargando",!1),{mensaje:u,http_estado:c}}catch(i){return e("setCargando",!1),{error:i}}},async listar({commit:e},{cliente:a,estado:t,municipio:o}){try{e("setCargando",!0),e("cleanInmuebles");const r=`clientes=${Object.hasOwn(a,"id")?a.id:""}&estado=${Object.hasOwn(t,"id")?t.id:""}&municipio=${Object.hasOwn(o,"id")?o.id:""}&localidad=''`,{data:i,status:s}=await J.instance.get("inmuebles/inmueble/".concat("?",r),{headers:{Authorization:"Bearer "+Y("token")}}),{items:n,message:c}=i,l=[];return n.forEach(e=>{l.push({id:e.id,clave:e.property_key,sirh:e.sirh,nombre:e.name,estado:e.province.name,municipio:e.municipality.name,localidad:e.locality,direccion:e.address,cliente:e.client})}),e("setInmuebles",l),e("setCargando",!1),{mensaje:c,estado:s}}catch(r){return e("setCargando",!1),{error:r}}},async eliminarInmueble({state:e,commit:a},t){try{a("setCargando",!0);const{data:o,status:r}=await J.instance.delete(`inmuebles/inmueble/${t}/`),{message:i}=o;return a("eliminarInmueble",e.indice_inmueble),a("setCargando",!1),{mensaje:i,estado:r}}catch(o){return a("setCargando",!1),{error:o}}},async setStatusInmuebleVerificado({commit:e,dispatch:a},{inmueble:t,indice:o}){const r={name:t.nombre,province:t.estado,municipality:t.municipio,client:t.cliente,property_key:t.clave},i=await a("isValidoInmueble",r);e("setStatusInmuebleVerificado",{indice:o,status:i})},isValidoInmueble(e,{name:a,province:t,municipality:o,client:r,property_key:i}){let s=/Este campo es requerido\.\([^)]*\)/i,n=/Ya existe Inmueble con este Clave\.\([^)]*\)/i,c=/Asegúrese de que este campo no tenga más de 10 caracteres\.\([^)]*\)/i,l=/Este campo no puede ser nulo\.\([^)]*\)/i;return!s.test(a)&&null!==a&&(!(null===i||s.test(i)||n.test(i)||c.test(i)||l.test(i))&&(null!==t&&!s.test(t)&&!l.test(t)&&(null!==o&&!s.test(o)&&!l.test(o)&&(null!==r&&!s.test(r)&&!l.test(r)))))}},getters:{getInmuebles:e=>e.inmuebles,getInmueble:e=>e.inmueble,getCargando:e=>e.cargando,getInmueblesSeleccionados:e=>e.inmueblesSeleccionados,getInmueblesVerificados:e=>e.inmuebles_verificados,getVerificarInmuebles:e=>e.verificarInmuebles,getNumeroInmueblesCreados:e=>e.numeroInmueblesCreados,getTotalInmueblesVerificados:e=>e.total_inmuebles_verificados,getIsFormularioInmuble:e=>e.is_dialogo_formulario_crear_nuevo_inmuble,getIndiceInmueble:e=>e.indice_inmueble,getArrayIntruccionesFormulario:e=>e.array_intrucciones_formulario}}),_e={namespaced:!0,state:{estado:{},estados:[],isCargandoEstados:!1,municipio:{},municipios:[],isCargandoMunicipios:!1,localidad:{},localidades:[],isCargandoLocalidades:!1},mutations:{setEstado(e,a){e.estado=a},setEstados(e,a){e.estados=a},setCargandoEstados(e,a){e.isCargandoEstados=a},clearEstado(e){e.estado={}},clearAllEstado(e){e.estados=[],e.estado={}},setMunicipio(e,a){e.municipio=a},setMunicipios(e,a){e.municipios=a},setCargandoMunicipios(e,a){e.isCargandoMunicipios=a},clearMunicipios(e){e.municipios=[]},clearMunicipio(e){e.municipio={}},clearAllMunicipio(e){e.municipios=[],e.municipio={}},setLocalidad(e,a){e.localidad=a},setLocalidades(e,a){e.localidades=a},setCargandoLocalidades(e,a){e.isCargandoLocalidades=a},clearLocalidades(e){e.localidades=[]},clearLocalidad(e){e.localidad={}},clearAllLocalidad(e){e.localidades=[],e.localidad={}},clearModuloUbicacion({commit:e}){e("clearAllEstado"),e("clearAllMunicipio"),e("clearAllLocalidad")}},actions:{async obtenerEstados({commit:e}){try{e("setCargandoEstados",!0);const{data:t,status:o}=await J.instance.get("territorios/estados/"),{items:r,message:i}=t;var a=[];return r.forEach(e=>{a.push({id:e.id,nombre:e.name,abreviatura:e.abbreviation})}),e("setEstados",a),e("setCargandoEstados",!1),{mensaje:i,estado:o}}catch(t){return e("setCargandoEstados",!1),{error:t}}},async obtenerEstado({commit:e},a){await e("setEstado",a)},async obtenerMunicipio({commit:e},a){await e("setMunicipio",a)},async obtenerLocalidad({commit:e},a){await e("setLocalidad",a)},async obtenerMunicipiosDeEstado({commit:e},a){try{e("setCargandoMunicipios",!0),e("clearMunicipio");const{data:o}=await J.instance.get("territorios/municipios/?province="+a),{items:r,status:i}=o;var t=[];return r.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setMunicipios",t),e("setCargandoMunicipios",!1),{mensaje:"Consulta satisfactoria.",status:i}}catch(o){return e("setCargandoMunicipios",!1),e("clearMunicipios"),{error:o}}},async obtenerLocalidadesDeMunicipio({commit:e},a){try{e("setCargandoLocalidades",!0),e("clearLocalidad");const{data:o}=await J.instance.get("territorios/localidades/?municipality="+a),{items:r,status:i}=o;var t=[];return r.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setLocalidades",t),e("setCargandoLocalidades",!1),{mensaje:"Consulta satisfactoria.",status:i}}catch(o){return e("setCargandoLocalidades",!1),e("clearLocalidades"),{mensaje:o.response.data.message,status:o.response.status}}},async obtenerEstadosDeInmueblesExistentes({commit:e},{id_cliente:a,excluir_trabajos:t}){try{e("setCargandoEstados",!0),e("clearEstado");let r="territorios/inmuebles/estados/";const{data:i}=await J.instance.get(r.concat(`?cliente=${a}&excluir_trabajos=${t}`)),{items:s,status:n}=i;var o=[];for(const{id:e,name:a}of s)o.push({id:e,nombre:a});return e("setEstados",o),e("setCargandoEstados",!1),{mensaje:"Consulta satisfactoria.",status:n}}catch(r){return e("setCargandoEstados",!1),e("clearEstado"),{mensaje:r.response.data.message,status:r.response.status}}},async obtenerMunicipiosDeInmueblesExistentes({commit:e},{cliente:a,estado:t}){try{e("setCargandoMunicipios",!0),e("clearMunicipio");let r="territorios/inmuebles/municipios/";r=a?r.concat(`?cliente=${a}&estado=${t.id}`):r.concat("?estado="+t.id);const{data:i}=await J.instance.get(r),{items:s,status:n}=i,{municipalities:c}=s;var o=[];for(const{id:e,name:a}of c)o.push({id:e,nombre:a});return e("setMunicipios",o),e("setCargandoMunicipios",!1),{mensaje:"Consulta satisfactoria.",status:n}}catch(r){return e("setCargandoMunicipios",!1),e("clearMunicipios"),{mensaje:r.response.data.message,status:r.response.status}}},async obtenerLocalidadesDeInmueblesExistentes({commit:e},{cliente:a,estado:t,municipio:o}){try{e("setCargandoLocalidades",!0),e("clearLocalidad");const{data:i,status:s}=await J.instance.get(`territorios/localidades/sucursales/?clients=${a}&province=${t.id}&municipality=${o.id}`),{items:n}=i;var r=[];return n.forEach(e=>{r.push({id:e.id,nombre:e.name})}),e("setLocalidades",r),e("setCargandoLocalidades",!1),{mensaje:"Consulta satisfactoria.",estado:s}}catch(i){return e("clearLocalidades"),e("setCargandoLocalidades",!1),{error:i}}}},getters:{getEstado:e=>e.estado,getEstados:e=>e.estados,getCargandoEstados:e=>e.isCargandoEstados,getMunicipio:e=>e.municipio,getMunicipios:e=>e.municipios,getCargandoMunicipios:e=>e.isCargandoMunicipios,getLocalidad:e=>e.localidad,getLocalidades:e=>e.localidades,getCargandoLocalidades:e=>e.isCargandoLocalidades}};function ge(e){let a=e.getFullYear(),t=(1+e.getMonth()).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return t+"/"+o+"/"+a}const fe=()=>"comprobante_"+toString(ge()),he=async e=>{if(e)try{const a=await fetch(e),t=await a.blob();return t}catch(a){return}},ve={trabajo:{},trabajos:[],cargando:!1,asignacionesVerificadas:[],trabajos_no_verificados:[],trabajos_verificados:[],seleccionados:[],estados_trabajo:[],estado_trabajo:{},mensajes:[],mensaje:"",array_intrucciones_formulario_trabajos:[[{icon:"mdi-checkbox-blank-circle",color:"grey",text:"Elige al menos un inmueble."},{icon:"mdi-checkbox-blank-circle",color:"grey",text:'Haz clic en "Continuar".'}],[{icon:"mdi-arrow-left-bold-circle",color:"primary",text:'Haz clic en "Regresar" para ir al Paso 1.'},{icon:"mdi-information",color:"warning",text:"Elige un proyecto y al menos un concepto."},{icon:"mdi-information",color:"warning",text:'Haz clic en "Asignar" o "Eliminar" para gestionar los trabajos en los inmuebles.'},{icon:"mdi-checkbox-blank-circle",color:"grey",text:'Haz clic en "Continuar"'}]],paso_formulario:1},ye={setTrabajo(e,a){e.trabajo=a},setTrabajos(e,a){e.trabajos=a},limpiarTrabajo(e){e.trabajo=null},cleanTrabajos(e){e.trabajos=[]},setCargando(e,a){e.cargando=a},setStatusTrabajo(e,a){e.estados_trabajo=a},setEstadoTrabajo(e,a){e.estado_trabajo=a},pushEstadosTrabajo(e,a){e.estados_trabajo.push(a)},clearAsignacionesVerificadas(e){e.asignacionesVerificadas=[]},setSeleccionados(e,a){e.seleccionados=a},spliceAsignacionVerificada(e,a){e.asignacionesVerificadas.splice(a,1)},spliceTrabajoAsignacionVerificada(e,{indice_asignacion:a,indice_trabajo:t}){e.asignacionesVerificadas[a].trabajos.splice(t,1)},setConfirmacionConfirmacionTrabajo(e,{indice_asignacion:a,indice_trabajo:t,payload:o}){e.asignacionesVerificadas[a].trabajos[t].confirmacion=o},deleteSeleccionado(e,a){e.seleccionados.splice(a,1)},clearSeleccionados(e){e.seleccionados=[]},setMensaje(e,a){e.mensaje=a},clearMensaje(e){e.mensaje=""},updateArrayIntrucciones(e,{paso:a,sub_paso:t,instruccion:o}){e.array_intrucciones_formulario_trabajos[a][t].icon=o.icon,e.array_intrucciones_formulario_trabajos[a][t].color=o.color},setPasoFormulario(e,a){e.paso_formulario=a},setTrabajosNoVerificados(e,a){e.trabajos_no_verificados=a},setTrabajosVerificados(e,a){e.trabajos_verificados=a},spliceConceptoInmueble(e,{indice_inmueble:a,indice_concepto:t}){e.trabajos_verificados[a].conceptos.splice(t,1)},cleanTrabajosNoVerificados(e){e.trabajos_no_verificados=[]},cleanTrabajosVerificados(e){e.trabajos_verificados=[]},deleteConceptoTrabajosNoVerificados(e,{indice_inmueble:a,indice_concepto:t}){let o=e.trabajos_no_verificados[a].conceptos;o.splice(t,1)},cleanFormularioAsignarTrabajosInmuebles(e){e.paso_formulario=1,e.trabajos_no_verificados=[],e.trabajos_verificados=[]}},je={async obtenerEstadosTrabajo({commit:e}){try{e("setCargando",!0);const{data:a,status:t}=await J.instance.get("/trabajos/status/"),{items:o,message:r}=a,i=[];for(const e of o)i.push({id:e.id,nombre:e.name});return e("setStatusTrabajo",i),e("setCargando",!1),{mensaje:r,estado:t}}catch(a){return e("setCargando",!1),{error:a}}},async crearEstadoTrabajo({commit:e},a){try{e("setCargando",!0);const{data:t,status:o}=await J.instance.post("/trabajos/status/",{name:a}),{items:r,message:i}=t,s={id:r.id,nombre:r.name};return e("pushEstadosTrabajo",s),e("setCargando",!1),{mensaje:i,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async obtenerTrabajosPendietes({commit:e,dispatch:a},{client:t,province:o,menorIgualFecha:r,mayorIgualFecha:i}){try{e("cleanTrabajos"),e("clearMensaje"),e("setCargando",!0);var s="trabajos/pendiente/";(t||o)&&(s+=`?client=${t||""}&province=${o||""}`),(r||i)&&(s+=`?date_gte=${r||""}&date_lte=${i||""}`);const{data:n,status:c}=await J.instance.get(s,{headers:{Authorization:"Bearer "+Y("token")}}),{items:l,message:u}=n,{trabajos:d}=await a("defineClaves",l);return e("setMensaje",u),e("setTrabajos",d),e("setCargando",!1),{mensaje:u,estado:c}}catch(n){return e("cleanTrabajos"),"Network Error"===n.message?e("setMensaje","Hubo un error de red"):e("setMensaje",n.response.data.message),e("setCargando",!1),{error:n}}},async obtenerTrabajosCliente({commit:e,dispatch:a},{id_cliente:t,id_estado:o}){try{e("setCargando",!0),e("cleanTrabajos");const{data:r,status:i}=await J.instance.get(`trabajos/cliente/${t}/?estado=${o||""}`),{items:s,message:n}=r,{trabajos:c}=await a("defineClaves",s);return e("setTrabajos",c),e("setCargando",!1),{mensaje:n,estado:i}}catch(r){return e("cleanTrabajos"),e("setCargando",!1),{error:r}}},async obtenerTrabajosInmueble({commit:e,dispatch:a},t){try{e("setCargando",!0),e("cleanTrabajos");const{data:o,status:r}=await J.instance.get("trabajos/trabajo/?inmueble="+t),{items:i,message:s}=o,{trabajos:n}=await a("defineClaves",i);return e("setTrabajos",n),e("setCargando",!1),{mensaje:s,estado:r}}catch(o){return e("cleanTrabajos"),e("setCargando",!1),{error:o}}},async recuperarTrabajo({commit:e},a){try{const{data:t}=await J.instance.get(`trabajos/trabajo/${a}/`),{items:o}=t;return void e("setTrabajo",o)}catch(t){return void alert("Error.")}},async AXN_SubirArchivo(e,{work:a,PDFBase64:t}){const o=fe(),r=await he(t),i=new FormData;i.append("work",a),i.append("title",o),r&&i.append("file",t,o+".pdf");try{return await J.instance.post("/trabajos/archivo/",i),{message:"Archivo subido."}}catch(s){const e=String(s.response.data.error);return{message:"No se pudo subir el archivo.",error:e}}},async AXN_ActualizaArchivo(e,{id:a,work:t,title:o,PDFBase64:r}){const i=await he(r),s=new FormData;s.append("work",t),s.append("title",o),i&&s.append("file",r,o+".pdf");try{return await J.instance.put(`/trabajos/archivo/${a}/`,s),{message:"Archivo actualizado."}}catch(n){const e=String(n.response.data.error);return{message:"No se pudo actualizar el archivo.",error:e}}},async updatework({commit:e},{id:a,status_id:t,project_id:o,concept_id:r,property_office_id:i,assigned_user_id:s,area_user_id:n,send_review:c}){try{const{data:l}=await J.instance.put(`/trabajos/trabajo/${a}/`,{status_id:t,project_id:o,concept_id:r,property_office_id:i,assigned_user_id:s,area_user_id:n,send_review:c});return e("setTrabajo",l),{message:"Enviado para revisar"}}catch(l){const e=String(l.response.data.error);return{message:"No se pudo enviar el trabajo",error:e}}},async AXN_ComentarTrabajo(e,{id_trabajo:a,comentario:t}){try{const{data:e}=await J.instance.post("/trabajos/comentario/",{work:a,comment:t}),{message:o}=e;return{message:o}}catch(o){const e=String(o.response.data.error);return{message:e}}},async obtenerTrabajosUsuario({commit:e},{usuario_campo:a,usuario_cargo:t}){try{e("setCargando",!0);const o=null!==a?"usuario_campo="+a:"usuario_cargo="+t,{data:r,status:i}=await J.instance.get("trabajos/usuario/?"+o,{headers:{Authorization:"Bearer "+Y("token")}}),{items:s,message:n}=r,c=[];return s.forEach(e=>{for(let a of e.works)c.push({id:a.id,proyecto:a.concept.project,concepto:a.concept.name,status:a.status,inmueble:{nombre:a.property_office.name,clave:a.property_office.property_key,estado:a.property_office.province,municipio:a.property_office.municipality},enviado:a.send_review,creado:a.created_date,modificado:a.modified_date,in_solicitud_recursos:!0})}),e("setTrabajos",c),e("setCargando",!1),{mensaje:n,estado:i}}catch(o){return e("setCargando",!1),{error:o}}},async verificarTrabajos({dispatch:e},a){try{const t=await e("serializarAsignacion",a),{data:o,status:r}=await J.instance.post("trabajos/trabajo/verificar_asignacion/",{trabajos:t}),{items:i,message:s}=o;return await e("compararAsignaciones",i),{mensaje:s,estado_http:r}}catch(t){return{error:t}}},async crearTrabajosVerificados({state:e,dispatch:a,commit:t},o){try{const r=await a("serializarAsignacion",o),{data:i,status:s}=await J.instance.post("trabajos/trabajo/confirmar_asignacion/",{trabajos:r}),{items:n}=i;for(const{property_office:a,concept:o}of n){const r=e.asignacionesVerificadas.findIndex(e=>e.inmueble.id==a);if(r>-1){const a=e.asignacionesVerificadas[r].trabajos.findIndex(e=>e.concepto.id==o);a>-1&&e.asignacionesVerificadas[r].trabajos[a].confirmacion&&t("spliceTrabajoAsignacionVerificada",{indice_asignacion:r,indice_trabajo:a}),e.asignacionesVerificadas[r].trabajos.length||t("spliceAsignacionVerificada",r)}}return{mensaje:`Se acaban de asignar ${n.length} trabajos.`,estado:s}}catch(r){return{error:r}}},async serializarAsignacion(e,a){return a.map(e=>({property_office:e.inmueble.id,concepts:e.conceptos.map(e=>Object.hasOwn(e,"concept")?e.confirmation?e.concept.id:null:e.id)}))},async defineClaves(e,a){var t=[];return a.forEach(e=>{t.push({id:e.id,proyecto:e.concept.project,concepto:e.concept.name,status:e.status,inmueble:{nombre:e.property_office.name,clave:e.property_office.property_key,estado:e.property_office.province,municipio:e.property_office.municipality,cliente:e.property_office.client},creado:e.created_date,modificado:e.modified_date})}),{trabajos:t}},async compararAsignaciones({state:e,commit:a},t){if(e.trabajos_verificados.length){let a=-1;for(const{property_office:o,concepts:r}of t)if(a=e.trabajos_verificados.findIndex(({inmueble:e})=>e.id===o.id),-1<a)for(const t of r)e.trabajos_verificados[a].conceptos.push(t);else e.trabajos_verificados.push({inmueble:o,conceptos:r})}else{const e=t.map(({property_office:e,concepts:a})=>({inmueble:e,conceptos:a}));a("setTrabajosVerificados",e)}}},xe={getStatusTrabajo:e=>e.estados_trabajo,getEstadoTrabajo:e=>e.estado_trabajo,getTrabajo:e=>e.trabajo,getTrabajos:e=>e.trabajos,getArchivosTrabajo:e=>e.trabajo.files,getCargando:e=>e.cargando,getTrabajosSeleccionados:e=>e.seleccionados,getMensaje:e=>e.mensaje,get_array_intrucciones_formulario_trabajos:e=>e.array_intrucciones_formulario_trabajos,getTrabajosNoVerificados:e=>e.trabajos_no_verificados,getTrabajosVerificados:e=>e.trabajos_verificados,getPasoFormulario:e=>e.paso_formulario};var Ce={namespaced:!0,state:ve,actions:je,mutations:ye,getters:xe};const ke={proyectos:[],proyecto:{},conceptos:[],concepto:{},cargando:!1,cargandoConceptos:!1},$e={setProyectos(e,a){e.proyectos=a},setProyecto(e,a){e.proyecto=a},cleanProyecto(e){e.proyecto={},e.concepto={},e.conceptos=[]},setCargando(e,a){e.cargando=a},setConceptos(e,a){e.conceptos=a},setConcepto(e,a){e.concepto.push(a)},setCargandoConceptos(e,a){e.cargandoConceptos=a},cleanConcepto(e){e.concepto={}},cleanConceptos(e){e.conceptos=[]}},we={async obtenerProyectos({commit:e}){e("setCargando",!0);try{const{data:a}=await J.instance.get("/proyectos/proyecto/"),{items:t,message:o}=a,r=[];return t.forEach(e=>{r.push({id:e.id,nombre:e.name})}),e("setProyectos",r),e("setCargando",!1),{mensaje:o}}catch(a){return e("setCargando",!1),{error:a.response.data.errors}}},async obtenerProyecto({state:e,commit:a},{id:t}){a("setCargando",!0);const o=e.proyectos.find(e=>e.id==t);a("setProyecto",o),a("setCargando",!1)},async crearProyecto({state:e,commit:a},t){try{a("setCargando",!0);const{data:o,status:r}=await J.instance.post("proyectos/proyecto/",{name:t}),{items:i,message:s}=o,n={id:i.id,nombre:i.name};return a("setProyecto",n),e.proyectos.push(n),a("setCargando",!1),{mensaje:s,estado:r}}catch(o){return a("setCargando",!1),{error:o}}},async crearConcepto({commit:e,state:a},{nombre:t,proyecto:o}){try{e("setCargandoConceptos",!0);const{data:r,status:i}=await J.instance.post("proyectos/conceptos/",{name:t,project:o}),{items:s,message:n}=r,c={id:s.id,nombre:s.name};return a.conceptos.push(c),e("setCargandoConceptos",!1),{mensaje:n,estado:i}}catch(r){return e("setCargandoConceptos",!1),{error:r}}},async obtenerConceptos({commit:e},a){try{e("setCargandoConceptos",!0);const{data:t,status:o}=await J.instance.get(`proyectos/proyecto/${a}/`),{items:r,message:i}=t,{name:s,concepts:n}=r,c=n.map(e=>({id:e.id,nombre:e.name,proyecto:s}));return e("setConceptos",c),e("setCargandoConceptos",!1),{mensaje:i,estado:o}}catch(t){return e("setCargandoConceptos",!1),{error:t}}}},Ie={getCargando:e=>e.cargando,getCargandoConceptos:e=>e.cargandoConceptos,getProyectos:e=>e.proyectos,getProyecto:e=>e.proyecto,getConceptos:e=>e.conceptos};var Se={namespaced:!0,state:ke,mutations:$e,actions:we,getters:Ie},Ae={namespaced:!0,state:{notificaciones:[],numeroNotificaciones:0,numeroNotificacionesDiferencia:0},mutations:{MUT_setNotificaciones(e,a){K("notificaciones",a),e.notificaciones=a},limpiarNotificaciones(e){K("notificaciones",[]),e.notificaciones=[]}},actions:{iniciarNotificaciones({commit:e}){const a=Y("notificaciones");e("MUT_setNotificaciones",a||[])},async traerNotificaciones({commit:e},{id_usuario:a}){try{const{data:t}=await J.instance.get(`/notificaciones/notificacion/${a}/`),{items:o,message:r}=t;return e("MUT_setNotificaciones",o),{message:r}}catch(t){const e=String(t.response.data.error);return{erorr:e}}},async actualizarNotificaciones(e,{id:a,user:t,is_read:o}){try{const{data:e}=await J.instance.put(`/notificaciones/notificacion/${a}/`,{user:t,is_read:o}),{message:r}=e;return{message:r}}catch(r){const e=String(r.response.data.error);return{erorr:e}}}},getters:{getNotificaciones:e=>e.notificaciones,getNumeroNotificacionesDiferencia:e=>e.numeroNotificacionesDiferencia}};const Pe={verificar_peticiones:[],peticiones_verificadas:[],peticiones:[],peticion:{monto:0,id_trabajo:null},cargando:!1,recurso:{},solicitud_recurso:{trabajos:[],tipo_pago:"",concepto_pago:"",pago_separado:!1},recursos:[],comentarios:[],pago:{},pagos:[],archivo:{},archivos:[],solicitud_recurso_v2:{modalidad_pago:"",concepto_pago:"",banco:"",pago_separado:!1,beneficiario:null,peticiones:[],transferencia:{tipo:null,transferencia:{clabe_interbancaria:""},servicio:{convenio:"",referencia:"",linea_captura:""},cuenta:{clabe:"",numero_cuenta:""}},cheque:{}},solicitudes_recurso_v2:[],is_pago_separado:!1},Te={deleteRecurso(e,a){e.recursos.splice(a,1)},setRecursos(e,a){e.recursos=a},cleanRecursos(e){e.recursos=[]},cleanRecurso(e){e.recurso={}},claerSolicitudRecurso(e){e.solicitud_recurso={trabajos:[],tipo_pago:"",metodo_pago:"",pago_separado:!1},e.verificar_peticiones=[],e.peticiones_verificadas=[]},cleanComentarios(e){e.comentarios=[]},clearArchivos(e){e.archivos=[]},deleteArchivo(e,a){e.archivos.splice(a,1)},setVerificarPeticiones(e,a){e.verificar_peticiones=a},assignPeticionVerificada(e,{editar_index:a,editar_peticion:t}){e.peticiones_verificadas[a]=Object.assign(e.peticiones_verificadas[a],t)},setPeticionesVerificadas(e,a){e.peticiones_verificadas=a},deletePeticionesVerificadas(e,a){e.peticiones_verificadas.splice(a,1)},clearPeticionesVerificadas(){Pe.peticiones_verificadas=[]},setRecurso(e,a){e.recurso=a},setSolicitudRecurso(e,a){e.solicitud_recurso=a},setSolicitudRecursoPagoSeparado(e,a){e.solicitud_recurso.pago_separado=a},assignSolicitudRecurso(e,a){e.solicitud_recurso=Object.assign({},e.solicitud_recurso,a)},setComentarios(e,a){e.comentarios=a},addComentario(e,a){e.comentarios.push(a)},setPago(e,a){e.pago=a},setArchivos(e,a){e.archivos=a},addArchivo(e,a){e.archivos.push(a)},setPagos(e,a){e.pagos=a},setCargando(e,a){e.cargando=a},setPeticionPagoDerechos(e,a){e.solicitud_recurso_v2=a},setPeticionesSolicitudRecurso(e,a){e.solicitud_recurso_v2.peticiones=a},setModalidadPagoSolicitudRecurso(e,a){e.solicitud_recurso_v2.modalidad_pago=a},setConceptoPagoSolicitudRecurso(e,a){e.solicitud_recurso_v2.concepto_pago=a},setTipoTransferenciaSolicitudRecurso(e,a){e.solicitud_recurso_v2.transferencia.tipo=a},pushSolicitudesRecursoV2(e,a){e.solicitudes_recurso_v2.push(a)},setSolicitudesRecursoV2Atributo(e,{indice:a,key:t,valor:o}){e.solicitudes_recurso_v2[a][t]=o},setSolicitudesRecursoV2(e,a){e.solicitudes_recurso_v2=a},deleteSolicitudesRecursoV2(e,a){e.solicitudes_recurso_v2.splice(a,1)},setIsPagoSeparadoSeleccionado(e,a){e.is_pago_separado=a},clearSolicitudRecursoModalidadPagoTipoTransferencia(e){e.solicitud_recurso_v2.transferencia.transferencia.clabe_interbancaria=""},clearSolicitudRecursoModalidadPagoTipoServicio(e){e.solicitud_recurso_v2.transferencia.servicio.convenio="",e.solicitud_recurso_v2.transferencia.servicio.referencia="",e.solicitud_recurso_v2.transferencia.servicio.linea_captura=""},clearSolicitudRecursoModalidadPagoTipoCuenta(e){e.solicitud_recurso_v2.transferencia.cuenta.clabe="",e.solicitud_recurso_v2.transferencia.cuenta.numero_cuenta=""},clearAll(e){e.solicitud_recurso_v2={modalidad_pago:"",concepto_pago:"",banco:"",pago_separado:!1,beneficiario:null,peticiones:[],transferencia:{tipo:null,transferencia:{clabe_interbancaria:""},servicio:{convenio:"",referencia:"",linea_captura:""},cuenta:{clabe:"",numero_cuenta:""}},cheque:{}},e.solicitudes_recurso_v2=[]}},Ee={async recuperarRecursos({commit:e},{modalidad_pago:a,validado:t,pagado:o}){try{e("cleanRecursos"),e("setCargando",!0);const r=[],{data:i,status:s}=await J.instance.get(`peticiones/recursos/?modalidad_pago=${a}&validado=${t}&pagado=${o}`),{items:n,message:c}=i;return n.forEach(e=>{r.push({id:e.id,modalidad_pago:e.payment_mode,tipo_transferencia:e.transfer_type,datos_transferencia:JSON.parse(e.transfer_data),importe:e.total_amout,creado:e.created_date,banco:e.bank,beneficiario:e.beneficiary,datos_bancarios:e.bank_data,solicitud:e.request,validado:e.validate,pagado:e.paid,concepto:e.concept,detalle_status:e.detail_state})}),e("setRecursos",r),e("setCargando",!1),{mensaje:c,estado:s}}catch(r){return e("setCargando",!1),{error:r}}},async recuperarRecursosUsuario({commit:e},{usuario_cargo:a,validado:t}){try{e("cleanRecursos"),e("setCargando",!0);var o=`peticiones/recursos/trabajo/?usuario_cargo=${a}&validate=${t}`;const r=[],{data:i,status:s}=await J.instance.get(o),{items:n,message:c}=i;return n.forEach(e=>{r.push({id:e.id,num_trabajos:e.petitions.length,modalidad_pago:e.payment_mode,tipo_transferencia:e.transfer_type,datos_transferencia:JSON.parse(e.transfer_data),banco:e.bank,beneficiario:e.beneficiary,importe:e.total_amout,creado:e.created_date,solicitud:e.request,validado:e.validate,pagado:e.paid,facturado:e.invoiced,concepto:e.concept,detalle_status:e.detail_state})}),e("setRecursos",r),e("setCargando",!1),{mensaje:c,estado:s}}catch(r){return e("setCargando",!1),{error:r}}},async recuperarRecurso({commit:e},a){try{e("setCargando",!0);const{data:t}=await J.instance.get(`peticiones/recursos/${a}/`),{items:o,message:r}=t,i={id:o.id,creado:o.created_date,importe:o.total_amout,banco:o.bank,modalidad_pago:o.payment_mode,tipo_transferencia:o.transfer_type,datos_transferencia:JSON.parse(o.transfer_data),solicitud:o.request,concepto:o.concept,solicitado:o.request,validado:o.validate,beneficiario:o.beneficiary,peticiones:[]};for(const e of o.petitions)i.peticiones.push({trabajo:{id:e.work.id,concepto:e.work.concept,estado_trabajo:e.work.status},inmueble:{cliente:e.work.property_office.client,nombre:`${e.work.property_office.name} (${e.work.property_office.property_key})`,estado:e.work.property_office.province,municipio:e.work.property_office.municipality},importe:e.amount});return e("setCargando",!1),e("setRecurso",i),{mensaje:r}}catch(t){return e("setCargando",!1),{mensaje:t.response.data.message}}},async establecerPeticionPagoDerechos({state:e,commit:a}){const{id:t,modalidad_pago:o,concepto:r,banco:i,datos_transferencia:s,beneficiario:n,peticiones:c,tipo_transferencia:l}=e.recurso,{name:u,bank:d,interbank_code:m}=n;let p=[],b={id:t,modalidad_pago:o,concepto_pago:r,banco:i,beneficiario:{id:n.id,nombre:u,banco:d,numero_cuenta:m},transferencia:{tipo:null,transferencia:{clabe_interbancaria:""},servicio:{convenio:"",referencia:"",linea_captura:""},cuenta:{clabe:"",numero_cuenta:""}},cheque:{},peticiones:[]};"transferencia"===o&&(b.transferencia.tipo=l,b.transferencia[l]=s);for(const _ of c)b.peticiones.push({monto:_.importe,trabajo:_.trabajo.id,is_valido:!0}),p.push({id:_.trabajo.id,proyecto:"",concepto:_.trabajo.concepto,status:_.trabajo.estado_trabajo,inmueble:_.inmueble});return a("setPeticionPagoDerechos",b),{trabajos:p,peticiones:b.peticiones}},async crearRecurso({state:e,commit:a}){try{const{is_pago_separado:t,solicitud_recurso_v2:o,solicitudes_recurso_v2:r}=e,i=t?"peticiones/recursos/multiple/":"peticiones/recursos/";let s=[],n={};if(t)for(let e of r){const{modalidad_pago:a,transferencia:t,banco:o,concepto_pago:r,peticiones:i,beneficiario:c}=e,l="transferencia"===a?t.tipo:null,u="transferencia"===a?t[l]:{};n={modalidad_pago:a,tipo_transferencia:l,datos_tipo_transferencia:u,banco:o,beneficiario:c.id,concept:r,works:[],validate:!0,detalle_status:"transferencia"===a?"aguardando":"expectante"};for(const e of i)e.is_valido&&n.works.push({amount:e.monto,work:e.trabajo});s.push(n)}else{const{modalidad_pago:e,transferencia:a,banco:t,concepto_pago:r,peticiones:i,beneficiario:s}=o,c="transferencia"===e?a.tipo:null,l="transferencia"===e?a[c]:{};n={modalidad_pago:e,tipo_transferencia:c,datos_tipo_transferencia:l,banco:t,beneficiario:s.id,concept:r,works:[],validate:!0,detalle_status:"transferencia"===e?"aguardando":"expectante"};for(const o of i)o.is_valido&&n.works.push({amount:o.monto,work:o.trabajo})}if(o.id){const{data:e,status:t}=await J.instance.put(`peticiones/recursos/${o.id}/`,n);a("clearAll");const{message:r}=e;return{mensaje:r,estado:t}}{const{data:e,status:o}=await J.instance.post(i,t?{solicitudes_recursos:s}:n);a("clearAll");const{message:r}=e;return{mensaje:r,estado:o}}}catch(t){return{error:t}}},async confirmarValidarRecuruso({commit:e},{id:a,pagado:t,detalle_status:o,indice:r}){try{e("setCargando",!0);const{data:i,status:s}=await J.instance.patch(`peticiones/recursos/${a}/paid/`,{paid:t,detail_state:o}),{message:n}=i;return e("deleteRecurso",r),e("setCargando",!1),{mensaje:n,estado:s}}catch(i){return e("setCargando",!1),{error:i}}},async confirmarFacturacionRecuruso({commit:e},{id:a,facturado:t}){try{e("setCargando",!0);const{data:o,status:r}=await J.instance.patch(`peticiones/recursos/${a}/invoiced/`,{invoiced:t}),{message:i}=o;return e("setCargando",!1),{mensaje:i,estado:r}}catch(o){return e("setCargando",!1),{error:o}}},async cambiarDetalleStatus({commit:e},{id:a,detalle_status:t}){try{e("setCargando",!0);const{data:o,status:r}=await J.instance.patch(`peticiones/recursos/${a}/state/`,{detail_state:t}),{message:i}=o;return e("setCargando",!1),{mensaje:i,estado:r}}catch(o){return e("setCargando",!1),{error:o}}},async eliminarSolicitudRecurso({commit:e},{id:a,indice:t}){try{e("setCargando",!0);const{data:o,status:r}=await J.instance.delete(`peticiones/recursos/${a}/`),{message:i}=o;return e("deleteRecurso",t),e("setCargando",!1),{mensaje:i,estado:r}}catch(o){return e("setCargando",!1),{error:o}}},async deletePeticion({commit:e},{id:a,editedIndex:t}){try{return await J.instance.delete(`peticiones/peticion/${a}/`),e("deletePeticion",t),{mensaje:"Eliminación exitosa."}}catch(o){return{error:"404",message:"No se elimino el pago."}}},async verificarPeticiones({commit:e},a){try{const t=[],o=[];for(const e of a)t.push({work:e.trabajo,amount:e.monto});const{data:r,status:i}=await J.instance.post("peticiones/peticion/verificar_peticiones/",{works:t}),{message:s,items:n}=r;for(const e of n)e.confirm?o.push({is_valido:e.confirm,trabajo:e.work,monto:e.amount}):o.push({is_valido:e.confirm,trabajo:e.work,error:e.error,mensaje:e.message});return e("setPeticionesVerificadas",o),{mensaje:s,estado:i}}catch(t){return{error:t}}},async confirmarPeticiones(e,a){try{const e=[],t=[];for(const n of a)n.error||e.push({work:n.trabajo,amount:n.monto});const{data:o,status:r}=await J.instance.post("peticiones/peticion/confirmar_peticiones/",{works:e}),{message:i,items:s}=o;return s.forEach(e=>{e.error||t.push({id:e.id,trabajo:e.work,monto:e.amount})}),{mensaje:i,estado:r,peticiones:t}}catch(t){return{error:t}}},async subirArchivo({commit:e},{archivos:a,recurso:t,usuario:o}){try{e("setCargando",!0);const r=new FormData;r.append("resource",t),r.append("changed_by",o);for(const e of a)r.append("files",e);const{data:i,status:s}=await J.instance.post("peticiones/comprobante/",r),{items:n,message:c}=i;for(const a in n){const t={id:a.id,usuario:a.changed_by,archivo:a.file};e("addArchivo",t)}return e("setCargando",!1),{mensaje:c,estado:s}}catch(r){return e("setCargando",!1),{error:r}}},async recuperarArchivoRecurso({commit:e},a){try{e("setCargando",!0);const{data:t,status:o}=await J.instance.get("peticiones/comprobante/?resource="+a),{items:r,message:i}=t,s=[];for(const e of r)s.push({id:e.id,archivo:e.file});return e("setArchivos",s),e("setCargando",!1),{mensaje:i,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async eliminarArhivoRecurso({commit:e},{id:a,indice:t}){try{e("setCargando",!0);const{data:o,status:r}=await J.instance.delete(`peticiones/comprobante/${a}/`),{message:i}=o;return e("deleteArchivo",t),e("setCargando",!1),{mensaje:i,estado:r}}catch(o){return e("setCargando",!1),{error:o}}},async getPagos({commit:e}){try{const{data:a}=await J.instance.get("peticiones/pagos/"),{items:t}=a,o=[];return t.forEach(e=>{o.push({id:e.id,nombre:e.name,total:e.total,recipo:e.receipt,creado:e.created_date})}),e("setPagos",o),{error:null}}catch(a){return{error:"Consulta satisfactoria."}}},async getPago(e,a){try{const{data:e}=await J.instance.get(`peticiones/pagos/${a}/`),{items:t}=e;window.open(t.receipt.file)}catch(t){return{error:"Consulta satisfactoria."}}},async recuperarComentariosRecurso({commit:e},a){try{e("setCargando",!0);const{data:t,status:o}=await J.instance.get("peticiones/comentario/?resource="+a),{items:r,message:i}=t,s=[];for(const e of r)s.push({id:e.id,usuario:e.changed_by,comentario:e.comment});return e("setComentarios",s),e("setCargando",!1),{mensaje:i,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async hacerComentario({commit:e},{usuario:a,recurso:t,comentario:o}){try{const{data:r,status:i}=await J.instance.post("peticiones/comentario/",{resource:t,changed_by:a,comment:o}),{items:s,message:n}=r,c={id:s.id,comentario:s.comment,usuario:s.changed_by};return e("addComentario",c),{mensaje:n,estado:i}}catch(r){return{error:r}}},async inicializarAsignacionPeticionesSolicitudRecurso({state:e,commit:a}){let t=[];for(let o of e.peticiones_verificadas)t.push(o);a("setPeticionesSolicitudRecurso",t)},async inicializarAsignacionPeticionesSolicitudesRecurso({state:e,commit:a}){let t=[];for(let o of e.peticiones_verificadas){let e={modalidad_pago:"",concepto_pago:"",pago_separado:!1,banco:"",beneficiario:null,peticiones:[o],transferencia:{tipo:"",transferencia:{clabe_interbancaria:""},servicio:{convenio:"",referencia:"",linea_captura:""},cuenta:{clabe:"",numero_cuenta:""}},cheque:{}};t.push(e)}a("setSolicitudesRecursoV2",t)},async updatePeticionesVerificadas({state:e,commit:a}){if(e.peticiones_verificadas.length&&e.verificar_peticiones.length<=e.peticiones_verificadas.length){let t=[],o=-1;for(const a of e.peticiones_verificadas)o=e.verificar_peticiones.findIndex(e=>e.trabajo===a.trabajo),-1<o&&t.push(a);a("setPeticionesVerificadas",t)}}},Oe={getRecursos:e=>e.recursos,getVerificarPeticiones:e=>e.verificar_peticiones,getPeticionesVerificadas:e=>e.peticiones_verificadas,getSolicitudRecurso:e=>e.solicitud_recurso,getRecurso:e=>e.recurso,getComentarios:e=>e.comentarios,getArchivo:e=>e.archivo,getArchivos:e=>e.archivos,getPago:e=>e.pago,getPagos:e=>e.pagos,getCargando:e=>e.cargando,getSolicitudRecursoV2:e=>e.solicitud_recurso_v2,getIsPagoSeparadoSeleccionado:e=>e.is_pago_separado,getSolicitudesRecursoV2:e=>e.solicitudes_recurso_v2};var Me={namespaced:!0,state:Pe,mutations:Te,actions:Ee,getters:Oe};const Fe={beneficiario:{nombre:"",numero_cuenta:null,banco:""},beneficiarios:[],cargando:!1},De={setBeneficiario(e,a){e.beneficiario=a},setBeneficiarios(e,a){e.beneficiarios=a},addBeneficiario(e,a){e.beneficiarios.push(a)},setCargando(e,a){e.cargando=a},deleteBeneficiario(e,a){e.beneficiarios.splice(a,1)},clearBeneficiario(e){e.beneficiario={nombre:"",numero_cuenta:null,banco:""}}},Ve={async obtenerBeneficiarios({commit:e}){try{const{data:a,status:t}=await J.instance.get("beneficiarios/beneficiario/"),{items:o,message:r}=a;let i=[];for(const e of o)i.push({id:e.id,nombre:e.name,banco:e.bank,numero_cuenta:e.interbank_code});return e("setBeneficiarios",i),{mensaje:r,estado:t}}catch(a){return{error:a}}},async crearBeneficiario({commit:e},{nombre:a,numero_cuenta:t,banco:o}){try{const{data:r,status:i}=await J.instance.post("beneficiarios/beneficiario/",{name:a,interbank_code:t,bank:o}),{message:s,items:n}=r,{id:c,name:l,bank:u,interbank_code:d}=n,m={id:c,nombre:l,banco:u,numero_cuenta:d};return e("setBeneficiario",m),e("addBeneficiario",m),{mensaje:s,estado:i}}catch(r){return{error:r}}},async actualizarBeneficiario({commit:e},{beneficiario:a}){try{return e("setBeneficiario",a),{mensaje:"ok",estado:200}}catch(t){return{error:t}}},async eliminarBeneficiario({commit:e},{editar_index:a}){try{return e("deleteBeneficiario",a),e("clearBeneficiario"),{mensaje:"ok",estado:200}}catch(t){return{error:t}}}},Ne={getBeneficiarios:e=>e.beneficiarios,getBeneficiario:e=>e.beneficiario};var Re={namespaced:!0,state:Fe,mutations:De,actions:Ve,getters:Ne};const ze={alertas:[]},Ue={setAlertas(e,a){e.alertas=a},addAlertas(e,a){e.alertas.push(a)},clearAleras(e){e.alertas=[]},removeAlerta(e,a){e.alertas.splice(a,1)}},Be={},Le={getAlertas:e=>e.alertas};var qe={namespaced:!0,state:ze,mutations:Ue,actions:Be,getters:Le};const He={tabHomeVista:0},Ge={setTabHomeVista(e,a){e.tabHomeVista=a}},Xe={},Je={getTabHomeVista:e=>e.tabHomeVista};var Ye={namespaced:!0,state:He,mutations:Ge,actions:Xe,getters:Je};const Ke={},Qe={},Ze={async nuevo(e,{firstname:a,email:t,lastname:o,de:r,files:i}){try{const e=new FormData;e.append("asunto",a),e.append("mensaje",o),e.append("para",t),e.append("de",r),e.append("files",i);const{data:s,status:n}=await J.instance.post("correos/enviar/",e),{message:c}=s;return{mensaje:c,estado:n}}catch(s){return{error:s}}}},We={};var ea={namespaced:!0,state:Ke,mutations:Qe,actions:Ze,getters:We};const aa={MOD_autenticacion:ae,usuario:te,contacto:ne,grupo:me,cliente:pe,inmueble:be,ubicacion:_e,trabajo:Ce,MOD_notificaciones:Ae,recurso:Me,proyecto:Se,beneficiario:Re,alerta:qe,general:Ye,correo:ea};function ta(e,a){return Object.keys(e).filter(t=>{const{actions:o,namespaced:r}=e[t];return!0===r&&Object.prototype.hasOwnProperty.call(o,a)})}const oa=ta(aa,q),ra=ta(aa,H);var ia={computed:{fotoUsuario(){return this.$store.getters["MOD_autenticacion/getFotoUsuario"]},usernname(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]},rolUsuario(){return this.$store.getters["MOD_autenticacion/getUserPermissions"]}},methods:{async cerrarSesion(){await ra.forEach(e=>{this.$store.dispatch(`${e}/${H}`)}),this.$router.push({name:"Login"})},redireccionar(e){this.$router.push({name:e,params:{nombreUsuario:this.usernname}}).catch(()=>{})}}},sa=ia,na=Object(y["a"])(sa,B,L,!1,null,null,null),ca=na.exports,la=t("56b0"),ua=t("3a2f"),da=function(){var e=this,a=e._self._c;return a(E["a"],{attrs:{"offset-y":"",left:"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(ua["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:r}){return[a(C["a"],e._g(e._b({attrs:{text:""}},"v-avatar",o,!1),{...r,...t}),[a(m["a"],[e._v("mdi-plus")])],1)]}}],null,!0)},[a("span",[e._v("Ir a...")])])]}}]),model:{value:e.menuVistas,callback:function(a){e.menuVistas=a},expression:"menuVistas"}},[a($["a"],{attrs:{outlined:""}},[a(I["a"],e._l(e.vistas,(function(t,o){return a(la["a"],{key:o,scopedSlots:e._u([{key:"activator",fn:function(){return[a(P["b"],[a(P["d"],[e._v(e._s(t.titulo))])],1)]},proxy:!0}],null,!0)},e._l(t.metodos,(function(o,r){return a(S["a"],{key:r},[a(P["b"],{on:{click:function(a){return e.goVista(t.titulo,o.valor)}}},[a(P["c"],[e._v(e._s(o.titulo))])],1)],1)})),1)})),1)],1)],1)},ma=[],pa={data:()=>({menuVistas:!1,vistas:[{titulo:"Cliente",metodos:[{titulo:"Crear nuevo cliente",valor:1}]},{titulo:"Inmueble",metodos:[{titulo:"Ver inmuebles",valor:1},{titulo:"Crear multiples inmuebles",valor:2}]},{titulo:"Trabajo",metodos:[{titulo:"Asignar trabajos"},{titulo:"Ver mis trabajos"},{titulo:"Ver trabajos creados"}]},{titulo:"Recursos",metodos:[{titulo:"Crear solicitud de recurso"},{titulo:"Ver mis recursos"},{titulo:"Ver recursos creados"}]},{titulo:"Pagos",metodos:[{titulo:"Ver pagos"}]}]}),methods:{setDialog({isDialogo:e}){this.is_dialogo_formulario_crear_nuevo_inmueble=e},goVista(e,a){switch(e){case"Cliente":this.goClienteMetodo(a);break;case"Inmueble":this.goInmuebleMetodo(a);break;default:break}},goClienteMetodo(e){switch(e){case 1:console.log(e),this.$store.commit("cliente/setIsActivoFormularioCrearNuevoCliente",!0);break;default:break}},goInmuebleMetodo(e){switch(e){case 1:this.$store.commit("general/setTabHomeVista",1);break;default:break}}}},ba=pa,_a=Object(y["a"])(ba,da,ma,!1,null,null,null),ga=_a.exports,fa={components:{notificaciones:R,"menu-navegacion-principal":x,"ver-perfil-y-mas":ca,"crear-nuevo":ga},computed:{nombre_usuario(){return this.$store.getters["MOD_autenticacion/obtenerNombreUsuario"]}}},ha=fa,va=Object(y["a"])(ha,p,b,!1,null,null,null),ya=va.exports,ja=t("0798"),xa=t("2db4"),Ca=function(){var e=this,a=e._self._c;return a(xa["a"],{attrs:{right:"",top:"",color:"transparent"},model:{value:e.snackbar,callback:function(a){e.snackbar=a},expression:"snackbar"}},e._l(e.alertas,(function(t,o){return a(ja["a"],{key:o,attrs:{type:e.tipoAlerta(t),border:"left","colored-border":""},scopedSlots:e._u([{key:"close",fn:function(){return[a(d["a"],{attrs:{icon:"",right:""},on:{click:function(a){return e.cerrarAlerta(o)}}},[a(m["a"],[e._v("mdi-close")])],1)]},proxy:!0}],null,!0)},[t.error?a("div",[t.error.response.data.error?a("span",[e._v(" "+e._s(t.error.response.data.error)+" "),a("br")]):e._e(),e.ver_mas?e._e():a(d["a"],{attrs:{text:"",color:"primary"},on:{click:function(a){e.ver_mas=!0}}},[e._v("Ver mas...")]),a("br"),t.error.response.data.message&&e.ver_mas?a("span",[e._v(" "+e._s(t.error.response.data.message)),a("br")]):e._e()],1):a("div",[a("span",{domProps:{textContent:e._s(t.mensaje)}})])])})),1)},ka=[],$a={data:()=>({snackbar:!1,ver_mas:!1}),computed:{alertas(){return this.$store.getters["alerta/getAlertas"]}},methods:{tipoAlerta({estado:e,error:a}){const t=a?a.response.status:e;switch(!0){case t<226:return"success";case t<451:return"warning";default:return"error"}},cerrarAlerta(e){this.$store.commit("alerta/removeAlerta",e),this.snackbar=!!this.alertas.length}},watch:{alertas(){this.snackbar=!!this.alertas.length},snackbar(e){e||(this.ver_mas=!1,this.$store.commit("alerta/clearAleras"))}}},wa=$a,Ia=Object(y["a"])(wa,Ca,ka,!1,null,null,null),Sa=Ia.exports,Aa={components:{encabezado:ya,alerta:Sa},methods:{TemaOscuro(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}},computed:{isUsuarioAutenticado(){return this.$store.getters["MOD_autenticacion/isUsuarioAutenticado"]}}},Pa=Aa,Ta=Object(y["a"])(Pa,l,u,!1,null,null,null),Ea=Ta.exports,Oa=t("8c4f"),Ma=t("0e8f"),Fa=t("a722"),Da=t("f6c4"),Va=t("8654"),Na=function(){var e=this,a=e._self._c;return a(r["a"],{attrs:{id:"inspire"}},[a(Da["a"],{staticClass:"grey"},[a(s["a"],{attrs:{fluid:"","fill-height":""}},[a(Fa["a"],{attrs:{"align-center":"","justify-center":""}},[a(Ma["a"],{attrs:{xs12:"",sm8:"",md4:""}},[a($["a"],{attrs:{lass:"mx-auto",elevation:"5",loading:e.loading}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Iniciar sesión ")]),a(_["c"],{staticClass:"pt-5"},[a(Va["a"],{attrs:{label:"Nombre de usuario o correo",type:"text",outlined:""},model:{value:e.cuenta,callback:function(a){e.cuenta=a},expression:"cuenta"}}),a(Va["a"],{attrs:{label:"Contraseña",type:e.valor?"password":"text","append-icon":e.valor?"mdi-eye":"mdi-eye-off",outlined:""},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.login()},"click:append":()=>e.valor=!e.valor},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),a("div",{staticClass:"p"},[a("a",{attrs:{href:"#"}},[e._v("¿Olvidaste tu contraseña?")])])],1),a(_["a"],[a(d["a"],{attrs:{color:"primary",block:""},on:{click:function(a){return e.login()}}},[e._v(" Iniciar sesión ")])],1)],1)],1)],1)],1)],1)],1)},Ra=[],za={name:"Login",data:()=>({cuenta:null,email:null,nombre_usuario:null,password:null,loading:!1,valor:String}),computed:{nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]},privilegios(){return this.$store.getters["MOD_autenticacion/getPrivilegios"]}},methods:{async login(){const{email:e,nombre_usuario:a,password:t}=this;this.loading=!0;const{error:o,estado:r,mensaje:i}=await this.$store.dispatch("MOD_autenticacion/login",{correo:e,nombreUsuario:a,password:t});if(this.loading=!1,this.$store.commit("alerta/addAlertas",{estado:r,mensaje:i,error:o}),!o){const{nombreUsuario:e}=this;this.$router.push({name:"trabajos-coordinador",params:{nombre_usuario:e}})}},validarCuenta(e){/^\w+([/.-]?\w+)*@\w+([/.-]?\w+)*(\.\w{2,4})+$/.test(e)?(this.email=e,this.nombre_usuario=null):(this.email=null,this.nombre_usuario=e)}},watch:{cuenta:function(){this.validarCuenta(this.cuenta)}}},Ua=za,Ba=Object(y["a"])(Ua,Na,Ra,!1,null,null,null),La=Ba.exports,qa=t("62ad"),Ha=t("0fd9"),Ga=t("71a3"),Xa=t("c671"),Ja=t("fe57"),Ya=t("8414"),Ka=t("1e06"),Qa=function(){var e=this,a=e._self._c;return a(Da["a"],[a(Ha["a"],{attrs:{justify:"center",dense:""}},[a(qa["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2",xs:"2"}},[a("cliente")],1),a(qa["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a(Ja["a"],{attrs:{color:"primary"},model:{value:e.tabVista,callback:function(a){e.tabVista=a},expression:"tabVista"}},[a(Ga["a"],[e._v("Trabajos")]),a(Ga["a"],[e._v("Inmuebles")]),a(Xa["a"],{staticClass:"container"},[a("trabajos")],1),a(Xa["a"],{staticClass:"container"},[a("inmubles")],1)],1)],1),a(qa["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2",xs:"2"}},[a($["a"],{staticClass:"mx-auto"},[a(_["d"],{staticClass:"grey lighten-2"},[e._v("Últimos cambios")]),a(_["c"],[a(Ya["a"],[a(Ka["a"],{staticClass:"text-right"},[e._v(" Se eliminó el recurso ")]),a(Ka["a"],[e._v("Se modificó la solicitud de recurso")]),a(Ka["a"],[e._v("Se creó un nuevo inmuebles")])],1)],1)],1)],1)],1)],1)},Za=[],Wa=t("8e36"),et=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"container mx-auto"},[a(_["d"],{staticClass:"grey lighten-2",attrs:{dense:""}},[e._v(" Cliente "),a(n["a"]),a("nuevo-cliente")],1),a(w["a"]),a("listar-clientes"),a(Ha["a"],[e.isCargando?a(qa["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Obteniendo los clientes ")]):e._e(),e.isCargando||e.isCliente?e._e():a(qa["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" No hay clientes ")]),a(qa["a"],{attrs:{cols:"6"}},[a(Wa["a"],{attrs:{active:e.isCargando,indeterminate:e.isCargando,absolute:"",bottom:"",color:"deep-purple accent-4"}})],1)],1)],1)},at=[],tt=t("169a"),ot=t("4bd4"),rt=t("a844"),it=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{width:"500",persistent:"",transition:"dialog-top-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({attrs:{small:"",color:"success"}},"v-btn",o,!1),t),[a(m["a"],{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v("Crear ")],1)]}}]),model:{value:e.isDialogoCrearNuevoCliente,callback:function(a){e.isDialogoCrearNuevoCliente=a},expression:"isDialogoCrearNuevoCliente"}},[a($["a"],{staticClass:"mx-auto",attrs:{"max-width":"500"}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Crear nuevo cliente "),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){return e.cerrarDialogo()}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(_["c"],[a(ot["a"],{ref:"formulario",staticClass:"container",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(Va["a"],{attrs:{label:"Nombre cliente *",rules:[e=>!!e||"El nombre del cliente o razón social es necesario"],dense:"",outlined:"",clearable:"",filled:""},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}}),a(Va["a"],{attrs:{label:"RFC",dense:"",clearable:"",outlined:"",filled:""},model:{value:e.rfc,callback:function(a){e.rfc=a},expression:"rfc"}}),a(rt["a"],{attrs:{label:"Dirección",dense:"",outlined:"",clearable:"",filled:""},model:{value:e.direccion,callback:function(a){e.direccion=a},expression:"direccion"}})],1),a(_["a"],{staticClass:"justify-end"},[a(d["a"],{attrs:{color:"success",disabled:!e.validacion,outlined:""},on:{click:function(a){return e.crear()}}},[e._v("Crear")])],1)],1)],1)],1)},st=[],nt={data:()=>({validacion:!1,nombre:null,rfc:null,direccion:null}),computed:{isDialogoCrearNuevoCliente:{get(){return this.$store.getters["cliente/getIsActivoFormularioCrearNuevoCliente"]},set(e){this.$store.commit("cliente/setIsActivoFormularioCrearNuevoCliente",e)}}},methods:{async crear(){if(this.$refs.formulario.validate()){const{nombre:e,rfc:a,direccion:t}=this,{error:o,mensaje:r,estado:i}=await this.$store.dispatch("cliente/nuevo",{nombre:e,rfc:a,direccion:t});o||this.cerrarDialogo(),this.$store.commit("alerta/addAlertas",{estado:i,mensaje:r,error:o})}},cerrarDialogo(){this.isDialogoCrearNuevoCliente=!1,this.$refs.formulario.reset()}}},ct=nt,lt=Object(y["a"])(ct,it,st,!1,null,null,null),ut=lt.exports,dt=t("8270"),mt=function(){var e=this,a=e._self._c;return a(I["a"],{attrs:{dense:""}},[a(T["a"],{attrs:{rounded:""}},e._l(e.clientes,(function(t,o){return a(S["a"],{key:o,attrs:{link:""},on:{click:function(a){return e.irInmuebles(t)}}},[a(dt["a"],[a(C["a"],{attrs:{color:"grey"}},[a("span",{staticClass:"white--text"},[e._v(e._s(t.nombre[0].toUpperCase()))])])],1),a(P["b"],[a(P["d"],{domProps:{textContent:e._s(t.nombre)}})],1)],1)})),1)],1)},pt=[],bt={computed:{clientes(){return this.$store.getters["cliente/getClientes"]}},created(){this.inicializarClientes()},methods:{async inicializarClientes(){const{error:e,mensaje:a,estado:t}=await this.$store.dispatch("cliente/obtenerClientes");e&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:e})},irInmuebles(e){this.$store.dispatch("cliente/recuperarCliente",e),this.$router.push({name:"inmuebles",params:{cliente:e.nombre}})}}},_t=bt,gt=Object(y["a"])(_t,mt,pt,!1,null,null,null),ft=gt.exports,ht={components:{"nuevo-cliente":ut,"listar-clientes":ft},computed:{isCargando(){return this.$store.getters["cliente/getCargando"]},isCliente(){return this.$store.getters["cliente/isClientes"]}}},vt=ht,yt=Object(y["a"])(vt,et,at,!1,null,null,null),jt=yt.exports,xt=function(){var e=this,a=e._self._c;return a("listar-trabajos",{attrs:{obj_filtrar:{show_filtado_btn:e.show_filtado_btn,array_atributos_filtro:e.array_atributos_filtro},headers:e.headers,objAsignar:{isAsignarBtn:!0,redireccionar:"asignar-trabajos"}},on:{eventAplicarFiltroAtributos:e.inicializarTrabajosPendientes}})},Ct=[],kt=t("8fea"),$t=t("6b53"),wt=t("71d9"),It=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(_["d"],{staticClass:"grey lighten-3"},[e._v(" "+e._s(e.titulo)+" "),a(n["a"]),a(Va["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),a(_["b"],{staticClass:"grey lighten-3"},[e._v(" "+e._s(e.trabajos.length+(1===e.trabajos.length?" Trabajo":" Trabajos"))+" ")]),a(_["c"],[a($t["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(kt["a"],{staticClass:"elevation-5",attrs:{loading:e.isCargando,headers:e.headers,items:e.trabajos,"items-per-page":-1,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:e.pageText},search:e.search,"show-select":e.mostrar_seleccionados,"single-select":e.singleSelect},on:{pagination:e.setPageText},scopedSlots:e._u([{key:"top",fn:function(){return[a(wt["a"],{attrs:{flat:""}},[a(n["a"]),e.is_peticion?a(d["a"],{staticClass:"ma-5 primary",attrs:{disabled:e.isTrabajos},on:{click:function(a){return e.redireccionarFormularioPeticionPagoDerechos()}}},[e._v(" Solicitar pago de derechos "),a(m["a"],{attrs:{right:""}},[e._v("mdi-cart")])],1):e._e(),e.obj_asignar.show_asignar_btn?a(d["a"],{staticClass:"success ma-1",attrs:{disabled:e.obj_asignar.deshabilitar},on:{click:function(a){return e.redirecionar()}}},[e._v(" Asignar trabajo "),a(m["a"],{attrs:{right:""}},[e._v("mdi-file-account")])],1):e._e(),e.obj_filtrar.show_filtado_btn?a("filtrado-trabajos",{attrs:{array_atributos_filtro:e.obj_filtrar.array_atributos_filtro},on:{eventAplicarFiltroAtributos:e.emitAplicarFiltroAtributos}}):e._e(),a(d["a"],{attrs:{color:"info"},on:{click:function(a){return e.actualizarTrablaTrabajos()}}},[a(m["a"],[e._v("mdi-reload")])],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("span",[e._v(e._s(e.sin_texto_datos))])]},proxy:!0},{key:"item.inmueble.nombre",fn:function({item:t}){return[a("span",[e._v(e._s(t.inmueble.nombre)+" ("),a("b",[e._v(e._s(t.inmueble.clave)+")")])])]}},{key:"item.inmueble",fn:function({item:t}){return[a("span",[a("b",[e._v(e._s(t.inmueble.estado.name))]),a("br"),e._v(e._s(t.inmueble.municipio.name))])]}},{key:"item.inmueble.estado",fn:function({item:t}){return[t.inmueble.estado.users_charge.length?a("div",e._l(t.inmueble.estado.users_charge,(function(t){return a(z["a"],{key:t,staticClass:"ma-1",attrs:{color:"primary",label:"",small:""}},[a(m["a"],{attrs:{left:""}},[e._v(" mdi-account-circle-outline ")]),e._v(" "+e._s(t)+" ")],1)})),1):a("div",[a(z["a"],{attrs:{label:"",color:"warning",small:""}},[e._v("No asignado")])],1)]}},{key:"item.inmueble.municipio",fn:function({item:t}){return[t.inmueble.municipio.users_field.length?a("div",e._l(t.inmueble.municipio.users_field,(function(t){return a(z["a"],{key:t,staticClass:"ma-1",attrs:{color:"primary",label:"",small:""}},[a(m["a"],{attrs:{left:""}},[e._v(" mdi-account-circle-outline ")]),e._v(" "+e._s(t)+" ")],1)})),1):a("div",[a(z["a"],{attrs:{label:"",color:"warning",small:""}},[e._v("No asignado")])],1)]}},{key:"item.creado",fn:function({item:a}){return[e._v(" "+e._s(e.getFecha(a.creado))+" ")]}},{key:"item.modificado",fn:function({item:t}){return[a("span",{class:e.getColor(t.modificado)+" lighten-3 ",staticStyle:{display:"flex","text-align":"center"}},[e._v(e._s(e.getFecha(t.modificado)))])]}},{key:"item.property_office",fn:function({item:a}){return[e._v(" "+e._s(a.property_office?a.property_office.name:"")+" ("+e._s(a.property_office?a.property_office.property_key:"")+") ")]}}]),model:{value:e.trabajos_seleccionados,callback:function(a){e.trabajos_seleccionados=a},expression:"trabajos_seleccionados"}})],1)],1)],1)},St=[],At=t("b974"),Pt=t("7e85"),Tt=t("e516"),Et=t("9c54"),Ot=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{scrollable:"","max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({staticClass:"ma-1",attrs:{color:"primary"}},"v-btn",o,!1),t),[a(m["a"],{attrs:{left:""}},[e._v("mdi-filter-variant")]),e._v(" Filtros ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a($["a"],{staticClass:"mx-auto"},[a(_["d"],[1===e.paso_filtro?a(d["a"],{attrs:{icon:""},on:{click:function(a){e.dialog=!1}}},[a(m["a"],[e._v("mdi-chevron-left")])],1):a(d["a"],{attrs:{icon:""},on:{click:function(a){e.paso_filtro=1,e.filtro=-1}}},[a(m["a"],[e._v("mdi-chevron-left")])],1),a(n["a"]),e._v(" "+e._s(e.filtro>-1?e.array_atributos_filtro[e.filtro].text:"")+" "),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"primary"},on:{click:function(a){return e.cleanAll()}}},[a(m["a"],[e._v("mdi-eraser")])],1)],1),a(w["a"]),a(Pt["a"],{attrs:{elevation:"0"},model:{value:e.paso_filtro,callback:function(a){e.paso_filtro=a},expression:"paso_filtro"}},[a(Et["b"],[a(Tt["a"],{attrs:{step:"1"}},[a(I["a"],[a(T["a"],{model:{value:e.filtro,callback:function(a){e.filtro=a},expression:"filtro"}},e._l(e.array_atributos_filtro,(function(t){return a(S["a"],{key:t.indice,attrs:{disabled:t.disabled},on:{click:function(a){e.paso_filtro=t.indice+2}},scopedSlots:e._u([{key:"default",fn:function({active:o}){return[a(P["b"],[a(P["d"],[e._v(e._s(t.text))]),"Cliente"===t.text?a(P["c"],[e._v(e._s(e.cliente?e.cliente.nombre:""))]):e._e(),"Estado"===t.text?a(P["c"],[e._v(e._s(e.estado?e.estado.nombre:""))]):e._e(),"Fecha"===t.text?a(P["c"],[e._v(" "+e._s(e.fecha_menor?e.fecha_menor:"")+" "+e._s(e.fecha_mayor?e.fecha_mayor:"")+" ")]):e._e(),"Campo"===t.text?a(P["c"],[e._v(e._s(e.contacto?e.contacto.nombre:""))]):e._e()],1),a(A["a"],[a(d["a"],{attrs:{"input-value":o,icon:""}},[a(m["a"],[e._v("mdi-chevron-right")])],1)],1)]}}],null,!0)})})),1)],1)],1),a(Tt["a"],{attrs:{step:"2"}},[a(At["a"],{staticClass:"mt-1",attrs:{items:e.clientes,label:"Cliente","item-text":"nombre","return-object":"",outlined:"",dense:"",clearable:"","no-data-text":"No se encontraron ningún cliente."},model:{value:e.cliente,callback:function(a){e.cliente=a},expression:"cliente"}})],1),a(Tt["a"],{attrs:{step:"3"}},[a(At["a"],{staticClass:"mt-1",attrs:{items:e.estados,label:"Estado","item-text":"nombre","return-object":"",outlined:"",dense:"",clearable:""},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}})],1),a(Tt["a"],{attrs:{step:"4"}},[a("seleccionar-fecha",{on:{eventoFecha:e.setFechas}})],1),a(Tt["a"],{attrs:{step:"5"}},[a(At["a"],{attrs:{label:"Usuario en campo",items:e.contactos,"item-text":"nombre","return-object":"",outlined:""},model:{value:e.contacto,callback:function(a){e.contacto=a},expression:"contacto"}})],1)],1)],1),a(_["a"],[a(d["a"],{attrs:{block:"",color:"primary"},on:{click:e.emitAplicarFiltroAtributos}},[e._v("Ver trabajos")])],1)],1)],1)},Mt=[],Ft=t("2e4b"),Dt=function(){var e=this,a=e._self._c;return a(Ha["a"],{staticClass:"mt-1",attrs:{justify:"center"}},[a(qa["a"],{attrs:{cols:"auto"}},[a(E["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.menorIgualFechaSeleccionada,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(a){e.menorIgualFechaSeleccionada=a},"update:return-value":function(a){e.menorIgualFechaSeleccionada=a}},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(Va["a"],e._g(e._b({attrs:{label:"Fecha de inicio","prepend-icon":"mdi-calendar",readonly:"",clearable:"",outlined:"",dense:""},model:{value:e.menorIgualFechaSeleccionada,callback:function(a){e.menorIgualFechaSeleccionada=a},expression:"menorIgualFechaSeleccionada"}},"v-text-field",o,!1),t))]}}]),model:{value:e.menu,callback:function(a){e.menu=a},expression:"menu"}},[a(Ft["a"],{attrs:{"no-title":"",scrollable:"",locale:"es-es"},model:{value:e.menorIgualFechaSeleccionada,callback:function(a){e.menorIgualFechaSeleccionada=a},expression:"menorIgualFechaSeleccionada"}})],1)],1),a(qa["a"],{attrs:{cols:"auto"}},[a(E["a"],{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.mayorIgualFechaSeleccionada,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(a){e.mayorIgualFechaSeleccionada=a},"update:return-value":function(a){e.mayorIgualFechaSeleccionada=a}},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(Va["a"],e._g(e._b({attrs:{label:"Fecha final","prepend-icon":"mdi-calendar",readonly:"",clearable:"",dense:"",outlined:""},model:{value:e.mayorIgualFechaSeleccionada,callback:function(a){e.mayorIgualFechaSeleccionada=a},expression:"mayorIgualFechaSeleccionada"}},"v-text-field",o,!1),t))]}}]),model:{value:e.menu2,callback:function(a){e.menu2=a},expression:"menu2"}},[a(Ft["a"],{attrs:{"no-title":"",scrollable:"",locale:"es-es"},model:{value:e.mayorIgualFechaSeleccionada,callback:function(a){e.mayorIgualFechaSeleccionada=a},expression:"mayorIgualFechaSeleccionada"}})],1)],1)],1)},Vt=[],Nt={data:()=>({menu:!1,menu2:!1,menorIgualFecha:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),mayorIgualFecha:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}),computed:{menorIgualFechaSeleccionada:{get(){return this.menorIgualFecha},set(e){this.$refs.menu.save(e),this.menorIgualFecha=e,this.$emit("eventoFecha",{menorIgualFecha:e,mayorIgualFecha:this.mayorIgualFecha})}},mayorIgualFechaSeleccionada:{get(){return this.mayorIgualFecha},set(e){this.$refs.menu2.save(e),this.mayorIgualFecha=e,this.$emit("eventoFecha",{menorIgualFecha:this.menorIgualFecha,mayorIgualFecha:e})}}}},Rt=Nt,zt=Object(y["a"])(Rt,Dt,Vt,!1,null,null,null),Ut=zt.exports,Bt={props:{array_atributos_filtro:{type:Array,default:()=>[]}},data:()=>({dialog:!1,paso_filtro:1,filtro:-1,contacto:null,fecha_mayor:null,fecha_menor:null,step:1}),components:{"seleccionar-fecha":Ut},computed:{clientes(){return this.$store.getters["cliente/getClientes"]},cliente:{get(){return this.$store.getters["cliente/getCliente"]},set(e){this.$store.commit("cliente/setCliente",null===e?{}:e)}},estados(){return this.$store.getters["ubicacion/getEstados"]},estado:{get(){return this.$store.getters["ubicacion/getEstado"]},set(e){this.$store.commit("ubicacion/setEstado",null===e?{}:e)}},contactos(){return this.$store.getters["contacto/getContactos"]}},methods:{setFechas({menorIgualFecha:e,mayorIgualFecha:a}){this.fecha_mayor=a,this.fecha_menor=e,this.cliente={},this.estado={}},async inicializarClientes(){await this.$store.dispatch("cliente/obtenerClientes")},async inicializarEstados(){const e=Object.hasOwn(this.cliente,"id")?this.cliente.id:"";await this.$store.dispatch("ubicacion/obtenerEstadosDeInmueblesExistentes",{id_cliente:e,excluir_trabajos:!0})},async inicializarContactos(){this.$store.dispatch("contacto/recuperarContactos")},cleanAll(){if(this.array_atributos_filtro.length)for(const{text:e,disabled:a}of this.array_atributos_filtro)if(!a)switch(e){case"Cliente":this.cliente={};break;case"Estado":this.estado={};break;case"Fecha":this.fecha_mayor=null,this.fecha_menor=null;break;case"Campo":this.contacto={};break;default:console.log("Filtro no encontrado.")}},emitAplicarFiltroAtributos(){const{cliente:e,estado:a,fecha_mayor:t,fecha_menor:o,contacto:r}=this,i={cliente:e,estado:a,fecha_mayor:t,fecha_menor:o,contacto:r};this.$emit("eventAplicarFiltroAtributos",i)}},watch:{paso_filtro(e){2===e&&this.inicializarClientes(),3===e&&this.inicializarEstados(),5===e&&this.inicializarContactos()}}},Lt=Bt,qt=Object(y["a"])(Lt,Ot,Mt,!1,null,null,null),Ht=qt.exports,Gt={props:{titulo:{type:String,default:"Trabajos"},obj_filtrar:{type:Object,default:()=>({show_filtado_btn:!1,array_atributos_filtro:[]})},obj_asignar:{type:Object,default:()=>({show_asignar_btn:!1,deshabilitar:!1,redireccionar:{}})},mostrar_seleccionados:{type:Boolean,default:!1},is_peticion:{type:Boolean,default:!1},headers:{type:Array,default:()=>{}},sin_texto_datos:{type:String,default:"No se ha encontrado ninguna trabajo."}},data:()=>({search:"",blue:3,singleSelect:!1,pageText:"p - Tp de Fp"}),components:{"filtrado-trabajos":Ht},computed:{trabajos(){return this.$store.getters["trabajo/getTrabajos"]},isCargando(){return this.$store.getters["trabajo/getCargando"]},isTrabajos(){return!this.trabajos.length},trabajos_seleccionados:{get(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},set(e){const a=[];for(const t of e)a.push({trabajo:t.id});this.$store.commit("trabajo/setSeleccionados",e),this.$store.commit("recurso/setVerificarPeticiones",a),this.$store.dispatch("recurso/updatePeticionesVerificadas")}},usuario(){return this.$store.getters["MOD_autenticacion/getUsuarioAutenticado"]}},methods:{holgura(e){var a=new Date(e),t=new Date,o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r=new Date(o),i=(r.valueOf()-a.valueOf())/864e5;return this.blue<i&&(this.blue=i),i},getColor(e){return this.holgura(e)>=5?"red":this.holgura(e)>=2?"orange":"green"},getFecha(e){const a=new Date(e);a.setDate(a.getDate()+1);const t={weekday:"short",year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("es-Mx",t)},verTrabajo(e){this.$store.commit("trabajo/setTrabajo",e),this.$router.push({name:"De"})},redirecionar(){const{name:e,params:a}=this.obj_asignar.redireccionar;this.$router.push({name:e,params:a})},actualizarTrablaTrabajos(){const e={cliente:{},estado:{},fecha_mayor:null,fecha_menor:null,contacto:{}};this.emitAplicarFiltroAtributos(e)},emitAplicarFiltroAtributos(e){this.$emit("eventAplicarFiltroAtributos",e)},redireccionarFormularioPeticionPagoDerechos(){this.$router.push({name:"peticion-recursos"}),this.$store.commit("trabajo/cleanTrabajos")},setPageText({pageStart:e,pageStop:a,itemsLength:t}){this.pageText=`${e+1} - ${a} de ${t}`}}},Xt=Gt,Jt=Object(y["a"])(Xt,It,St,!1,null,null,null),Yt=Jt.exports,Kt={data:()=>({headers:[{value:"proyecto",text:"Proyecto"},{value:"concepto",text:"Concepto"},{value:"status",text:"Status"},{value:"inmueble.cliente",text:"Cliente"},{value:"inmueble.nombre",text:"Inmueble"},{value:"inmueble.clave",align:" d-none"},{value:"inmueble",text:"Ubicación del inmueble"},{value:"inmueble.municipio.name",align:" d-none"},{value:"inmueble.estado",text:"Usuario a cargo"},{value:"inmueble.municipio",text:"Usuario en campo"},{value:"creado",text:"Creado"},{value:"modificado",text:"Modificado"}],show_filtado_btn:!0,array_atributos_filtro:[{text:"Cliente",disabled:!1,indice:0},{text:"Estado",indice:1},{text:"Fecha",indice:2}]}),components:{"listar-trabajos":Yt},created(){this.inicializarTrabajosPendientes({cliente:null,estado:null,fecha_menor:null,fecha_mayor:null})},methods:{async inicializarTrabajosPendientes({cliente:e,estado:a,fecha_menor:t,fecha_mayor:o}){this.$store.commit("trabajo/cleanTrabajos");const r={client:e?e.id:null,province:a?a.id:null,menorIgualFecha:e||a?null:t,mayorIgualFecha:e||a?null:o},{mensaje:i,error:s,estados:n}=await this.$store.dispatch("trabajo/obtenerTrabajosPendietes",r);s&&await this.$store.commit("alerta/addAlertas",{estado:n,mensaje:i,error:s})}}},Qt=Kt,Zt=Object(y["a"])(Qt,xt,Ct,!1,null,null,null),Wt=Zt.exports,eo=function(){var e=this,a=e._self._c;return a("tabla-inmubles",{attrs:{cabecera:e.cabecera,inmuebles:e.inmuebles,texto_sin_datos:e.texto_sin_datos,isMostrarMenuInmuebles:!0,ObjFiltrar:{isBtnFiltrar:!0,isAutocompleteCliente:!0},isCardCabecera:!0,is_mostrar_btn_actualizar:!0},on:{emitFiltro:e.eventBuscarInmueblesFiltro}})},ao=[],to=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:"",loading:e.isCargando,disabled:e.isCargando}},[e.isCardCabecera?a(_["d"],{staticClass:"grey lighten-2"},[e._v(" "+e._s(e.titulo_card)+" "),a(n["a"]),a(Va["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar inmueble","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1):e._e(),e.isCardCabecera?a(_["b"],{staticClass:"grey lighten-2"},[e.seleccionados.length?a("span",[e._v(" Seleccionados "+e._s(e.seleccionados.length)+" de "+e._s(e.inmuebles.length)+" ")]):a("span",[e._v(" "+e._s(1==e.inmuebles.length?e.inmuebles.length+" Inmueble":e.inmuebles.length+" Inmuebles")+" ")])]):e._e(),e.isCardCabecera?e._e():a(_["d"],[a(n["a"]),a(Va["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar inmueble","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),a(_["c"],[a($t["a"],{staticClass:"overflow-y-auto"},[a(kt["a"],{staticClass:"elevation-5",attrs:{headers:e.cabecera,items:e.inmuebles,"item-key":"id","no-data-text":e.texto_sin_datos,"no-results-text":"No se encontraron registros coincidentes",loading:e.isCargando,"loading-text":"Cargando... por favor espere","items-per-page":10,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:e.pageText},"show-select":e.isMostrarSeleccion,search:e.search,height:e.tabla_height},on:{pagination:e.setPageText},scopedSlots:e._u([{key:"top",fn:function(){return[a(wt["a"],{attrs:{flat:""}},[a(n["a"]),e.verificarInmuebles.length&&e.obj_grupo_btn_verificar_inmuebles.is_btn_borror_inmuebles_verificados?a(d["a"],{attrs:{color:"warning"},on:{click:function(a){return e.clearInmueblesVerificados()}}},[a(m["a"],{attrs:{left:""}},[e._v("mdi-eraser-variant")]),e._v("Borrar inmuebles ")],1):e._e(),e.verificarInmuebles.length&&e.obj_grupo_btn_verificar_inmuebles.is_btn_verificar_inmuebles?a(d["a"],{staticClass:"ma-5",attrs:{color:"success"},on:{click:function(a){return e.crearMultipleInmuebles()}}},[a(m["a"],{attrs:{left:""}},[e._v("mdi-cloud-upload")]),e._v("Crear inmuebles ")],1):e._e(),e.isMostrarMenuInmuebles?a(E["a"],{attrs:{left:"","offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(d["a"],e._g(e._b({staticClass:"ma-5",attrs:{color:"teal",dark:""}},"v-btn",t,!1),o),[e._v(" Añadir inmueble "),a(m["a"],{attrs:{right:""}},[e._v(e._s("true"===t["aria-expanded"]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}],null,!1,1246691368)},[a(I["a"],[a(S["a"],{on:{click:function(a){return e.setDialog({is_dialogo:!0})}}},[a(P["d"],[e._v("Crear nuevo inmueble")]),a(tt["a"],{attrs:{width:"500"},model:{value:e.is_formulario_crear_inmueble,callback:function(a){e.is_formulario_crear_inmueble=a},expression:"is_formulario_crear_inmueble"}},[a("crear-inmueble",{attrs:{is_autocomplete_cliente:e.obj_filtrar_inmueble.isAutocompleteCliente},on:{eventSetDialog:e.setDialog}})],1)],1),a(S["a"],{attrs:{link:""},on:{click:function(a){return e.irCrearMultiplesInmuebles(e.obj_filtrar_inmueble)}}},[a(P["d"],[e._v(" Cargar archivo ")])],1)],1)],1):e._e(),e.obj_filtrar_inmueble.show_btn_filtrar_inmueble?a("filtrado-inmueble",{attrs:{deshabilitar_autocomplete_cliente:e.obj_filtrar_inmueble.deshabilitar_autocomplete_cliente},on:{emitFiltro:e.eventFiltro}}):e._e(),e.is_mostrar_btn_actualizar?a(d["a"],{staticClass:"ma-5",attrs:{color:"info"},on:{click:e.eventActualizar}},[a(m["a"],[e._v("mdi-reload")])],1):e._e(),a(tt["a"],{attrs:{"max-width":"500"},model:{value:e.is_formulario_modeficar_inmueble,callback:function(a){e.is_formulario_modeficar_inmueble=a},expression:"is_formulario_modeficar_inmueble"}},[a("actuliza-inmueble",{on:{eventSetDialog:e.setDialogModificarInmueble}})],1)],1)]},proxy:!0},{key:"item.status",fn:function({item:t}){return[a(m["a"],{attrs:{color:t.status?"success":"red"}},[e._v(" "+e._s(t.status?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline")+" ")])]}},{key:"item.sirh",fn:function({item:t}){return[t.sirh?a("span",[e._v(" "+e._s(t.sirh)+" ")]):a("span",[a(z["a"],{attrs:{color:"primary"}},[e._v("No asignado")])],1)]}},{key:"item.estado",fn:function({item:t}){return[null===t.estado?a("span",[a(z["a"],{attrs:{color:"error",outlined:""}},[e._v(" No se encontró el estado "),a("br"),e._v(" "+e._s(e.verificarInmuebles[e.inmuebles.indexOf(t)].estado)+" ")])],1):a("span",[e._v(e._s("string"===typeof t.estado?t.estado:t.estado.nombre))])]}},{key:"item.municipio",fn:function({item:t}){return[null===t.municipio?a("span",[a(z["a"],{attrs:{color:"error",outlined:""}},[e._v(" No se encontró "),a("br"),e._v(" "+e._s(e.verificarInmuebles[e.inmuebles.indexOf(t)].municipio)+" ")])],1):a("span",[e._v(e._s("string"===typeof t.municipio?t.municipio:t.municipio.nombre))])]}},{key:"item.accion",fn:function({item:t}){return[a(Ha["a"],{attrs:{"no-gutters":""}},[a(qa["a"],{attrs:{cols:"6"}},[a(d["a"],{attrs:{icon:"",color:"info"},on:{click:function(a){return e.setInmueble(t)}}},[a(m["a"],[e._v("mdi-pencil")])],1)],1),a(qa["a"],{attrs:{cols:"6"}},[a("confirmar",{attrs:{mensaje:`Estás a punto de eliminar el inmueble "${t.nombre}". ¿Estás seguro?`,indice:e.inmuebles.indexOf(t),id:t.id,tipo_pago:"¿Eliminar inmueble?",icon:"mdi-delete",color:"error"},on:{emitConfirmacion:e.eliminarInmueble}})],1)],1)]}},{key:"item.acciones",fn:function({item:t}){return[a(E["a"],{attrs:{left:"","offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(d["a"],e._g(e._b({staticClass:"ma-5",attrs:{color:"teal",dark:""}},"v-btn",t,!1),o),[e._v(" Ir a "),a(m["a"],{attrs:{right:""}},[e._v(e._s("true"===t["aria-expanded"]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}],null,!0)},[a(I["a"],[a(S["a"],{on:{click:function(a){return e.$router.push({name:"trabajos-inmueble-coordinador",params:{clave_inmueble:t.clave}})}}},[a(P["d"],[e._v("Ver trabajos")])],1),a(S["a"],[a(P["d"],[e._v(" Actualizar inmuebles ")])],1),a(S["a"],[a(P["d"],[e._v(" Eliminar inmueble ")])],1)],1)],1)]}}]),model:{value:e.seleccionados,callback:function(a){e.seleccionados=a},expression:"seleccionados"}})],1)],1)],1)},oo=[],ro=t("c6a6"),io=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:"","max-width":"500"}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" "+e._s(Object.hasOwn(e.inmueble,"id")?"Actualizar inmueble":"Crear nuevo inmueble")+" "),a(n["a"]),a(d["a"],{attrs:{icon:"",fab:"",color:"error"},on:{click:function(a){return e.cerrarDialgo({obj_creado:!1})}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(_["c"],{staticClass:"mt-4"},[a(ot["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(ro["a"],{attrs:{label:"Cliente*",rules:[e=>!!e||"Es necesario elegir un cliente"],items:e.clientes,"item-text":"nombre","return-object":"","no-data-text":"No se encontraron estados.",outlined:"",filled:"",clearable:"",dense:"",disabled:!e.is_autocomplete_cliente},model:{value:e.inmueble.cliente,callback:function(a){e.$set(e.inmueble,"cliente",a)},expression:"inmueble.cliente"}}),a(Va["a"],{attrs:{label:"Nombre*",rules:[e=>!!e||"Es necesario un nombre"],dense:"",outlined:"",filled:"",clearable:""},model:{value:e.inmueble.nombre,callback:function(a){e.$set(e.inmueble,"nombre",a)},expression:"inmueble.nombre"}}),a(Va["a"],{attrs:{label:"Clave*",rules:[e=>!!e||"Es necesario una clave"],outlined:"",filled:"",clearable:"",dense:""},model:{value:e.inmueble.clave,callback:function(a){e.$set(e.inmueble,"clave",a)},expression:"inmueble.clave"}}),a(Va["a"],{attrs:{label:"SIRH",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.inmueble.sirh,callback:function(a){e.$set(e.inmueble,"sirh",a)},expression:"inmueble.sirh"}}),a(ro["a"],{attrs:{label:"Estado*",rules:[e=>!!e||"Es necesario elegir un Estado"],items:e.estados,"item-text":"nombre","no-data-text":"No se encontraron estados.","return-object":"",outlined:"",filled:"",clearable:"",dense:""},on:{change:function(a){e.inmueble.estado?e.obtenerMunicipiosDeEstado(e.inmueble.estado.id):e.$store.commit("ubicacion/clearMunicipios")}},model:{value:e.inmueble.estado,callback:function(a){e.$set(e.inmueble,"estado",a)},expression:"inmueble.estado"}}),a(ro["a"],{attrs:{label:"Municipio*",rules:[e=>!!e||"Es necesario elegir un Municipio"],items:e.municipios,"item-text":"nombre","no-data-text":"No se encontraron municipios.","return-object":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.inmueble.municipio,callback:function(a){e.$set(e.inmueble,"municipio",a)},expression:"inmueble.municipio"}}),a(rt["a"],{attrs:{label:"Direccion","auto-grow":"",rows:"1","row-height":"15",outlined:"",filled:"",clearable:""},model:{value:e.inmueble.direccion,callback:function(a){e.$set(e.inmueble,"direccion",a)},expression:"inmueble.direccion"}})],1)],1),a(_["a"],[a(Ha["a"],[a(qa["a"],{attrs:{cols:"6"}},[a(d["a"],{attrs:{block:"",color:"error"},on:{click:function(a){return e.cerrarDialgo({obj_creado:!1})}}},[e._v("Cerrar")])],1),a(qa["a"],{attrs:{cols:"6"}},[Object.hasOwn(e.inmueble,"id")?a(d["a"],{attrs:{block:"",disabled:!e.validacion,color:"warning"},on:{click:function(a){return e.actualizarInmueble()}}},[e._v(" Actualizar inmueble ")]):a(d["a"],{attrs:{block:"",disabled:!e.validacion,color:"success"},on:{click:function(a){return e.crearInmueble()}}},[e._v(" Crear inmueble ")])],1)],1)],1)],1)},so=[],no={props:{dialog:{type:Boolean,default:!1},is_autocomplete_cliente:{type:Boolean,default:!1}},data:()=>({validacion:!1}),computed:{inmueble(){return this.$store.getters["inmueble/getInmueble"]},clientes(){return this.$store.getters["cliente/getClientes"]},estados(){return this.$store.getters["ubicacion/getEstados"]},municipios(){return this.$store.getters["ubicacion/getMunicipios"]},localidades(){return this.$store.getters["ubicacion/getLocalidades"]}},created(){this.inmueble.cliente=this.$store.getters["cliente/getCliente"]},methods:{async inicializarEstados(){await this.$store.dispatch("ubicacion/obtenerEstados")},async obtenerMunicipiosDeEstado(e){await this.$store.dispatch("ubicacion/obtenerMunicipiosDeEstado",e)},async crearInmueble(){if(this.$refs.formulario.validate()){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("inmueble/crearInmueble",this.inmueble);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t}),t||this.cerrarDialgo({obj_creado:!0})}},async actualizarInmueble(){if(this.$refs.formulario.validate()){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("inmueble/actualizarInmueble",this.inmueble);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t}),t||this.cerrarDialgo({obj_creado:!1})}},cerrarDialgo({obj_creado:e}){this.$emit("eventSetDialog",{is_dialogo:!1,obj_inmueble_creado:e,obj_inmueble_modificado:!0})}}},co=no,lo=Object(y["a"])(co,io,so,!1,null,null,null),uo=lo.exports,mo=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{scrollable:"","max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({attrs:{color:"primary"}},"v-btn",o,!1),t),[a(m["a"],{attrs:{left:""}},[e._v("mdi-filter-variant")]),e._v(" Filtros ")],1)]}}]),model:{value:e.dialogo,callback:function(a){e.dialogo=a},expression:"dialogo"}},[a($["a"],{staticClass:"mx-auto"},[a(_["d"],{staticClass:"grey lighten-2"},[a(d["a"],{attrs:{icon:"",color:"primary","x-large":""},on:{click:function(a){e.dialogo=!1}}},[a(m["a"],[e._v("mdi-chevron-left")])],1),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"primary","x-large":""},on:{click:function(a){return e.cleanAll()}}},[a(m["a"],[e._v("mdi-eraser")])],1)],1),a(_["c"],{staticClass:"pt-2"},[a(ro["a"],{attrs:{label:"Clientes",outlined:"",items:e.clientes,disabled:!e.isClientes||!e.deshabilitar_autocomplete_cliente,"item-text":"nombre","return-object":"",loading:e.isCargandoCliente,clearable:""},model:{value:e.cliente,callback:function(a){e.cliente=a},expression:"cliente"}}),a(ro["a"],{attrs:{label:"Estado",outlined:"",items:e.estados,disabled:e.isEstados,"item-text":"nombre","return-object":"",loading:e.isCargandoEstados,clearable:""},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}}),a(ro["a"],{attrs:{label:"Municipio",outlined:"",items:e.municipios,disabled:e.isMunicipios,"item-text":"nombre",loading:e.isCargandoMunuicipios,clearable:"","return-object":""},model:{value:e.municipio,callback:function(a){e.municipio=a},expression:"municipio"}})],1),a(_["a"],[a(d["a"],{attrs:{block:"",color:"primary"},on:{click:function(a){return e.buscarInmueblesTerritorio()}}},[e._v("Ver Inmuebles")])],1)],1)],1)},po=[],bo={props:{deshabilitar_autocomplete_cliente:{type:Boolean,default:!1}},data:()=>({dialogo:!1,localidad:null}),computed:{clientes(){return this.$store.getters["cliente/getClientes"]},cliente:{get(){return this.$store.getters["cliente/getCliente"]},set(e){this.$store.commit("cliente/setCliente",null===e?{}:e)}},isClientes(){return!!this.clientes.length},isCargandoCliente(){return this.$store.getters["cliente/getCargando"]},estados(){return this.$store.getters["ubicacion/getEstados"]},estado:{get(){return this.$store.getters["ubicacion/getEstado"]},async set(e){e?(await this.$store.dispatch("ubicacion/obtenerEstado",e),await this.obtenerMunicipiosEstado()):(this.$store.commit("ubicacion/clearEstado"),this.$store.commit("ubicacion/clearAllMunicipio"))}},isEstados(){return!this.estados.length},isCargandoEstados(){return this.$store.getters["ubicacion/getCargandoEstados"]},municipios(){return this.$store.getters["ubicacion/getMunicipios"]},municipio:{get(){return this.$store.getters["ubicacion/getMunicipio"]},async set(e){e?await this.$store.dispatch("ubicacion/obtenerMunicipio",e):this.$store.commit("ubicacion/clearMunicipio")}},isMunicipios(){return!this.municipios.length},isCargandoMunuicipios(){return this.$store.getters["ubicacion/getCargandoMunicipios"]}},created(){this.inicializarEstados()},methods:{async inicializarEstados(){await this.$store.dispatch("ubicacion/obtenerEstados")},async obtenerMunicipiosEstado(){const{cliente:e,estado:a}=this,{id:t}=e;await this.$store.dispatch("ubicacion/obtenerMunicipiosDeInmueblesExistentes",{cliente:t,estado:a})},async buscarInmueblesTerritorio(){const{cliente:e,estado:a,municipio:t}=this;this.$emit("emitFiltro",{cliente:e,estado:a,municipio:t})},cleanAll(){this.$store.commit("ubicacion/clearEstado"),this.$store.commit("ubicacion/clearMunicipio"),this.$store.commit("ubicacion/clearLocalidad")}}},_o=bo,go=Object(y["a"])(_o,mo,po,!1,null,null,null),fo=go.exports,ho=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{persistent:"","max-width":"300"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],{attrs:{icon:""}},[a(m["a"],e._g(e._b({attrs:{color:e.color}},"v-icon",o,!1),t),[e._v(" "+e._s(e.icon)+" ")])],1)]}},{key:"default",fn:function(t){return[a($["a"],{staticClass:"mx-auto"},[a(_["d"],{staticClass:"text-h6 grey lighten-2"},[e._v(" "+e._s(e.tipo_pago)+" ")]),a(_["c"],[e._v(e._s(e.mensaje))]),a(_["a"],[a(n["a"]),a(d["a"],{attrs:{color:"error darken-1",text:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[e._v(" Cancelar ")]),a(d["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(a){return e.aceptarConfirmacion(t)}}},[e._v(" Aceptar ")])],1)],1)]}}])})},vo=[],yo={props:{id:{type:Number,default:-1},indice:{type:Number,default:-1},mensaje:{type:String,default:""},tipo_pago:{type:String,default:""},icon:{type:String,default:"mdi-blank"},color:{type:String,default:""}},methods:{aceptarConfirmacion(e){e.value=!1,this.$emit("emitConfirmacion",{confirmacion:!0,id:this.id,indice:this.indice})},cerrrarDialogo(e){e.value=!1,this.$emit("emitConfirmacion",{confirmacion:!1,id:this.id,indice:this.indice})}}},jo=yo,xo=Object(y["a"])(jo,ho,vo,!1,null,null,null),Co=xo.exports,ko={props:{isMostrarSeleccion:{type:Boolean,default:!1},isMostrarMenuInmuebles:{type:Boolean,default:!1},obj_filtrar_inmueble:{type:Object,default:()=>({show_btn_filtrar_inmueble:!1,deshabilitar_autocomplete_cliente:!1})},cabecera:{type:Array,default:()=>[]},inmuebles:{type:Array,default:()=>[]},texto_sin_datos:{type:String,default:"No hay inmuebles disponibles"},isCardCabecera:{type:Boolean,default:!1},titulo_card:{type:String,default:"Inmuebles"},obj_grupo_btn_verificar_inmuebles:{type:Object,default:()=>({is_btn_borror_inmuebles_verificados:!1,is_btn_verificar_inmuebles:!1})},is_mostrar_btn_actualizar:{type:Boolean,default:!1},tabla_height:{type:Number,default:450}},data:()=>({search:"",pageText:"p - Tp de Fp",is_formulario_crear_inmueble:!1,is_formulario_modeficar_inmueble:!1}),components:{"crear-inmueble":uo,"actuliza-inmueble":uo,"filtrado-inmueble":fo,confirmar:Co},computed:{isCargando(){return this.$store.getters["inmueble/getCargando"]},seleccionados:{get(){return this.$store.getters["inmueble/getInmueblesSeleccionados"]},set(e){this.$store.commit("inmueble/setInmueblesSeleccionados",e)}},verificarInmuebles(){return this.$store.getters["inmueble/getVerificarInmuebles"]},inmueble(){return this.$store.getters["inmueble/getInmueble"]},inmuebles_verificados(){return this.$store.getters["inmueble/getTotalInmueblesVerificados"]},numeroInmueblesCreados(){return this.$store.getters["inmueble/getNumeroInmueblesCreados"]},indice_inmueble:{get(){return this.$store.getters["inmueble/getIndiceInmueble"]},set(e){this.$store.commit("inmueble/setIndiceInmueble",e)}}},methods:{async setInmueble(e){this.indice_inmueble=this.inmuebles.indexOf(e),Object.hasOwn(e,"id")?await this.recuperarInmueble(e.id):this.$store.commit("inmueble/setInmueble",{nombre:e.nombre,clave:e.clave,sirh:e.sirh,cliente:e.cliente,estado:e.estado,municipio:e.municipio,direccion:e.direccion}),this.is_formulario_modeficar_inmueble=!0,await this.recuperarEstados(),await this.recuperarMunicipiosDeEstado(this.inmueble.estado)},async setDialog({is_dialogo:e}){this.is_formulario_crear_inmueble=e,this.$store.commit("inmueble/cleanInmueble")},async setDialogModificarInmueble({is_dialogo:e,obj_inmueble_creado:a,obj_inmueble_modificado:t}){this.is_formulario_modeficar_inmueble=e,0!==this.inmuebles_verificados.length&&0!==this.verificarInmuebles.length&&(a&&this.splitInmueble(this.indice_inmueble),!a&&t&&(await this.$store.dispatch("inmueble/setStatusInmuebleVerificado",{inmueble:this.inmueble,indice:this.indice_inmueble}),this.$store.commit("inmueble/updateInmuebleVerificadoPorIndice",{inmueble:this.inmueble,indice:this.indice_inmueble}))),this.$store.commit("inmueble/cleanInmueble")},eliminarInmueble({confirmacion:e,indice:a,id:t}){e&&(0<t?(this.indice_inmueble=a,this.$store.dispatch("inmueble/eliminarInmueble",t)):(this.$store.commit("inmueble/cleanInmueble"),this.splitInmueble(a)))},async recuperarInmueble(e){const{error:a}=await this.$store.dispatch("inmueble/recuperarInmueble",{id_inmueble:e});a&&this.$store.commit("alerta/addAlertas",{error:a})},clearInmueblesVerificados(){this.$store.commit("inmueble/cleanInmueblesVerificados"),this.$store.commit("inmueble/cleanVerificarInmuebles"),this.$emit("emitBorrarInmueblesVerificados")},splitInmueble(e){this.$store.commit("inmueble/splitInmueblesVerificados",e),this.$store.commit("inmueble/splitVerificarInmuebles",e)},async crearMultipleInmuebles(){const{error:e,estado:a}=await this.$store.dispatch("inmueble/crearMultiplesInmuebles",this.inmuebles);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:`Se crearon ${this.numeroInmueblesCreados} de ${this.inmuebles_verificados} inmuebles.`,error:e})},async recuperarEstados(){this.$store.getters["ubicacion/getEstados"].length||await this.$store.dispatch("ubicacion/obtenerEstados")},async recuperarMunicipiosDeEstado(e){e&&await this.$store.dispatch("ubicacion/obtenerMunicipiosDeEstado",e.id)},eventActualizar(){this.eventFiltro({cliente:{},estado:{},municipio:{}})},irCrearMultiplesInmuebles({deshabilitar_autocomplete_cliente:e}){e&&this.$store.commit("cliente/cleanCliente"),this.$router.push({name:"cargar-archivo",params:{is_cliente:e}})},setPageText({pageStart:e,pageStop:a,itemsLength:t}){this.pageText=`${e+1} - ${a} de ${t}`},eventFiltro({cliente:e,estado:a,municipio:t}){this.$emit("emitFiltro",{cliente:e,estado:a,municipio:t})}}},$o=ko,wo=Object(y["a"])($o,to,oo,!1,null,null,null),Io=wo.exports,So={data:()=>({cabecera:[{value:"cliente",text:"Cliente",sortable:!1},{value:"clave",text:"Clave"},{value:"sirh",text:"SIRH"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"direccion",text:"Direccion",sortable:!1},{value:"accion",text:"Act. & Eli.",align:"center"}],texto_sin_datos:"Filtra los inmuebles primero por cliente o ubicación antes de listarlos."}),components:{"tabla-inmubles":Io},computed:{inmuebles(){return this.$store.getters["inmueble/getInmuebles"]}},methods:{async eventBuscarInmueblesFiltro({cliente:e,estado:a,municipio:t}){if(Object.keys(e).length||Object.keys(a).length||Object.keys(t).length){const{mensaje:o,estadoHttp:r,error:i}=await this.$store.dispatch("inmueble/listar",{cliente:e,estado:a,municipio:t});i&&(this.$store.commit("alerta/addAlertas",{mensaje:o,estado:r,error:i}),this.texto_sin_datos=i.response.data.error)}else this.$store.commit("inmueble/cleanInmuebles"),this.texto_sin_datos="Filtra los inmuebles primero por cliente o ubicación antes de listarlos."}}},Ao=So,Po=Object(y["a"])(Ao,eo,ao,!1,null,null,null),To=Po.exports,Eo={components:{cliente:jt,trabajos:Wt,inmubles:To},created(){this.$store.commit("cliente/cleanCliente")},computed:{tabVista:{get(){return this.$store.getters["general/getTabHomeVista"]},set(e){this.$store.commit("general/setTabHomeVista",e)}}}},Oo=Eo,Mo=Object(y["a"])(Oo,Qa,Za,!1,null,null,null),Fo=Mo.exports,Do=t("2bc5"),Vo=t("f625"),No=function(){var e=this,a=e._self._c;return a(Da["a"],[a($["a"],{staticClass:"mx-auto"},[a(Do["a"],{attrs:{items:e.items},scopedSlots:e._u([{key:"item",fn:function({item:t}){return[a(Vo["a"],{attrs:{href:t.href,disabled:t.disabled}},[e._v(" "+e._s(t.text.toUpperCase())+" ")])]}}])}),a(Ja["a"],[a(Ga["a"],{attrs:{to:{name:"inmuebles"}}},[e._v("Inmuebles")]),a(Ga["a"],{attrs:{to:{name:"trabajos-cliente"}}},[e._v("Trabajos")]),a(Ga["a"],{attrs:{disabled:""}},[e._v("Recursos")]),a(Ga["a"],{attrs:{to:{name:"configuraciones-cliente"}}},[e._v("Configuraciones")])],1)],1),a("br"),a("router-view")],1)},Ro=[],zo={data:()=>({items:[]}),computed:{cliente(){return this.$store.getters["cliente/getCliente"]},nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},created(){this.agregarMigas({text:this.nombreUsuario,disable:!1,href:"#"}),this.agregarMigas({text:this.cliente.nombre,disable:!1,href:"#"})},methods:{agregarMigas(e){this.items.push(e)}}},Uo=zo,Bo=Object(y["a"])(Uo,No,Ro,!1,null,null,null),Lo=Bo.exports,qo=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{"no-gutters":"",justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a($["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a(_["c"],[a("tabla-inmuebles",{attrs:{cabecera:e.cabecera,inmuebles:e.inmuebles,isMostrarMenuInmuebles:!0,texto_sin_datos:e.texto_sin_datos,obj_filtrar_inmueble:{show_btn_filtrar_inmueble:!0,deshabilitar_autocomplete_cliente:!1},isCardCabecera:!0,is_mostrar_btn_actualizar:!0},on:{emitFiltro:e.inicializarInmuebles}})],1)],1)],1)],1)},Ho=[],Go={data:()=>({cabecera:[{value:"cliente",text:"Cliente",sortable:!1},{value:"clave",text:"Clave"},{text:"SIRH",value:"sirh"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"direccion",text:"Direccion",sortable:!1},{value:"accion",text:"Act. & Eli.",sortable:!1,align:"center"}],texto_sin_datos:""}),components:{"tabla-inmuebles":Io},computed:{inmuebles(){return this.$store.getters["inmueble/getInmuebles"]},cliente(){return this.$store.getters["cliente/getCliente"]}},created(){this.inicializarInmuebles({cliente:this.cliente,estado:{},municipio:{}})},methods:{async inicializarInmuebles({cliente:e,estado:a,municipio:t}){if(Object.keys(this.cliente).length||Object.keys(a).length||Object.keys(t).length){const{mensaje:o,estadoHttp:r,error:i}=await this.$store.dispatch("inmueble/listar",{cliente:e,estado:a,municipio:t});i&&(this.$store.commit("alerta/addAlertas",{mensaje:o,estado:r,error:i}),this.texto_sin_datos=i.response.data.error)}}}},Xo=Go,Jo=Object(y["a"])(Xo,qo,Ho,!1,null,null,null),Yo=Jo.exports,Ko=t("8dd9"),Qo=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{dense:"",justify:"center"}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[a(Ko["a"],{staticClass:"container"},[a("tabla-inmuebles",{attrs:{isMostrarMenuInmuebles:!1,ObjFiltrar:{isBtnFiltrar:!0,isAutocompleteCliente:!0},texto_sin_datos:"No se hallaron propiedades en los estados bajo su responsabilidad.",cabecera:e.cabecera,inmuebles:e.inmuebles,isCardCabecera:!0,is_mostrar_btn_actualizar:!0},on:{emitFiltro:e.inicializarInmueblesUsuarioCargo}})],1)],1)],1)},Zo=[],Wo={data:()=>({cabecera:[{value:"cliente",text:"Cliente",sortable:!1},{value:"clave",text:"Clave"},{text:"SIRH",value:"sirh"},{value:"nombre",text:"Inmueble"},{value:"estado.name",text:"Estado"},{value:"municipio.name",text:"Municipio"},{value:"direccion",text:"Direccion",sortable:!1},{text:"Acciones",value:"acciones",align:"center"}]}),components:{"tabla-inmuebles":Io},computed:{inmuebles(){return this.$store.getters["inmueble/getInmuebles"]},usuario(){return this.$store.getters["MOD_autenticacion/getUsuarioAutenticado"]}},created(){this.inicializarInmueblesUsuarioCargo({cliente:{},estado:{},municipio:{}})},methods:{async inicializarInmueblesUsuarioCargo({cliente:e,estado:a,municipio:t}){if(Object.keys(this.usuario).length||Object.keys(e).length||Object.keys(a).length||Object.keys(t).length){const{mensaje:o,http_estado:r,error:i}=await this.$store.dispatch("inmueble/listarInmueblesUsuarioCargo",{id_usuario:this.usuario.id,cliente:e,estado:a,municipio:t});i&&this.$store.commit("alerta/addAlertas",{mensaje:o,estado:r,error:i})}}}},er=Wo,ar=Object(y["a"])(er,Qo,Zo,!1,null,null,null),tr=ar.exports,or=t("56a4"),rr=function(){var e=this,a=e._self._c;return a(Da["a"],[a(Ha["a"],{attrs:{justify:"center"}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[a(Pt["a"],{model:{value:e.paso_formulario,callback:function(a){e.paso_formulario=a},expression:"paso_formulario"}},[a(Et["a"],[a(or["a"],{attrs:{step:"1"}},[e._v(" Paso 1 "),a("br"),e._v(" Cliente ")]),a(w["a"]),a(or["a"],{attrs:{step:"2"}},[e._v(" Paso 2 "),a("br"),e._v(" Inmuebles ")])],1),a(Et["b"],[a(Tt["a"],{attrs:{step:"1"}},[a("formulario-leer-inmuebles",{attrs:{is_cliente:e.is_cliente,is_clean_inmueble_verificados:e.is_clean_inmueble_verificados},on:{eventoContinuar:e.setValidP2}}),a("br"),a(d["a"],{attrs:{block:"",color:"success",disabled:!e.is_valido_paso_2||e.is_cargando},on:{click:function(a){e.paso_formulario=2}}},[e._v("Continuar")])],1),a(Tt["a"],{attrs:{step:"2"}},[a(d["a"],{attrs:{block:"",color:"primary"},on:{click:function(a){e.paso_formulario=1}}},[e._v("Regresar")]),a("br"),a("tabla-inmuebles",{attrs:{titulo_card:e.cliente.nombre,isCardCabecera:!0,cabecera:e.cabecera,inmuebles:e.inmuebles,texto_sin_datos:"Seleccione un archivo, para verificar los inmuebles.",obj_grupo_btn_verificar_inmuebles:{is_btn_borror_inmuebles_verificados:!0,is_btn_verificar_inmuebles:!0}},on:{emitBorrarInmueblesVerificados:e.setIsCleanInmueblesVerificados}})],1)],1)],1)],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[a("pasos-formulario",{attrs:{paso_formulario:e.paso_formulario,inmuebles:e.inmuebles},on:{emitBorrarInmueblesVerificados:e.setIsCleanInmueblesVerificados}})],1)],1)],1)},ir=[],sr=t("23a7"),nr=function(){var e=this,a=e._self._c;return a($["a"],{attrs:{outlined:""}},[a(_["d"],{staticClass:"grey lighten-2 ma-2"},[e._v(" Seleccionar Cliente y Archivo de Inmuebles ")]),a(_["c"],[a("br"),a(ot["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.is_valido_formulario,callback:function(a){e.is_valido_formulario=a},expression:"is_valido_formulario"}},[a(Ha["a"],[a(qa["a"],{attrs:{xl:"6",lg:"6",md:"6",sm:"12",xs:"12"}},[a(ro["a"],{attrs:{label:"Cliente*",rules:[e=>Boolean(Object.keys(e||{})[0])||"Es necesario elegir un cliente"],items:e.clientes,"item-text":"nombre","no-data-text":"No se encontraron estados.",outlined:"",filled:"",clearable:"",disabled:!e.is_cliente,"return-object":""},model:{value:e.cliente,callback:function(a){e.cliente=a},expression:"cliente"}})],1),a(qa["a"],{attrs:{xl:"6",lg:"6",md:"6",sm:"12",xs:"12"}},[a(sr["a"],{attrs:{accept:".xlsx",label:"Elige tu archivo",outlined:"",filled:"",rules:[e=>!!e||"Es necesario escoger un archivo de tipo .xlsx para verificar los inmuebles"],disabled:0===Object.keys(this.cliente).length},on:{change:e.cargar,"click:clear":function(a){return e.clearInmueblesVerificados()}},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(ua["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({attrs:{icon:"",color:"warning"}},"v-btn",o,!1),t),[a(m["a"],[e._v("mdi-alert")])],1)]}}])},[a("span",[e._v(" Los encabezados de la hoja de cálculo de Excel deben "),a("br"),e._v(" incluir la siguiente información sobre la propiedad."),a("br"),a("ul",[a("li",[e._v("Clave")]),a("li",[e._v("Clave 2 - SIRH - Convive (opcional)")]),a("li",[e._v("Nombre")]),a("li",[e._v("Estado")]),a("li",[e._v("Municipio")]),a("li",[e._v("Localidad (opcional)")]),a("li",[e._v("Dirección")])])])])]},proxy:!0}]),model:{value:e.archivo,callback:function(a){e.archivo=a},expression:"archivo"}})],1)],1)],1),a("confirmar-aviso",{attrs:{dialog:e.is_dialogo_aviso,tipo_mensaje:e.tipo_mensaje,obj_mensaje:e.mensaje,color:e.color},on:{emitConfirmarAviso:e.setDialogoAviso}})],1)],1)},cr=[],lr=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{persistent:"","max-width":"300"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a($["a"],{staticClass:"mx-auto"},[a(_["d"],{staticClass:"text-h6 grey lighten-2"},[e._v(" "+e._s(e.tipo_mensaje)+" ")]),a(_["c"],{staticClass:"mt-5"},[e._v(" "+e._s(e.obj_mensaje.mensaje)+" "),Object.keys(e.obj_mensaje.informacion).length?a(I["a"],{attrs:{subheader:""}},e._l(Object.keys(e.obj_mensaje.informacion),(function(t){return a(S["a"],{key:t,attrs:{dense:""}},[a(P["b"],[a(P["d"],[e._v(e._s(t.toUpperCase()))])],1),a(A["a"],[null===e.obj_mensaje.informacion[t]?a(m["a"],{attrs:{color:"error"}},[e._v("mdi-close")]):a(m["a"],{attrs:{color:"success"}},[e._v("mdi-check")])],1)],1)})),1):e._e()],1),a(_["a"],[a(n["a"]),a(d["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(a){return e.aceptarConfirmacion()}}},[e._v(" Aceptar ")])],1)],1)],1)},ur=[],dr={props:{dialog:{type:Boolean,default:!1},obj_mensaje:{type:Object,default:()=>({mensaje:"",informacion:{}})},tipo_mensaje:{type:String,default:""},color:{type:String,default:"primary"}},methods:{aceptarConfirmacion(){this.$emit("emitConfirmarAviso",{confirmacion:!1})}}},mr=dr,pr=Object(y["a"])(mr,lr,ur,!1,null,null,null),br=pr.exports,_r=t("8134"),gr={props:{is_cliente:{type:Boolean,default:!1},is_clean_inmueble_verificados:{type:Boolean,default:!1}},data:()=>({archivo:null,validacion:!1,is_dialogo_aviso:!1,tipo_mensaje:"",mensaje:{mensaje:"",informacion:{}},color:"warning"}),components:{"confirmar-aviso":br},computed:{cliente:{get(){return this.$store.getters["cliente/getCliente"]},set(e){null===e?this.$store.commit("cliente/cleanCliente"):this.$store.commit("cliente/setCliente",e),this.establecerEstadoInstrucciones()}},clientes(){return this.$store.getters["cliente/getClientes"]},inmuebles(){return this.$store.getters["inmueble/getInmueblesVerificados"]},verificarIn(){return this.$store.getters["inmueble/getVerificarInmuebles"]},is_cargando(){return this.$store.getters["inmueble/getCargando"]},is_valido_formulario:{get(){return this.validacion},set(e){this.$refs.formulario&&(this.$emit("eventoContinuar",{validacion:this.$refs.formulario.validate()}),this.validacion=e)}}},mounted(){this.establecerEstadoInstrucciones()},methods:{setDialogoAviso({confirmacion:e}){this.is_dialogo_aviso=e},async cargar(){var e=[];if(this.$refs.formulario.validate()){const{is_valido:a,cabecera:t}=await Object(_r["a"])(this.archivo).then(a=>{const t=this.getIndiceCabecera(a);if(-1==t.fila)return void console.log("Index_not_found");const{is_valido:o,cabecera:r}=this.setIndexCabecera(a[t.fila]);if(o)for(var i=t.fila+1;i<a.length;++i)e.push({cliente:this.cliente,nombre:null!=a[i][r.nombre]?a[i][r.nombre]:"",clave:null!=a[i][r.clave]?a[i][r.clave]:"",sirh:null!=a[i][r.sirh]?a[i][r.sirh]:"",direccion:null!=a[i][r.direccion]?a[i][r.direccion]:"Dirección no asignada.",estado:null!=a[i][r.estado]?a[i][r.estado]:"",municipio:null!=a[i][r.municipio]?a[i][r.municipio]:"",localidad:null!=a[i][r.localidad]?a[i][r.localidad]:""});return{is_valido:o,cabecera:r}});a?(this.$store.commit("inmueble/setVerificarInmuebles",e),await this.verificarInmuebles()):(this.tipo_mensaje="Faltan datos en la cabecera",this.mensaje.mensaje="No se encontraron los datos en la cabecera del Excel, para poder verificar los inmuebles.",this.mensaje.informacion=t,this.is_dialogo_aviso=!0,this.clearInmueblesVerificados(),this.archivo=null)}},async verificarInmuebles(){const{error:e,estado:a}=await this.$store.dispatch("inmueble/verificarInmuebles",this.verificarIn);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:`Se verificaron ${this.inmuebles.length} inmuebles.`,error:e}),null===e&&this.$store.commit("inmueble/updateArrayIntrucciones",{paso:0,sub_paso:1,instruccion:{icon:"mdi-check-circle",color:"success"}})},clearInmueblesVerificados(){this.$store.commit("inmueble/cleanInmueblesVerificados"),this.$store.commit("inmueble/cleanVerificarInmuebles"),this.$store.commit("inmueble/updateArrayIntrucciones",{paso:0,sub_paso:1,instruccion:{icon:"mdi-checkbox-blank-circle",color:"grey"}}),this.archivo=null,this.$refs.formulario.validate()},getIndiceCabecera(e){for(var a=0;a<e.length;++a){for(var t=0,o=0;o<e[a].length;++o){if(5==t)break;null==e[a][o]?t+=1:t=0}if(t<5)return{fila:a}}return{fila:-1}},normalizarPalabra(e){const a={"á":"a","é":"e","í":"i","ó":"o","ú":"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U"};return null===e||Number.isInteger(e)?"":e.split("").map(e=>a[e]||e).join("").toString().toLowerCase()},setIndexCabecera(e){var a={nombre:null,clave:null,direccion:-1,estado:null,municipio:null,localidad:-1,sirh:-1};e.forEach((e,t)=>{let o=this.normalizarPalabra(e);o.length&&("nombre"===o||"nombre del inmueble"===o?a.nombre=t:"clave"===o||"cr"===o||"codigo"===o||"id"===o||"id inmueble"===o?a.clave=t:"direccion"===o||"calle y numero"===o?a.direccion=t:"edo."===o||"estado"===o?a.estado=t:"municipio"===o||"municipio"===o?a.municipio=t:"ciudad"===o||"localidad"===o?a.localidad=t:"convive"!==o&&"sirh"!==o&&"convivencia"!==o||(a.sirh=t))});const t=Object.values(a),o=void 0===t.find(e=>null===e);return{is_valido:o,cabecera:a}},establecerEstadoInstrucciones(){let e={paso:0,sub_paso:0,instruccion:{icon:"mdi-checkbox-blank-circle",color:"grey"}};Object.keys(this.cliente).length&&(e.instruccion={icon:"mdi-check-circle",color:"success"}),this.$store.commit("inmueble/updateArrayIntrucciones",e)}},watch:{is_clean_inmueble_verificados(){this.clearInmueblesVerificados()}}},fr=gr,hr=Object(y["a"])(fr,nr,cr,!1,null,null,null),vr=hr.exports,yr=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto"},[a(_["d"],{staticClass:"grey lighten-2"},[e._v("Ayuda")]),a(Pt["a"],{attrs:{elevation:"0"},model:{value:e.paso_formulario,callback:function(a){e.paso_formulario=a},expression:"paso_formulario"}},[a(Et["b"],[a(Tt["a"],{attrs:{step:"1"}},[a("table",[a("tr",[a("td",{staticStyle:{width:"20%"}},[a(m["a"],{attrs:{color:e.array_instrucciones[0][0].color}},[e._v(e._s(e.array_instrucciones[0][0].icon))])],1),a("td",{staticStyle:{width:"80%"}},[e._v(e._s(e.array_instrucciones[0][0].text))])]),a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[0][1].color}},[e._v(e._s(e.array_instrucciones[0][1].icon))])],1),a("td",[e._v(e._s(e.array_instrucciones[0][1].text))])]),a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[0][2].color}},[e._v(e._s(e.array_instrucciones[0][2].icon))])],1),a("td",[e._v(e._s(e.array_instrucciones[0][2].text))])])])]),a(Tt["a"],{attrs:{step:"2"}},[a("table",[e.inmuebles.length?e._e():a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[1][0].color}},[e._v(e._s(e.array_instrucciones[1][0].icon))])],1),a("td",[e._v(" "+e._s(e.array_instrucciones[1][0].text)+" ")])]),e.inmuebles.length?a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[1][1].color}},[e._v(e._s(e.array_instrucciones[1][1].icon))])],1),a("td",[e._v(" "+e._s(e.array_instrucciones[1][1].text)+" ")])]):e._e(),e.inmuebles.length?a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[1][2].color}},[e._v(e._s(e.array_instrucciones[1][2].icon))])],1),a("td",[e._v(" "+e._s(e.array_instrucciones[1][2].text)+" ")])]):e._e(),a("tr",[a("td",{staticStyle:{width:"20"}},[a(m["a"],{attrs:{color:e.array_instrucciones[1][3].color}},[e._v(e._s(e.array_instrucciones[1][3].icon))])],1),a("td",{staticStyle:{width:"80%"}},[e._v(" "+e._s(e.array_instrucciones[1][3].text)+" ")])])])])],1)],1),a(w["a"]),a(_["a"],[a(n["a"]),a(d["a"],{attrs:{color:"error"},on:{click:function(a){return e.salirFormularioCrearMultiplesInmuebles()}}},[e._v("Cancelar")])],1)],1)},jr=[],xr={props:{paso_formulario:{type:Number,default:1},inmuebles:{type:Array,default:()=>[]}},computed:{array_instrucciones(){return this.$store.getters["inmueble/getArrayIntruccionesFormulario"]}},methods:{salirFormularioCrearMultiplesInmuebles(){this.$store.commit("inmueble/cleanInmueblesVerificados"),this.$store.commit("inmueble/cleanVerificarInmuebles"),this.$emit("emitBorrarInmueblesVerificados"),this.$router.go(-1)}}},Cr=xr,kr=Object(y["a"])(Cr,yr,jr,!1,null,null,null),$r=kr.exports,wr={props:{is_cliente:{type:Boolean,default:!0}},components:{"formulario-leer-inmuebles":vr,"tabla-inmuebles":Io,"pasos-formulario":$r},data:()=>({cabecera:[{value:"status",text:"Status"},{value:"clave",text:"Clave",sortable:!1},{value:"sirh",text:"SIRH"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"direccion",text:"Direccion"},{value:"accion",text:"Act. & Eli.",align:"center"}],paso_formulario_now:1,is_valido_continuar_paso_2:!1,is_clean_inmueble_verificados:!1}),computed:{cliente(){return this.$store.getters["cliente/getCliente"]},inmuebles(){return this.$store.getters["inmueble/getInmueblesVerificados"]},is_cargando(){return this.$store.getters["inmueble/getCargando"]},paso_formulario:{get(){return this.paso_formulario_now},set(e){this.paso_formulario_now=e}},is_valido_paso_2:{get(){return this.is_valido_continuar_paso_2},set(e){this.is_valido_continuar_paso_2=e;let a={paso:0,sub_paso:2,instruccion:{icon:"mdi-checkbox-blank-circle",color:"grey"}};e&&(a.instruccion={icon:"mdi-arrow-right-bold-circle",color:"primary"}),this.$store.commit("inmueble/updateArrayIntrucciones",a)}}},methods:{setValidP2({validacion:e}){this.is_valido_paso_2=e},setIsCleanInmueblesVerificados(){this.is_clean_inmueble_verificados=!this.is_clean_inmueble_verificados}}},Ir=wr,Sr=Object(y["a"])(Ir,rr,ir,!1,null,null,null),Ar=Sr.exports,Pr=function(){var e=this,a=e._self._c;return a("asignar-trabajos")},Tr=[],Er=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{dense:"",justify:"center"}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[a(Pt["a"],{model:{value:e.paso_formulario,callback:function(a){e.paso_formulario=a},expression:"paso_formulario"}},[a(Et["a"],[a(or["a"],{attrs:{complete:e.paso_formulario>1,step:"1"}},[e._v(" Paso 1 "),a("br"),e._v(" Inmuebles ")]),a(w["a"]),a(or["a"],{attrs:{complete:e.paso_formulario>2,step:"2"}},[e._v(" Paso 2 "),a("br"),e._v(" Datos genereales ")]),a(w["a"]),a(or["a"],{attrs:{step:"3"}},[e._v(" Paso 3 "),a("br"),e._v(" Asignar ")])],1),a(Et["b"],[a(Tt["a"],{attrs:{step:"1"}},[a("tabla-inmuebles",{attrs:{isMostrarSeleccion:!0,isMostrarMenuInmuebles:!1,obj_filtrar_inmueble:e.obj_filtrar_inmueble,cabecera:e.cabecera,inmuebles:e.inmuebles,isCardCabecera:!0,tabla_height:350},on:{emitFiltro:e.eventFiltro}}),a("br"),a(d["a"],{attrs:{color:"success",block:"",disabled:!e.is_inmuebles_seleccionados},on:{click:function(a){e.paso_formulario=2}}},[e._v(" Continuar ")])],1),a(Tt["a"],{attrs:{step:"2"}},[a(d["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.paso_formulario=1}}},[e._v(" Regresar ")]),a("br"),a("formulario-crear-trabajo",{on:{emitFormulario:e.setDeshabilitarBtnDos}}),a("br"),a(d["a"],{attrs:{color:"primary",block:"",disabled:e.deshabilitar_btn_dos},on:{click:function(a){return e.irPasoTres()}}},[e._v(" Continuar ")])],1),a(Tt["a"],{attrs:{step:"3"}},[a(d["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.paso_formulario=2}}},[e._v(" Regresar ")]),a("br"),a("confirmar-trabajos-verificados"),a("br")],1)],1)],1)],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[a("pasos-formulario",{attrs:{paso_formulario:e.paso_formulario},on:{emitCancelarFormulario:e.aciveDialogoAlertaFormulario}})],1),a("dialogo-alerta-formulario",{attrs:{dialogo:e.dialogoAlertaFormulario,tipo_mensaje:"Formulario crear múltiples trabajos",mensaje:"Estás a punto de borrar toda la información. ¿Estás seguro?"},on:{emitConfirmacion:e.setDialogoAlertaFormulario}})],1)},Or=[],Mr=t("1f4f"),Fr=t("7efd"),Dr=t("9dbe"),Vr=t("aac8"),Nr=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Formulario para asignación y verificación de trabajos. ")]),a(Ha["a"],{staticClass:"container",attrs:{justify:"space-around",dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a($["a"],{attrs:{outlined:""}},[a(_["c"],[a(ot["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Ha["a"],{attrs:{"no-gutters":""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(At["a"],{attrs:{label:"Proyecto",items:e.proyectos,rules:[e=>Boolean(Object.keys(e||{})[0])||"Se debe escoger un proyecto"],"item-text":"nombre",loading:e.isCargando,"no-data-text":"Proyectos no disponibles",clearable:"","return-object":"",outlined:"",filled:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(m["a"],{attrs:{color:"success"},on:{click:function(a){e.isDialogCrearNuevoProyecto=!0}}},[e._v("mdi-plus-circle")])]},proxy:!0}]),model:{value:e.proyecto,callback:function(a){e.proyecto=a},expression:"proyecto"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(At["a"],{attrs:{label:"Conceptos",items:e.conceptos,rules:[e=>!!e.length>0||"Se debe elejir por lo menos un concepto"],"item-text":"nombre","return-object":"","no-data-text":"No se hallaron conceptos vinculadas al proyecto.",loading:e.isCargandoConcepto,"small-chips":"",multiple:"",outlined:"",clearable:"",disabled:!Object.hasOwn(e.proyecto,"id"),filled:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(m["a"],{attrs:{disabled:!Object.hasOwn(e.proyecto,"id"),color:"success"},on:{click:function(a){e.isDialogCrearNuevoConcepto=!0}}},[e._v("mdi-plus-circle")])]},proxy:!0}]),model:{value:e.conceptos_seleccionados,callback:function(a){e.conceptos_seleccionados=a},expression:"conceptos_seleccionados"}})],1)],1)],1)],1)],1),a(Ha["a"],{attrs:{"no-gutters":""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a("div",{staticClass:"container text-center"},[a(d["a"],{attrs:{text:"",disabled:!e.conceptos_seleccionados.length},on:{click:e.agregar}},[e._v(" Asingnar todos "),a(m["a"],{attrs:{right:""}},[e._v("mdi-chevron-right")])],1)],1)])],1)],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(Ko["a"],{staticClass:"container",attrs:{color:"primary"}},[a(Fr["b"],{attrs:{mandatory:"","show-arrows":""},model:{value:e.tab_inmueble,callback:function(a){e.tab_inmueble=a},expression:"tab_inmueble"}},e._l(e.array_trabajos_no_verificados,(function({inmueble:t}){return a(Dr["a"],{key:t.id,scopedSlots:e._u([{key:"default",fn:function({active:o,toggle:r}){return[a(d["a"],{staticClass:"mx-2",attrs:{"input-value":o,"active-class":"black white--text",rounded:"",depressed:""},on:{click:r}},[e._v(" "+e._s(t.nombre)+"("+e._s(t.clave)+"-"+e._s(t.sirh)+")")])]}}],null,!0)})})),1)],1),a(Vr["a"],{model:{value:e.tab_inmueble,callback:function(a){e.tab_inmueble=a},expression:"tab_inmueble"}},e._l(e.array_trabajos_no_verificados,(function(t,o){return a(Xa["a"],{key:o},[a($["a"],{staticClass:"mx-auto"},[a(_["c"],[a(Mr["a"],{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",{staticStyle:{position:"sticky",top:"0","z-index":"1","background-color":"white"}},[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[e._v("Proyecto")]),a("th",{staticStyle:{"text-align":"center"}},[e._v("Trabajo")]),a("th",{staticStyle:{"text-align":"center"}},[e._v("Eliminar")])])]),t.conceptos.length?a("tbody",e._l(t.conceptos,(function(t,r){return a("tr",{key:r},[a("td",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.proyecto))]),a("td",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.nombre))]),a("td",{staticStyle:{"text-align":"center"}},[a(d["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.eliminarConceptoInmueble(o,r)}}},[a(m["a"],[e._v("mdi-delete")])],1)],1)])})),0):a("tbody",{staticStyle:{"text-align":"center"}},[a("tr",[a("td",{attrs:{colspan:"3"}},[e._v("Elija al menos un concepto y haga clic en 'Asignar todos'.")])])])]},proxy:!0}],null,!0)})],1)],1)],1)})),1)],1),a(Ha["a"],{attrs:{"no-gutters":""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a("div",{staticClass:"container text-center"},[a(d["a"],{attrs:{text:""},on:{click:function(a){return e.eliminarConceptos()}}},[a(m["a"],{attrs:{left:""}},[e._v("mdi-chevron-left")]),e._v(" Eliminar todos ")],1)],1)])],1)],1)],1),a("formulario-crear-nuevo-proyecto",{attrs:{dialog:e.isDialogCrearNuevoProyecto},on:{emitDialog:e.setDialogoFormularioCrearNuevoProyecto}}),a("formulario-crear-nuevo-concepto",{attrs:{dialogo:e.isDialogCrearNuevoConcepto},on:{emitDialogo:e.setDialogoFormularioCrearNuevoConcepto}})],1)},Rr=[],zr=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a(Ko["a"],{staticClass:"container"},[a($["a"],{staticClass:"mx-auto",attrs:{outlined:"",loading:e.cargando}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Crear un nuevo concepto "),a(n["a"]),a(d["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(_["b"],{staticClass:"grey lighten-2"},[e._v(e._s(e.proyecto.nombre))]),a(_["c"],[a("br"),a(ot["a"],{ref:"form_crear_nuevo_concepto",attrs:{"lazy-validation":""},model:{value:e.valido_form,callback:function(a){e.valido_form=a},expression:"valido_form"}},[a(Va["a"],{attrs:{label:"Nombre del concepto",filled:"",outlined:"",clearable:"",dense:"",rules:e.concepto_reglas},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}})],1)],1),a(_["a"],[a(d["a"],{attrs:{color:"green white--text",block:"",disabled:!e.valido_form},on:{click:function(a){return e.create(t)}}},[e._v("Crear")])],1)],1)],1)]}}]),model:{value:e.dialogo,callback:function(a){e.dialogo=a},expression:"dialogo"}})},Ur=[],Br={props:{dialogo:{type:Boolean,default:!1}},data:()=>({concepto_nombre:"",concepto_reglas:[e=>!!e||"Escribe el nombre del concepto.",e=>e&&3<=e.length||"El nombre del concepto debe tener 3 caracteres o más."],valido_form:!0}),computed:{proyecto(){return this.$store.getters["proyecto/getProyecto"]},isProyecto(){return Boolean(Object.keys(this.proyecto).length)},nombre:{get(){return this.concepto_nombre},set(e){this.concepto_nombre=null==e?"":e}},cargando(){return this.$store.getters["proyecto/getCargando"]}},methods:{async create(e){if(this.$refs.form_crear_nuevo_concepto.validate()){const{nombre:a,proyecto:t}=this,{mensaje:o,estado:r,error:i}=await this.$store.dispatch("proyecto/crearConcepto",{nombre:a,proyecto:t.id});this.$store.commit("alerta/addAlertas",{estado:r,mensaje:o,error:i}),i||this.cerrrarDialogo(e)}},cerrrarDialogo(e){e.value=!1,this.$emit("emitDialogo",{dialogo:!1}),this.$refs.form_crear_nuevo_concepto.reset()}}},Lr=Br,qr=Object(y["a"])(Lr,zr,Ur,!1,null,null,null),Hr=qr.exports,Gr=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a(Ko["a"],{staticClass:"container"},[a($["a"],{staticClass:"mx-auto",attrs:{loading:e.cargando,outlined:""}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Crear un nuevo proyecto "),a(n["a"]),a(d["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t,!1)}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(_["c"],[a("br"),a(ot["a"],{ref:"form_crear_nuevo_proyecto",attrs:{"lazy-validation":""},model:{value:e.valido_form,callback:function(a){e.valido_form=a},expression:"valido_form"}},[a(Va["a"],{attrs:{label:"Nombre del proyecto",filled:"",outlined:"",clearable:"",dense:"",rules:e.proyecto_reglas,required:""},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}})],1)],1),a(_["a"],[a(d["a"],{attrs:{color:"green white--text",disabled:!e.valido_form,block:""},on:{click:function(a){return e.crear(t)}}},[e._v("Crear")])],1)],1)],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}})},Xr=[],Jr={props:{dialog:{type:Boolean,default:!1}},data:()=>({nombre_proyecto:"",proyecto_reglas:[e=>!!e||"Escribe el nombre del proyecto.",e=>e&&3<=e.length||"El nombre del proyecto debe tener 3 caracteres o más."],valido_form:!0}),computed:{cargando(){return this.$store.getters["proyecto/getCargando"]},nombre:{get(){return this.nombre_proyecto},set(e){this.nombre_proyecto=null==e?"":e}}},methods:{async crear(e){if(this.$refs.form_crear_nuevo_proyecto.validate()){const{nombre:a}=this,{mensaje:t,estado:o,error:r}=await this.$store.dispatch("proyecto/crearProyecto",a);this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r}),r||this.cerrrarDialogo(e,!0)}},cerrrarDialogo(e,a){e.value=!1,this.$emit("emitDialog",{dialog:!1,proyecto_creado:a}),this.$refs.form_crear_nuevo_proyecto.reset()}}},Yr=Jr,Kr=Object(y["a"])(Yr,Gr,Xr,!1,null,null,null),Qr=Kr.exports,Zr={data:()=>({valid:!0,conceptos_seleccionados:[],isDialogCrearNuevoProyecto:!1,isDialogCrearNuevoConcepto:!1,tab_inmueble:null}),components:{"formulario-crear-nuevo-concepto":Hr,"formulario-crear-nuevo-proyecto":Qr},computed:{proyectos(){return this.$store.getters["proyecto/getProyectos"]},proyecto:{get(){return this.$store.getters["proyecto/getProyecto"]},async set(e){e?(this.$store.dispatch("proyecto/obtenerProyecto",e),this.obtenerConceptos(e)):this.$store.commit("proyecto/cleanProyecto")}},conceptos(){return this.$store.getters["proyecto/getConceptos"]},inmuebles_seleccionados(){return this.$store.getters["inmueble/getInmueblesSeleccionados"]},isCargando(){return this.$store.getters["proyecto/getCargando"]},isCargandoConcepto(){return this.$store.getters["proyecto/getCargandoConceptos"]},array_trabajos_no_verificados(){return this.$store.getters["trabajo/getTrabajosNoVerificados"]},array_trabajos_verificados(){return this.$store.getters["trabajo/getTrabajosVerificados"]},paso_formulario(){return this.$store.getters["trabajo/getPasoFormulario"]}},created(){this.inicializarProyectos()},methods:{async agregar(){let e=this.array_trabajos_no_verificados.map(e=>({inmueble:e.inmueble,conceptos:this.conceptos_seleccionados.map(e=>e)}));this.$store.commit("trabajo/setTrabajosNoVerificados",e)},eliminarConceptos(){let e=this.array_trabajos_no_verificados.map(e=>({inmueble:e.inmueble,conceptos:[]}));this.$store.commit("trabajo/setTrabajosNoVerificados",e)},async inicializarProyectos(){await this.$store.dispatch("proyecto/obtenerProyectos")},async obtenerConceptos({id:e}){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("proyecto/obtenerConceptos",e);o&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o})},setDialogoFormularioCrearNuevoProyecto({dialog:e,proyecto_creado:a}){this.isDialogCrearNuevoProyecto=e,a&&(this.$store.commit("proyecto/cleanConcepto"),this.$store.commit("proyecto/cleanConceptos"))},setDialogoFormularioCrearNuevoConcepto({dialogo:e}){this.isDialogCrearNuevoConcepto=e},eliminarConceptoInmueble(e,a){this.$store.commit("trabajo/deleteConceptoTrabajosNoVerificados",{indice_inmueble:e,indice_concepto:a}),this.$emit("emitFormulario",{is_valido:this.isVerificarTrabajosNoVerif(this.array_trabajos_no_verificados)})},isVerificarTrabajosNoVerif(e){if(e.length){for(const{conceptos:a}of e)if(!a.length)return!1;return!0}return!1}},watch:{paso_formulario(e){if(2===e){const{array_trabajos_no_verificados:e}=this;let a=[];if(0===e.length)a=this.inmuebles_seleccionados.map(e=>({inmueble:e,conceptos:[]}));else{const t=this.inmuebles_seleccionados.map(e=>e.id);if(t.length<e.length)for(const o of e)t.includes(o.inmueble.id)&&a.push(o);else{const t=e.map(({inmueble:e})=>e.id);let o=[];for(const e of this.inmuebles_seleccionados)t.includes(e.id)||o.push({inmueble:e,conceptos:[]});a=e.concat(o)}}this.$store.commit("trabajo/setTrabajosNoVerificados",a)}},array_trabajos_no_verificados(e){this.$emit("emitFormulario",{is_valido:this.isVerificarTrabajosNoVerif(e)})}}},Wr=Zr,ei=Object(y["a"])(Wr,Nr,Rr,!1,null,null,null),ai=ei.exports,ti=t("b73d"),oi=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(Ko["a"],{staticClass:"container",attrs:{color:"primary"}},[a(Fr["b"],{attrs:{mandatory:"","show-arrows":""},model:{value:e.tab_inmueble,callback:function(a){e.tab_inmueble=a},expression:"tab_inmueble"}},e._l(e.trabajos_verificados,(function({inmueble:t}){return a(Dr["a"],{key:t.id,scopedSlots:e._u([{key:"default",fn:function({active:o,toggle:r}){return[a(d["a"],{staticClass:"mx-2",attrs:{"input-value":o,"active-class":"black white--text",rounded:"",depressed:""},on:{click:r}},[e._v(" "+e._s(t.name)+"("+e._s(t.property_key)+"-"+e._s(t.sirh)+") ")])]}}],null,!0)})})),1)],1),e.trabajos_verificados.length?a(_["d"],[a(n["a"]),e._v(" "),a(d["a"],{attrs:{color:"success"},on:{click:e.crearTrabajosVerificados}},[e._v("Crear trabajos")])],1):e._e(),a(Vr["a"],{model:{value:e.tab_inmueble,callback:function(a){e.tab_inmueble=a},expression:"tab_inmueble"}},e._l(e.trabajos_verificados,(function({inmueble:t,conceptos:o},r){return a(Xa["a"],{key:r},[a(Mr["a"],{scopedSlots:e._u([{key:"top",fn:function(){return[e._v(" "+e._s(t.province)+" "+e._s(t.municipality)+" ")]},proxy:!0},{key:"default",fn:function(){return[a("thead",{staticStyle:{position:"sticky",top:"0","z-index":"1","background-color":"white"}},[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[e._v("Trabajo")]),a("th",{staticStyle:{"text-align":"center"}},[e._v("Mensaje")]),a("th",{staticStyle:{"text-align":"center"}},[e._v("Confirmacion")]),a("th",{staticStyle:{"text-align":"center"}},[e._v("Eliminar")])])]),o.length?a("tbody",e._l(o,(function({concept:t,message:o,confirmation:i},s){return a("tr",{key:s},[a("td",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.name)+" ("),a("b",[e._v(e._s(t.project))]),e._v(")")]),a("td",{staticStyle:{"text-align":"center"}},[e._v(e._s(o))]),a("td",{staticStyle:{"text-align":"center"}},[a(ti["a"],{attrs:{"input-value":i,inset:"",color:"success",disabled:""}})],1),a("td",{staticStyle:{"text-align":"center"}},[a(d["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.eliminarConceptoInmueble(r,s)}}},[a(m["a"],{attrs:{large:""}},[e._v("mdi-delete")])],1)],1)])})),0):a("tbody",{staticStyle:{"text-align":"center"}},[a("tr",[a("td",{attrs:{colspan:"3"}},[e._v("Elija al menos un concepto y haga clic en 'Asignar todos'.")])])])]},proxy:!0}],null,!0)})],1)})),1),e.trabajos_verificados.length?e._e():a(_["c"],[a(Ha["a"],[a(qa["a"],{attrs:{cols:"12"}},[a(d["a"],{attrs:{block:"",color:"primary"},on:{click:function(a){return e.irPasoUno()}}},[e._v("Continuar asignado trabajo a los inmuebles (Paso 1).")])],1),a(qa["a"],{attrs:{cols:"12"}},[a(d["a"],{attrs:{block:"",color:"warning"},on:{click:function(a){return e.salirFormulario()}}},[e._v("Ir a ver trabajos")])],1)],1)],1)],1)},ri=[],ii={data:()=>({tab_inmueble:null}),components:{},computed:{trabajos_verificados(){return this.$store.getters["trabajo/getTrabajosVerificados"]}},methods:{eliminarConceptoInmueble(e,a){this.$store.commit("trabajo/spliceConceptoInmueble",{indice_inmueble:e,indice_concepto:a})},async crearTrabajosVerificados(){const{error:e,estado:a,mensaje:t}=await this.$store.dispatch("trabajo/crearTrabajosVerificados",this.trabajos_verificados);e||this.$store.commit("trabajo/cleanTrabajosVerificados"),this.$store.commit("alerta/addAlertas",{estado:a,mensaje:t,error:e})},irPasoUno(){this.$store.commit("trabajo/cleanFormularioAsignarTrabajosInmuebles")},salirFormulario(){this.$router.go(-1)}}},si=ii,ni=Object(y["a"])(si,oi,ri,!1,null,null,null),ci=ni.exports,li=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{persistent:"","max-width":"300"},model:{value:e.dialogo,callback:function(a){e.dialogo=a},expression:"dialogo"}},[a($["a"],{staticClass:"mx-auto"},[a(_["d"],{staticClass:"text-h6 grey lighten-2"},[e._v(" "+e._s(e.tipo_mensaje)+" ")]),a(_["c"],[e._v(e._s(e.mensaje))]),a(_["a"],[a(n["a"]),a(d["a"],{attrs:{color:"error darken-1",text:""},on:{click:function(a){return e.cerrrarDialogo()}}},[e._v(" Cancelar ")]),a(d["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(a){return e.aceptarConfirmacion()}}},[e._v(" Aceptar ")])],1)],1)],1)},ui=[],di={props:{mensaje:{type:String,default:""},tipo_mensaje:{type:String,default:""},dialogo:{type:Boolean,default:!1}},methods:{aceptarConfirmacion(){this.$emit("emitConfirmacion",{confirmacion:!0,dialogo:!1})},cerrrarDialogo(){this.$emit("emitConfirmacion",{confirmacion:!1,dialogo:!1})}}},mi=di,pi=Object(y["a"])(mi,li,ui,!1,null,null,null),bi=pi.exports,_i=function(){var e=this,a=e._self._c;return a(Ko["a"],{staticClass:"container"},[a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v("Ayuda")]),a(Pt["a"],{attrs:{elevation:"0"},model:{value:e.paso_formulario,callback:function(a){e.paso_formulario=a},expression:"paso_formulario"}},[a(Et["b"],[a(Tt["a"],{attrs:{step:"1"}},[a("table",[a("tr",[a("td",{staticStyle:{width:"20%"}},[a(m["a"],{attrs:{color:e.array_instrucciones[0][0].color}},[e._v(e._s(e.array_instrucciones[0][0].icon))])],1),a("td",{staticStyle:{width:"80%"}},[e._v(e._s(e.array_instrucciones[0][0].text))])]),a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[0][1].color}},[e._v(e._s(e.array_instrucciones[0][1].icon))])],1),a("td",[e._v(e._s(e.array_instrucciones[0][1].text))])])])]),a(Tt["a"],{attrs:{step:"2"}},[a("table",[a("tr",[a("td",{staticStyle:{width:"20%"}},[a(m["a"],{attrs:{color:e.array_instrucciones[1][0].color}},[e._v(e._s(e.array_instrucciones[1][0].icon))])],1),a("td",{staticStyle:{width:"80%"}},[e._v(e._s(e.array_instrucciones[1][0].text))])]),a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[1][1].color}},[e._v(e._s(e.array_instrucciones[1][1].icon))])],1),a("td",[e._v(e._s(e.array_instrucciones[1][1].text))])]),a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[1][2].color}},[e._v(e._s(e.array_instrucciones[1][2].icon))])],1),a("td",[e._v(e._s(e.array_instrucciones[1][2].text))])]),a("tr",[a("td",[a(m["a"],{attrs:{color:e.array_instrucciones[1][3].color}},[e._v(e._s(e.array_instrucciones[1][3].icon))])],1),a("td",[e._v(e._s(e.array_instrucciones[1][3].text))])])])])],1)],1),a(w["a"]),a(_["a"],[a(n["a"]),a(d["a"],{attrs:{color:"error"},on:{click:function(a){return e.salirFormularioCrearMultiplesInmuebles()}}},[e._v("Cancelar")])],1)],1)],1)},gi=[],fi={props:{paso_formulario:{type:Number,default:1}},computed:{array_instrucciones(){return this.$store.getters["trabajo/get_array_intrucciones_formulario_trabajos"]}},methods:{salirFormularioCrearMultiplesInmuebles(){this.$emit("emitCancelarFormulario")}}},hi=fi,vi=(t("491a"),Object(y["a"])(hi,_i,gi,!1,null,null,null)),yi=vi.exports,ji={props:{obj_filtrar_inmueble:{type:Object,default:()=>({show_btn_filtrar_inmueble:!1,deshabilitar_autocomplete_cliente:!1})}},data:()=>({deshabilitar_btn_dos:!1,dialogoAlertaFormulario:!1,cabecera:[{value:"cliente",text:"Cliente",sortable:!1},{value:"clave",text:"Clave"},{value:"sirh",text:"SIRH"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"direccion",text:"Direccion",sortable:!1}]}),components:{"tabla-inmuebles":Io,"formulario-crear-trabajo":ai,"confirmar-trabajos-verificados":ci,"dialogo-alerta-formulario":bi,"pasos-formulario":yi},computed:{is_inmuebles_seleccionados(){return!!this.$store.getters["inmueble/getInmueblesSeleccionados"].length},cliente(){return this.$store.getters["cliente/getCliente"]},inmuebles(){return this.$store.getters["inmueble/getInmuebles"]},paso_formulario:{get(){return this.$store.getters["trabajo/getPasoFormulario"]},set(e){this.$store.commit("trabajo/setPasoFormulario",e)}},array_trabajos_no_verificados(){return this.$store.getters["trabajo/getTrabajosNoVerificados"]},is_trabajos_verificados(){return!!this.$store.getters["trabajo/getTrabajosVerificados"].length}},methods:{setDeshabilitarBtnDos({is_valido:e}){this.deshabilitar_btn_dos=!e;let a={paso:1,sub_paso:3,instruccion:{icon:"mdi-checkbox-blank-circle",color:"grey"}};e&&(a.instruccion={icon:"mdi-arrow-right-bold-circle",color:"primary"}),this.$store.commit("trabajo/updateArrayIntrucciones",a)},aciveDialogoAlertaFormulario(){this.dialogoAlertaFormulario=!0},setDialogoAlertaFormulario({confirmacion:e,dialogo:a}){e&&this.cancelarAsignacion(),this.dialogoAlertaFormulario=a},async irPasoTres(){if(!this.deshabilitar_btn_dos){this.paso_formulario=3;const{mensaje:e,error:a,estado:t}=await this.$store.dispatch("trabajo/verificarTrabajos",this.array_trabajos_no_verificados);this.$store.commit("trabajo/cleanTrabajosNoVerificados"),this.$store.commit("alerta/addAlertas",{estado:t,mensaje:e,error:a}),a&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:e,error:a})}},cancelarAsignacion(){this.$store.commit("inmueble/cleanInmueblesSeleccionados"),this.$store.commit("trabajo/cleanFormularioAsignarTrabajosInmuebles"),this.$router.go(-1)},eventFiltro({cliente:e,estado:a,municipio:t}){this.$emit("emitFiltro",{cliente:e,estado:a,municipio:t})},cambiarEsatdoInstruccion(e){let a={paso:0,sub_paso:0,instruccion:{icon:"mdi-checkbox-blank-circle",color:"grey"}},t={paso:0,sub_paso:1,instruccion:{icon:"mdi-checkbox-blank-circle",color:"grey"}};e&&(a.instruccion={icon:"mdi-check-circle",color:"success"},t.instruccion={icon:"mdi-arrow-right-bold-circle",color:"primary"}),this.$store.commit("trabajo/updateArrayIntrucciones",a),this.$store.commit("trabajo/updateArrayIntrucciones",t)}},watch:{is_inmuebles_seleccionados(e){this.cambiarEsatdoInstruccion(e)}}},xi=ji,Ci=Object(y["a"])(xi,Er,Or,!1,null,null,null),ki=Ci.exports,$i={components:{"asignar-trabajos":ki}},wi=$i,Ii=Object(y["a"])(wi,Pr,Tr,!1,null,null,null),Si=Ii.exports,Ai=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{sm:"10",md:"10",lg:"10",xl:"10"}},[a("asignar-trabajos",{attrs:{obj_filtrar_inmueble:{show_btn_filtrar_inmueble:e.show_btn_filtrar_inmueble,deshabilitar_autocomplete_cliente:e.deshabilitar_autocomplete_cliente}},on:{emitFiltro:e.inicializarInmuebles}})],1)},Pi=[],Ti={components:{"asignar-trabajos":ki},data:()=>({show_btn_filtrar_inmueble:!0,deshabilitar_autocomplete_cliente:!1}),computed:{cliente(){return this.$store.getters["cliente/getCliente"]}},created(){this.inicializarInmuebles({cliente:this.cliente,estado:{},municipio:{}})},methods:{async inicializarInmuebles({cliente:e,estado:a,municipio:t}){if(Object.keys(this.cliente).length||Object.keys(a).length||Object.keys(t).length){this.$store.commit("inmueble/cleanInmueblesSeleccionados");const{mensaje:o,estadoHttp:r,error:i}=await this.$store.dispatch("inmueble/listar",{cliente:e,estado:a,municipio:t});i&&this.$store.commit("alerta/addAlertas",{mensaje:o,estado:r,error:i})}}}},Ei=Ti,Oi=Object(y["a"])(Ei,Ai,Pi,!1,null,null,null),Mi=Oi.exports,Fi=function(){var e=this,a=e._self._c;return a("asignar-trabajos")},Di=[],Vi={components:{"asignar-trabajos":ki}},Ni=Vi,Ri=Object(y["a"])(Ni,Fi,Di,!1,null,null,null),zi=Ri.exports,Ui=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{dense:"",justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"8"}},[a(Ko["a"],{staticClass:"container"},[a("tabla-trabajos-usuario",{attrs:{is_peticion:!0,headers:e.headers,objAsignar:{isAsignarBtn:!0,deshabilitar:!1,redireccionar:"asignar-trabajos"}}})],1)],1)],1)},Bi=[],Li={data:()=>({headers:[{text:"Proyecto",value:"proyecto"},{text:"Concepto",value:"concepto"},{text:"Status",value:"status"},{text:"Inmueble",value:"inmueble.nombre"},{value:"inmueble.clave",align:" d-none"},{value:"inmueble",text:"Ubicación del inmueble"},{value:"inmueble.municipio.name",align:" d-none"},{value:"inmueble.municipio",text:"Usuario en campo"},{text:"Creado",value:"creado"},{text:"Actualizado",value:"modificado"}]}),components:{"tabla-trabajos-usuario":Yt},created(){this.inicializarTrabajos({usuario_campo:null,usuario_cargo:this.username})},computed:{username(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},methods:{async inicializarTrabajos({usuario_campo:e,usuario_cargo:a}){this.$store.commit("trabajo/cleanTrabajos");const{mensaje:t,estado:o,error:r}=await this.$store.dispatch("trabajo/obtenerTrabajosUsuario",{usuario_campo:e,usuario_cargo:a});r&&this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r})}}},qi=Li,Hi=(t("2df6"),Object(y["a"])(qi,Ui,Bi,!1,null,null,null)),Gi=Hi.exports,Xi=function(){var e=this,a=e._self._c;return a(Ha["a"],[a(Ha["a"],{attrs:{justify:"center"}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"10",lg:"10",xl:"10"}},[a($["a"],{attrs:{outlined:""}},[a(_["d"],{staticClass:"justify-center"},[e._v(" "+e._s(e.inmueble.nombre)+" ("+e._s(e.inmueble.clave)+") ")])],1)],1)],1),a(Ha["a"],{attrs:{justify:"center"}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[a($["a"],{attrs:{outlined:""}},[a(_["c"],[a(Ha["a"],[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[e._v(" Ubicación "),a($["a"],{staticClass:"grey lighten-2",attrs:{outlined:""}},[a(_["c"],[a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" Estado: ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" "+e._s(e.inmueble.estado.nombre)+" ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" Municipio: ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" "+e._s(e.inmueble.municipio.nombre)+" ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" Direccion: ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" "+e._s(e.inmueble.direccion)+" ")])],1)],1)],1)],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[e._v(" Registro "),a($["a"],{staticClass:"grey lighten-2",attrs:{outlined:""}},[a(_["c"],[a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" Cliente: ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" "+e._s(e.inmueble.cliente)+" ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" Clave: ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" "+e._s(e.inmueble.clave)+" ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" SIRH: ")]),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[e._v(" "+e._s(e.inmueble.sirh)+" ")])],1)],1)],1)],1)],1)],1)],1)],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[a($["a"],[a(_["c"],[a(Ha["a"],[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a("tabla-trabajos-inmueble",{attrs:{titulo:e.inmueble.nombre,is_peticion:!0,headers:e.headers,sin_texto_datos:"No se le ha asignado ningún trabajo para este inmueble.",objAsignar:{isAsignarBtn:!0,deshabilitar:!1,redireccionar:"asignar-trabajos"}}})],1)],1)],1)],1)],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[a($["a"],{attrs:{outlined:""}},[a(_["c"],[a(Ha["a"],[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[e._v(" Usuario a cargo "),a($["a"],{staticClass:"grey lighten-2",attrs:{outlined:""}},[a(_["c"],[e.inmueble.estado.usuario_cargo.length?a(Ha["a"],{attrs:{dense:""}},e._l(e.inmueble.estado.usuario_cargo,(function(t){return a(qa["a"],{key:t,attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(z["a"],{attrs:{color:"primary",label:""}},[e._v(e._s(t))])],1)})),1):a(Ha["a"],[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(z["a"],{attrs:{color:"orange","text-color":"white",label:""}},[e._v("No asignado")])],1)],1)],1)],1)],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[e._v(" Usuarios en campo (contactos) "),a($["a"],{staticClass:"grey lighten-2",attrs:{outlined:""}},[a(_["c"],[e.inmueble.municipio.usuario_campo.length?a(Ha["a"],{attrs:{dense:""}},e._l(e.inmueble.municipio.usuario_campo,(function(t){return a(qa["a"],{key:t,attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(z["a"],{attrs:{color:"primary",label:""}},[e._v(e._s(t))])],1)})),1):a(Ha["a"],[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(z["a"],{attrs:{color:"orange","text-color":"white",label:""}},[e._v("No asignado")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},Ji=[],Yi={props:{clave_inmueble:{type:String,default:""}},data:()=>({headers:[{value:"proyecto",text:"Proyecto"},{value:"concepto",text:"Concepto"},{value:"status",text:"Status"},{value:"creado",text:"Creado"},{value:"modificado",text:"Modificado"}]}),components:{"tabla-trabajos-inmueble":Yt},computed:{inmueble(){return this.$store.getters["inmueble/getInmueble"]},trabajos(){return this.$store.getters["trabajo/getTrabajos"]}},async created(){await this.inicializarInmueble(this.clave_inmueble)},methods:{async inicializarInmueble(e){await this.$store.dispatch("inmueble/recuperarInmueble",{clave_inmueble:e});const{error:a}=await this.$store.dispatch("trabajo/obtenerTrabajosInmueble",this.inmueble.id);a&&this.$store.commit("trabajo/setMensaje","NO")}}},Ki=Yi,Qi=Object(y["a"])(Ki,Xi,Ji,!1,null,null,null),Zi=Qi.exports,Wi=function(){var e=this,a=e._self._c;return a(Ha["a"],[a(qa["a"],{attrs:{cols:"12",md:"12",lg:"12",sm:"12"}},[a(d["a"],{attrs:{title:"",outlined:""}},[a(m["a"],{attrs:{left:""}},[e._v("mdi-chevron-left")]),e._v("Volver")],1)],1),a(qa["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a($["a"],{staticClass:"mx-auto",attrs:{elevation:"12",color:"primary"}},[a(_["d"],[e._v(" Estado del trabajo ")]),a(_["c"],[a(I["a"],{staticClass:"transparent",attrs:{dense:""}},[a(S["a"],[a(P["b"],[e._v("Estado del trabajo:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.status.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Fecha de creación:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.created_date)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Fecha modificada:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.modified_date)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Inmueble:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.name)+" ("+e._s(e.trabajo.property_office.client.name)+") ")])],1),a(S["a"],[a(P["b"],[e._v("Estado:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.province.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Proyecto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.proyect.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Concepto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.concept.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Mi trabajo:")]),a(P["b"],{staticClass:"align-end"},[a(Ha["a"],e._l(e.archivos,(function(t,o){return a(qa["a"],{key:o,attrs:{cols:"12"}},[a($["a"],{staticClass:"mx-auto",attrs:{elevation:"2",color:"primary"}},[a(_["a"],[a(d["a"],{attrs:{dark:"",depressed:"",small:"",href:t.file,color:"blue-grey"}},[a(m["a"],{attrs:{left:""}},[e._v(" mdi-file ")]),e._v(" "+e._s(t.title)+" ")],1),a(n["a"]),a(d["a"],{attrs:{icon:""}},[a(m["a"],[e._v("mdi-dots-vertical")])],1),a("br")],1)],1)],1)})),1)],1)],1)],1)],1)],1)],1),a(qa["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a($["a"],{staticClass:"mx-auto"},[a(_["b"],[e._v("Comentarios")]),e._l(e.trabajo.comments,(function(t,o){return a(_["c"],{key:o},[a("div",{staticClass:"text--primary"},[e._v(e._s(t))])])}))],2)],1),a(qa["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a($["a"],{staticClass:"mx-auto",attrs:{color:"primary"}},[a(tt["a"],{attrs:{transition:"dialog-bottom-transition","max-width":"600"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({},"v-btn",o,!1),t),[a(m["a"],{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" Agregar trabajo ")],1)]}},{key:"default",fn:function(t){return[a($["a"],{attrs:{loading:e.loading?"red":null}},[a(wt["a"],{attrs:{color:"indigo",dark:""}},[e._v("Agregar asignación")]),a(_["c"],[a(sr["a"],{attrs:{accept:".pdf","show-size":"","truncate-length":"6"},model:{value:e.PDFBase64,callback:function(a){e.PDFBase64=a},expression:"PDFBase64"}})],1),a(_["a"],{staticClass:"justify-end"},[a(d["a"],{attrs:{text:"",color:"success",disabled:!e.PDFBase64},on:{click:function(a){return e.subirArchivo()}}},[e._v("Subir Archivo")]),a(d["a"],{attrs:{text:""},on:{click:function(e){t.value=!1}}},[e._v("Cerrar")])],1)],1)]}}])})],1)],1)],1)},es=[],as={data:()=>({PDFBase64:null,loading:!1,files:[]}),computed:{trabajo(){return this.$store.getters["trabajo/getTrabajo"]},archivos(){return this.$store.getters["trabajo/getArchivosTrabajo"]}},created(){this.obtenerTrabajos(),this.TraerStatus(),this.ObtenerUsuarios()},methods:{async obtenerTrabajos(){await this.$store.dispatch("trabajo/recuperarTrabajo",this.trabajo.id)},async TraerStatus(){await this.$store.dispatch("trabajo/obtenerEstadosTrabajo")},async ObtenerUsuarios(){const e=await this.$store.dispatch("usuario/getUsuarios");switch(e){case 2:break;default:alert("Algo inesperado paso");break}},async subirArchivo(){this.loading=!0;const{error:e,message:a}=await this.$store.dispatch("trabajo/AXN_SubirArchivo",{work:this.trabajo.id,PDFBase64:this.PDFBase64});e?alert(a):(this.enviar(),this.loading=!1)},async enviar(){const{id:e,property_office:a,area_user:t,assigned_user:o,concept:r,proyect:i,status:s}=this.trabajo,{error:n,message:c}=await this.$store.dispatch("trabajo/updatework",{id:e,status_id:s.id,project_id:i.id,concept_id:r.id,property_office_id:a.id,assigned_user_id:o.id,area_user_id:t.id,send_review:!0});alert(c)}}},ts=as,os=Object(y["a"])(ts,Wi,es,!1,null,null,null),rs=os.exports,is=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{justify:"center"}},[a(qa["a"],{attrs:{cols:"8"}},[a($["a"],{staticClass:"mx-auto"},[a(_["c"],[a("listar-trabajos",{attrs:{obj_filtrar:{show_filtado_btn:e.show_filtado_btn,array_atributos_filtro:e.array_atributos_filtro},obj_asignar:{show_asignar_btn:e.show_asignar_btn,deshabilitar:!1,redireccionar:{name:"asignar-trabajos-cliente",params:{cliente:e.cliente.nombre}}},headers:e.headers},on:{eventAplicarFiltroAtributos:e.inicializarTrabajosCliente}})],1)],1)],1)],1)},ss=[],ns={data:()=>({headers:[{value:"proyecto",text:"Proyecto"},{value:"concepto",text:"Concepto"},{value:"status",text:"Status"},{value:"inmueble.cliente",text:"Cliente"},{value:"inmueble.nombre",text:"Inmueble"},{value:"inmueble.clave",align:" d-none"},{value:"inmueble",text:"Ubicación del inmueble"},{value:"inmueble.municipio.name",align:" d-none"},{value:"inmueble.estado",text:"Usuario a cargo"},{value:"inmueble.municipio",text:"Usuario en campo"},{value:"creado",text:"Creado"},{value:"modificado",text:"Modificado"}],show_asignar_btn:!0,show_filtado_btn:!0,array_atributos_filtro:[{text:"Cliente",disabled:!0,indice:0},{text:"Estado",indice:1}]}),components:{"listar-trabajos":Yt},computed:{cliente(){return this.$store.getters["cliente/getCliente"]}},created(){this.inicializarTrabajosCliente({estado:{}})},methods:{async inicializarTrabajosCliente({estado:e}){const{cliente:a}=this,{error:t}=await this.$store.dispatch("trabajo/obtenerTrabajosCliente",{id_cliente:Object.hasOwn(a,"id")?a.id:"",id_estado:Object.hasOwn(e,"id")?e.id:""});t&&await this.$store.commit("alerta/addAlertas",{error:t})}}},cs=ns,ls=Object(y["a"])(cs,is,ss,!1,null,null,null),us=ls.exports,ds=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"2"}},[a(Ko["a"],{staticClass:"pa-4",attrs:{color:"grey lighten-3"}},[a("h1",[a("b",[e._v("Peticiones")])])]),a(I["a"],[a(T["a"],[a(S["a"],{on:{click:function(a){return e.inicializarRecursosUsuario()}}},[a(P["b"],[a(P["d"],[e._v("Pagos por Verificar")])],1)],1)],1),a(T["a"],[a(S["a"],{on:{click:function(a){return e.inicializarRecursos({modalidad_pago:"transferencia",validado:"True"})}}},[a(P["b"],[a(P["d"],[e._v(" Proceso de Pago y Facturación ")])],1)],1)],1),a(T["a"],[a(S["a"],{on:{click:function(a){return e.inicializarRecursosFacturados({modalidad_pago:"transferencia",validado:"True"})}}},[a(P["b"],[a(P["d"],[e._v("Peticiones por Comprobar")])],1)],1)],1)],1)],1),a(qa["a"],{attrs:{cols:"12",sm:"8"}},[a("peticiones",{attrs:{atributos_input:e.atributos_input,addHeaders:e.headers,titulo:e.titiulo}})],1)],1)},ms=[],ps=function(){var e=this,a=e._self._c;return a($["a"],[a(_["d"],{staticClass:"grey lighten-3"},[e._v(e._s(e.titulo))]),a(_["b"],{staticClass:"grey lighten-3"}),a("br"),a(_["c"],[a(kt["a"],{staticClass:"elevation-5 row-pointer",attrs:{headers:e.headers,items:e.recursos,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",pageText:""},"no-data-text":"No tienes solicitudes de recursos pendientes",loading:e.cargando},on:{"click:row":e.recuperarRecurso},scopedSlots:e._u([{key:"item.actions",fn:function({item:t}){return[a(d["a"],{attrs:{small:"",color:"success"},on:{click:function(a){return e.validarPeticionPago(t)}}},[e._v("Ir a validar")])]}},{key:"item.datos_transferencia",fn:function({item:t}){return[Object.keys(t.datos_transferencia).length?a("div",e._l(Object.keys(t.datos_transferencia),(function(o){return a("ul",{key:o},[a("li",[e._v(e._s(o)+": "+e._s(t.datos_transferencia[o]))])])})),0):a("div",[a(z["a"],{attrs:{color:"primary"}},[e._v("No aplica")])],1)]}},{key:"item.modalidad_pago",fn:function({item:t}){return["transferencia"===t.modalidad_pago?a("div",[e._v(" Transferencia ("+e._s(t.tipo_transferencia.toUpperCase())+") ")]):a("div",[e._v("Cheque")])]}},{key:"item.holgura",fn:function({item:a}){return[e._v(" "+e._s(e.holgura(a.creado))+" ")]}},{key:"item.solicitud",fn:function({item:t}){return[a(m["a"],{attrs:{color:t.solicitud?"success":"error"}},[e._v(e._s(t.solicitud?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}},{key:"item.validado",fn:function({item:t}){return[a(m["a"],{attrs:{color:t.validado?"success":"error"}},[e._v(e._s(t.validado?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}},{key:"item.pagado",fn:function({item:t}){return[a(m["a"],{attrs:{color:t.pagado?"success":"error"}},[e._v(e._s(t.pagado?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}},{key:"item.facturado",fn:function({item:t}){return[a(m["a"],{attrs:{color:t.facturado?"success":"error"}},[e._v(e._s(t.facturado?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}},{key:"item.RemOrCom",fn:function(){return[a(m["a"],{attrs:{color:"error",disabled:""}},[e._v("mdi-close-circle")])]},proxy:!0}])}),a("recuperar-solicitud-recurso",{attrs:{dialog:e.dialogRecurso,indice_recuros:e.indice,atributos_input:e.atributos_input},on:{emitDialog:e.setDialogRecurso}})],1)],1)},bs=[],_s=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{transition:"dialog-bottom-transition"},model:{value:e.dialogRecurso,callback:function(a){e.dialogRecurso=a},expression:"dialogRecurso"}},[a(wt["a"],{attrs:{dark:"",color:"primary",flat:""}},[a(n["a"]),a(E["a"],{attrs:{"offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({attrs:{"x-large":"",icon:""}},"v-btn",o,!1),t),[a(m["a"],[e._v("mdi-dots-horizontal")])],1)]}}])},[a(I["a"],[a(S["a"],[a(A["a"],[a(P["d"],[e._v("Modificar")])],1)],1),a(S["a"],{attrs:{link:""},on:{click:function(a){return e.facturarPeticionPagoDerechos(e.recurso)}}},[a(A["a"],[a(P["d"],[e._v("Facturar")])],1)],1),a(S["a"],{attrs:{link:""},on:{click:function(a){return e.cambiarDetalleStatus(e.recurso)}}},[a(A["a"],[a(P["d"],[e._v("Comprobar")])],1)],1),a(S["a"],[a("confirmar",{attrs:{mensaje:"Estás a punto de eliminar esta solicitud de recursos. ¿Estás seguro?",id:e.recurso.id,indice:e.indice_recuros,tipo_pago:"¿Eliminar "+e.recurso.tipo_pago+"?",icon:"mdi-delete",color:"error"},on:{emitConfirmacion:e.eliminarSolicitudRecurso}})],1)],1)],1),a(d["a"],{attrs:{"x-large":"",icon:""},on:{click:function(a){e.dialogRecurso=!1}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(Ha["a"],{attrs:{"no-gutters":""}},[a(qa["a"],{staticClass:"flex-grow-1 flex-shrink-0",attrs:{cols:"12",sm:"8"}},[a("tabla-peticiones",{attrs:{cabecera:e.headers,recurso:e.recurso}}),e.atributos_input.show_archivo_input?a("archivo",{attrs:{atributos_input:e.atributos_input,recurso_id:e.recurso.id,recurso_index:e.indice_recuros}}):e._e()],1),a(qa["a"],{staticClass:"flex-grow-1 flex-shrink-0",attrs:{cols:"12",sm:"4"}},[a("Comentarios"),a("correo")],1)],1)],1)},gs=[],fs=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"d-flex flex-column fill-height",attrs:{fluid:""}},[a(_["c"],{staticClass:"flex-grow-1 overflow-y-auto"},e._l(e.comentarios,(function(t){return a(i["a"],{key:t.id,staticClass:"mb-16",attrs:{color:"rgba(0,0,0,0)",flat:""}},[e.usuario==t.usuario.id?a($["a"],{staticClass:"mt-10 mr-2",attrs:{"max-width":"350px",color:"blue",dark:""}},[a(S["a"],{attrs:{"three-line":""}},[a(P["b"],[a("div",{staticClass:"mb-4"},[e._v(e._s(t.comentario))]),a(P["c"],[e._v("Hace 16 mins "),a("span",{staticClass:"ml-16"},[e._v("Visto 1:03PM")])])],1)],1)],1):a(k["a"],{attrs:{bordered:"",bottom:"",color:"grey",dot:"","offset-x":"16","offset-y":"9"}},[a(C["a"],{staticClass:"mt-n5 mr-2",attrs:{size:"30",elevation:"10"}},[a("img",{attrs:{src:"https://content.throwbacks.com/images/2017/11/panthro8.JPG"}})])],1),e.usuario==t.usuario.id?a(k["a"],{attrs:{bordered:"",bottom:"",color:"green",dot:"","offset-x":"10","offset-y":"10"}},[a(C["a"],{staticClass:"mt-n5",attrs:{size:"30",elevation:"10"}},[a("img",{attrs:{src:"https://i.ytimg.com/vi/MZr4KirBYtQ/hqdefault.jpg"}})])],1):a($["a"],{staticClass:"mt-10",attrs:{"max-width":"350px"}},[a(S["a"],{attrs:{"three-line":""}},[a(P["b"],[a("div",{staticClass:"mb-4"},[e._v(" "+e._s(t.comentario)+" ")]),a(P["c"],[e._v("Hace 12 mins")])],1)],1)],1)],1)})),1),a(_["c"],{staticClass:"flex-shrink-1"},[a(Va["a"],{attrs:{loading:e.cargando,"append-outer-icon":"mdi-send",filled:"","clear-icon":"mdi-close-circle",clearable:"",label:"Message",type:"text"},on:{"click:append-outer":e.sendMessage,"click:clear":e.clearMessage},model:{value:e.comentario,callback:function(a){e.comentario=a},expression:"comentario"}})],1)],1)},hs=[],vs={data:()=>({comentario:""}),computed:{comentarios(){return this.$store.getters["recurso/getComentarios"]},usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},recurso(){return this.$store.getters["recurso/getRecurso"]},cargando(){return this.$store.getters["recurso/getCargando"]}},methods:{async sendMessage(){const{id:e}=this.recurso;if(this.comentario){const a={recurso:e,usuario:this.usuario,comentario:this.comentario},{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/hacerComentario",a);r?this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r}):this.clearMessage()}},clearMessage(){this.comentario=""}}},ys=vs,js=Object(y["a"])(ys,fs,hs,!1,null,null,null),xs=js.exports,Cs=function(){var e=this,a=e._self._c;return a(Ha["a"],[a(qa["a"],{attrs:{cols:"12",sm:"12"}},[a(kt["a"],{staticClass:"elevation-5 row-pointer",attrs:{headers:e.cabecera,items:e.recurso.peticiones,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",pageText:""},"no-data-text":"No tienes trabajos.",loading:e.cargando},scopedSlots:e._u([{key:"item.importe",fn:function({item:a}){return[e._v(" $ "+e._s(a.importe.toFixed(2))+" ")]}},{key:"item.creado",fn:function({}){return[e._v(" "+e._s([new Date(e.recurso.creado).getMonth()+1,new Date(e.recurso.creado).getDate(),new Date(e.recurso.creado).getFullYear()].join("/"))+" ")]}}])})],1)],1)},ks=[],$s={props:{cabecera:{type:Array,default:()=>[]},recurso:{type:Object,default:()=>({})}},computed:{cargando(){return this.$store.getters["recurso/getCargando"]}}},ws=$s,Is=Object(y["a"])(ws,Cs,ks,!1,null,null,null),Ss=Is.exports,As=function(){var e=this,a=e._self._c;return a($["a"],{attrs:{flat:""}},[a("listar-archivos-recurso"),a(_["c"],[a(sr["a"],{attrs:{label:e.atributos_input.titulo,dense:"",outlined:"",accept:e.atributos_input.formatos,"show-size":"",disabled:e.cargando,loading:e.cargando,multiple:!0,clearable:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(d["a"],{attrs:{icon:"",disabled:!e.archivoBase64.length},on:{click:function(a){return e.subirArchivo(e.archivoBase64)}}},[a(m["a"],{attrs:{color:"primary"}},[e._v("mdi-cloud-upload")])],1)]},proxy:!0}]),model:{value:e.archivoBase64,callback:function(a){e.archivoBase64=a},expression:"archivoBase64"}})],1)],1)},Ps=[],Ts=t("ce87"),Es=function(){var e=this,a=e._self._c;return a(Ha["a"],{staticClass:"container"},e._l(e.archivos,(function(t,o){return a(qa["a"],{key:o,attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2"}},[a(Ts["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:r}){return[a($["a"],{attrs:{elevation:r?12:2}},[a(_["c"],[a(C["a"],{attrs:{tile:"",size:"100",color:"grey lighten-2"}},[a(m["a"],{attrs:{"x-large":""}},[e._v("mdi-paperclip")])],1)],1),a("span",{class:{"show-btns":r}},[e._v("Nombre archivo")]),a(_["a"],[a(d["a"],{class:{"show-btns":!r},attrs:{icon:""}},[a(m["a"],[e._v(" mdi-download ")])],1),a("confirmar-eliminar-archivo",{attrs:{mensaje:"Estás a punto de eliminar esta archivo. ¿Estás seguro?",id:t.id,indice:o,tipo_pago:"¿Eliminar "+t.nombre+"?",icon:"mdi-delete",color:r?"":"rgba(255, 255, 255, 1) !important"},on:{emitConfirmacion:e.eliminarArchivoRecurso}})],1)],1)]}}],null,!0)})],1)})),1)},Os=[],Ms={components:{"confirmar-eliminar-archivo":Co},computed:{archivos(){return this.$store.getters["recurso/getArchivos"]}},methods:{async eliminarArchivoRecurso({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:e,estado:o,error:r}=await this.$store.dispatch("recurso/eliminarArhivoRecurso",{id:a,indice:t});this.$store.commit("alerta/addAlertas",{estado:o,mensaje:e,error:r})}}}},Fs=Ms,Ds=(t("83fb"),Object(y["a"])(Fs,Es,Os,!1,null,"a2628b78",null)),Vs=Ds.exports,Ns={props:{atributos_input:{type:Object,default:()=>({titulo:"Adjuntar archivo PDF de comprobante",tipo:"comprobante",formatos:".pdf",is_multiple:!1})},recurso_id:{type:Number,default:0},recurso_index:{type:Number,default:-1}},data:()=>({archivoBase64:[]}),components:{"listar-archivos-recurso":Vs},computed:{cargando(){return this.$store.getters["recurso/getCargando"]},archivos(){return this.$store.getters["recurso/getArchivos"]},usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},methods:{async subirArchivo(e){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("recurso/subirArchivo",{archivos:e,recurso:this.recurso_id,usuario:this.usuario});if(this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o}),!o){this.clearArchivoBase64();const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("recurso/confirmarValidarRecuruso",{id:this.recurso_id,pagado:!0,detalle_status:"comprobacion",indice:this.recurso_index});this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}},clearArchivoBase64(){this.archivoBase64=[]}}},Rs=Ns,zs=Object(y["a"])(Rs,As,Ps,!1,null,null,null),Us=zs.exports,Bs=function(){var e=this,a=e._self._c;return a("div",{staticClass:"text-center"},[a(tt["a"],{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({attrs:{color:"red lighten-2",dark:""}},"v-btn",o,!1),t),[e._v(" Click Me ")])]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a($["a"],[a(ot["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(s["a"],[a(Ha["a"],[a(qa["a"],{attrs:{cols:"12",md:"4"}},[a(Va["a"],{attrs:{rules:e.nameRules,label:"Asunto",required:""},model:{value:e.firstname,callback:function(a){e.firstname=a},expression:"firstname"}})],1),a(qa["a"],{attrs:{cols:"12",md:"4"}},[a(Va["a"],{attrs:{rules:e.nameRules,label:"Mensaje",required:""},model:{value:e.lastname,callback:function(a){e.lastname=a},expression:"lastname"}})],1),a(qa["a"],{attrs:{cols:"12",md:"4"}},[a(Va["a"],{attrs:{rules:e.emailRules,label:"Para",required:""},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}})],1),a(qa["a"],{attrs:{cols:"12",md:"4"}},[a(Va["a"],{attrs:{label:"Archivo",required:""},model:{value:e.files,callback:function(a){e.files=a},expression:"files"}})],1)],1),a(d["a"],{attrs:{color:"primary"},on:{click:e.resetValidation}},[e._v(" Enviar correo ")])],1)],1)],1)],1)],1)},Ls=[],qs={data(){return{dialog:!1,valid:!1,firstname:"",lastname:"",nameRules:[e=>!!e||"Name is required",e=>e.length<=10||"Name must be less than 10 characters"],email:"nandoferinovizca@gmail.com",files:0,emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+/.test(e)||"E-mail must be valid"]}},methods:{validate(){this.$refs.form.validate()},reset(){this.$refs.form.reset()},async resetValidation(){const{estado:e,mensaje:a,error:t}=await this.$store.dispatch("correo/nuevo",{firstname:this.firstname,email:this.email,lastname:this.lastname,de:"nandoferinovizca@gmail.com",files:this.files});this.$store.commit("alerta/addAlertas",{estado:e,mensaje:a,error:t})}}},Hs=qs,Gs=Object(y["a"])(Hs,Bs,Ls,!1,null,null,null),Xs=Gs.exports,Js={props:{dialog:{type:Boolean,default:!1},indice_recuros:{type:Number,default:-1},atributos_input:{type:Object,default:()=>({show_archivo_input:!1,titulo:"Adjuntar archivo PDF de comprobante",tipo:"comprobante",formatos:".pdf",is_multiple:!1})}},data:()=>({headers:[{text:"Fecha solicitado",value:"creado"},{text:"Usuario a cargo",value:"inmueble.estado.users_charge[0].charge"},{text:"Usuario en campo",value:"inmueble.municipio.users_field[0].name"},{text:"Cliente",value:"inmueble.cliente"},{text:"Estado",value:"inmueble.estado.name",sortable:!1},{text:"Municipio",value:"inmueble.municipio.name",sortable:!1},{text:"Sucursal",value:"inmueble.nombre",sortable:!1},{text:"Concepto trabajo",value:"trabajo.concepto",sortable:!1},{text:"Importe",value:"importe",sortable:!1}]}),components:{Comentarios:xs,Confirmar:Co,"tabla-peticiones":Ss,archivo:Us,correo:Xs},computed:{recurso(){return this.$store.getters["recurso/getRecurso"]},dialogRecurso:{get(){return this.dialog},set(e){this.$emit("emitDialog",e),this.$store.commit("recurso/cleanRecurso"),this.$store.commit("recurso/cleanComentarios"),this.$store.commit("recurso/clearArchivos")}},cargando(){return this.$store.getters["recurso/getCargando"]}},methods:{async eliminarSolicitudRecurso({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:e,estado:o,error:r}=await this.$store.dispatch("recurso/eliminarSolicitudRecurso",{id:a,indice:t});this.$store.commit("alerta/addAlertas",{estado:o,mensaje:e,error:r}),this.dialogRecurso=!1}},async cambiarDetalleStatus({id:e}){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("recurso/cambiarDetalleStatus",{id:e,detalle_status:"aprobado"});this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o})},async facturarPeticionPagoDerechos({id:e}){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("recurso/confirmarFacturacionRecuruso",{id:e,facturado:!0});this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o})}}},Ys=Js,Ks=Object(y["a"])(Ys,_s,gs,!1,null,null,null),Qs=Ks.exports,Zs={props:{addHeaders:{tyepe:Object,default:()=>[]},atributos_input:{type:Object,default:()=>({show_archivo_input:!1,titulo:"Adjuntar archivo PDF de comprobante",tipo:"comprobante",formatos:".pdf",is_multiple:!1})},titulo:{type:String,default:""}},data:()=>({headers:[{text:"Fecha solicitado",value:"creado"},{text:"Dias",value:"holgura"},{text:"Estado del recurso",value:"detalle_status"},{text:"Modalidad de pago",value:"modalidad_pago"},{text:"Datos transferencia",value:"datos_transferencia"},{text:"Banco",value:"banco"},{text:"Beneficiario",value:"beneficiario"},{text:"Concepto",value:"concepto"},{text:"Importe",value:"importe"}],dialogRecurso:!1,peticion:-1,indice:-1,headers_length:9}),components:{"recuperar-solicitud-recurso":Qs},mounted(){if(this.addHeaders.length)for(const e of this.addHeaders)this.headers.push(e)},computed:{recursos(){return this.$store.getters["recurso/getRecursos"]},cargando(){return this.$store.getters["recurso/getCargando"]}},methods:{setDialogRecurso(e){this.dialogRecurso=e},async recuperarRecurso({id:e},{index:a}){this.peticion=e,this.dialogRecurso=!0,this.indice=a;const{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/recuperarRecurso",e);if(r)this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r});else{const{error:a,estado:t,mensaje:o}=await this.$store.dispatch("recurso/recuperarComentariosRecurso",e);a&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:o,error:a}),await this.$store.dispatch("recurso/recuperarArchivoRecurso",e)}},holgura(e){var a=new Date(e),t=new Date,o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r=new Date(o),i=(r.valueOf()-a.valueOf())/864e5;return i},async validarPeticionPago({id:e}){this.$router.push({name:"peticion-recursos"}),await this.$store.dispatch("recurso/recuperarRecurso",e);const{trabajos:a,peticiones:t}=await this.$store.dispatch("recurso/establecerPeticionPagoDerechos");await this.$store.commit("trabajo/setTrabajos",a),await this.$store.commit("trabajo/setSeleccionados",a),await this.$store.commit("recurso/setVerificarPeticiones",t),await this.$store.commit("recurso/setPeticionesVerificadas",t)}},watch:{addHeaders(e){let a=this.headers.length-(this.headers.length-this.headers_length);if(this.headers.splice(a),e.length)for(const t of e)this.headers.push(t)}}},Ws=Zs,en=(t("6e1f"),Object(y["a"])(Ws,ps,bs,!1,null,"24c81edc",null)),an=en.exports,tn={data:()=>({headers:[],titiulo:"",atributos_input:{show_archivo_input:!1,titulo:"Adjuntar archivo PDF de comprobante",tipo:"comprobante",formatos:".pdf",is_multiple:!1},seleccionado:1}),components:{peticiones:an},computed:{usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},created(){this.inicializarRecursosUsuario()},methods:{async inicializarRecursos({validado:e,modalidad_pago:a}){this.atributos_input={show_archivo_input:!0,titulo:"Adjuntar Archivos de Factura (PDF/XML)",tipo:"factura",formatos:".pdf, .xml",is_multiple:!1},this.titiulo="Proceso de Validación y Confirmación de Pagos en Solicitudes de Recursos",this.headers=[{text:"Validado",value:"validado",align:"center"},{text:"Pagado",value:"pagado",align:"center"},{text:"Facturado",value:"facturado",align:"center"},{text:"Reembolsado | Comprobado",value:"RemOrCom",align:"center"}];const{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/recuperarRecursosUsuario",{validado:e,usuario_cargo:this.usuario,modalidad_pago:a});r&&this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r})},async inicializarRecursosFacturados({validado:e,modalidad_pago:a}){this.atributos_input={show_archivo_input:!0,titulo:"Adjuntar Acuse",tipo:"acuse",formatos:".pdf",is_multiple:!1},this.titiulo="Proceso de Validación y Confirmación de Pagos en Solicitudes de Recursos",this.headers=[{text:"Validado",value:"validado",align:"center"},{text:"Pagado",value:"pagado",align:"center"},{text:"Facturado",value:"facturado",align:"center"},{text:"Reembolsado | Comprobado",value:"RemOrCom",align:"center"}];const{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/recuperarRecursosUsuario",{validado:e,usuario_cargo:this.usuario,modalidad_pago:a});r&&this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r})},async inicializarRecursosUsuario(){this.titiulo="Peticiones de pago de derechos por validar",this.headers=[{text:"Validar e indicar forma de pago",value:"actions",align:"center"}];const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("recurso/recuperarRecursosUsuario",{usuario_cargo:this.usuario,validado:"False",modalidad_pago:""});t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},on=tn,rn=Object(y["a"])(on,ds,ms,!1,null,null,null),sn=rn.exports,nn=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"2"}},[a(Ko["a"],{staticClass:"pa-4",attrs:{color:"grey lighten-4"}},[a("h1",[a("b",[e._v("Pagos")])])]),a(I["a"],[a(la["a"],{attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a(P["b"],[a(P["d"],[e._v("Movimientos pendientes")])],1)]},proxy:!0}])},[a(S["a"],{attrs:{link:""}},[a(P["b"],{on:{click:function(a){return e.inicializarRecursos({modalidad_pago:"transferencia",validado:"True",pagado:"False"})}}},[a(P["d"],[e._v("Transferencia")])],1)],1),a(S["a"],{attrs:{link:""}},[a(P["b"],{on:{click:function(a){return e.inicializarRecursos({modalidad_pago:"cheque",validado:"True",pagado:"False"})}}},[a(P["d"],[e._v("Cheque")])],1)],1)],1),a(la["a"],{attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a(P["b"],[a(P["d"],[e._v("Movimientos aprobados")])],1)]},proxy:!0}])},[a(S["a"],{attrs:{link:""}},[a(P["b"],{on:{click:function(a){return e.inicializarRecursos({modalidad_pago:"transferencia",validado:"True",pagado:"True"})}}},[a(P["d"],[e._v("Reembolso")])],1)],1),a(S["a"],{attrs:{link:""}},[a(P["b"],{on:{click:function(a){return e.inicializarRecursos({modalidad_pago:"cheque",validado:"True",pagado:"True"})}}},[a(P["d"],[e._v("Comprobacion")])],1)],1)],1)],1)],1),a(qa["a"],{attrs:{cols:"12",sm:"8"}},[a("peticiones",{attrs:{atributos_input:e.atributos_input}})],1)],1)},cn=[],ln={data:()=>({atributos_input:{show_archivo_input:!0,titulo:"Adjuntar archivo PDF de comprobante",tipo:"comprobante",formatos:".pdf",is_multiple:!1}}),components:{peticiones:an},created(){this.inicializarRecursos({modalidad_pago:"transferencia",validado:"True",pagado:"False"})},methods:{async inicializarRecursos({validado:e,pagado:a,modalidad_pago:t}){const{mensaje:o,estado:r,error:i}=await this.$store.dispatch("recurso/recuperarRecursos",{modalidad_pago:t,validado:e,pagado:a});i&&this.$store.commit("alerta/addAlertas",{estado:r,mensaje:o,error:i}),this.atributos_input.show_archivo_input="True"!==a}}},un=ln,dn=Object(y["a"])(un,nn,cn,!1,null,null,null),mn=dn.exports,pn=function(){var e=this,a=e._self._c;return a(Da["a"],[a(Ha["a"],{attrs:{dense:"",justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8"}},[a(Pt["a"],{model:{value:e.e1,callback:function(a){e.e1=a},expression:"e1"}},[a(Et["a"],[a(or["a"],{attrs:{complete:e.e1>2,step:"2"}},[e._v(" Paso 2 "),a("br"),e._v(" Trabajos ")]),a(w["a"]),a(or["a"],{attrs:{complete:e.e1>3,step:"3"}},[e._v(" Paso 3 "),a("br"),e._v(" Importe ")]),a(w["a"]),a(or["a"],{attrs:{complete:e.e1>4,step:"4"}},[e._v(" Paso 4 "),a("br"),e._v(" Modalidad de pago ")]),a(w["a"]),a(or["a"],{attrs:{complete:e.e1>5,step:"5"}},[e._v(" Paso 5 "),a("br"),e._v(" Datos generales ")]),a(w["a"]),a(or["a"],{attrs:{step:"6"}},[e._v(" Paso 6 "),a("br"),e._v(" Confirmacion ")])],1),a(Et["b"],[a(Tt["a"],{attrs:{step:"2"}},[a("br"),a("tabla-trabajos-usuario",{attrs:{mostrar_seleccionados:!0,is_peticion:!1,obj_filtrar:e.obj_filtrar,headers:e.headers},on:{eventAplicarFiltroAtributos:e.recuperarTrabajosUsuarioCampo}}),a("br"),a(d["a"],{attrs:{color:"success",block:"",disabled:e.isTrabajosSeleccionados},on:{click:function(a){return e.verificarPeticiones()}}},[e._v(" Continue ")])],1),a(Tt["a"],{attrs:{step:"3"}},[a(d["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=2}}},[e._v(" Regresar ")]),a("br"),a("formulario-importe-peticiones",{attrs:{cabecera:e.cabecera},on:{eventoContinuar:e.setValidP2}}),a("br"),a(d["a"],{attrs:{color:"success",block:"",disabled:!e.isValid_p2},on:{click:function(a){e.e1=4}}},[e._v(" Continuar ")])],1),a(Tt["a"],{attrs:{step:"4"}},[a(d["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=3}}},[e._v(" Regresar ")]),a("br"),a("formulario-crear-recurso",{on:{eventoContinuar:e.setValidP3}}),a("br"),a(d["a"],{attrs:{color:"success",block:"",disabled:!e.isValid_p3},on:{click:function(a){e.e1=5}}},[e._v(" Continuar ")])],1),a(Tt["a"],{attrs:{step:"5"}},[a(d["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=4}}},[e._v(" Regresar ")]),a("br"),a("datos-generales",{on:{eventoContinuar:e.setValidP4}}),a("br"),a(d["a"],{attrs:{color:"success",block:"",disabled:!e.isValid_p4},on:{click:function(a){return e.asignarPeticionesSolicitudRecurso()}}},[e._v(" Continue ")])],1),a(Tt["a"],{attrs:{step:"6"}},[a(d["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=5}}},[e._v(" Regresar ")]),a("br"),a("crear-recurso"),a("br"),a(d["a"],{attrs:{color:"primary",block:""},on:{click:function(a){return e.crearSolicitudRecurso()}}},[e._v(" Finalizar ")])],1)],1)],1)],1),a(qa["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2"}},[a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(wt["a"],{attrs:{dense:"",elevation:"1"}},[a(c["a"],[e._v("Petición de pago de derechos")])],1),a(_["c"],[a(Mr["a"],{attrs:{dense:"",outline:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v(" Trabajo ")]),a("th",{staticClass:"text-left"},[e._v(" Importe ")])])]),a("tbody",e._l(e.trabajosSeleccionados,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.concepto)+"("+e._s(t.proyecto)+")")])])})),0)]},proxy:!0}])}),e._v(" Usuario en area: "),e.contacto.id?a("span",[e._v(e._s(e.contacto.nombre))]):a("span",[e._v("Seleccione un usuario en campo")]),a("br"),e._v(" Fecha: "+e._s(e.getFechaMod())+" "),a("br")],1),a(w["a"]),a("div",{staticClass:"ma-2 text-end"},[e.is_pago_por_separado?e._e():a(_["d"],[e._v("Total: "+e._s(e.total))]),a(d["a"],{attrs:{rounded:"",color:"error"},on:{click:function(a){return e.$router.go(-1)}}},[e._v(" Cancelar "),a(m["a"],{attrs:{right:""}},[e._v("mdi-close-circle-outline")])],1)],1)],1)],1)],1)],1)},bn=[],_n=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[e.is_pago_por_separado?e._e():a(_["d"],{staticClass:"grey white--text"},[e._v(" Fondos necesarios: "),a(n["a"]),e._v(" MX$ "+e._s(e.total)+" ")],1),a(_["d"],{staticClass:"warning lighten-4"},[a(ti["a"],{attrs:{label:"¿Efectuar el pago por separado? "+(e.is_pago_por_separado?"SI":"NO"),inset:"",disabled:!1},model:{value:e.is_pago_por_separado,callback:function(a){e.is_pago_por_separado=a},expression:"is_pago_por_separado"}})],1),a(_["c"],[a(ot["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a($t["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(kt["a"],{attrs:{items:e.peticiones_verificadas,headers:e.cabecera,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:" p - Tp de n"},"no-data-text":"Regrese y vuelva a seleccionar los trabajos"},scopedSlots:e._u([{key:"item.concepto",fn:function({index:t}){return[a("b",[e._v(e._s(e.trabajos_seleccionados[t].concepto))]),e._v(" ("+e._s(e.trabajos_seleccionados[t].proyecto)+") ")]}},{key:"item.inmueble",fn:function({index:a}){return[e._v(" "+e._s(e.trabajos_seleccionados[a].inmueble.nombre)+" ("+e._s(e.trabajos_seleccionados[a].inmueble.clave)+") ")]}},{key:"item.monto",fn:function({item:t}){return[t.error?a($["a"],{staticClass:"text-subtitle-2 text-center ma-1",attrs:{color:"error lighten-3",width:"200"}},[e._v(" "+e._s(t.error)+" ")]):a($["a"],{staticClass:"ma-1",attrs:{width:"200"}},[a(Va["a"],{attrs:{label:"Importe",solo:"",dense:"",autofocus:"",prefix:"$",type:"number",placeholder:"1.00",step:"0.1",min:"1",rules:[e=>e>0||"Es necesario escribir el monto mayor a 0.00"]},model:{value:t.monto,callback:function(a){e.$set(t,"monto",a)},expression:"item.monto"}})],1)]}},{key:"item.eliminar",fn:function({index:t}){return[a(d["a"],{attrs:{icon:""},on:{click:function(a){return e.confirmarEliminacion(t)}}},[a(m["a"],{attrs:{color:"error"}},[e._v("mdi-trash-can")])],1)]}}])})],1)],1)],1)],1)},gn=[],fn={props:{cabecera:{type:Array,default:()=>{}}},data:()=>({continuar:!0,peticion:null}),computed:{trabajos_seleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},peticiones_verificadas(){return this.$store.getters["recurso/getPeticionesVerificadas"]},total(){var e=0;for(const a of this.peticiones_verificadas)e=a.monto?Number(a.monto)+e:0+e;return new Number(e.toFixed(2)).toLocaleString("es-MX",{style:"currency",currency:"MXN"})},valid:{get(){return this.continuar},set(e){this.peticiones_verificadas.length?this.$refs.formulario&&(this.$emit("eventoContinuar",{validacion:this.$refs.formulario.validate()}),this.continuar=e):this.$emit("eventoContinuar",{validacion:!1})}},is_pago_por_separado:{get(){return this.$store.getters["recurso/getIsPagoSeparadoSeleccionado"]},set(e){e&&this.$store.dispatch("recurso/inicializarAsignacionPeticionesSolicitudesRecurso",e),this.$store.commit("recurso/setIsPagoSeparadoSeleccionado",e)}}},methods:{confirmarEliminacion(e){this.$store.commit("trabajo/deleteSeleccionado",e),this.$store.commit("recurso/deletePeticionesVerificadas",e),this.$store.commit("recurso/deleteSolicitudesRecursoV2",e)}}},hn=fn,vn=Object(y["a"])(hn,_n,gn,!1,null,null,null),yn=vn.exports,jn=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v("Datos generales de la solicitud de recurso")]),a("br"),e.is_pago_separado?e._e():a(_["c"],[a(ot["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a("formulario-datos-generales",{attrs:{solicitud_recurso:e.solicitud_recurso_v2}})],1)],1),e.is_pago_separado?a(_["c"],[a($t["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(Pt["a"],{attrs:{vertical:""},model:{value:e.e6,callback:function(a){e.e6=a},expression:"e6"}},[a(ot["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},e._l(e.solicitudes_recurso_v2,(function(t,o){return a("div",{key:o},[a(or["a"],{attrs:{complete:e.e6>o+1,rules:[()=>!t.peticiones[0].error],editable:"",step:o+1}},[a("b",[e._v(e._s(e.trabajos_seleccionados[o].concepto))]),e._v(" ("+e._s(e.trabajos_seleccionados[o].proyecto)+") "),a("small",[e._v(e._s(e.trabajos_seleccionados[o].inmueble.nombre)+" ("+e._s(e.trabajos_seleccionados[o].inmueble.clave)+")")])]),a(Tt["a"],{attrs:{step:o+1}},[t.peticiones[0].error?a("div",[a($["a"],{staticClass:"text-center ma-1",attrs:{outlined:"",color:"error lighten-3"}},[a(_["c"],{staticClass:"text-subtitle-2"},[e._v("Este trabajo ya se encuesta en una solicitud de recurso")])],1)],1):a("div",[a("formulario-datos-generales",{attrs:{solicitud_recurso:t}})],1)])],1)})),0)],1)],1)],1):e._e()],1)},xn=[],Cn=t("2b5d"),kn=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{dense:""}},["transferencia"===e.solicitud_recurso.modalidad_pago?a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a("formulario-tipo-transferencia",{attrs:{solicitud_recurso:e.solicitud_recurso}})],1):e._e(),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a($["a"],{attrs:{outlined:""}},[a(_["b"],[e._v("Datos generales")]),a(_["c"],[a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{label:"Banco",rules:[e=>!!e||"Es necesario escribir el banco"],outlined:"",clearable:""},model:{value:e.banco,callback:function(a){e.banco=a},expression:"banco"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[a(Cn["a"],{attrs:{items:e.beneficiarios,label:"Beneficiario","item-text":"nombre",rules:[e=>!!e||"Es necesario elegir un beneficiario"],clearable:"","clear-icon":"mdi-close","return-object":"",outlined:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("formulario-crear-beneficiario")]},proxy:!0}]),model:{value:e.beneficiario,callback:function(a){e.beneficiario=a},expression:"beneficiario"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(rt["a"],{attrs:{outlined:"",label:"Concepto de pago",rules:[e=>!!e||"Es necesario escribir el concepto de pago.",e=>2<e.length||"Concepto de pago muy corto."],"auto-grow":"",rows:"1","row-height":"15"},model:{value:e.concepto_pago,callback:function(a){e.concepto_pago=a},expression:"concepto_pago"}})],1)],1)],1)],1)],1)],1)},$n=[],wn=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({attrs:{color:"success",icon:""}},"v-btn",o,!1),t),[a(m["a"],[e._v("mdi-plus")])],1)]}},{key:"default",fn:function(t){return[a($["a"],{staticClass:"mx-auto",attrs:{elevation:"5"}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Crear nuevo beneficiario "),a(n["a"]),a(d["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(_["c"],[a(ot["a"],{ref:"formularioNuevoBeneficiario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{cols:"12"}},[a(Va["a"],{attrs:{label:"Nombre del beneficiario",rules:[e=>!!e||"Es necesario escribir un nombre del para el beneficiario"]},model:{value:e.beneficiario.nombre,callback:function(a){e.$set(e.beneficiario,"nombre",a)},expression:"beneficiario.nombre"}})],1),a(qa["a"],{attrs:{cols:"12"}},[a(Va["a"],{attrs:{label:"Número de cuenta",rules:e.regla_clabe,counter:"18",type:"number"},model:{value:e.beneficiario.numero_cuenta,callback:function(a){e.$set(e.beneficiario,"numero_cuenta",a)},expression:"beneficiario.numero_cuenta"}})],1),a(qa["a"],{attrs:{cols:"12"}},[a(Va["a"],{attrs:{label:"Nombre del banco",rules:[e=>!!e||"Es necesario escribir el nombre del banco"]},model:{value:e.beneficiario.banco,callback:function(a){e.$set(e.beneficiario,"banco",a)},expression:"beneficiario.banco"}})],1)],1)],1)],1),a(_["a"],[a(n["a"]),a(d["a"],{attrs:{color:"success",disabled:!e.valid,outlined:""},on:{click:function(a){return e.crearBeneficiario(t)}}},[e._v("Crear")]),a(d["a"],{attrs:{color:"error",outlined:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[e._v("Cancelar")])],1)],1)]}}])})},In=[],Sn={data:()=>({valid:!0,beneficiario:{nombre:"",numero_cuenta:null,banco:null},regla_clabe:[e=>!!e||"Es necesario escribir la clabe",e=>e&&e.length<=18&&e.length>=18||"Es necesario escbibir de 18 digitos"]}),methods:{cerrrarDialogo(e){e.value=!1,this.$refs.formularioNuevoBeneficiario.reset()},async crearBeneficiario(e){if(this.$refs.formularioNuevoBeneficiario.validate()){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("beneficiario/crearBeneficiario",this.beneficiario);this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o}),o||this.cerrrarDialogo(e)}}}},An=Sn,Pn=Object(y["a"])(An,wn,In,!1,null,null,null),Tn=Pn.exports,En=function(){var e=this,a=e._self._c;return a($["a"],{attrs:{outlined:""}},[a(_["b"],[e._v(e._s(e.tipo_transferencia)+" ")]),a(_["c"],["transferencia"===e.solicitud_recurso["transferencia"].tipo?a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{outlined:"",label:"Clabe interbancaria",counter:"18",type:"number",rules:e.reglas_clabe_interbancaria},model:{value:e.solicitud_recurso["transferencia"]["transferencia"]["clabe_interbancaria"],callback:function(a){e.$set(e.solicitud_recurso["transferencia"]["transferencia"],"clabe_interbancaria",a)},expression:"solicitud_recurso['transferencia']['transferencia']['clabe_interbancaria']"}})],1)],1):e._e(),"cuenta"===e.solicitud_recurso["transferencia"].tipo?a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[e.solicitud_recurso["transferencia"]["cuenta"]["numero_cuenta"].length?e._e():a(Va["a"],{attrs:{outlined:"",label:"Numero de tarjeta",counter:"16",type:"number",rules:e.reglas_clabe},model:{value:e.solicitud_recurso["transferencia"]["cuenta"]["clabe"],callback:function(a){e.$set(e.solicitud_recurso["transferencia"]["cuenta"],"clabe",a)},expression:"solicitud_recurso['transferencia']['cuenta']['clabe']"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[e.solicitud_recurso["transferencia"]["cuenta"]["clabe"].length?e._e():a(Va["a"],{attrs:{outlined:"",label:"Numero cuenta",counter:"10",type:"number",rules:e.reglas_numero_cuenta},model:{value:e.solicitud_recurso["transferencia"]["cuenta"]["numero_cuenta"],callback:function(a){e.$set(e.solicitud_recurso["transferencia"]["cuenta"],"numero_cuenta",a)},expression:"solicitud_recurso['transferencia']['cuenta']['numero_cuenta']"}})],1)],1):e._e(),"servicio"===e.solicitud_recurso["transferencia"].tipo?a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{outlined:"",label:"Pago por convenio",counter:"20",type:"number",rules:e.reglas_convenio},model:{value:e.solicitud_recurso["transferencia"]["servicio"]["convenio"],callback:function(a){e.$set(e.solicitud_recurso["transferencia"]["servicio"],"convenio",a)},expression:"solicitud_recurso['transferencia']['servicio']['convenio']"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[e.solicitud_recurso["transferencia"]["servicio"]["linea_captura"].length?e._e():a(Va["a"],{attrs:{outlined:"",counter:"30",label:"Pago por referencia",type:"number",rules:e.reglas_referencia},model:{value:e.solicitud_recurso["transferencia"]["servicio"]["referencia"],callback:function(a){e.$set(e.solicitud_recurso["transferencia"]["servicio"],"referencia",a)},expression:"solicitud_recurso['transferencia']['servicio']['referencia']"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[e.solicitud_recurso["transferencia"]["servicio"]["referencia"].length?e._e():a(Va["a"],{attrs:{outlined:"",label:"Liena de captura",counter:"20",type:"number",rules:e.reglas_linea_captura},model:{value:e.solicitud_recurso["transferencia"]["servicio"]["linea_captura"],callback:function(a){e.$set(e.solicitud_recurso["transferencia"]["servicio"],"linea_captura",a)},expression:"solicitud_recurso['transferencia']['servicio']['linea_captura']"}})],1)],1):e._e()],1)],1)},On=[],Mn={props:{solicitud_recurso:{typeof:Object,default:()=>{}}},data:()=>({reglas_clabe_interbancaria:[e=>!!e||"Clabe interbancaria es requerido.",e=>18===e.length||"Debería tener 18 dígitos."],reglas_clabe:[e=>!!e||"Clabe es requerido.",e=>16===e.length||"Debería tener 18 dígitos."],reglas_numero_cuenta:[e=>!!e||"Numero cuenta es requerido.",e=>10===e.length||"Debería tener 10 dígitos."],reglas_convenio:[e=>!!e||"Convenio es requerido.",e=>20===e.length||"Debería tener 20 dígitos."],reglas_referencia:[e=>!!e||"Referencia es requerido.",e=>20<=e.length&&e.length<=30||"Debería tener 20 a 30 dígitos."],reglas_linea_captura:[e=>!!e||"Linea de captura es requerido.",e=>20===e.length||"Debería tener 18 dígitos."]}),computed:{tipo_transferencia(){let e="No ha seleccionado un tipo de transferencia.";switch(this.solicitud_recurso["transferencia"].tipo){case"transferencia":e="Transferencia interbancaria";break;case"cuenta":e="Cuenta bancaria";break;case"servicio":e="Servicio";break}return e}}},Fn=Mn,Dn=Object(y["a"])(Fn,En,On,!1,null,null,null),Vn=Dn.exports,Nn={props:{solicitud_recurso:{typeof:Object,default:()=>{}}},components:{"formulario-crear-beneficiario":Tn,"formulario-tipo-transferencia":Vn},computed:{beneficiarios(){return this.$store.getters["beneficiario/getBeneficiarios"]},beneficiario:{get(){return this.solicitud_recurso.beneficiario},set(e){this.solicitud_recurso.beneficiario=e}},banco:{get(){return this.solicitud_recurso.banco},set(e){this.solicitud_recurso.banco=e}},concepto_pago:{get(){return this.solicitud_recurso.concepto_pago},set(e){this.solicitud_recurso.concepto_pago=e}}},created(){this.inicializarBeneficiarios()},methods:{async inicializarBeneficiarios(){await this.$store.dispatch("beneficiario/obtenerBeneficiarios")}}},Rn=Nn,zn=Object(y["a"])(Rn,kn,$n,!1,null,null,null),Un=zn.exports,Bn={data:()=>({continuar_p4:!1,e6:1}),components:{"formulario-datos-generales":Un},computed:{beneficiarios(){return this.$store.getters["beneficiario/getBeneficiarios"]},trabajos_seleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},solicitudes_recurso_v2(){return this.$store.getters["recurso/getSolicitudesRecursoV2"]},solicitud_recurso_v2(){return this.$store.getters["recurso/getSolicitudRecursoV2"]},is_pago_separado(){return this.$store.getters["recurso/getIsPagoSeparadoSeleccionado"]},valid:{get(){return this.continuar_p4},set(e){if(this.$refs.formulario){let e=this.$refs.formulario.validate();this.$emit("eventoContinuar",{validacion:e})}else this.$emit("eventoContinuar",{validacion:!1});this.continuar_p4=e}}},created(){this.inicializarBeneficiarios()},methods:{async inicializarBeneficiarios(){await this.$store.dispatch("beneficiario/obtenerBeneficiarios")}}},Ln=Bn,qn=Object(y["a"])(Ln,jn,xn,!1,null,null,null),Hn=qn.exports,Gn=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v("Modalidad de pago")]),a(_["d"],{staticClass:"warning lighten-4"},[a(ti["a"],{attrs:{label:"¿Efectuar el pago por separado? "+(e.is_pago_por_separado?"SI":"NO"),inset:""},model:{value:e.is_pago_por_separado,callback:function(a){e.is_pago_por_separado=a},expression:"is_pago_por_separado"}})],1),a("br"),e.is_pago_por_separado?a(_["c"],[a($t["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"400"}},[a(ot["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a($t["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(kt["a"],{attrs:{items:e.solicitudes_recurso_v2,headers:e.cabecera,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:" p - Tp de n"}},scopedSlots:e._u([{key:"item.concepto",fn:function({index:t}){return[a("b",[e._v(e._s(e.trabajos_seleccionados[t].concepto))]),e._v(" ("+e._s(e.trabajos_seleccionados[t].proyecto)+") ")]}},{key:"item.inmueble",fn:function({index:a}){return[e._v(" "+e._s(e.trabajos_seleccionados[a].inmueble.nombre)+" ("+e._s(e.trabajos_seleccionados[a].inmueble.clave)+") ")]}},{key:"item.modalidad_pago",fn:function({item:t}){return[t.peticiones[0].error?a($["a"],{staticClass:"text-subtitle-2 text-center ma-1",attrs:{color:"error lighten-3",width:"200"}},[e._v(" "+e._s(t.peticiones[0].error)+" ")]):a($["a"],{staticClass:"ma-1",attrs:{width:"200"}},[a(At["a"],{attrs:{items:e.modalidades_pago,"item-text":"nombre","item-value":"value",label:"Modalidad de pago",rules:[e=>!!e||"Es necesario elegir una modalidad de pago"],outlined:"",clearable:"",filled:""},model:{value:t.modalidad_pago,callback:function(a){e.$set(t,"modalidad_pago",a)},expression:"item.modalidad_pago"}})],1)]}},{key:"item.tipo_pago",fn:function({item:t}){return[t.peticiones.error||"transferencia"!==t.modalidad_pago?e._e():a($["a"],{attrs:{icon:"",width:"200"}},[a(At["a"],{attrs:{rules:[e=>!!e||"Es necesario elegir un tipo de transferencia"],label:"Tipo transferencia",items:e.tipos_transferencia,"item-text":"nombre","item-value":"valor",outlined:"",clearable:"",filled:""},model:{value:t["transferencia"].tipo,callback:function(a){e.$set(t["transferencia"],"tipo",a)},expression:"item['transferencia'].tipo"}})],1)]}},{key:"item.eliminar",fn:function({index:t}){return[a(d["a"],{attrs:{icon:""},on:{click:function(a){return e.confirmarEliminacion(t)}}},[a(m["a"],{attrs:{color:"error"}},[e._v("mdi-trash-can")])],1)]}}])})],1)],1)],1)],1):a(_["c"],[a(ot["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{cols:"12",sm:"6"}},[a(At["a"],{attrs:{items:e.modalidades_pago,"item-text":"nombre","item-value":"value",label:"Modalidad de pago",rules:[e=>!!e||"Es necesario elegir una modalidad de pago"],outlined:"",clearable:"",filled:""},model:{value:e.modalidad_pago,callback:function(a){e.modalidad_pago=a},expression:"modalidad_pago"}})],1),"transferencia"===e.modalidad_pago?a(qa["a"],{attrs:{cols:"12",sm:"6"}},["transferencia"===e.modalidad_pago?a(At["a"],{attrs:{rules:[e=>!!e||"Es necesario elegir un tipo de transferencia"],label:"Tipo transferencia",items:e.tipos_transferencia,"item-text":"nombre","item-value":"valor",outlined:"",clearable:"",filled:""},model:{value:e.tipo_transferencia,callback:function(a){e.tipo_transferencia=a},expression:"tipo_transferencia"}}):e._e()],1):e._e()],1)],1)],1)],1)},Xn=[],Jn={data:()=>({continuar_p4:!1,is_formulario_tipo_transferencia:!1,modalidades_pago:[{nombre:"Transferencia",value:"transferencia"},{nombre:"Cheque",value:"cheque"}],tipos_transferencia:[{nombre:"Transferencia",valor:"transferencia"},{nombre:"Cuenta",valor:"cuenta"},{nombre:"Servicio",valor:"servicio"}],cabecera:[{text:"Trabajo",value:"concepto"},{text:"Inmueble",value:"inmueble"},{text:"Modalidad pago",value:"modalidad_pago"},{text:"Tipo de pago",value:"tipo_pago"},{text:"Eliminar",value:"eliminar"}]}),computed:{trabajos_seleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},solicitudes_recurso_v2(){return this.$store.getters["recurso/getSolicitudesRecursoV2"]},solicitud_recurso_v2(){return this.$store.getters["recurso/getSolicitudRecursoV2"]},valid:{get(){return this.continuar_p4},set(e){if(this.$refs.formulario){let e=this.$refs.formulario.validate();this.$emit("eventoContinuar",{validacion:e})}else this.$emit("eventoContinuar",{validacion:!1});this.continuar_p4=e}},modalidad_pago:{get(){return this.solicitud_recurso_v2.modalidad_pago},set(e){this.$store.commit("recurso/setModalidadPagoSolicitudRecurso",e)}},tipo_transferencia:{get(){return this.solicitud_recurso_v2["transferencia"].tipo},set(e){this.$store.commit("recurso/setTipoTransferenciaSolicitudRecurso",e)}},is_pago_por_separado:{get(){return this.$store.getters["recurso/getIsPagoSeparadoSeleccionado"]},set(e){e&&this.$store.dispatch("recurso/inicializarAsignacionPeticionesSolicitudesRecurso",e),this.$store.commit("recurso/setIsPagoSeparadoSeleccionado",e)}}},methods:{confirmarEliminacion(e){this.$store.commit("trabajo/deleteSeleccionado",e),this.$store.commit("recurso/deletePeticionesVerificadas",e),this.$store.commit("recurso/deleteSolicitudesRecursoV2",e)}}},Yn=Jn,Kn=Object(y["a"])(Yn,Gn,Xn,!1,null,null,null),Qn=Kn.exports,Zn=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(_["d"],{staticClass:"grey white--text"},[e._v(e._s(e.is_pago_por_separado?"Solicitudes de recursos":"Solicitud de recurso"))]),a($t["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a("listar-comprobacion-solicitud-recurso",{attrs:{solicitudes_recurso:e.is_pago_por_separado?e.solicitudes_recurso_v2:[e.solicitud_recurso_v2]}})],1)],1)},Wn=[],ec=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{dense:""}},e._l(e.solicitudes_recurso,(function(t,o){return a(qa["a"],{key:o,attrs:{xl:"6",lg:"6",md:"12",sm:"12",xs:"12"}},[a(I["a"],{attrs:{color:"primary lighten-2"}},[a(S["a"],[a(P["b"],[a(P["d"],[e._v(" Modalidad pago: "),a("b",[e._v(e._s(t.modalidad_pago))])])],1),"transferencia"===t.modalidad_pago?a(P["b"],[a(P["d"],[e._v(" Tipo transferencia: "),a("b",[e._v(e._s(t["transferencia"].tipo))])])],1):e._e(),a(P["b"],[a(P["d"],[e._v(" Total ")]),a(P["c"])],1)],1),a(S["a"],[a(P["b"],[a(P["d"],[e._v(" Datos bancarios ")]),a(P["c"],[e._v(" "+e._s(t.modalidad_pago)+" ")])],1),a(P["b"],[a(P["d"],[e._v(" Datos generales ")]),a(P["c"],[a("b",[e._v("Beneficiario")]),e._v(": "+e._s(t.beneficiario)),a("br"),a("b",[e._v("Banco")]),e._v(": "+e._s(t.banco)),a("br"),a("b",[e._v("Concepto")]),e._v(": "+e._s(t.concepto_pago)),a("br")])],1)],1)],1),a($t["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(Mr["a"],{staticClass:"container",attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v(" Concepto del trabajo ")]),a("th",{staticClass:"text-left"},[e._v(" Inmueble ")]),a("th",{staticClass:"text-left"},[e._v(" Importe ")])])]),a("tbody",e._l(t.peticiones,(function(t,r){return a("tr",{key:r,class:t.error?"error lighten-3":""},[a("td",[a("b",[e._v(e._s(e.trabajos_seleccionados[o+r].concepto))]),e._v(" ("+e._s(e.trabajos_seleccionados[o+r].proyecto)+")")]),a("td",[e._v(e._s(e.trabajos_seleccionados[o+r].inmueble.nombre)+" ("),a("b",[e._v(e._s(e.trabajos_seleccionados[o+r].inmueble.clave))]),e._v(")")]),a("td",[e._v(e._s(t.monto?new Number(parseFloat(t.monto).toFixed(2)).toLocaleString("es-MX",{style:"currency",currency:"MXN"}):""))])])})),0)]},proxy:!0}],null,!0)})],1)],1)})),1)},ac=[],tc={props:{solicitudes_recurso:{typeof:Array,default:()=>[]}},computed:{trabajos_seleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]}}},oc=tc,rc=Object(y["a"])(oc,ec,ac,!1,null,null,null),ic=rc.exports,sc={components:{"listar-comprobacion-solicitud-recurso":ic},computed:{solicitudes_recurso_v2(){return this.$store.getters["recurso/getSolicitudesRecursoV2"]},solicitud_recurso_v2(){return this.$store.getters["recurso/getSolicitudRecursoV2"]},is_pago_por_separado(){return this.$store.getters["recurso/getIsPagoSeparadoSeleccionado"]}}},nc=sc,cc=Object(y["a"])(nc,Zn,Wn,!1,null,null,null),lc=cc.exports,uc={data:()=>({e1:2,mostrar_seleccionados:!0,isValid_p2:!1,isValid_p3:!1,isValid_p4:!1,headers:[{text:"Proyecto",value:"proyecto"},{text:"Concepto",value:"concepto"},{text:"Status",value:"status"},{text:"Inmueble",value:"inmueble.nombre"},{value:"inmueble",text:"Ubicación del inmueble"},{text:"Usuario en campo",value:"inmueble.municipio"}],cabecera:[{text:"Concepto del trabajo",value:"concepto"},{text:"Inmueble",value:"inmueble"},{text:"Importe",value:"monto"},{text:"Eliminar",value:"eliminar"}],obj_filtrar:{show_filtado_btn:!0,array_atributos_filtro:[{text:"Campo",indice:3}]}}),components:{"tabla-trabajos-usuario":Yt,"formulario-importe-peticiones":yn,"formulario-crear-recurso":Qn,"datos-generales":Hn,"crear-recurso":lc},computed:{trabajos(){return this.$store.getters["trabajo/getTrabajos"]},trabajosSeleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},isTrabajosSeleccionados(){return!this.$store.getters["trabajo/getTrabajosSeleccionados"].length},verificar_peticiones(){return this.$store.getters["recurso/getVerificarPeticiones"]},peticiones_verificadas(){return this.$store.getters["recurso/getPeticionesVerificadas"]},solicitud_recurso_v2(){return this.$store.getters["recurso/getSolicitudRecursoV2"]},total(){var e=0;for(const a of this.$store.getters["recurso/getPeticionesVerificadas"])e=a.monto?Number(a.monto)+e:0+e;return new Number(e.toFixed(2)).toLocaleString("es-MX",{style:"currency",currency:"MXN"})},contacto(){return this.$store.getters["contacto/getContacto"]},is_pago_por_separado(){return this.$store.getters["recurso/getIsPagoSeparadoSeleccionado"]}},created(){this.$store.commit("trabajo/setMensaje","Elige a un usuario en el campo correspondiente para filtrar sus trabajos.")},methods:{setValidP2({validacion:e}){this.isValid_p2=e},setValidP3({validacion:e}){this.isValid_p3=e},setValidP4({validacion:e}){this.isValid_p4=e},async verificarPeticiones(){let e=-1;for(const a of this.verificar_peticiones)if(e=this.peticiones_verificadas.findIndex(e=>e.trabajo===a.trabajo),-1===e){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("recurso/verificarPeticiones",this.verificar_peticiones);this.$store.commit("recurso/setIsPagoSeparadoSeleccionado",!1),this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t});break}this.e1=3},getFechaMod(){let e=new Date;return e.toLocaleDateString()},async asignarPeticionesSolicitudRecurso(){this.$store.dispatch("recurso/inicializarAsignacionPeticionesSolicitudRecurso"),this.e1=6},async crearSolicitudRecurso(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("recurso/crearRecurso");t||this.$store.commit("trabajo/clearSeleccionados"),this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})},async recuperarTrabajosUsuarioCampo({contacto:e}){e?(this.$store.commit("contacto/setContacto",e),await this.$store.dispatch("trabajo/obtenerTrabajosUsuario",{usuario_campo:e.id})):(this.$store.commit("contacto/clearContacto"),this.$store.commit("trabajo/cleanTrabajos"),this.$store.commit("trabajo/setMensaje","Elige a un usuario en el campo correspondiente para filtrar sus trabajos.")),this.$store.commit("trabajo/clearSeleccionados")}}},dc=uc,mc=Object(y["a"])(dc,pn,bn,!1,null,null,null),pc=mc.exports,bc=function(){var e=this,a=e._self._c;return a(Da["a"],[a($["a"],{staticClass:"mx-auto"},[a(Ja["a"],{model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(Ga["a"],{attrs:{to:{name:"personal"}}},[e._v("Personal")]),a(Ga["a"],{attrs:{to:{name:"contactos"}}},[e._v("Contacto")])],1)],1),a("br"),a("router-view")],1)},_c=[],gc={data:()=>({tab:1})},fc=gc,hc=Object(y["a"])(fc,bc,_c,!1,null,null,null),vc=hc.exports,yc=function(){var e=this,a=e._self._c;return a(Da["a"],[a(s["a"],{attrs:{fluid:""}},[a("router-view")],1)],1)},jc=[],xc={},Cc=Object(y["a"])(xc,yc,jc,!1,null,null,null),kc=Cc.exports,$c=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{"no-gutters":"",justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a($["a"],[a("grupos-permisos",{attrs:{grupos:e.grupos,cabecera:e.cabecera}})],1)],1)],1)},wc=[],Ic=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto"},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Grupos y permisos ")]),a(_["c"],[a(kt["a"],{attrs:{items:e.grupos,headers:e.cabecera,loading:e.is_cargando,"no-data-text":"No se encontraron grupos.","footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"}}})],1)],1)},Sc=[],Ac={props:{grupos:{type:Array,default:()=>[]},cabecera:{type:Array,default:()=>[]}},computed:{is_cargando(){return this.$store.getters["grupo/getCargando"]}}},Pc=Ac,Tc=Object(y["a"])(Pc,Ic,Sc,!1,null,null,null),Ec=Tc.exports,Oc={components:{"grupos-permisos":Ec},data:()=>({cabecera:[{text:"Nombre",value:"nombre"},{text:"Num. de permisos",value:"permisos"},{text:"Accion"}]}),computed:{grupos(){return this.$store.getters["grupo/getGrupos"]}},created(){this.obtenerGrupos()},methods:{async obtenerGrupos(){const{mensaje:e,error:a,estado:t}=await this.$store.dispatch("grupo/obtenerGrupos");this.$store.commit("alerta/addAlertas",{estado:t,mensaje:e,error:a})}}},Mc=Oc,Fc=Object(y["a"])(Mc,$c,wc,!1,null,null,null),Dc=Fc.exports,Vc=function(){var e=this,a=e._self._c;return a(Da["a"],[a($["a"],{staticClass:"mx-auto"},[a(Ja["a"],[a(Ga["a"],{attrs:{to:{name:"inuembles-coordinador",params:{nombre_usuario:e.nombre_usuario}}}},[e._v("Inmuebles")]),a(Ga["a"],{attrs:{to:{name:"trabajos-coordinador",params:{nombre_usuario:e.nombre_usuario}}}},[e._v("Trabajos")]),a(Ga["a"],{attrs:{to:{name:"peticiones-coordinador",params:{nombre_usuario:e.nombre_usuario}}}},[e._v("Peticiones")])],1)],1),a("br"),a("router-view")],1)},Nc=[],Rc={computed:{nombre_usuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}}},zc=Rc,Uc=Object(y["a"])(zc,Vc,Nc,!1,null,null,null),Bc=Uc.exports,Lc=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{"no-gutters":"",justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a($["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a("tabla-miembros",{attrs:{usuarios:e.usuarios,cabeceras:e.cabeceras},on:{actualizarListaUsuario:e.listarUsuarios}})],1)],1)],1)},qc=[],Hc=function(){var e=this,a=e._self._c;return a($["a"],{attrs:{flat:""}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Personal "),a(n["a"]),a(Va["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar usuaros","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.buscar,callback:function(a){e.buscar=a},expression:"buscar"}})],1),a(_["b"],{staticClass:"grey lighten-2"},[e._v(e._s(e.usuarios.length)+" "+e._s(1===e.usuarios.length?"Usuario":"Usuarios"))]),a(_["c"],[a(kt["a"],{attrs:{items:e.usuarios,headers:e.cabeceras,"no-data-text":e.mensaje,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"},search:e.buscar},scopedSlots:e._u([{key:"top",fn:function(){return[a(wt["a"],{attrs:{flat:""}},[a(n["a"]),a("formulario-crear-nuevo-usuario"),a("filtrar-usuarios"),a(d["a"],{staticClass:"ma-2",attrs:{color:"info"},on:{click:function(a){return e.$emit("actualizarListaUsuario")}}},[a(m["a"],{attrs:{left:""}},[e._v("mdi-reload")]),e._v("Actualizar")],1)],1)]},proxy:!0},{key:"item.nombre",fn:function({item:a}){return[e._v(" "+e._s(a.nombre)+" "+e._s(a.apellidos)+" ")]}},{key:"item.is_activo",fn:function({item:t,index:o}){return[a("confirmar-permisos",{attrs:{indice:o,tipo_pago:`Confirmar ${t.is_activo?"desactivación":"activación "} de ${t.nombre_usuario}`,mensaje:`Estás a punto de ${t.is_activo?"desactivar":"activar "} el siguiente usuario. ¿Estás seguro?`,icon:t.is_activo?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline",color:t.is_activo?"success":"error"},on:{emitConfirmacion:e.cambiarPermisoActivo}})]}},{key:"item.is_personal",fn:function({item:t,index:o}){return[a("confirmar-permisos",{attrs:{indice:o,tipo_pago:"Confirmar personal",mensaje:`Estás a punto de ${t.is_personal?"desactivar":"confirmar "} el siguiente personal. ¿Estás seguro?`,icon:t.is_personal?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline",color:t.is_personal?"success":"error"},on:{emitConfirmacion:e.cambiarPermisoPersonal}})]}},{key:"item.is_superusuario",fn:function({item:t}){return[a(m["a"],{attrs:{color:t.is_superusuario?"success":"error",disabled:""}},[e._v(" "+e._s(t.is_superusuario?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline")+" ")])]}},{key:"item.accion",fn:function({item:t}){return[a(E["a"],{attrs:{left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(d["a"],e._g(e._b({attrs:{icon:"",color:"info"}},"v-btn",t,!1),o),[a(m["a"],[e._v("mdi-account-edit")])],1)]}}],null,!0)},[a(I["a"],[a(S["a"],{attrs:{link:""}},[a(P["d"],[a("formulario-asignar-privilegios-usuario",{attrs:{usuario:t}})],1)],1),a(S["a"],[a(P["d"],[a("formulario-asignar-estados-usuario",{attrs:{usuario:t}})],1)],1),a(S["a"],{staticStyle:{"background-color":"rgba(255, 0, 0, 0.2)"},attrs:{link:""},on:{click:function(a){return e.desactivarUsuarioPersonal(t)}}},[a(P["d"],[e._v(" Desactivar usuario ")])],1)],1)],1)]}}])})],1)],1)},Gc=[],Xc=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{width:"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a("span",e._g(e._b({},"span",o,!1),t),[e._v("Gestionar privilegios")])]}}]),model:{value:e.is_dialogo,callback:function(a){e.is_dialogo=a},expression:"is_dialogo"}},[a($["a"],[a(_["d"],{staticClass:"grey lighten-2"},[e._v("Privilegios de "+e._s(e.usuario.nombre)+" "),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){e.is_dialogo=!1}}},[a(m["a"],[e._v("mdi-close")])],1)],1),e.grupos.length?a(_["c"],[a(Ha["a"],{attrs:{dense:""}},e._l(e.privilegios,(function(t){return a(qa["a"],{key:t.id,attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(ti["a"],{attrs:{label:t.nombre,inset:"",value:t.id},on:{change:function(a){return e.setPrivilegioPersonal(t)}},model:{value:e.privilegio_usuario,callback:function(a){e.privilegio_usuario=a},expression:"privilegio_usuario"}})],1)})),1)],1):a(_["c"],{staticClass:"text--primary container"},[a("br"),a("span",[e._v("No hay una lista de privilegios para asignar al usuario.")])]),a(_["a"],[a(n["a"]),a(d["a"],{staticClass:"ma-2",attrs:{disabled:!e.grupos.length,color:"error",outlined:""},on:{click:function(a){e.is_dialogo=!1}}},[e._v("Cancelar")]),a(d["a"],{attrs:{disabled:!e.grupos.length,color:"success",outlined:""},on:{click:function(a){return e.asignarPrivilegios()}}},[e._v("Asignar")])],1)],1)],1)},Jc=[],Yc={props:{usuario:{type:Object,default:()=>({})}},data:()=>({dialogo:!1}),computed:{is_dialogo:{get(){return this.dialogo},set(e){this.dialogo=e}},grupos(){const e=[],{grupos:a}=this.usuario;for(const t of this.$store.getters["grupo/getGrupos"]){let o=!!a.includes(t.id);e.push({id:t.id,nombre:t.nombre,is_active:o})}return e},privilegios(){return this.$store.getters["grupo/getGrupos"]},privilegio_usuario:{get(){return this.usuario.grupos},set(e){if(!Array.isArray(e))if(this.usuario.grupos.includes(e)){let a=this.usuario.grupos.indexOf(e);this.usuario.grupos.splice(a,1)}else this.usuario.grupos.push(e)}}},methods:{setPrivilegioPersonal(e){this.privilegio_usuario=e.id},async asignarPrivilegios(){const{estado:e,mensaje:a,error:t}=await this.$store.dispatch("usuario/actulizarPrivilegiosPersonal",this.usuario);this.$store.commit("alerta/addAlertas",{estado:e,mensaje:a,error:t})}}},Kc=Yc,Qc=Object(y["a"])(Kc,Xc,Jc,!1,null,null,null),Zc=Qc.exports,Wc=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{width:"auto","max-width":"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a("span",e._g(e._b({},"span",o,!1),t),[e._v("Gestionar cargos")])]}}]),model:{value:e.is_dialogo,callback:function(a){e.is_dialogo=a},expression:"is_dialogo"}},[a($["a"],[a(_["d"],{staticClass:"grey lighten-2"},[e._v("Estados a cargo de "+e._s(e.usuario.nombre)+" "),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){return e.cerrarDialogo()}}},[a(m["a"],[e._v("mdi-close")])],1)],1),e.estados.length?a(_["c"],[a("br"),a(At["a"],{attrs:{items:e.estados,"item-text":"nombre","item-value":"id",chips:"",label:"Estados",multiple:"",outlined:"",primary:""},model:{value:e.estados_cargo,callback:function(a){e.estados_cargo=a},expression:"estados_cargo"}})],1):a(_["c"],{staticClass:"text--primary container"},[a("br"),a("span",[e._v("No hay una lista de estados para asignar al usuario.")])]),a(_["a"],[a(n["a"]),a(d["a"],{staticClass:"ma-2",attrs:{color:"error",outlined:""},on:{click:function(a){return e.cerrarDialogo()}}},[e._v("Cancelar")]),a(d["a"],{attrs:{color:"success",outlined:"",disabled:e.is_disabled},on:{click:function(a){return e.asignarEstados()}}},[e._v("Asignar")])],1)],1)],1)},el=[],al={props:{usuario:{type:Object,default:()=>({})}},data:()=>({dialogo:!1,set_estados_cargo:[]}),created(){this.inicializarEstados()},computed:{estados(){return this.$store.getters["ubicacion/getEstados"]},is_dialogo:{get(){return this.dialogo},set(e){this.dialogo=e,e&&(this.set_estados_cargo=this.usuario.estados_cargo)}},estados_cargo:{get(){return this.set_estados_cargo},set(e){this.set_estados_cargo=e}},is_disabled(){const e=new Set(this.usuario.estados_cargo),a=new Set(this.estados_cargo);return!(this.usuario.estados_cargo.length!==this.estados_cargo.length||![...e].every(e=>a.has(e)))}},methods:{async inicializarEstados(){await this.$store.dispatch("ubicacion/obtenerEstados")},cerrarDialogo(){this.dialogo=!1},async asignarEstados(){const{error:e,mensaje:a,status:t}=await this.$store.dispatch("usuario/asignarEstadosUsuario",{id:this.usuario.id,estados_cargo:this.estados_cargo});this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:e})}}},tl=al,ol=Object(y["a"])(tl,Wc,el,!1,null,null,null),rl=ol.exports,il=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{persistent:"","max-width":"800"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({staticClass:"ma-2",attrs:{color:"success",dark:""}},"v-btn",o,!1),t),[a(m["a"],{attrs:{dark:"",left:""}},[e._v(" mdi-account-plus ")]),e._v(" Agregar nuevo personal ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a($["a"],{staticClass:"mx-auto",attrs:{loading:e.is_cargando,disabled:e.is_cargando}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Agregar nuevo personal "),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){return e.cerrar()}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(_["c"],[a(ot["a"],{ref:"form",staticClass:"container",attrs:{"lazy-validation":""}},[a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{rules:[e=>!!e||"Se requiere el nombre",e=>e&&e.length>=3||"El nombre debe tener al menos 3 caracteres"],label:"Nombre",outlined:"",dense:"",filled:""},model:{value:e.usuario.nombre,callback:function(a){e.$set(e.usuario,"nombre",a)},expression:"usuario.nombre"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{label:"Apellidos",rules:[e=>!!e||"Se requiere el apellido",e=>e&&e.length>=3||"El apellido debe tener al menos 3 caracteres"],outlined:"",dense:"",filled:""},model:{value:e.usuario.apellidos,callback:function(a){e.$set(e.usuario,"apellidos",a)},expression:"usuario.apellidos"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{label:"Nombre usuario",rules:[e=>!!e||"Se requiere el nombre del usuario",e=>e&&e.length>=3||"El nombre de usuario debe tener al menos 3 caracteres"],outlined:"",dense:"",filled:""},model:{value:e.usuario.nombre_usuario,callback:function(a){e.$set(e.usuario,"nombre_usuario",a)},expression:"usuario.nombre_usuario"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"6",md:"6",lg:"6",xl:"6"}},[a(Va["a"],{attrs:{label:"Correo",rules:[e=>!!e||"Se requiere el correo electronico",e=>e&&e.length>=3||"El correo electronico debe tener al menos 3 caracteres",e=>!/.+@.+\..+/.test(e)||"Solo selecciona el nombre del dominio"],outlined:"",dense:"",filled:""},model:{value:e.usuario.correo,callback:function(a){e.$set(e.usuario,"correo",a)},expression:"usuario.correo"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"6",md:"6",lg:"6",xl:"6"}},[a(At["a"],{attrs:{items:e.dominios,label:"Dominios",outlined:"",dense:"",filled:""},model:{value:e.dominio,callback:function(a){e.dominio=a},expression:"dominio"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"6",md:"6",lg:"6",xl:"6"}},[a(Va["a"],{attrs:{"append-icon":e.mostrar_pwd?"mdi-eye":"mdi-eye-off",rules:[e=>!!e||"Se requiere la contraseña",e=>e&&e.length>=8||"La contraseña debe tener al menos 8 caracteres"],type:e.mostrar_pwd?"text":"password",label:"Contraseña",outlined:"",dense:"",filled:""},on:{"click:append":function(a){e.mostrar_pwd=!e.mostrar_pwd}},model:{value:e.usuario.pwd,callback:function(a){e.$set(e.usuario,"pwd",a)},expression:"usuario.pwd"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"6",md:"6",lg:"6",xl:"6"}},[a(Va["a"],{attrs:{type:"password",label:"Verificar contraseña",outlined:"",dense:"",rules:[e=>!!e||"Se requiere verificación de la contraseña"],"error-messages":e.error_messages_verificar_pwd,filled:""},model:{value:e.verificar_pwd,callback:function(a){e.verificar_pwd=a},expression:"verificar_pwd"}})],1),a(qa["a"],{staticStyle:{border:"1px solid rgba(0, 0, 0, 0.3)","border-radius":"4px",background:"rgba(0, 0, 0, 0.06)","padding-right":"12px","padding-left":"12px","padding-top":"0%","padding-bottom":"0%"},attrs:{xs:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[e.privilegios.length?a(Ha["a"],{attrs:{dense:""}},e._l(e.privilegios,(function(t){return a(qa["a"],{key:t.id,attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[a(ti["a"],{attrs:{label:t.nombre,inset:"",value:t.id},on:{change:function(a){return e.setPrivilegioPersonal(t)}},model:{value:e.privilegio_usuario,callback:function(a){e.privilegio_usuario=a},expression:"privilegio_usuario"}})],1)})),1):a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],[a("span",[e._v("No hay una lista de privilegios para asignar al usuario.")])])],1)],1)],1)],1)],1),a(_["a"],[a(n["a"]),a(d["a"],{staticClass:"ma-3",attrs:{color:"red",dark:""},on:{click:function(a){return e.cerrar()}}},[e._v("Cerrar")]),a(d["a"],{attrs:{color:"green",dark:""},on:{click:function(a){return e.crearMiembro()}}},[e._v("Agregar")])],1)],1)],1)},sl=[],nl={data:()=>({dominio:"@advr.mx",dialog:!1,dominios:["@advr.mx","@gesscorpzero.com"],mostrar_pwd:!1,is_personal:!0,pwd:"",error_messages_verificar_pwd:"",privilegio_seleccionado:-1}),computed:{usuario(){return this.$store.getters["usuario/getUsuario"]},is_cargando(){return this.$store.getters["usuario/getCargando"]},verificar_pwd:{get(){return this.pwd},set(e){this.pwd=e,this.error_messages_verificar_pwd=this.usuario.pwd===this.pwd?"":"Las contraseñas no coinciden"}},privilegios(){return this.$store.getters["grupo/getGrupos"]},privilegio_usuario:{get(){return this.usuario.grupos},set(e){if(!Array.isArray(e))if(this.usuario.grupos.includes(e)){let a=this.usuario.grupos.indexOf(e);this.usuario.grupos.splice(a,1)}else this.usuario.grupos.push(e)}}},methods:{async crearMiembro(){if(this.$refs.form.validate()){let e=this.usuario.correo;this.usuario.correo=this.usuario.correo.concat(this.dominio);const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("usuario/crearUsuario");this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o}),o?this.usuario.correo=e.concat(this.dominio):this.cerrar()}},cerrar(){this.$refs.form.reset(),this.$refs.form.resetValidation(),this.dialog=!1,this.dominio="@advr.mx"},setPrivilegioPersonal(e){this.privilegio_usuario=e.id}}},cl=nl,ll=Object(y["a"])(cl,il,sl,!1,null,null,null),ul=ll.exports,dl=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{scrollable:"","max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({staticClass:"ma-1",attrs:{color:"primary"}},"v-btn",o,!1),t),[a(m["a"],{attrs:{left:""}},[e._v("mdi-filter-variant")]),e._v(" Filtros ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a($["a"],{staticClass:"mx-auto"},[a(_["d"],[1===e.paso_filtro?a(d["a"],{attrs:{icon:""},on:{click:function(a){e.dialog=!1}}},[a(m["a"],[e._v("mdi-chevron-left")])],1):a(d["a"],{attrs:{icon:""},on:{click:function(a){e.paso_filtro=1,e.filtro=-1}}},[a(m["a"],[e._v("mdi-chevron-left")])],1),a(n["a"]),e._v(" "+e._s(e.filtro>-1?e.opciones_filtrado[e.filtro].text:"")+" "),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"primary"},on:{click:function(a){return e.cleanAll()}}},[a(m["a"],[e._v("mdi-eraser")])],1)],1),a(w["a"]),a(Pt["a"],{attrs:{elevation:"0"},model:{value:e.paso_filtro,callback:function(a){e.paso_filtro=a},expression:"paso_filtro"}},[a(Et["b"],[a(Tt["a"],{attrs:{step:"1"}},[a(I["a"],[a(T["a"],{model:{value:e.filtro,callback:function(a){e.filtro=a},expression:"filtro"}},e._l(e.opciones_filtrado,(function(t,o){return a(S["a"],{key:o,on:{click:function(a){e.paso_filtro=o+2}},scopedSlots:e._u([{key:"default",fn:function({active:o}){return[a(P["b"],[a(P["d"],[e._v(e._s(t.text))]),a(P["c"],[e._v(e._s(e.privilegio.nombre))])],1),a(A["a"],[a(d["a"],{attrs:{"input-value":o,icon:""}},[a(m["a"],[e._v("mdi-chevron-right")])],1)],1)]}}],null,!0)})})),1)],1)],1),a(Tt["a"],{attrs:{step:"2"}},[a(At["a"],{staticClass:"mt-1",attrs:{items:e.privilegios,label:"Privilegios","item-text":"nombre","return-object":"",outlined:"",dense:"",clearable:""},model:{value:e.privilegio,callback:function(a){e.privilegio=a},expression:"privilegio"}})],1)],1)],1),a(_["a"],[a(d["a"],{attrs:{block:"",color:"primary"},on:{click:function(a){return e.obtenerUsuariosPrivilegios(e.privilegio)}}},[e._v("Ver Usuarios")])],1)],1)],1)},ml=[],pl={data:()=>({dialog:!1,privilegio_selecconado:"",opciones_filtrado:[{text:"Privilegios"}],paso_filtro_seleccionado:1,filtro:-1}),computed:{privilegios(){return this.$store.getters["grupo/getGrupos"]},privilegio:{get(){return this.privilegio_selecconado},set(e){null===e&&this.obtenerUsuariosPrivilegios(""),this.privilegio_selecconado=e||""}},paso_filtro:{get(){return this.paso_filtro_seleccionado},set(e){this.paso_filtro_seleccionado=e,2==e&&0==this.privilegios.length&&this.obtenerGrupos()}}},methods:{async obtenerGrupos(){await this.$store.dispatch("grupo/obtenerGrupos")},async obtenerUsuariosPrivilegios({id:e}){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("usuario/obtenerUsuarios",{privilegio:e||""});this.privilegio&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o})},cleanAll(){this.privilegio_selecconado=""}}},bl=pl,_l=Object(y["a"])(bl,dl,ml,!1,null,null,null),gl=_l.exports,fl={props:{usuarios:{type:Array,default:()=>[]},cabeceras:{type:Array,default:()=>[]}},data:()=>({buscar:""}),created(){this.obtenerPrivilegios()},computed:{mensaje(){return"Personal no encontrado."}},components:{"formulario-crear-nuevo-usuario":ul,"confirmar-permisos":Co,"formulario-asignar-privilegios-usuario":Zc,"filtrar-usuarios":gl,"formulario-asignar-estados-usuario":rl},methods:{async cambiarPermisoActivo({indice:e,confirmacion:a}){if(a){const{id:a,is_activo:t,is_personal:o}=this.usuarios[e],{mensaje:r,error:i,estado:s}=await this.$store.dispatch("usuario/actulizarPermisos",{id:a,indice:e,is_activo:!t,is_personal:o});this.$store.commit("alerta/addAlertas",{estado:s,mensaje:r,error:i})}},async desactivarUsuarioPersonal({id:e}){const{error:a,mensaje:t,estado:o}=await this.$store.dispatch("usuario/desactivarUsuarioPersonal",e);this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:a})},async cambiarPermisoPersonal({indice:e,confirmacion:a}){if(a){const{id:a,is_activo:t,is_personal:o}=this.usuarios[e],{mensaje:r,error:i,estado:s}=await this.$store.dispatch("usuario/actulizarPermisos",{id:a,indice:e,is_activo:t,is_personal:!o});this.$store.commit("alerta/addAlertas",{estado:s,mensaje:r,error:i})}},async obtenerPrivilegios(){await this.$store.dispatch("grupo/obtenerGrupos")}}},hl=fl,vl=Object(y["a"])(hl,Hc,Gc,!1,null,null,null),yl=vl.exports,jl={data:()=>({cabeceras:[{text:"Correo",value:"correo_electronico"},{text:"Usuario",value:"nombre_usuario"},{text:"Nombre",value:"nombre"},{text:"Activo",value:"is_activo",align:"center"},{text:"Personal",value:"is_personal",align:"center"},{text:"Super usuario",value:"is_superusuario",align:"center"},{text:"Acciones",value:"accion"}]}),components:{"tabla-miembros":yl},computed:{usuarios(){return this.$store.getters["usuario/getUsuarios"]}},created(){this.listarUsuarios()},methods:{async listarUsuarios(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("usuario/obtenerUsuarios",{privilegio:""});this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},xl=jl,Cl=Object(y["a"])(xl,Lc,qc,!1,null,null,null),kl=Cl.exports,$l=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{"no-gutters":"",justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a($["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a("tabla-contactos",{attrs:{contactos:e.contactos,cabeceras:e.cabeceras},on:{actualizarListaUsuario:e.inicializarContactos}})],1)],1)],1)},wl=[],Il=function(){var e=this,a=e._self._c;return a($["a"],{attrs:{flat:""}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Contacto "),a(n["a"]),a(Va["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar contactos","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.buscar,callback:function(a){e.buscar=a},expression:"buscar"}})],1),a(_["b"],{staticClass:"grey lighten-2"},[e._v(e._s(e.contactos.length)+" "+e._s(1===e.contactos.length?"Usuario":"contactos"))]),a(_["c"],[a(kt["a"],{attrs:{items:e.contactos,headers:e.cabeceras,"no-data-text":e.mensaje,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"},search:e.buscar},scopedSlots:e._u([{key:"top",fn:function(){return[a(wt["a"],{attrs:{flat:""}},[a(n["a"]),a("formulario-crear-nuevo-usuario")],1)]},proxy:!0},{key:"item.nombre",fn:function({item:a}){return[e._v(" "+e._s(a.nombre)+" "+e._s(a.apellidos)+" ")]}},{key:"item.accion",fn:function(){return[a(E["a"],{attrs:{left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(d["a"],e._g(e._b({attrs:{icon:"",color:"info"}},"v-btn",t,!1),o),[a(m["a"],[e._v("mdi-account-edit")])],1)]}}])},[a(I["a"],[a(S["a"],{attrs:{link:""}},[a(P["d"],[e._v(" Gestionar campos ")])],1),a(S["a"],{staticStyle:{"background-color":"rgba(255, 0, 0, 0.2)"},attrs:{link:""}},[a(P["d"],[e._v(" Desactivar contacto ")])],1)],1)],1)]},proxy:!0}])})],1)],1)},Sl=[],Al=function(){var e=this,a=e._self._c;return a(tt["a"],{attrs:{persistent:"","max-width":"800"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(d["a"],e._g(e._b({staticClass:"ma-2",attrs:{color:"success",dark:""}},"v-btn",o,!1),t),[a(m["a"],{attrs:{dark:"",left:""}},[e._v(" mdi-contacts ")]),e._v(" Agregar nuevo contacto ")],1)]}}]),model:{value:e.is_dialogo,callback:function(a){e.is_dialogo=a},expression:"is_dialogo"}},[a($["a"],{staticClass:"mx-auto",attrs:{loading:e.is_cargando_mod_cliente,disabled:e.is_cargando_mod_cliente}},[a(_["d"],{staticClass:"grey lighten-2"},[e._v(" Agregar nuevo contacto "),a(n["a"]),a(d["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){return e.cerrar()}}},[a(m["a"],[e._v("mdi-close")])],1)],1),a(_["c"],[e._v(" "+e._s(e.contacto)+" "),a(ot["a"],{ref:"form",staticClass:"container",attrs:{"lazy-validation":""}},[a(Ha["a"],{attrs:{dense:""}},[a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{type:"text",rules:[e=>!!e||"Se requiere el nombre",e=>e&&e.length>=3||"El nombre debe tener, como mínimo, tres caracteres"],label:"Nombre*",outlined:"",dense:"",filled:""},model:{value:e.contacto.nombre,callback:function(a){e.$set(e.contacto,"nombre",a)},expression:"contacto.nombre"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{label:"Apellidos*",type:"text",rules:[e=>!!e||"Se requiere sus apellidos",e=>e&&e.length>=3||"El apellido debe tener, como mínimo, tres caracteres"],outlined:"",dense:"",filled:""},model:{value:e.contacto.apellidos,callback:function(a){e.$set(e.contacto,"apellidos",a)},expression:"contacto.apellidos"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a(Va["a"],{attrs:{label:"Correo*",type:"email",rules:[e=>!!e||"Se requiere de un correo electrónico",e=>/.+@.+\..+/.test(e)||"El correo electrónico debe ser válido."],outlined:"",dense:"",filled:""},model:{value:e.contacto.correo_electronico,callback:function(a){e.$set(e.contacto,"correo_electronico",a)},expression:"contacto.correo_electronico"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[a(Va["a"],{attrs:{label:"Número de teléfono #1*",rules:[e=>!!e||"Se requiere un número teléfono",e=>e&&e.length>=10||"El número debe contener al menos 10 dígitos."],maxlength:"15",type:"number",outlined:"",dense:"",filled:""},model:{value:e.contacto.numero_telefonico_1,callback:function(a){e.$set(e.contacto,"numero_telefonico_1",a)},expression:"contacto.numero_telefonico_1"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[a(Va["a"],{attrs:{label:"Número de teléfono #2",maxlength:"15",type:"number",outlined:"",dense:"",filled:""},model:{value:e.contacto.numero_telefonico_2,callback:function(a){e.$set(e.contacto,"numero_telefonico_2",a)},expression:"contacto.numero_telefonico_2"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[a(At["a"],{attrs:{label:"Estado",outlined:"",items:e.estados,disabled:e.isEstados,"item-text":"nombre","return-object":"",loading:e.isCargandoEstados,clearable:"",dense:"",filled:""},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}})],1),a(qa["a"],{attrs:{xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[a(At["a"],{attrs:{label:"Municipio",items:e.municipios,"item-text":"nombre","item-value":"id",rules:[e=>!!e||"Item is required"],outlined:"",dense:"",filled:"",multiple:"",chips:"",loading:e.isCargandoMunuicipios,disabled:e.isMunicipios,clearable:""},model:{value:e.contacto.municipios,callback:function(a){e.$set(e.contacto,"municipios",a)},expression:"contacto.municipios"}})],1)],1)],1)],1),a(_["a"],[a(n["a"]),a(d["a"],{staticClass:"ma-3",attrs:{color:"red",dark:""},on:{click:function(a){return e.cerrar()}}},[e._v("Cerrar")]),a(d["a"],{attrs:{color:"green",dark:""},on:{click:function(a){return e.crearNuevoContacto()}}},[e._v("Agregar")])],1)],1)],1)},Pl=[],Tl={data:()=>({dialog:!1}),computed:{is_dialogo:{get(){return this.dialog},set(e){this.dialog=e,e&&this.inicializarEstados()}},contacto(){return this.$store.getters["contacto/getContacto"]},is_cargando_mod_cliente(){return this.$store.getters["contacto/getCargando"]},estados(){return this.$store.getters["ubicacion/getEstados"]},estado:{get(){return this.$store.getters["ubicacion/getEstado"]},async set(e){e?(await this.$store.dispatch("ubicacion/obtenerEstado",e),await this.obtenerMunicipiosEstado()):(this.$store.commit("ubicacion/clearEstado"),this.$store.commit("ubicacion/clearAllMunicipio"))}},isEstados(){return!this.estados.length},isCargandoEstados(){return this.$store.getters["ubicacion/getCargandoEstados"]},municipios(){return this.$store.getters["ubicacion/getMunicipios"]},municipio:{get(){return this.$store.getters["ubicacion/getMunicipio"]},async set(e){e?await this.$store.dispatch("ubicacion/obtenerMunicipio",e):this.$store.commit("ubicacion/clearMunicipio")}},isMunicipios(){return!this.municipios.length},isCargandoMunuicipios(){return this.$store.getters["ubicacion/getCargandoMunicipios"]}},methods:{async crearNuevoContacto(){if(this.$refs.form.validate()){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("contacto/crearNuevoContacto",this.contacto);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t}),t||this.cerrar()}},cerrar(){this.$refs.form.reset(),this.$refs.form.resetValidation(),this.dialog=!1},async inicializarEstados(){await this.$store.dispatch("ubicacion/obtenerEstadosDeInmueblesExistentes",{id_cliente:"",excluir_trabajos:!1})},async obtenerMunicipiosEstado(){const{estado:e}=this;await this.$store.dispatch("ubicacion/obtenerMunicipiosDeInmueblesExistentes",{cliente:null,estado:e})}}},El=Tl,Ol=Object(y["a"])(El,Al,Pl,!1,null,null,null),Ml=Ol.exports,Fl={props:{contactos:{type:Array,default:()=>[]},cabeceras:{type:Array,default:()=>[]}},data:()=>({buscar:"",mensaje:""}),components:{"formulario-crear-nuevo-usuario":Ml}},Dl=Fl,Vl=Object(y["a"])(Dl,Il,Sl,!1,null,null,null),Nl=Vl.exports,Rl={data:()=>({cabeceras:[{text:"Correo",value:"correo_electronico"},{text:"Nombre",value:"nombre"},{text:"Número de teléfono #1",value:"numero_telefonico_1",align:"center"},{text:"Número de teléfono #2",value:"numero_telefonico_2",align:"center"},{text:"Número de municipios asignados.",value:"accion",align:"center"}]}),components:{"tabla-contactos":Nl},computed:{contactos(){return this.$store.getters["contacto/getContactos"]}},created(){this.inicializarContactos()},methods:{async inicializarContactos(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("contacto/recuperarContactos");this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},zl=Rl,Ul=Object(y["a"])(zl,$l,wl,!1,null,null,null),Bl=Ul.exports,Ll=function(){var e=this,a=e._self._c;return a(Ha["a"],{attrs:{justify:"center"}},[a(qa["a"],{attrs:{cols:"12",sm:"8"}},[a("eliminar-cliente")],1)],1)},ql=[],Hl=function(){var e=this,a=e._self._c;return a($["a"],{staticClass:"mx-auto"},[a(_["d"],[e._v(" D ")]),a(_["c"],[a(I["a"],{attrs:{lines:"three"}},[a(S["a"],[a(P["d"],[e._v(" Cliente ")]),a(P["c"],[e._v(" Eliminar cliente ")])],1)],1)],1)],1)},Gl=[],Xl={},Jl=Object(y["a"])(Xl,Hl,Gl,!1,null,null,null),Yl=Jl.exports,Kl={components:{"eliminar-cliente":Yl}},Ql=Kl,Zl=Object(y["a"])(Ql,Ll,ql,!1,null,null,null),Wl=Zl.exports,eu=t("2f62");o["a"].use(eu["a"]);var au=new eu["a"].Store({modules:aa}),tu=t("9a96"),ou=t("0de5"),ru=function(){var e=this,a=e._self._c;return a(Da["a"],{staticClass:"grey"},[a(s["a"],{attrs:{fluid:""}},[a(wt["a"],{staticClass:"mb-2",attrs:{color:"indigo darken-5",dark:"",flat:""}},[a(c["a"],[e._v("Estado del trabajo")])],1),a(Ha["a"],[a(qa["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[a($["a"],[a(_["d"],{staticClass:"subheading font-weight-bold"},[e._v(" Estado del trabajo ")]),a(w["a"]),a(I["a"],{attrs:{dense:""}},[a(S["a"],[a(P["b"],[e._v("Status:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.status.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Asignado:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.created_date)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Última actualización:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.modified_date)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Inmueble:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Proyecto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.proyect.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Concepto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.concept.name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Asignado:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.area_user.name)+" "+e._s(e.trabajo.area_user.last_name)+" ")])],1),a(S["a"],[a(P["b"],[e._v("Ácargo:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.assigned_user.name)+" "+e._s(e.trabajo.area_user.last_name)+" ")])],1)],1),a(Ja["a"],{attrs:{"background-color":"deep-purple accent-4",centered:"",dark:"","icons-and-text":""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(tu["a"]),a(Ga["a"],{attrs:{href:"#tab-1"}},[e._v(" Archivo "),a(m["a"],[e._v("mdi-file-pdf")])],1),a(Ga["a"],{attrs:{href:"#tab-2"}},[e._v(" Comentario "),a(m["a"],[e._v("mdi-comment-multiple-outline")])],1)],1),a(Vr["a"],{model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(Xa["a"],{attrs:{value:"tab-1"}},[a($["a"],{staticClass:"mx-auto"},[Boolean(e.trabajo.files.length)?e._e():a(_["c"],{staticClass:"pt-4"},[e._v(" No han subido archivos. ")]),a(ou["a"],{attrs:{items:e.trabajo.files,"item-height":50},scopedSlots:e._u([{key:"default",fn:function({item:t}){return[a(S["a"],[a(P["b"],[a(P["d"],[e._v(e._s(t.title))])],1),a(A["a"],[a(d["a"],{attrs:{depressed:"",small:"",href:t.file}},[e._v(" Ver archivo "),a(m["a"],{attrs:{color:"orange darken-4",right:""}},[e._v(" mdi-open-in-new ")])],1)],1)],1)]}}])})],1)],1),a(Xa["a"],{attrs:{value:"tab-2"}},[a("Comentarios")],1)],1)],1)],1)],1)],1)],1)},iu=[],su=function(){var e=this,a=e._self._c;return a(s["a"],{staticClass:"grey lighten-2"},[a(Ha["a"],{staticClass:"mb-6",attrs:{"no-gutters":""}},[a(qa["a"],{attrs:{cols:"12"}},[a(Ya["a"],{attrs:{"align-top":"",dense:""}},e._l(e.trabajo.comments,(function(t){return a(Ka["a"],{key:t.time,attrs:{small:""}},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[e._v(e._s(t))])])])])})),1)],1)],1),a(Ha["a"],{attrs:{"no-gutters":""}},[a(qa["a"],{attrs:{cols:"12"}},[a($["a"],{staticClass:"elevation-3"},[a(_["c"],[a(rt["a"],{attrs:{solo:"",name:"input-7-4",label:"Escribir comentario"},model:{value:e.comment,callback:function(a){e.comment=a},expression:"comment"}})],1),a(_["a"],[a(n["a"]),a(d["a"],[a(m["a"],{attrs:{left:"",color:"red"}},[e._v("mdi-source-commit-end")]),e._v(" Terminar trabajo ")],1),a(d["a"],{attrs:{color:"success",disabled:0==e.comment.length},on:{click:function(a){return e.subirComentario()}}},[e._v(" Comentar ")])],1)],1)],1)],1)],1)},nu=[],cu={data:()=>({comment:""}),computed:{trabajo(){return this.$store.getters["trabajo/getTrabajo"]}},methods:{async subirComentario(){const{trabajo:e,comment:a}=this,{message:t}=await this.$store.dispatch("trabajo/AXN_ComentarTrabajo",{id_trabajo:e.id,comentario:a});alert(t)}}},lu=cu,uu=Object(y["a"])(lu,su,nu,!1,null,null,null),du=uu.exports,mu={components:{Comentarios:du},data:()=>({tab:null,bottonEnviar:!1,files:[]}),computed:{trabajo(){return this.$store.getters["trabajo/getTrabajo"]},grups(){return this.$store.getters["MOD_autenticacion/getGrupos"]}},created(){this.obtenerTrabajo()},methods:{async obtenerTrabajo(){await this.$store.dispatch("trabajo/recuperarTrabajo",this.trabajo.id)}}},pu=mu,bu=Object(y["a"])(pu,ru,iu,!1,null,null,null),_u=bu.exports;o["a"].use(Oa["a"]);const gu=(e,a,t)=>{au.getters["MOD_autenticacion/isUsuarioAutenticado"]?t():t("/login")},fu=[{path:"/login",name:"Login",component:La},{path:"/:nombreUsuario",name:"HomeUsuario",component:kc,meta:{requiereAuth:!0},children:[{path:"trabajo/archivos",name:"ArchivosTrabajo",component:rs,props:!0},{path:"trabajos/nuevos",name:"asignar-trabajos",component:Si,props:!0},{path:"pagos",name:"pagos",component:mn}]},{path:"/coordinador/:nombre_usuario",name:"home-coordinador",component:Bc,meta:{requiereAuth:!0},children:[{path:"inmuebles",name:"inuembles-coordinador",component:tr},{path:"trabajos",name:"trabajos-coordinador",component:Gi},{path:"trabajos/nuevos",name:"asignar-trabajos-coordinador",component:zi,props:!0},{path:"inmuebles/:clave_inmueble/trabajos",name:"trabajos-inmueble-coordinador",component:Zi,props:!0},{path:"peticiones",name:"peticiones-coordinador",component:sn}]},{path:"/peticion/nuevo",name:"peticion-recursos",component:pc},{path:"/inmuebles/cargar",name:"cargar-archivo",component:Ar,props:!0},{path:"/",name:"Home",component:Fo,beforeEnter:gu},{path:"/:nombreUsuario/usuarios",component:vc,meta:{requiereAuth:!0},children:[{path:"personal",name:"personal",component:kl},{path:"privilegios",name:"privilegios",component:Dc},{path:"contactos",name:"contactos",component:Bl}]},{path:"/de",name:"De",component:_u},{path:"/:cliente",component:Lo,meta:{requiereAuth:!0},children:[{path:"inmuebles",name:"inmuebles",component:Yo},{path:"trabajos",name:"trabajos-cliente",component:us},{path:"asignar/trabajos/nuevos",name:"asignar-trabajos-cliente",component:Mi},{path:"configuraciones",name:"configuraciones-cliente",component:Wl}]}],hu=new Oa["a"]({mode:"hash",base:"/antasoft/",routes:fu});hu.beforeEach((e,a,t)=>{e.matched.some(e=>e.meta.requiereAuth)?au.getters["MOD_autenticacion/isUsuarioAutenticado"]?t():t({name:"Login"}):t()});var vu=hu,yu=t("f309");o["a"].use(yu["a"]);var ju=new yu["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#6c96bb",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#4d6c85"}}}});o["a"].config.productionTip=!1,oa.forEach(e=>{au.dispatch(`${e}/${q}`)}),new o["a"]({router:vu,store:au,vuetify:ju,render:e=>e(Ea)}).$mount("#app")},"6e1f":function(e,a,t){"use strict";t("9e92")},"83fb":function(e,a,t){"use strict";t("da20")},"9e92":function(e,a,t){},b6d9:function(e,a,t){},da20:function(e,a,t){}});
//# sourceMappingURL=app.6f2a9335.js.map