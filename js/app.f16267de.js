(function(e){function a(a){for(var s,i,n=a[0],c=a[1],l=a[2],d=0,m=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(a);while(m.length)m.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var e,a=0;a<o.length;a++){for(var t=o[a],s=!0,n=1;n<t.length;n++){var c=t[n];0!==r[c]&&(s=!1)}s&&(o.splice(a--,1),e=i(i.s=t[0]))}return e}var s={},r={app:0},o=[];function i(a){if(s[a])return s[a].exports;var t=s[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=s,i.d=function(e,a,t){i.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,a){if(1&a&&(e=i(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var s in e)i.d(t,s,function(a){return e[a]}.bind(null,s));return t},i.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},i.p="/antasoft/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=a,n=n.slice();for(var l=0;l<n.length;l++)a(n[l]);var u=c;o.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"0751":function(e,a,t){},"56d7":function(e,a,t){"use strict";t.r(a);var s=t("2b0e"),r=t("7496"),o=t("40dc"),i=t("a523"),n=t("553a"),c=function(){var e=this,a=e._self._c;return a(r["a"],[a(o["a"],{attrs:{app:"",color:"info",flat:""}},[e.isUsuarioAutenticado?a("encabezado"):e._e()],1),a(i["a"],{staticClass:"grey lighten-2",staticStyle:{height:"100vh"},attrs:{fluid:""}},[a("router-view"),a("alerta")],1),a(n["a"],{attrs:{app:""}})],1)},l=[],u=t("8336"),d=t("132d"),m=t("2fa4"),p=(t("14d9"),function(){var e=this,a=e._self._c;return a(i["a"],{staticClass:"py-0 fill-height"},[a(u["a"],{attrs:{icon:"",dark:""},on:{click:function(a){return e.$router.push({name:"Home"})}}},[a(d["a"],{attrs:{"x-large":""}},[e._v("mdi-home-circle")])],1),a("menu-navegacion-principal"),a(m["a"]),a("notificaciones"),a("ver-perfil-y-mas")],1)}),b=[],g=t("99d9"),h=function(){var e=this,a=e._self._c;return a(g["a"],e._l(e.links,(function([t,s]){return a(u["a"],{key:t,attrs:{text:"",dark:""},on:{click:function(a){return e.redireccionar(s)}}},[e._v(" "+e._s(t)+" ")])})),1)},_=[],f={data:()=>({links:[["Trabajos","TrabajoUsuario"],["Recursos","peticion"],["Pagos","pagos"]]}),computed:{usernname(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},methods:{redireccionar(e){this.$router.push({name:e,params:{nombreUsuario:this.usernname}})}}},v=f,y=t("2877"),C=Object(y["a"])(v,h,_,!1,null,null,null),j=C.exports,x=t("8212"),k=t("4ca6"),M=t("b0af"),$=t("ce7e"),O=t("8860"),D=t("da13"),w=t("5d23"),A=t("1baa"),P=t("e449"),T=function(){var e=this,a=e._self._c;return a(P["a"],{attrs:{bottom:"",rounded:"","min-width":"50px",left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:s}){return[a(k["a"],{attrs:{overlap:"",bordered:"",content:e.numeroNotificaciones,color:"green"}},[a(x["a"],e._g(e._b({attrs:{size:"40"}},"v-avatar",t,!1),s),[a(x["a"],[a(d["a"],{attrs:{dark:""}},[e._v(" mdi-bell ")])],1)],1)],1)]}}])},[a(O["a"],{attrs:{nav:"",dense:""}},[e.numeroNotificaciones?a(M["a"],{staticClass:"mx-auto",attrs:{"max-width":"400"}},[a(A["a"],{attrs:{"active-class":"blue--text",multiple:""},model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}},[e._l(e.notificaciones,(function(t,s){return[a(D["a"],{key:t.id,scopedSlots:e._u([{key:"default",fn:function({}){return[a(w["a"],{on:{click:function(a){return e.verTrabajo(t)}}},[e.isComentario(t.notify_type)?a(w["c"],[e._v(" Han comentado un trabajo que tienes asignado. "),a("br"),a(d["a"],{attrs:{color:" darken-4"}},[e._v(" mdi-open-in-new ")])],1):e._e()],1)]}}],null,!0)}),s<e.notificaciones.length-1?a($["a"],{key:s}):e._e()]}))],2)],1):a(M["a"],[a(g["c"],[e._v("No tienes notificaciones.")])],1)],1)],1)},E=[],S={data:()=>({selected:[]}),computed:{notificaciones(){return this.$store.getters["MOD_notificaciones/getNotificaciones"]},id_usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},numeroNotificaciones(){var e=0;const{notificaciones:a,selected:t}=this;for(let s=0;s<a.length;s++)a[s].is_read||(e+=1,t.push(s));return e}},created(){},methods:{async traerNotificaciones(){const{id_usuario:e}=this,{error:a}=await this.$store.dispatch("MOD_notificaciones/traerNotificaciones",{id_usuario:e});a&&alert(a)},isComentario(e){return"comentario"==e},async verTrabajo({id:e,user:a,is_read:t,extra_id:s}){this.$store.commit("MOD_trabajos/setTrabajo",{id:s,name:""}),console.log(!t),t||this.$store.dispatch("MOD_notificaciones/actualizarNotificaciones",{id:e,user:a,is_read:!0}),this.$router.push({name:"ArchivosTrabajo",params:{nombreUsuario:this.$store.getters["MOD_autenticacion/getNombreUsuario"]}})}}},R=S,I=Object(y["a"])(R,T,E,!1,null,null,null),U=I.exports,F=t("cc20"),N=t("adda"),z=function(){var e=this,a=e._self._c;return a(P["a"],{attrs:{bottom:"","offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:s}){return[a(F["a"],e._g(e._b({staticClass:"ma-2"},"v-chip",t,!1),s),[a(x["a"],{attrs:{color:"grey",left:""}},[null!==e.fotoUsuario?a(N["a"],{attrs:{src:e.$store.getters["MOD_autenticacion/getFotoUsuario"]}}):a(d["a"],{attrs:{dark:""}},[e._v(e._s(e.usernname[0])+" ")])],1),e._v(" "+e._s(e.usernname)+" ")],1)]}}])},[a(O["a"],[e._l(e.opciones,(function(t,s){return a(D["a"],{key:s,attrs:{to:{name:t.link},link:""}},[a(w["c"],{domProps:{textContent:e._s(t.text)}})],1)})),a($["a"])],2)],1)},B=[];const V="initStoreModule",L="logoutFunction";var q=t("bc3a");const X=q["a"].create({baseURL:"https://web-production-2856.up.railway.app"});var H={instance:X},G={namespaced:!0,state:{cliente:{},clientes:[],cargando:!1},mutations:{setClientes(e,a){e.clientes=a},setCliente(e,a){e.cliente=a},setCargando(e,a){e.cargando=a},limpiarClientes(e){e.clientes=[]},limpiarCliente(e){e.cliente={}},eliminarCliente(e,a){e.clientes.splice(a,1)}},actions:{async obtenerClientes({commit:e}){try{e("setCargando",!0);const{data:t,status:s}=await H.instance.get("/clientes/cliente/"),{items:r,message:o}=t;var a=[];return r.forEach(e=>{a.push({id:e.id,nombre:e.name,rfc:e.rfc,direccion:e.address})}),e("setClientes",a),e("setCargando",!1),{mensaje:o,estado:s}}catch(t){return e("setCargando",!1),{error:t}}},async recuperarCliente({commit:e},a){try{return e("setCliente",a),{mensaje:"Se pudo establecer el cliente.",status:200}}catch(t){return{mensaje:"No se establecio el cliente.",error:"error",status:400}}},async nuevo({state:e,commit:a},{nombre:t,direccion:s,rfc:r}){try{a("setCargando",!0);const o={name:t,address:s,rfc:r},{data:i,status:n}=await H.instance.post("clientes/cliente/",o),{items:c,message:l}=i,u={nombre:c.name,rfc:c.rfc,id:c.id,direccion:c.address};return e.clientes.push(u),a("setCliente",u),a("setCargando",!1),{mensaje:l,estado:n}}catch(o){return a("setCargando",!1),{error:o}}},async eliminar({commit:e},{id:a,indice:t}){try{const{data:s}=await H.instance.delete(`clientes/cliente/${a}/`),{message:r}=s;return e("eliminarCliente",t),{mensaje:r}}catch(s){return{error:s.response.data.error,mensaje:s.response.data.message}}}},getters:{getCliente:e=>e.cliente,getClientes:e=>e.clientes,getCargando:e=>e.cargando}},J={namespaced:!0,state:{respuesta:null,inmueble:{},inmuebles:[],inmueblesSeleccionados:[],cargando:!1,flag_crear_inmuebles:0,flag_obtener_inmuebles:0,flag_eliminar_inmueble:0},mutations:{setInmueble(e,a){e.inmueble=a},setInmuebles(e,a){e.inmuebles=a},addInmuebles(e,a){e.inmuebles.push(a)},limpiarInmuebles(e){e.inmuebles=[]},limpiarInmueble(e){e.inmueble={}},setCargando(e,a){e.cargando=a},setInmueblesSeleccionados(e,a){e.inmueblesSeleccionados=a},eliminarInmueble(e,a){e.inmuebles.splice(a,1)}},actions:{async crearInmueble({commit:e},{nombre:a,clave:t,direccion:s,estado:r,municipio:o,localidad:i,cliente:n}){try{e("setCargando",!0);const{data:c,status:l}=await H.instance.post("inmuebles/inmueble/",{name:a,property_key:t,address:s,province:r.id,municipality:o.id,locality:i,client:n}),{items:u,message:d}=c,{id:m,name:p,property_key:b,address:g,province:h,municipality:_,locality:f,client:v}=u,y={id:m,nombre:p,clave:b,direccion:g,estado:h,municipio:_,localidad:f,cliente:v};return e("addInmuebles",y),e("setCargando",!1),{mensaje:d,estado:l}}catch(c){return e("setCargando",!1),{error:c}}},async verificarInmuebles({commit:e},a){try{e("setCargando",!0);var t=[];a.forEach(e=>{t.push({name:e.nombre,property_key:e.clave,address:e.direccion,province:e.estado,municipality:e.municipio,locality:e.localidad,client:e.cliente.id})});const{data:r,status:o}=await H.instance.post("inmuebles/inmueble/verificacion/",{properties:t}),{properties:i}=r;var s=[];return i.forEach((e,t)=>{e.error?s.push({error:e.error[Object.keys(e.error)[0]],status:e.status,clave:a[t].clave,nombre:a[t].nombre,estado:{nombre:a[t].estado},municipio:{nombre:a[t].municipio},localidad:{nombre:a[t].localidad},direccion:a[t].direccion,cliente:a[t].cliente}):s.push({clave:e.property_key,nombre:e.name,estado:{id:e.province.id,nombre:e.province.name},municipio:{id:e.municipality.id,nombre:e.municipality.name},localidad:e.locality?{id:e.locality.id,nombre:e.locality.nombre}:{},direccion:e.address,cliente:{id:e.client.id,nombre:e.client.name}})}),e("setInmuebles",s),e("setCargando",!1),{mensaje:"Consulta satisfactoria.",status:o}}catch(r){return e("setCargando",!1),{mensaje:r.response.data.message,status:r.response.status}}},async AXN_CrearInmuebles({state:e,commit:a},t){a("MUT_Flag_CrearInmuebles",1);try{var s=[];t.forEach(e=>{s.push({name:e.nombre_inmueble,property_key:e.clave_inmueble,address:e.direccion_inmueble,province_id:e.id_estado,municipality_id:e.id_municipio,locality_id:e.id_localidad,client_id:e.id_cliente})});const{data:r}=await H.instance.post("inmuebles/inmueble/confirmacion/",{properties:s}),{items:o}=r;return a("MUT_Respuesta",o),a("MUT_Flag_CrearInmuebles",2),e.flag_crear_inmuebles}catch(r){return a("MUT_Flag_CrearInmuebles",3),e.flag_obtener_inmuebles}},async recuperarInmueble({commit:e},a){try{e("setCargando",!0);const{data:t,status:s}=await H.instance.get("inmuebles/inmueble/"+a),{items:r,message:o}=t,{id:i,name:n,property_key:c,address:l,province:u,municipality:d,locality:m,client:p}=r,b={id:i,clave:c,nombre:n,estado:u,municipio:d,localidad:m,direccion:l,cliente:p};return e("setInmueble",b),e("setCargando",!1),{mensaje:o,status:s}}catch(t){return e("setCargando",!1),{mensaje:t.response.data.error}}},async listarPorClientesTerritorio({commit:e},{cliente:a,estado:t,municipio:s,localidad:r}){try{e("setCargando",!0);const{data:i,status:n}=await H.instance.get(`inmuebles/inmueble/filtrado/?clients=${a}&province=${t}&municipality=${s}&locality=${r}`),{items:c}=i;var o=[];return c.forEach(e=>{o.push({id:e.id,clave:e.property_key,nombre:e.name,estado:e.province,municipio:e.municipality,localidad:e.locality,direccion:e.address,cliente:e.client})}),e("setInmuebles",o),e("setCargando",!1),{mensaje:"Consulta satisfactoria.",estado:n}}catch(i){return e("limpiarInmuebles"),e("setCargando",!1),{error:i}}},async eliminar({state:e,commit:a},t){a("MUT_Flag_EliminarInmueble",1);try{const{data:s}=await H.instance.delete(`inmuebles/inmueble/${t}/`);return a("MUT_Respuesta",s),a("MUT_Flag_EliminarInmueble",2),e.flag_eliminar_inmueble}catch(s){return a("MUT_Flag_EliminarInmueble",3),e.flag_eliminar_inmueble}},async listar({commit:e},a){try{e("setCargando",!0);const{data:t,status:s}=await H.instance.get(a?"/inmuebles/inmueble/?clients="+a:"/inmuebles/inmueble/"),{items:r,message:o}=t,i=[];return r.forEach(e=>{i.push({id:e.id,clave:e.property_key,nombre:e.name,estado:e.province,municipio:e.municipality,localidad:e.locality,direccion:e.address,cliente:e.client})}),e("setInmuebles",i),e("setCargando",!1),{mensaje:o,estado:s}}catch(t){return e("setCargando",!1),{error:t}}}},getters:{getInmuebles:e=>e.inmuebles,getInmueble:e=>e.inmueble,getCargando:e=>e.cargando,getInmueblesSeleccionados:e=>e.inmueblesSeleccionados}},Y={namespaced:!0,state:{estado:{},estados:[],isCargandoEstados:!1,municipio:{},municipios:[],isCargandoMunicipios:!1,flag_obtener_municipios_de_estado:0,localidad:{},localidades:[],isCargandoLocalidades:!1},mutations:{setEstado(e,a){e.estado=a},setEstados(e,a){e.estados=a},setCargandoEstados(e,a){e.isCargandoEstados=a},setMunicipio(e,a){e.municipio=a},setMunicipios(e,a){e.municipios=a},setCargandoMunicipios(e,a){e.isCargandoMunicipios=a},limpiarMunicipios(e){e.municipios=[]},setLocalidad(e,a){e.localidad=a},setLocalidades(e,a){e.localidades=a},setCargandoLocalidades(e,a){e.isCargandoLocalidades=a},limpiarLocalidades(e){e.localidades=[]}},actions:{async obtenerEstados({commit:e}){try{e("setCargandoEstados",!0);const{data:t,status:s}=await H.instance.get("territorios/estados/"),{items:r,message:o}=t;var a=[];return r.forEach(e=>{a.push({id:e.id,nombre:e.name,abreviatura:e.abbreviation})}),e("setEstados",a),e("setCargandoEstados",!1),{mensaje:o,estado:s}}catch(t){return e("setCargandoEstados",!1),{error:t}}},async obtenerEstado({commit:e},a){await e("setEstado",a)},async obtenerMunicipio({commit:e},a){await e("setMunicipio",a)},async obtenerLocalidad({commit:e},a){await e("setLocalidad",a)},async obtenerMunicipiosDeEstado({commit:e},a){try{e("setCargandoMunicipios",!0);const{data:s}=await H.instance.get("territorios/municipios/?province="+a),{items:r,status:o}=s;var t=[];return r.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setMunicipios",t),e("setCargandoMunicipios",!1),{mensaje:"Consulta satisfactoria.",status:o}}catch(s){return e("setCargandoMunicipios",!1),e("limpiarMunicipios"),{mensaje:s.response.data.message,status:404}}},async obtenerLocalidadesDeMunicipio({commit:e},a){try{const{data:s}=await H.instance.get("territorios/localidades/?municipality="+a),{items:r,status:o}=s;var t=[];return r.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setLocalidades",t),e("setCargandoLocalidades",!1),{mensaje:"Consulta satisfactoria.",status:o}}catch(s){return e("setCargandoLocalidades",!1),e("limpiarLocalidades"),{mensaje:s.response.data.message,status:s.response.status}}},async obtenerMunicipiosDeInmueblesExistentes({commit:e},{cliente:a,estado:t}){try{e("setCargandoMunicipios",!0);const{data:r}=await H.instance.get(`territorios/municipios/sucursales/?clients=${a}&province=${t}`),{items:o,status:i}=r;var s=[];return o.forEach(e=>{s.push({id:e.id,nombre:e.name})}),e("setMunicipios",s),e("setCargandoMunicipios",!1),{mensaje:"Consulta satisfactoria.",status:i}}catch(r){return e("setCargandoMunicipios",!1),e("limpiarMunicipios"),{mensaje:r.response.data.message,status:r.response.status}}},async obtenerLocalidadesDeInmueblesExistentes({commit:e},{cliente:a,estado:t,municipio:s}){try{e("setCargandoLocalidades",!0);const{data:o,status:i}=await H.instance.get(`territorios/localidades/sucursales/?clients=${a}&province=${t}&municipality=${s}`),{items:n}=o;var r=[];return n.forEach(e=>{r.push({id:e.id,nombre:e.name})}),e("setLocalidades",r),e("setCargandoLocalidades",!1),{mensaje:"Consulta satisfactoria.",estado:i}}catch(o){return e("limpiarLocalidades"),e("setCargandoLocalidades",!1),{error:o}}}},getters:{getEstado:e=>e.estado,getEstados:e=>e.estados,getCargandoEstados:e=>e.isCargandoEstados,getMunicipio:e=>e.municipio,getMunicipios:e=>e.municipios,getCargandoMunicipios:e=>e.isCargandoMunicipios,getLocalidad:e=>e.localidad,getLocalidades:e=>e.localidades,getCargandoLocalidades:e=>e.isCargandoLocalidades}};function K(e){let a=e.getFullYear(),t=(1+e.getMonth()).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return t+"/"+s+"/"+a}const Q=()=>"comprobante_"+toString(K()),Z=async e=>{if(e)try{const a=await fetch(e),t=await a.blob();return t}catch(a){return}},W={trabajo:{},trabajos:[],cargando:!1,asignaciones:[],verificar_asignaciones:[],asignacionesVerificadas:[],seleccionados:[],status_trabajo:[],estado_trabajo:{}},ee={setTrabajo(e,a){e.trabajo=a},setTrabajos(e,a){e.trabajos=a},limpiarTrabajo(e){e.trabajo=null},limpiarTrabajos(e){e.trabajos=[]},setCargando(e,a){e.cargando=a},setStatusTrabajo(e,a){e.status_trabajo=a},setEstadoTrabajo(e,a){e.estado_trabajo=a},addAsignaciones(e,a){e.asignaciones.push(a)},addAsignacionesVerificadas(e,a){e.asignacionesVerificadas.push(a)},setSeleccionados(e,a){e.seleccionados=a}},ae={async obtenerStatusTrabajos({commit:e}){try{e("setCargando",!0);const{data:a,status:t}=await H.instance.get("/trabajos/status/"),{items:s,message:r}=a,o=[];for(const e of s)o.push({id:e.id,nombre:e.name});return e("setStatusTrabajo",o),e("setCargando",!1),{mensaje:r,estado:t}}catch(a){return e("setCargando",!1),{error:a}}},async crearStatusTrabajo({commit:e},{nombre:a,proyecto_id:t}){try{e("setCargando",!0);const s={name:a,project:t},{data:r,status:o}=H.instance.post("/trabajos/status/",s),{items:i,message:n}=r,c={id:i.id,nombre:i.name};return e("setEstadoTrabajo",c),e("setCargando",!1),{mensaje:n,estado:o}}catch(s){return e("setCargando",!1),{error:s}}},async obtenerTrabajosPendietes({commit:e},{client:a,province:t,menorIgualFecha:s,mayorIigualFecha:r}){try{e("setCargando",!0);var o="trabajos/pendiente/";a?o=o+"?client="+a:t?o=o+"?province="+t:s&&r?o+=`?date_gte=${s}&date_lte=${r}`:o=s?o+"?date_gte="+s:o+"?date_lte="+r;const{data:i,status:n}=await H.instance.get(o),{items:c,message:l}=i;return e("setTrabajos",c),e("setCargando",!1),{mensaje:l,estado:n}}catch(i){return e("limpiarTrabajos"),e("setCargando",!1),{error:i}}},async recuperarTrabajo({commit:e},a){try{const{data:t}=await H.instance.get(`trabajos/trabajo/${a}/`),{items:s}=t;return void e("setTrabajo",s)}catch(t){return void alert("Error.")}},async AXN_SubirArchivo(e,{work:a,PDFBase64:t}){const s=Q(),r=await Z(t),o=new FormData;o.append("work",a),o.append("title",s),r&&o.append("file",t,s+".pdf");try{return await H.instance.post("/trabajos/archivo/",o),{message:"Archivo subido."}}catch(i){const e=String(i.response.data.error);return{message:"No se pudo subir el archivo.",error:e}}},async AXN_ActualizaArchivo(e,{id:a,work:t,title:s,PDFBase64:r}){const o=await Z(r),i=new FormData;i.append("work",t),i.append("title",s),o&&i.append("file",r,s+".pdf");try{return await H.instance.put(`/trabajos/archivo/${a}/`,i),{message:"Archivo actualizado."}}catch(n){const e=String(n.response.data.error);return{message:"No se pudo actualizar el archivo.",error:e}}},async updatework({commit:e},{id:a,status_id:t,project_id:s,concept_id:r,property_office_id:o,assigned_user_id:i,area_user_id:n,send_review:c}){try{const{data:l}=await H.instance.put(`/trabajos/trabajo/${a}/`,{status_id:t,project_id:s,concept_id:r,property_office_id:o,assigned_user_id:i,area_user_id:n,send_review:c});return e("setTrabajo",l),{message:"Enviado para revisar"}}catch(l){const e=String(l.response.data.error);return{message:"No se pudo enviar el trabajo",error:e}}},async AXN_ComentarTrabajo(e,{id_trabajo:a,comentario:t}){try{const{data:e}=await H.instance.post("/trabajos/comentario/",{work:a,comment:t}),{message:s}=e;return{message:s}}catch(s){const e=String(s.response.data.error);return{message:e}}},async obtenerTrabajosUsuario({commit:e},{username:a}){try{e("setCargando",!0);const{data:t,status:s}=await H.instance.get("trabajos/usuario/?username="+a),{items:r,message:o}=t,i=[];return r.forEach(e=>{i.push({id:e.id,proyecto:e.concept.project,concepto:e.concept.name,estado:e.status,inmueble:e.property_office,enviado:e.send_review,crado:e.created_date,modificado:e.modified_date})}),e("setTrabajos",i),e("setCargando",!1),{mensaje:o,estado:s}}catch(t){return e("setCargando",!1),{error:t}}},async verificarAsignaciones({commit:e,dispatch:a},t){try{const s=await a("serializarAsignacion",t),{data:r,status:o}=await H.instance.post("trabajos/trabajo/verificar_asignacion/",{assignments:s}),{items:i,message:n}=r,c=[];i.forEach((e,a)=>{c.push({inmueble:e.property_office,usuario_asignado:e.assigned_user,trabajos:[]});for(const t of e.works)c[a].trabajos.push({concepto:t.concept,usuario_area:t.area_user,estado:t.status,codido_estado:t.status_code,mensaje:t.message?t.message:t.warning,confirmacion:t.confirmation})});for(const a of c)e("addAsignacionesVerificadas",a);return{mensaje:n,estado:o}}catch(s){return{error:s}}},async confirmarAsignacion({dispatch:e},a){const t=await e("serializarAsignacion",a);try{const{data:e,status:a}=await H.instance.post("trabajos/trabajo/confirmar_asignacion/",{assignments:t}),{message:s}=e;return{mensaje:s,estado:a}}catch(s){return{error:s}}},async serializarAsignacion(e,a){const t=[];return await a.forEach((e,a)=>{t.push({property_office:e.inmueble,assigned_user:e.usuario_asignado,works:[]});for(const s of e.trabajos)t[a].works.push({concept:s.concepto,area_user:s.usuario_area,status:s.estado,message:s.mensaje,confirmation:s.confirmacion})}),t}},te={getStatusTrabajo:e=>e.status_trabajo,getEstadoTrabajo:e=>e.estado_trabajo,getTrabajo:e=>e.trabajo,getTrabajos:e=>e.trabajos,getArchivosTrabajo:e=>e.trabajo.files,getCargando:e=>e.cargando,getAsignaciones:e=>e.asignaciones,getVerificarAsignaciones:e=>e.verificar_asignaciones,getAsignacionesVerificadas:e=>e.asignacionesVerificadas,getTrabajosSeleccionados:e=>e.seleccionados};var se={namespaced:!0,state:W,actions:ae,mutations:ee,getters:te};const re=e=>{const a=localStorage.getItem(e);try{return JSON.parse(a)}catch(t){return console.error({error:t,propertyName:e,stringProperty:a}),null}},oe=(e,a)=>{const t=JSON.stringify(a);localStorage.setItem(e,t)};var ie={namespaced:!0,state:{miembro:[],respuesta:null,usuarios:[],lista_asignaciones:[],usuarios_roles:[],usuarios_roles2:[],usuarios_roles3:[],asignaciones:[]},mutations:{setTrabajosAsignados(e,a){oe("asignaciones",a),e.asignaciones=a},MUT_EstablecerMiembro(e,a){oe("miembro",a),e.miembro=a},setUsuarios(e,a){e.usuarios=a},MUT_ObtenerUsuariosRol(e,a){e.usuarios_roles=a},MUT_ObtenerUsuariosRol2(e,a){e.usuarios_roles2=a},MUT_ObtenerUsuariosRol3(e,a){e.usuarios_roles3=a}},actions:{async getUsuarios({commit:e}){try{const{data:t,status:s}=await H.instance.get("usuarios/usuario/"),{items:r,message:o}=t;var a=[];return r.forEach(e=>{a.push({id:e.id,nombre:e.name,apellidos:e.last_name,nombre_completo:e.name+" "+e.last_name,usuario:e.username,correo:e.email,imagen:e.image,is_active:e.is_active,is_staff:e.is_staff,is_superuser:e.is_superuser,last_login:e.last_login})}),e("setUsuarios",a),{mensaje:o,estado:s}}catch(t){return{error:t}}},async AXN_ObtenerPersonalRol({commit:e},{rol:a}){try{const{data:s}=await H.instance.get("usuarios/grupo/?rol="+a),{items:r}=s;var t=[];return r.forEach(e=>{t.push({id_usuario:e.user.id,nombre_completo_usuario:e.user.name+" "+e.user.last_name,nombre_usuario:e.user.name,apellido_usuario:e.user.last_name,usuario_usuario:e.user.username,correo_usuario:e.user.email,imagen_usuario:e.user.image,is_active:e.user.is_active,is_staff:e.user.is_staff,is_superuser:e.user.is_superuser,last_login:e.user.last_login})}),"Administrador"==a&&e("MUT_ObtenerUsuariosRol",t),"Consultor"==a&&e("MUT_ObtenerUsuariosRol2",t),"Coordinador"==a&&e("MUT_ObtenerUsuariosRol3",t),"ok"}catch(s){return"Consulta no satisfactoria."}},async AUX_CrearUsuaurio(e,{username:a,email:t,password:s,name:r,last_name:o,is_staff:i}){try{const{data:e,status:n}=await H.instance.post("/usuarios/usuario/",{username:a,email:t,password:s,name:r,last_name:o,is_staff:i}),{items:c,message:l}=e;return{message:l,status:n,id:c.id}}catch(n){const e=String(n.response.data.message),a=n.response.data.error;return{message:e,error:a}}},async AUX_ActualizarUsuaurio(e,{id:a,username:t,email:s,password:r,name:o,last_name:i,is_staff:n,groups:c}){try{const{data:e,status:l}=await H.instance.put(`/usuarios/usuario/${a}/`,{username:t,email:s,password:r,name:o,last_name:i,is_staff:n,groups:c}),{message:u}=e;return{message:u,status:l}}catch(l){const e=String(l.response.data.message),a=String(l.response.data.error),t=l.response.status;return{message:e,error:a,status:t}}},async AXN_TraerMiembro({commit:e},{id:a}){try{const{data:t}=await H.instance.get(`/usuarios/usuario/${a}/`),{items:s,message:r}=t;return e("MUT_EstablecerMiembro",{items:s}),{message:r}}catch(t){const e=String(t.response.data.message),a=String(t.response.data.error);return{message:e,error:a}}}},getters:{getUsuarios:e=>e.usuarios,GET_ObtenerMiembro:e=>e.miembro,obtenerAsignaciones:e=>e.asignaciones}};const ne={token:null,usuario:[]},ce={[V]({dispatch:e}){e("iniciarAutenticacion")},[L]({commit:e}){e("limpiarTokens"),e("limpiarUsuario")},iniciarAutenticacion({commit:e}){const a=re("token"),t=re("usuario");e("setTokens",a),e("setUsuario",t)},async login({commit:e},{email:a,nombreUsuario:t,password:s}){try{const{data:r}=await H.instance.post("login/",{email:a,username:t,password:s}),{token:o,user:i,message:n,rol:c}=r,{groups:l,id:u,username:d,is_staff:m,name:p,last_name:b,image:g,is_active:h}=i;return e("setTokens",o),e("setUsuario",{id:u,email:a,nombreUsuario:d,is_staff:m,nombre:p,apellidos:b,grupos:l,permisoUsuario:c,is_active:h,imagen:g}),{message:n}}catch(r){const e=String(r.response.data.error);return{error:e}}},async cerrarSesion(e,a){try{const{data:e}=await H.instance.post("logout/?token="+a),{session_messege:t}=e;return{message:t}}catch(t){const e=String(t.response.data.error);return{error:e,message:e}}}},le={setTokens(e,a){oe("token",a),e.token=a},setUsuario(e,a){oe("usuario",a),e.usuario=a},limpiarTokens(e){oe("token",null),e.token=null},limpiarUsuario(e){oe("usuario",null),e.usuario=null}},ue={isUsuarioAutenticado:e=>Boolean(e.token),getGrupos:e=>e.usuario.grupos,getUserPermissions:e=>e.usuario.permisoUsuario,getFotoUsuario:e=>e.usuario.imagen,getNombreUsuario:e=>e.usuario.nombreUsuario,obtenerNombreUsuario:e=>e.usuario.nombre,obtenerApellidosUsuario:e=>e.usuario.apellidos,obtenerIdUsuario:e=>e.usuario.id,getToken:e=>e.token};var de={namespaced:!0,state:ne,actions:ce,mutations:le,getters:ue};const me={grupos:[],grupos_permisos:[],rolMiembro:{}},pe={MUT_EstablecerRolMiembro(e,a){e.rolMiembro=a},clearRolMiembro(e){e.rolMiembro={}}},be={async obtenerGrupos(){try{const{data:e}=await H.instance.get("roles/grupos/"),{items:a}=e;return{items:a}}catch(e){const a=String(e.response.data.error);return{error:a}}},async obtenerPermisos(){try{const{data:e}=await H.instance.get("roles/permiso/"),{items:a}=e;return{items:a}}catch(e){const a=String(e.response.data.error);return{error:a}}},async AXN_ActualizarRolMiembro(e,{usuario:a,rol:t}){try{const{data:e}=await H.instance.put(`roles/usuario/${a}/`,{user:a,rol:t}),{message:s}=e;return{message:s}}catch(s){const e=String(s.response.data.error);return{error:e}}},async AXN_AsignarRolMiembro(e,{usuario:a,rol:t}){try{const{data:e}=await H.instance.post("roles/usuario/",{user:a,rol:t}),{message:s}=e;return{message:s}}catch(s){const e=String(s.response.data.error);return{error:e}}},async AXN_ObtenerRolMiembro({commit:e},{id:a}){try{const{data:t}=await H.instance.get(`/roles/usuario/${a}/`),{items:s}=t;return e("MUT_EstablecerRolMiembro",s.rol),{message:"Ok"}}catch(t){return{message:"No tiene un rol.",error:t}}}},ge={GET_idRolMiembro:e=>e.rolMiembro.id};var he={namespaced:!0,state:me,mutations:pe,actions:be,getters:ge},_e={namespaced:!0,state:{notificaciones:[],numeroNotificaciones:0,numeroNotificacionesDiferencia:0},mutations:{MUT_setNotificaciones(e,a){oe("notificaciones",a),e.notificaciones=a},limpiarNotificaciones(e){oe("notificaciones",[]),e.notificaciones=[]}},actions:{[V]({dispatch:e}){e("iniciarNotificaciones")},[L]({commit:e}){e("limpiarNotificaciones")},iniciarNotificaciones({commit:e}){const a=re("notificaciones");e("MUT_setNotificaciones",a||[])},async traerNotificaciones({commit:e},{id_usuario:a}){try{const{data:t}=await H.instance.get(`/notificaciones/notificacion/${a}/`),{items:s,message:r}=t;return e("MUT_setNotificaciones",s),{message:r}}catch(t){const e=String(t.response.data.error);return{erorr:e}}},async actualizarNotificaciones(e,{id:a,user:t,is_read:s}){try{const{data:e}=await H.instance.put(`/notificaciones/notificacion/${a}/`,{user:t,is_read:s}),{message:r}=e;return{message:r}}catch(r){const e=String(r.response.data.error);return{erorr:e}}}},getters:{getNotificaciones:e=>e.notificaciones,getNumeroNotificacionesDiferencia:e=>e.numeroNotificacionesDiferencia}};const fe={peticiones:[],verificarPeticiones:[],peticionesVerificadas:[],peticionesAceptadas:[],cargando:!1,recurso:{},solicitud_recurso:{trabajos:[],tipo_pago:"",beneficiario:"",banco:"",clave:"",numero_tarjeta:"",concepto_pago:""},recursos:[],comentarios:[],pago:{},pagos:[],archivo:{},archivos:[]},ve={deleteRecurso(e,a){e.recursos.splice(a,1)},setRecursos(e,a){e.recursos=a},cleanRecursos(e){e.recursos=[]},cleanRecurso(e){e.recurso={}},cleanComentarios(e){e.comentarios=[]},clearArchivos(e){e.archivos=[]},deleteArchivo(e,a){e.archivos.splice(a,1)},setVerificarPeticiones(e,a){e.verificarPeticiones=a},setMontoPeticionesVerificadas(e,{editar_index:a,editar_peticion:t}){Object.assign(e.peticionesVerificadas[a],t)},setPeticionesVerificadas(e,a){e.peticionesVerificadas=a},setRecurso(e,a){e.recurso=a},setSolicitudRecurso(e,a){e.solicitud_recurso=a},setComentarios(e,a){e.comentarios=a},addComentario(e,a){e.comentarios.push(a)},setPago(e,a){e.pago=a},addPeticion(e,a){e.peticionesAceptadas.push(a)},setArchivos(e,a){e.archivos=a},addArchivo(e,a){e.archivos.push(a)},setPagos(e,a){e.pagos=a},setCargando(e,a){e.cargando=a}},ye={async recuperarRecursos({commit:e},{request:a,tipo_pago:t,validado:s}){try{e("cleanRecursos"),e("setCargando",!0);const r=[],{data:o,status:i}=await H.instance.get(a?"peticiones/recursos/?request="+a:`peticiones/recursos/?type_pay=${t}&validate=${s}`),{items:n,message:c}=o;return n.forEach(e=>{r.push({id:e.id,tipo_pago:e.type_pay,importe:e.total_amout,creado:e.created_date,banco:e.bank,datos_bancarios:e.bank_data,solicitud:e.request,validado:e.validate,concepto:e.concept})}),e("setRecursos",r),e("setCargando",!1),{mensaje:c,estado:i}}catch(r){return e("setCargando",!1),{error:r}}},async recuperarRecursosUsuario({commit:e},{solicitado:a,gestor:t,solicitud:s,tipo_pago:r}){try{e("cleanRecursos"),e("setCargando",!0);var o="peticiones/recursos/trabajo/";a?o=o+"?solicitado="+a:o+=void 0!==r?`?gestor=${t}&tipo_pago=${r}`:`?gestor=${t}&request=${s}`;const i=[],{data:n,status:c}=await H.instance.get(o),{items:l,message:u}=n;return l.forEach(e=>{i.push({id:e.id,tipo_pago:e.type_pay,importe:e.total_amout,creado:e.created_date,banco:e.bank,datos_bancarios:e.bank_data,solicitud:e.request,validado:e.validate,concepto:e.concept})}),e("setRecursos",i),e("setCargando",!1),{mensaje:u,estado:c}}catch(i){return e("setCargando",!1),{error:i}}},async recuperarRecurso({commit:e},a){try{e("setCargando",!0);const{data:t}=await H.instance.get(`peticiones/recursos/${a}/`),{items:s,message:r}=t,o={id:s.id,creado:s.created_date,importe:s.total_amout,banco:s.bank,tipoPago:s.type_pay,datosBancarios:s.bank_data,solicitud:s.request,concepto:s.concept,peticiones:[]};for(const e of s.petitions)o.peticiones.push({trabajo:{id:e.work.id,concepto:e.work.concept,gestor:e.work.area_user,solicitado:e.work.assigned_user},inmueble:{cliente:e.work.property_office.client,nombre:e.work.property_office.name,clave:e.work.property_office.property_key,estado:e.work.property_office.province,municipio:e.work.property_office.municipality},importe:e.amount});return e("setCargando",!1),e("setRecurso",o),{mensaje:r}}catch(t){return e("setCargando",!1),{mensaje:t.response.data.message}}},async crearRecurso({commit:e},{trabajos:a,banco:t,tipo_pago:s,concepto_pago:r,clave:o,beneficiario:i}){try{const n={petitions:a,bank_data:o,type_pay:s,bank:t,concept:r,beneficiary:i},{data:c,status:l}=await H.instance.post("/peticiones/recursos/",n),{items:u,message:d}=c,m={id:u.id,creado:u.created_date,trabajos:u.works,tipoPago:u.type_pay,datos_bancarios:u.bank_data,banco:u.bank_data,solicitud:u.request,concepto:u.concept};return e("setRecurso",m),{mensaje:d,estado:l}}catch(n){return{error:n}}},async confirmarValidarRecuruso({commit:e},{id:a,confirmacion:t,validacion:s,indice:r}){try{e("setCargando",!0);const o=t?{request:t}:{validate:s},{data:i,status:n}=await H.instance.patch(`peticiones/recursos/${a}/`,o),{message:c}=i;return e("deleteRecurso",r),e("setCargando",!1),{mensaje:c,estado:n}}catch(o){return e("setCargando",!1),{error:o}}},async updatePeticion({commit:e},{nueva_peticion:a,indice:t}){try{const{id:s,trabajo:r,banco:o,comentario:i,tipoPago:n,importe:c,peticion:l,payment:u}=a,d={work:r.id,amount:c,bank:o,type_pay:n,comment:i,petition:l,payment:u};await H.instance.put(`peticiones/peticion/${s}/`,d),e("deletePeticion",t),e("addPeticion",a)}catch(s){return{error:"404",message:"No se obtubo la lista de pagos de derechos."}}},async deletePeticion({commit:e},{id:a,editedIndex:t}){try{return await H.instance.delete(`peticiones/peticion/${a}/`),e("deletePeticion",t),{mensaje:"Eliminación exitosa."}}catch(s){return{error:"404",message:"No se elimino el pago."}}},async verificarPeticiones({commit:e},a){try{const t=[],s=[];for(const e of a)t.push({work:e.trabajo,amount:e.monto});const{data:r,status:o}=await H.instance.post("peticiones/peticion/verificar_peticiones/",{works:t}),{message:i,items:n}=r;return n.forEach(e=>{e.errors?s.push({error:"Este trabajo ya fue mandado a solicitud de recursos"}):s.push({trabajo:e.work,monto:e.amount})}),e("setPeticionesVerificadas",s),{mensaje:i,estado:o}}catch(t){return{error:t}}},async confirmarPeticiones(e,a){try{const e=[],t=[];for(const n of a)n.error||e.push({work:n.trabajo,amount:n.monto});const{data:s,status:r}=await H.instance.post("peticiones/peticion/confirmar_peticiones/",{works:e}),{message:o,items:i}=s;return i.forEach(e=>{e.errors||t.push({id:e.id,trabajo:e.work,monto:e.amount})}),{mensaje:o,estado:r,peticiones:t}}catch(t){return{error:t}}},async subirArchivo({commit:e},{archivo:a,recurso:t,nombre:s}){const r=await Z(a),o=new FormData;o.append("name",s),o.append("resource",t),o.append("state",!0),r&&o.append("file",a);try{const{data:a,status:t}=await H.instance.post("peticiones/comprobante/",o),{items:s,message:r}=a,i={id:s.id,nombre:s.name,archivo:s.file};return e("addArchivo",i),{message:r,estado:t}}catch(i){return{error:i}}},async recuperarArchivoRecurso({commit:e},a){try{e("setCargando",!0);const{data:t,status:s}=await H.instance.get("peticiones/comprobante/?resource="+a),{items:r,message:o}=t,i=[];for(const e of r)i.push({id:e.id,archivo:e.file,nombre:e.name});return e("setArchivos",i),e("setCargando",!1),{mensaje:o,estado:s}}catch(t){return e("setCargando",!1),{error:t}}},async eliminarArhivoRecurso({commit:e},{id:a,indice:t}){try{e("setCargando",!0);const{data:s,status:r}=await H.instance.delete(`peticiones/comprobante/${a}/`),{message:o}=s;return e("deleteArchivo",t),e("setCargando",!1),{mensaje:o,estado:r}}catch(s){return e("setCargando",!1),{error:s}}},async getPagos({commit:e}){try{const{data:a}=await H.instance.get("peticiones/pagos/"),{items:t}=a,s=[];return t.forEach(e=>{s.push({id:e.id,nombre:e.name,total:e.total,recipo:e.receipt,creado:e.created_date})}),e("setPagos",s),{error:null}}catch(a){return{error:"Consulta satisfactoria."}}},async getPago(e,a){try{const{data:e}=await H.instance.get(`peticiones/pagos/${a}/`),{items:t}=e;window.open(t.receipt.file)}catch(t){return{error:"Consulta satisfactoria."}}},async recuperarComentariosRecurso({commit:e},a){try{e("setCargando",!0);const{data:t,status:s}=await H.instance.get("peticiones/comentario/?resource="+a),{items:r,message:o}=t,i=[];for(const e of r)i.push({id:e.id,usuario:e.user,comentario:e.comment});return e("setComentarios",i),e("setCargando",!1),{mensaje:o,estado:s}}catch(t){return e("setCargando",!1),{error:t}}},async hacerComentario({commit:e},{usuario:a,recurso:t,comentario:s}){try{const{data:r,status:o}=await H.instance.post("peticiones/comentario/",{resource:t,user:a,comment:s}),{items:i,message:n}=r,c={id:i.id,comentario:i.comment,usuario:i.user};return e("addComentario",c),{mensaje:n,estado:o}}catch(r){return{error:r}}}},Ce={getRecursos:e=>e.recursos,getVerificarPeticiones:e=>e.verificarPeticiones,getPeticionesVerificadas:e=>e.peticionesVerificadas,getSolicitudRecurso:e=>e.solicitud_recurso,getRecurso:e=>e.recurso,getComentarios:e=>e.comentarios,getArchivo:e=>e.archivo,getArchivos:e=>e.archivos,getPago:e=>e.pago,getPagos:e=>e.pagos,getCargando:e=>e.cargando};var je={namespaced:!0,state:fe,mutations:ve,actions:ye,getters:Ce};const xe={proyectos:[],proyecto:{},conceptos:[],concepto:{},cargando:!1,cargandoConceptos:!1},ke={setProyectos(e,a){e.proyectos=a},setProyecto(e,a){e.proyecto=a},clearProyecto(e){e.proyecto={},e.concepto={},e.conceptos=[]},setCargando(e,a){e.cargando=a},setConceptos(e,a){e.conceptos=a},setConcepto(e,a){e.concepto.push(a)},setCargandoConceptos(e,a){e.cargandoConceptos=a},clearConcepto(e){e.concepto={}}},Me={async obtenerProyectos({commit:e}){e("setCargando",!0);try{const{data:a}=await H.instance.get("/proyectos/proyecto/"),{items:t,message:s}=a,r=[];return t.forEach(e=>{r.push({id:e.id,nombre:e.name})}),e("setProyectos",r),e("setCargando",!1),{mensaje:s}}catch(a){return e("setCargando",!1),{error:a.response.data.errors}}},async obtenerProyecto({state:e,commit:a},{id:t}){a("setCargando",!0);const s=e.proyectos.find(e=>e.id==t);a("setProyecto",s),a("setCargando",!1)},async crearProyecto({state:e,commit:a},t){a("setCargando",!0);try{const{data:s,status:r}=await H.instance.post("proyectos/proyecto/",{name:t}),{items:o,message:i}=s,n={id:o.id,nombre:o.name};return a("setProyecto",n),e.proyectos.push(n),a("setCargando",!1),{mensaje:i,estado:r}}catch(s){return a("setCargando",!1),{error:s}}},async crearConcepto({commit:e,state:a},{nombre:t,proyecto:s}){e("setCargandoConceptos",!0);try{const{data:r}=await H.instance.post("proyectos/conceptos/",{name:t,project:s}),{items:o}=r,i={id:o.id,nombre:o.name};return a.conceptos.push(i),e("setCargandoConceptos",!1),{mensaje:"ok"}}catch(r){return{error:r.response.data.errors.name[0]}}},async obtenerConceptos({commit:e},a){e("setCargandoConceptos",!0);try{const{data:s,status:r}=await H.instance.get(`proyectos/proyecto/${a}/`),{items:o,message:i}=s,{concepts:n}=o;var t=[];return n.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setConceptos",t),e("setCargandoConceptos",!1),{mensaje:i,estado:r}}catch(s){return e("setCargandoConceptos",!1),{error:s}}}},$e={getCargando:e=>e.cargando,getCargandoConceptos:e=>e.cargandoConceptos,getProyectos:e=>e.proyectos,getProyecto:e=>e.proyecto,getConceptos:e=>e.conceptos};var Oe={namespaced:!0,state:xe,mutations:ke,actions:Me,getters:$e};const De={alertas:[]},we={setAlertas(e,a){e.alertas=a},addAlertas(e,a){e.alertas.push(a)},clearAleras(e){e.alertas=[]}},Ae={},Pe={getAlertas:e=>e.alertas};var Te={namespaced:!0,state:De,mutations:we,actions:Ae,getters:Pe};const Ee={beneficiario:null,beneficiarios:[],cargando:!1},Se={setBeneficiario(e,a){e.beneficiario=a},setBeneficiarios(e,a){e.beneficiarios=a},addBeneficiario(e,a){e.beneficiarios.push(a)},setCargando(e,a){e.cargando=a},deleteBeneficiario(e,a){e.beneficiarios.splice(a,1)},clearBeneficiario(e){e.beneficiario=null}},Re={async obtenerBeneficiarios({commit:e}){try{const a=[{nombre:"Pepe",clave:0x18b241f756c6550,numero_tarjeta:8000001234567899},{nombre:"Municipio las brisas",clave:0x18b241f756c6550,numero_tarjeta:0xe35fadcb002db}];return e("setBeneficiarios",a),{mensaje:"ok",estado:200}}catch(a){return{error:a}}},async crearBeneficiario({commit:e},{nombre:a,clave:t,numero_tarjeta:s}){try{const r={id:0,nombre:a,clave:t,numero_tarjeta:s};return e("setBeneficiario",r),e("addBeneficiario",r),{mensaje:"ok",estado:200}}catch(r){return{error:r}}},async actualizarBeneficiario({commit:e},{beneficiario:a}){try{return e("setBeneficiario",a),{mensaje:"ok",estado:200}}catch(t){return{error:t}}},async eliminarBeneficiario({commit:e},{editar_index:a}){try{return e("deleteBeneficiario",a),e("clearBeneficiario"),{mensaje:"ok",estado:200}}catch(t){return{error:t}}}},Ie={getBeneficiarios:e=>e.beneficiarios,getBeneficiario:e=>e.beneficiario};var Ue={namespaced:!0,state:Ee,mutations:Se,actions:Re,getters:Ie};const Fe={MOD_clientes:G,MOD_inmuebles:J,MOD_ubicaciones:Y,MOD_trabajos:se,MOD_usuarios:ie,MOD_autenticacion:de,MOD_grupos:he,MOD_notificaciones:_e,MOD_pagos:je,proyecto:Oe,alerta:Te,beneficiario:Ue};function Ne(e,a){return Object.keys(e).filter(t=>{const{actions:s,namespaced:r}=e[t];return!0===r&&Object.prototype.hasOwnProperty.call(s,a)})}const ze=Ne(Fe,V),Be=Ne(Fe,L);var Ve={data:()=>({opciones:[{text:"Administrat personal",link:"Personal"},{text:"Salir"}]}),computed:{fotoUsuario(){return this.$store.getters["MOD_autenticacion/getFotoUsuario"]},usernname(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]},rolUsuario(){return this.$store.getters["MOD_autenticacion/getUserPermissions"]}},methods:{async cerrarSesion(){Be.forEach(e=>{this.$store.dispatch(`${e}/${L}`)}),this.$router.push({name:"Login"})}}},Le=Ve,qe=Object(y["a"])(Le,z,B,!1,null,null,null),Xe=qe.exports,He={components:{notificaciones:U,"menu-navegacion-principal":j,"ver-perfil-y-mas":Xe},computed:{rolUsuario(){return this.$store.getters["MOD_autenticacion/getUserPermissions"]},isAdministrador(){return"Administrador"==this.rolUsuario||"Coordinador"==this.rolUsuario}}},Ge=He,Je=Object(y["a"])(Ge,p,b,!1,null,null,null),Ye=Je.exports,Ke=t("0798"),Qe=t("2db4"),Ze=function(){var e=this,a=e._self._c;return a(Qe["a"],{attrs:{right:"",top:"",color:"transparent"},model:{value:e.snackbar,callback:function(a){e.snackbar=a},expression:"snackbar"}},e._l(e.alertas,(function(t,s){return a(Ke["a"],{key:s,attrs:{dismissible:"",border:"left","colored-border":"",type:e.tipoAlerta(t)}},[t.error?a("div",[t.error.response.data.message?a("span",[e._v(e._s(t.error.response.data.message)+" "),a("br")]):a("span",[e._v(e._s(t.error.response.data.error)+" "),a("br")])]):a("div",[a("span",{domProps:{textContent:e._s(t.mensaje)}})])])})),1)},We=[],ea={data:()=>({snackbar:!1}),computed:{alertas(){return this.$store.getters["alerta/getAlertas"]}},methods:{tipoAlerta({estado:e,error:a}){const t=a?a.response.status:e;switch(!0){case t<226:return"success";case t<451:return"warning";default:return"error"}}},watch:{alertas(){this.alertas.length&&(this.snackbar=!0)},snackbar(e){e||this.$store.commit("alerta/clearAleras")}}},aa=ea,ta=Object(y["a"])(aa,Ze,We,!1,null,null,null),sa=ta.exports,ra={components:{encabezado:Ye,alerta:sa},methods:{TemaOscuro(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}},computed:{isUsuarioAutenticado(){return this.$store.getters["MOD_autenticacion/isUsuarioAutenticado"]}}},oa=ra,ia=Object(y["a"])(oa,c,l,!1,null,null,null),na=ia.exports,ca=t("8c4f"),la=t("0e8f"),ua=t("4bd4"),da=t("a722"),ma=t("f6c4"),pa=t("8654"),ba=function(){var e=this,a=e._self._c;return a(r["a"],{attrs:{id:"inspire"}},[a(ma["a"],{staticClass:"grey"},[a(i["a"],{attrs:{fluid:"","fill-height":""}},[a(da["a"],{attrs:{"align-center":"","justify-center":""}},[a(la["a"],{attrs:{xs12:"",sm8:"",md4:""}},[a(M["a"],{attrs:{lass:"mx-auto",elevation:"5",loading:e.loading}},[a(g["d"],{staticClass:"grey lighten-2"},[e._v(" Iniciar sesión en AntaSoft ")]),a(g["c"],[a(ua["a"],[a(pa["a"],{attrs:{label:"Nombre de usuario o correo",type:"text",required:""},model:{value:e.cuenta,callback:function(a){e.cuenta=a},expression:"cuenta"}}),a(pa["a"],{attrs:{label:"Contraseña",type:e.valor?"password":"text",requie:"","append-icon":e.valor?"mdi-eye":"mdi-eye-off"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.login()},"click:append":()=>e.valor=!e.valor},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}})],1),a("div",{staticClass:"text-center"},[a("a",{attrs:{href:"#"}},[e._v("¿Olvidaste tu contraseña?")])])],1),a(g["a"],[a(u["a"],{attrs:{color:"primary",block:""},on:{click:function(a){return e.login()}}},[e._v(" Iniciar sesion ")])],1)],1)],1)],1)],1)],1)],1)},ga=[],ha={name:"Login",data:()=>({cuenta:null,email:null,nombre_usuario:null,password:null,loading:!1,valor:String}),computed:{nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},methods:{async login(){const{email:e,nombre_usuario:a,password:t}=this;this.loading=!0;const{error:s}=await this.$store.dispatch("MOD_autenticacion/login",{email:e,nombreUsuario:a,password:t});if(this.loading=!1,s)return void alert(s);const{nombreUsuario:r}=this;this.$router.push({name:"TrabajoUsuario",params:{nombreUsuario:r}})},validarCuenta(e){/^\w+([/.-]?\w+)*@\w+([/.-]?\w+)*(\.\w{2,4})+$/.test(e)?(this.email=e,this.nombre_usuario=null):(this.email=null,this.nombre_usuario=e)}},watch:{cuenta:function(){this.validarCuenta(this.cuenta)}}},_a=ha,fa=Object(y["a"])(_a,ba,ga,!1,null,null,null),va=fa.exports,ya=t("62ad"),Ca=t("0fd9"),ja=function(){var e=this,a=e._self._c;return a(ma["a"],[a(Ca["a"],{attrs:{justify:"center",dense:""}},[a(ya["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2",xs:"2"}},[a("cliente")],1),a(ya["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a("trabajos")],1),a(ya["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2",xs:"2"}},[a(M["a"],{staticClass:"mx-auto",attrs:{outlined:""}})],1)],1)],1)},xa=[],ka=function(){var e=this,a=e._self._c;return a(M["a"],{staticClass:"mx-auto",attrs:{loading:e.isCargando}},[a("nuevo-cliente"),a("listar-clientes")],1)},Ma=[],$a=t("169a"),Oa=t("a844"),Da=t("71d9"),wa=t("2a7f"),Aa=function(){var e=this,a=e._self._c;return a(Da["a"],{attrs:{dense:"",elevation:"1"}},[a(wa["a"],{domProps:{textContent:e._s("Clientes")}}),a(m["a"]),a($a["a"],{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(u["a"],e._g(e._b({attrs:{small:"",color:"success"}},"v-btn",s,!1),t),[a(d["a"],{attrs:{left:""}},[e._v("mdi-bank")]),e._v("Crear ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(M["a"],{staticClass:"mx-auto",attrs:{"max-width":"500"}},[a(Da["a"],{attrs:{elevation:"1",dense:""}},[a(wa["a"],[e._v("Crear nuevo cliente")]),a(m["a"]),a(u["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){return e.cerrarDialogo()}}},[a(d["a"],[e._v("mdi-close")])],1)],1),a(g["c"],[a(ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(pa["a"],{attrs:{label:"Nombre o razón social",rules:[e=>!!e||"El nombre o razón social es necesario"]},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}}),a(pa["a"],{attrs:{label:"RFC",rules:[e=>!!e||"El RFC es necesario"]},model:{value:e.rfc,callback:function(a){e.rfc=a},expression:"rfc"}}),a(Oa["a"],{attrs:{label:"Dirección",rules:[e=>!!e||"La Dirección es necesaria"]},model:{value:e.direccion,callback:function(a){e.direccion=a},expression:"direccion"}})],1),a(g["a"],[a(m["a"]),a(u["a"],{staticClass:"error",on:{click:function(a){return e.cerrarDialogo()}}},[e._v("Cancelar")]),a(u["a"],{staticClass:"success",attrs:{disabled:!e.validacion},on:{click:function(a){return e.crear()}}},[e._v("Crear")])],1)],1)],1)],1)],1)},Pa=[],Ta={data:()=>({validacion:!1,nombre:null,rfc:null,direccion:null,dialog:!1}),methods:{async crear(){if(this.$refs.formulario.validate()){const{nombre:e,rfc:a,direccion:t}=this,{error:s,mensaje:r,estado:o}=await this.$store.dispatch("MOD_clientes/nuevo",{nombre:e,rfc:a,direccion:t});s||this.$refs.formulario.reset(),this.$store.commit("alerta/addAlertas",{estado:o,mensaje:r,error:s})}},cerrarDialogo(){this.$refs.formulario.reset(),this.dialog=!1}}},Ea=Ta,Sa=Object(y["a"])(Ea,Aa,Pa,!1,null,null,null),Ra=Sa.exports,Ia=t("8270"),Ua=function(){var e=this,a=e._self._c;return a(O["a"],{attrs:{dense:""}},[a(A["a"],{attrs:{rounded:""}},[e._l(e.clientes,(function(t,s){return a(D["a"],{key:s,attrs:{link:""},on:{click:function(a){return e.irInmuebles(t)}}},[a(Ia["a"],[a(x["a"],{staticClass:"white--text",attrs:{color:"grey",size:"56"}},[e._v(" "+e._s(t.nombre[0])+" ")])],1),a(w["a"],[a(w["c"],{domProps:{textContent:e._s(t.nombre)}})],1)],1)})),e.isCargando?a("span",{staticClass:"container"},[e._v("Cargando...")]):e._e(),e.isCargando||e.clientes.length?e._e():a("span",{staticClass:"container"},[e._v("No hay clientes")])],2)],1)},Fa=[],Na={computed:{clientes(){return this.$store.getters["MOD_clientes/getClientes"]},isCargando(){return this.$store.getters["MOD_clientes/getCargando"]}},created(){this.inicializarClientes()},methods:{eliminar(e){const a="¿Estás seguro de que quieres eliminar al cliente "+e.nombre+"?";let t=confirm(a);if(t){const a=this.clientes.indexOf(e),{mensaje:t,error:s}=this.$store.dispatch("MOD_clientes/eliminar",{id:e.id,indice:a});if(s)return void alert(t);alert(t)}},async inicializarClientes(){const{error:e,mensaje:a,estado:t}=await this.$store.dispatch("MOD_clientes/obtenerClientes");this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:e})},irInmuebles(e){this.$store.dispatch("MOD_clientes/recuperarCliente",e),this.$router.push({name:"inmuebles",params:{cliente:e.nombre}})}}},za=Na,Ba=Object(y["a"])(za,Ua,Fa,!1,null,null,null),Va=Ba.exports,La={components:{"nuevo-cliente":Ra,"listar-clientes":Va},computed:{isCargando(){return this.$store.getters["MOD_clientes/getCargando"]}}},qa=La,Xa=Object(y["a"])(qa,ka,Ma,!1,null,null,null),Ha=Xa.exports,Ga=function(){var e=this,a=e._self._c;return a(Ca["a"],{attrs:{dense:""}},[a(ya["a"],{attrs:{cols:"12"}},[a("menu-filtado")],1),a(ya["a"],{attrs:{cols:"12"}},[a("listar-trabajos")],1)],1)},Ja=[],Ya=t("67b6"),Ka=t("43a6"),Qa=t("b974"),Za=function(){var e=this,a=e._self._c;return a(M["a"],{staticClass:"mx-auto container"},[a(Ca["a"],{attrs:{"no-gutters":""}},[a(ya["a"],{attrs:{cols:"12"}},[a(Ka["a"],{attrs:{row:""},model:{value:e.tipo,callback:function(a){e.tipo=a},expression:"tipo"}},[a(Ya["a"],{attrs:{value:"cliente",label:"Cliente"}}),a(Ya["a"],{attrs:{value:"estado",label:"Estado"}}),a(Ya["a"],{attrs:{value:"fecha",label:"Fecha"}})],1),"fecha"==e.tipo?a("seleccionar-fecha",{on:{eventFecha:e.inicializarTrabajos}}):e._e(),"cliente"==e.tipo?a(Qa["a"],{attrs:{items:e.clientes,"item-text":"nombre","item-value":"id",label:"Cliente",clearable:"",outlined:"",dense:""},model:{value:e.cliente,callback:function(a){e.cliente=a},expression:"cliente"}}):e._e(),"estado"==e.tipo?a(Qa["a"],{attrs:{label:"Estado","item-text":"nombre",items:e.estados,"item-value":"id",clearable:"",outlined:"",dense:"","no-data-text":"No hay estados"},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}}):e._e()],1)],1)],1)},Wa=[],et=t("2e4b"),at=function(){var e=this,a=e._self._c;return a(Ca["a"],[a(ya["a"],{attrs:{cols:"auto"}},[a(P["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.menorIgualFecha,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(a){e.menorIgualFecha=a},"update:return-value":function(a){e.menorIgualFecha=a}},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(pa["a"],e._g(e._b({attrs:{label:"Fecha de inicio","prepend-icon":"mdi-calendar",readonly:"",clearable:"",outlined:"",dense:""},model:{value:e.menorIgualFecha,callback:function(a){e.menorIgualFecha=a},expression:"menorIgualFecha"}},"v-text-field",s,!1),t))]}}]),model:{value:e.menu,callback:function(a){e.menu=a},expression:"menu"}},[a(et["a"],{attrs:{"no-title":"",scrollable:"",locale:"es-es"},model:{value:e.menorIgualFecha,callback:function(a){e.menorIgualFecha=a},expression:"menorIgualFecha"}})],1)],1),a(ya["a"],{attrs:{cols:"auto"}},[a(P["a"],{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.mayorIigualFecha,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(a){e.mayorIigualFecha=a},"update:return-value":function(a){e.mayorIigualFecha=a}},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(pa["a"],e._g(e._b({attrs:{label:"Fecha final","prepend-icon":"mdi-calendar",readonly:"",clearable:"",dense:"",outlined:""},model:{value:e.mayorIigualFecha,callback:function(a){e.mayorIigualFecha=a},expression:"mayorIigualFecha"}},"v-text-field",s,!1),t))]}}]),model:{value:e.menu2,callback:function(a){e.menu2=a},expression:"menu2"}},[a(et["a"],{attrs:{"no-title":"",scrollable:"",locale:"es-es"},model:{value:e.mayorIigualFecha,callback:function(a){e.mayorIigualFecha=a},expression:"mayorIigualFecha"}})],1)],1)],1)},tt=[],st={data:()=>({menu:!1,menu2:!1,menorIgualFecha:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),mayorIigualFecha:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}),watch:{menorIgualFecha(e){const{mayorIigualFecha:a}=this;this.$emit("eventFecha",{cliente:null,estado:null,menorIgualFecha:e,mayorIigualFecha:a}),this.$refs.menu.save(e)},mayorIigualFecha(e){const{menorIgualFecha:a}=this;this.$emit("eventFecha",{cliente:null,estado:null,menorIgualFecha:a,mayorIigualFecha:e}),this.$refs.menu2.save(e)}}},rt=st,ot=Object(y["a"])(rt,at,tt,!1,null,null,null),it=ot.exports,nt={data:()=>({tipo:null,cliente:null,estado:null}),components:{"seleccionar-fecha":it},computed:{clientes(){return this.$store.getters["MOD_clientes/getClientes"]},estados(){return this.$store.getters["MOD_ubicaciones/getEstados"]}},created(){const{cliente:e,estado:a,menorIgualFecha:t,mayorIigualFecha:s}=this;this.inicializarTrabajos({cliente:e,estado:a,menorIgualFecha:t,mayorIigualFecha:s})},methods:{async inicializarTrabajos({cliente:e,estado:a,menorIgualFecha:t,mayorIigualFecha:s}){const{mensaje:r,error:o,estados:i}=await this.$store.dispatch("MOD_trabajos/obtenerTrabajosPendietes",{client:e,province:a,menorIgualFecha:t,mayorIigualFecha:s});o&&this.$store.commit("alerta/addAlertas",{estado:i,mensaje:r,error:o})},async inicializarClientes(){await this.$store.dispatch("MOD_clientes/obtenerClientes")},async inicializarEstados(){await this.$store.dispatch("MOD_ubicaciones/obtenerEstados")}},watch:{estado(e){this.inicializarTrabajos({cliente:null,estado:e,menorIgualFecha:null,mayorIigualFecha:null})},cliente(e){this.inicializarTrabajos({cliente:e,estado:null,menorIgualFecha:null,mayorIigualFecha:null})},tipo(e){"estado"===e&&this.inicializarEstados()}}},ct=nt,lt=Object(y["a"])(ct,Za,Wa,!1,null,null,null),ut=lt.exports,dt=t("8fea"),mt=t("6b53"),pt=function(){var e=this,a=e._self._c;return a(M["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a(g["d"],[e._v(" Trabajos "),a(m["a"]),a(pa["a"],{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),a(g["b"],[e._v(" "+e._s(e.trabajos.length)+" Trabajos ")]),a(g["c"],[a(mt["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(dt["a"],{staticClass:"elevation-5",attrs:{loading:e.isCargando,headers:e.headers,items:e.trabajos,"item-key":"clave_inmueble","items-per-page":-1,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:" p - Tp de n"},"no-data-text":"No hay trabajos pendientes mayores a 5 días.",search:e.search},on:{"click:row":e.verTrabajo},scopedSlots:e._u([{key:"item.modified_date",fn:function({item:t}){return[a(F["a"],{attrs:{color:e.getColor(t.modified_date),dark:""}},[e._v(" "+e._s(t.modified_date)+" ")])]}}])})],1)],1)],1)},bt=[],gt={data:()=>({search:"",estado:null,cliente:null,blue:3,headers:[{value:"concept.project",text:"Proyecto",sortable:!1},{value:"concept.name",text:"Concepto",sortable:!1},{value:"status",text:"Status"},{value:"property_office",text:"Inmueble",sortable:!1},{value:"client",text:"Cliente",sortable:!1},{value:"created_date",text:"Creado",sortable:!1},{value:"modified_date",text:"Modificado",sortable:!0},{value:"assigned_user",text:"Usuario",sortable:!1}],menorIgualFecha:null,mayorIigualFecha:null}),computed:{trabajos(){return this.$store.getters["MOD_trabajos/getTrabajos"]},isCargando(){return this.$store.getters["MOD_trabajos/getCargando"]}},methods:{holgura(e){var a=new Date(e),t=new Date,s=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r=new Date(s),o=(r.valueOf()-a.valueOf())/864e5;return this.blue<o&&(this.blue=o),o},getColor(e){return this.holgura(e)>=5?"red":this.holgura(e)>=2?"orange":"green"},verTrabajo(e){this.$store.commit("MOD_trabajos/setTrabajo",e),this.$router.push({name:"De"})}}},ht=gt,_t=Object(y["a"])(ht,pt,bt,!1,null,null,null),ft=_t.exports,vt={components:{"menu-filtado":ut,"listar-trabajos":ft}},yt=vt,Ct=Object(y["a"])(yt,Ga,Ja,!1,null,null,null),jt=Ct.exports,xt={components:{cliente:Ha,trabajos:jt}},kt=xt,Mt=Object(y["a"])(kt,ja,xa,!1,null,null,null),$t=Mt.exports,Ot=t("2bc5"),Dt=t("f625"),wt=t("71a3"),At=t("fe57"),Pt=function(){var e=this,a=e._self._c;return a(ma["a"],[a(M["a"],{staticClass:"mx-auto"},[a(Ot["a"],{attrs:{items:e.items},scopedSlots:e._u([{key:"item",fn:function({item:t}){return[a(Dt["a"],{attrs:{href:t.href,disabled:t.disabled}},[e._v(" "+e._s(t.text.toUpperCase())+" ")])]}}])}),a(At["a"],[a(wt["a"],{attrs:{to:{name:"inmuebles"}}},[e._v("Inmuebles")]),a(wt["a"],{attrs:{to:{name:"trabajos-inmuebles"}}},[e._v("Trabajos")]),a(wt["a"],{attrs:{disabled:""}},[e._v("Recursos")]),a(wt["a"],{attrs:{disabled:""}},[e._v("Configuraciones")])],1)],1),a("br"),a("router-view")],1)},Tt=[],Et={data:()=>({items:[]}),computed:{cliente(){return this.$store.getters["MOD_clientes/getCliente"]},nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},created(){this.agregarMigas({text:this.nombreUsuario,disable:!1,href:"#"}),this.agregarMigas({text:this.cliente.nombre,disable:!1,href:"#"})},methods:{agregarMigas(e){this.items.push(e)}}},St=Et,Rt=Object(y["a"])(St,Pt,Tt,!1,null,null,null),It=Rt.exports,Ut=function(){var e=this,a=e._self._c;return a(Ca["a"],{attrs:{justify:"center"}},[a(ya["a"],{attrs:{cols:"8"}},[a(M["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a(Ca["a"],{attrs:{"no-gutters":""}},[a(g["a"],[a(ya["a"],{attrs:{cols:"auto"}},[a("listar-territorios-de-inmuebles-existentes")],1)],1),a(ya["a"],{attrs:{cols:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(g["c"],[a("tabla-inmuebles")],1)],1)],1)],1)],1)],1)},Ft=[],Nt=function(){var e=this,a=e._self._c;return a(dt["a"],{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.inmuebles,"item-key":"clave",loading:e.isCargando,"no-data-text":"No hay inmuebles disponibles","loading-text":"Cargando... por favor espere","items-per-page":-1,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"},"show-select":e.isMostrarSeleccion},scopedSlots:e._u([e.isMostrarMenuInmuebles?{key:"top",fn:function(){return[a(Da["a"],{attrs:{flat:""}},[a(wa["a"],[e._v(" Inmuebles "),a("div",{staticClass:"text-caption",domProps:{textContent:e._s(1==e.inmuebles.length?e.inmuebles.length+" Inmueble":e.inmuebles.length+" Inmuebles")}})]),a(m["a"]),a(P["a"],{attrs:{left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:s}){return[a(u["a"],e._g(e._b({staticClass:"ma-5 info"},"v-btn",t,!1),s),[e._v(" Añadir inmueble "),a(d["a"],{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}],null,!1,3863595973)},[a(O["a"],[a("crear-inmueble"),a(D["a"],{attrs:{link:""}},[a(w["c"],{on:{click:function(a){return e.$router.push({name:"cargar-archivo",params:e.cliente.name})}}},[e._v(" Cargar archivo ")])],1)],1)],1)],1)]},proxy:!0}:null],null,!0),model:{value:e.seleccionados,callback:function(a){e.seleccionados=a},expression:"seleccionados"}})},zt=[],Bt=t("c6a6"),Vt=function(){var e=this,a=e._self._c;return a(D["a"],{attrs:{link:""}},[a($a["a"],{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(w["c"],e._g(e._b({},"v-list-item-title",s,!1),t),[e._v("Crear nuevo inmueble")])]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(M["a"],{staticClass:"mx-auto",attrs:{outlined:"","max-width":"500"}},[a(Da["a"],{attrs:{elevation:"1",dense:""}},[a(wa["a"],[e._v("Crear nuevo inmueble")]),a(m["a"]),a(u["a"],{attrs:{icon:"",fab:"",color:"error"},on:{click:function(a){return e.cerrarDialgo()}}},[a(d["a"],[e._v("mdi-close")])],1)],1),a(g["c"],[a(ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(pa["a"],{attrs:{label:"Nombre",rules:[e=>!!e||"Es necesario un nombre"]},model:{value:e.inmueble.nombre,callback:function(a){e.$set(e.inmueble,"nombre",a)},expression:"inmueble.nombre"}}),a(pa["a"],{attrs:{label:"Clave",rules:[e=>!!e||"Es necesario una clave"]},model:{value:e.inmueble.clave,callback:function(a){e.$set(e.inmueble,"clave",a)},expression:"inmueble.clave"}}),a(Bt["a"],{attrs:{label:"Estado",rules:[e=>!!e||"Es necesario elejir un Estado"],"item-text":"nombre",items:e.estados,"return-object":"","no-data-text":"No se encontraron estados.",clearable:""},on:{change:function(a){e.inmueble.estado?e.obtenerMunicipiosDeEstado(e.inmueble.estado):e.$store.commit("MOD_ubicaciones/limpiarMunicipios")}},model:{value:e.inmueble.estado,callback:function(a){e.$set(e.inmueble,"estado",a)},expression:"inmueble.estado"}}),a(Bt["a"],{attrs:{label:"Municipio",rules:[e=>!!e||"Es necesario elejir un Municipio"],items:e.municipios,"item-text":"nombre","no-data-text":"No se encontraron municipios.","return-object":"",clearable:""},model:{value:e.inmueble.municipio,callback:function(a){e.$set(e.inmueble,"municipio",a)},expression:"inmueble.municipio"}}),a(Bt["a"],{attrs:{label:"Localidad","item-text":"nombre",items:e.localidades,"return-object":"",clearable:"","no-data-text":"No se encontraron localidades."},model:{value:e.inmueble.localidad,callback:function(a){e.$set(e.inmueble,"localidad",a)},expression:"inmueble.localidad"}}),a(Oa["a"],{attrs:{label:"Direccion",rules:[e=>!!e||"Es necesario una direccion"]},model:{value:e.inmueble.direccion,callback:function(a){e.$set(e.inmueble,"direccion",a)},expression:"inmueble.direccion"}})],1)],1),a(g["a"],[a(m["a"]),a(u["a"],{attrs:{disabled:!e.validacion,color:"success",outlined:""},on:{click:function(a){return e.crearInmueble()}}},[e._v("Agregar")]),a(u["a"],{attrs:{disabled:!e.validacion,outlined:"",color:"error"},on:{click:function(a){return e.cerrarDialgo()}}},[e._v("Cerrar")])],1)],1)],1)],1)},Lt=[],qt={data:()=>({validacion:!1,dialog:!1}),computed:{inmueble(){return this.$store.getters["MOD_inmuebles/getInmueble"]},cliente(){return this.$store.getters["MOD_clientes/getCliente"]},estados(){return this.$store.getters["MOD_ubicaciones/getEstados"]},municipios(){return this.$store.getters["MOD_ubicaciones/getMunicipios"]},isMunicipios(){return!this.municipios.length},isCargandoMunuicipios(){return this.$store.getters["MOD_ubicaciones/getCargandoMunicipios"]},localidades(){return this.$store.getters["MOD_ubicaciones/getLocalidades"]}},created(){},methods:{async inicializarEstados(){await this.$store.dispatch("MOD_ubicaciones/obtenerEstados")},async obtenerMunicipiosDeEstado({id:e}){await this.$store.dispatch("MOD_ubicaciones/obtenerMunicipiosDeEstado",e)},async obtenerLocalidadesDeMunicipio({id:e}){await this.$store.dispatch("MOD_ubicaciones/obtenerLocalidadesDeMunicipio",e)},async crearInmueble(){if(this.$refs.formulario.validate()){this.inmueble.cliente=this.cliente.id;const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("MOD_inmuebles/crearInmueble",this.inmueble);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t}),t||this.cerrarDialgo()}},Limpiar(){this.$refs.formulario.reset()},cerrarDialgo(){this.dialog=!1,this.$refs.formulario.reset()}}},Xt=qt,Ht=Object(y["a"])(Xt,Vt,Lt,!1,null,null,null),Gt=Ht.exports,Jt={props:{isMostrarSeleccion:{type:Boolean,default:!1},isMostrarMenuInmuebles:{type:Boolean,default:!0}},data:()=>({dialog:!1,headers:[{value:"cliente",text:"Cliente"},{value:"clave",text:"Clave"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"localidad",text:"Localidad"},{value:"direccion",text:"Direccion"}],pageText:{pageStart:1,pageStop:1,itemsLength:1}}),components:{"crear-inmueble":Gt},computed:{inmuebles(){return this.$store.getters["MOD_inmuebles/getInmuebles"]},isCargando(){return this.$store.getters["MOD_inmuebles/getCargando"]},seleccionados:{get(){return[]},set(e){this.$store.commit("MOD_inmuebles/setInmueblesSeleccionados",e)}},isInmuebles(){return!this.inmuebles.length},cliente(){return this.$store.getters["MOD_clientes/getCliente"]}},created(){this.inicializarInmuebles()},methods:{async inicializarInmuebles(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("MOD_inmuebles/listar",this.cliente.id);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},Yt=Jt,Kt=Object(y["a"])(Yt,Nt,zt,!1,null,null,null),Qt=Kt.exports,Zt=function(){var e=this,a=e._self._c;return a(Ca["a"],{attrs:{dense:""}},[a(ya["a"],{attrs:{cols:"auto"}},[a(Bt["a"],{attrs:{label:"Estados","item-text":"nombre",items:e.estados,disabled:e.isEstados,"item-value":"id",dense:"",clearable:"",loading:e.isCargandoEstados,"return-object":""},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}})],1),a(ya["a"],{attrs:{cols:"auto"}},[a(Bt["a"],{attrs:{label:"Municipios","item-text":"nombre",items:e.municipios,disabled:e.isMunicipios,"item-value":"id",dense:"",loading:e.isCargandoMunuicipios,clearable:"","return-object":""},model:{value:e.municipio,callback:function(a){e.municipio=a},expression:"municipio"}})],1),a(ya["a"],{attrs:{cols:"auto"}},[a(Bt["a"],{attrs:{label:"Localidades","item-text":"nombre",items:e.localidades,disabled:e.isLocalidades,"item-value":"id",dense:"",loading:e.isCargandoLocalidades,clearable:"","return-object":""},model:{value:e.localidad,callback:function(a){e.localidad=a},expression:"localidad"}})],1)],1)},Wt=[],es={data:()=>({localidad:null}),computed:{cliente(){return this.$store.getters["MOD_clientes/getCliente"].id},estados(){return this.$store.getters["MOD_ubicaciones/getEstados"]},estado:{get(){return this.$store.getters["MOD_ubicaciones/getEstado"]},async set(e){if(await this.$store.dispatch("MOD_ubicaciones/obtenerEstado",e),null!=e){const{id:a}=e,{error:t}=await this.Buscar({cliente:this.cliente,estado:a,municipio:"",localidad:""});t||this.obtenerMunicipiosDeEstado(this.cliente,a)}else this.Buscar({cliente:this.cliente,estado:"",municipio:"",localidad:""}),this.$store.commit("MOD_ubicaciones/limpiarMunicipios")}},isEstados(){return!this.estados.length},isCargandoEstados(){return this.$store.getters["MOD_ubicaciones/getCargandoEstados"]},municipios(){return this.$store.getters["MOD_ubicaciones/getMunicipios"]},municipio:{get(){return this.$store.getters["MOD_ubicaciones/getMunicipio"]},async set(e){if(await this.$store.dispatch("MOD_ubicaciones/obtenerMunicipio",e),null!=e){const{id:a}=e,{error:t}=await this.Buscar({cliente:this.cliente,estado:this.estado.id,municipio:a,localidad:""});t||this.obtenerLocalidadesDeMunicipio({cliente:this.cliente,estado:this.estado.id,municipio:a})}else this.Buscar({cliente:this.cliente,estado:"",municipio:"",localidad:""})}},isMunicipios(){return!this.municipios.length},isCargandoMunuicipios(){return this.$store.getters["MOD_ubicaciones/getCargandoMunicipios"]},localidades(){return this.$store.getters["MOD_ubicaciones/getLocalidades"]},isLocalidades(){return!this.localidades.length},isCargandoLocalidades(){return this.$store.getters["MOD_ubicaciones/getCargandoLocalidades"]}},created(){this.inicializarEstados()},methods:{async inicializarEstados(){await this.$store.dispatch("MOD_ubicaciones/obtenerEstados")},async obtenerMunicipiosDeEstado(e,a){const{mensaje:t,error:s,status:r}=await this.$store.dispatch("MOD_ubicaciones/obtenerMunicipiosDeInmueblesExistentes",{cliente:e,estado:a});s&&this.$store.commit("alerta/addAlertas",{mensaje:t,estado:r,error:s})},async obtenerLocalidadesDeMunicipio({cliente:e,estado:a,municipio:t}){const{mensaje:s,estadoHttp:r,error:o}=await this.$store.dispatch("MOD_ubicaciones/obtenerLocalidadesDeInmueblesExistentes",{cliente:e,estado:a,municipio:t});o&&this.$store.commit("alerta/addAlertas",{mensaje:s,estado:r,error:o})},async Buscar({cliente:e,estado:a,municipio:t,localidad:s}){const{mensaje:r,estadoHttp:o,error:i}=await this.$store.dispatch("MOD_inmuebles/listarPorClientesTerritorio",{cliente:[e],estado:a,municipio:t,localidad:s});return i&&this.$store.commit("alerta/addAlertas",{mensaje:r,estado:o,error:i}),{error:i}}}},as=es,ts=Object(y["a"])(as,Zt,Wt,!1,null,null,null),ss=ts.exports,rs={components:{"tabla-inmuebles":Qt,"listar-territorios-de-inmuebles-existentes":ss}},os=rs,is=Object(y["a"])(os,Ut,Ft,!1,null,null,null),ns=is.exports,cs=function(){var e=this,a=e._self._c;return a(Ca["a"],{attrs:{justify:"center"}},[a(ya["a"],{attrs:{cols:"8"}},[a(M["a"],{staticClass:"mx-auto"},[a(Ot["a"],[[a(Dt["a"],{attrs:{disabled:!1}},[e._v(" "+e._s(e.cliente.nombre)+" ")])]],2),a(g["c"],[a("formulario-leer-inmuebles"),a("tabla-inmuebles")],1)],1)],1)],1)},ls=[],us=t("23a7"),ds=function(){var e=this,a=e._self._c;return a(ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(us["a"],{attrs:{accept:".xlsx"},on:{change:e.cargar},model:{value:e.archivo,callback:function(a){e.archivo=a},expression:"archivo"}})],1)},ms=[],ps=t("8134"),bs={data:()=>({archivo:null,index_cabeceras:0,index_cabeceras_filtradas:{nombre_inmueble:null,clave_inmueble:null,direccion_inmueble:null,nombre_estado:null,nombre_municipio:null,nombre_localidad:null,sirh:null},inmuebles:[],validacion:!1}),computed:{clientes(){return this.$store.getters["MOD_clientes/getClientes"]},cliente:{get(){return this.$store.getters["MOD_clientes/getCliente"]},set(e){this.$store.dispatch("MOD_clientes/recuperarCliente",e)}}},created(){this.$store.commit("MOD_inmuebles/limpiarInmuebles")},methods:{async cargar(){if(this.$refs.formulario.validate()){this.inmuebles=[],await Object(ps["a"])(this.archivo).then(e=>{this.buscarIndexCabecera(e),e[this.index_cabeceras].forEach((e,a)=>{const t=this.normalizarPalabra(e);this.compararNombreCabecera(t,a)});for(var a=this.index_cabeceras+1;a<e.length;++a)this.inmuebles.push({cliente:this.cliente,nombre:null!=e[a][this.index_cabeceras_filtradas.nombre_inmueble]?e[a][this.index_cabeceras_filtradas.nombre_inmueble]:"n/a",clave:null!=e[a][this.index_cabeceras_filtradas.clave_inmueble]?e[a][this.index_cabeceras_filtradas.clave_inmueble]:"n/a",sirh:null!=e[a][this.index_cabeceras_filtradas.sirh]?e[a][this.index_cabeceras_filtradas.sirh]:"n/a",direccion:null!=e[a][this.index_cabeceras_filtradas.direccion_inmueble]?e[a][this.index_cabeceras_filtradas.direccion_inmueble]:"n/a",estado:null!=e[a][this.index_cabeceras_filtradas.nombre_estado]?e[a][this.index_cabeceras_filtradas.nombre_estado]:"n/a",municipio:null!=e[a][this.index_cabeceras_filtradas.nombre_municipio]?e[a][this.index_cabeceras_filtradas.nombre_municipio]:"n/a",localidad:null!=e[a][this.index_cabeceras_filtradas.nombre_localidad]?e[a][this.index_cabeceras_filtradas.nombre_localidad]:"n/a"})});const{mensaje:e,status:a}=await this.$store.dispatch("MOD_inmuebles/verificarInmuebles",this.inmuebles);console.log(e,a)}},buscarIndexCabecera(e){for(var a=0;a<e.length;++a){for(var t=0,s=0;s<e[a].length;++s){if(5==t)break;null==e[a][s]?t+=1:t=0}if(t<5){this.index_cabeceras=a;break}}},normalizarPalabra(e){const a={"á":"a","é":"e","í":"i","ó":"o","ú":"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U"};return null==e?"n/a":e.split("").map(e=>a[e]||e).join("").toString().toLowerCase()},compararNombreCabecera(e,a){"nombre"===e||"nombre del inmueble"===e?this.index_cabeceras_filtradas.nombre_inmueble=a:"cr"===e||"codigo"===e||"id"===e?this.index_cabeceras_filtradas.clave_inmueble=a:"direccion"===e||"calle y numero"===e?this.index_cabeceras_filtradas.direccion_inmueble=a:"edo."===e||"estado"===e?this.index_cabeceras_filtradas.nombre_estado=a:"municipio"===e||"municipio"===e?this.index_cabeceras_filtradas.nombre_municipio=a:"ciudad"===e||"localidad"===e?this.index_cabeceras_filtradas.nombre_localidad=a:"convive"!==e&&"sirh"!==e&&"convivencia"!==e||(this.index_cabeceras_filtradas.sirh=a)}}},gs=bs,hs=Object(y["a"])(gs,ds,ms,!1,null,null,null),_s=hs.exports,fs=function(){var e=this,a=e._self._c;return a(dt["a"],{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.inmuebles,loading:e.isCargando,dense:""},scopedSlots:e._u([{key:"item.status",fn:function({item:t}){return[a(F["a"],{attrs:{color:t.status?"red":"green",dark:""},domProps:{textContent:e._s(t.status?t.error:"Listo")}})]}},{key:"item.accion",fn:function({item:t}){return[a(d["a"],{attrs:{color:"info",small:""},on:{click:function(a){return e.habilitarEdicion(t)}}},[e._v("mdi-pencil")]),a(d["a"],{attrs:{color:"red",small:""},on:{click:function(a){return e.eliminarInmuebleAgregado(t)}}},[e._v("mdi-delete")])]}},{key:"top",fn:function(){return[a($a["a"],{attrs:{width:"500"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a("actualizar-inmueble")],1)]},proxy:!0}])})},vs=[],ys={components:{"actualizar-inmueble":Gt},data:()=>({habilitar_edicion:!1,headers:[{value:"status",text:"Status",sortable:!0},{value:"clave",text:"Clave",sortable:!1},{value:"nombre",text:"Inmueble",sortable:!1},{value:"estado.nombre",text:"Estado",sortable:!0},{value:"municipio.nombre",text:"Municipio",sortable:!0},{value:"localidad.nombre",text:"Localidad",sortable:!0},{value:"direccion",text:"Direccion",sortable:!1},{value:"accion",text:"",sortable:!1}],dialog:!1}),computed:{inmuebles(){return this.$store.getters["MOD_inmuebles/getInmuebles"]},isCargando(){return this.$store.getters["MOD_inmuebles/getCargando"]}},methods:{eliminarInmuebleAgregado(e){this.$store.commit("MOD_inmuebles/eliminarInmueble",e)},habilitarEdicion(e){this.$store.commit("MOD_inmuebles/setInmueble",e),!e.estado.id||this.obtenerMunicipiosDeEstado(e.estado),this.dialog=!0},async CrearInmuebles(){const e=await this.$store.dispatch("MOD_inmuebles/AXN_CrearInmuebles",this.$store.state.MOD_inmuebles.inmuebles);switch(e){case 2:alert("Inmuebles creados con exito");break;default:alert("Algo inesperado paso");break}},async obtenerMunicipiosDeEstado({id:e}){await this.$store.dispatch("MOD_ubicaciones/obtenerMunicipiosDeEstado",e)}}},Cs=ys,js=Object(y["a"])(Cs,fs,vs,!1,null,null,null),xs=js.exports,ks={components:{"formulario-leer-inmuebles":_s,"tabla-inmuebles":xs},computed:{cliente(){return this.$store.getters["MOD_clientes/getCliente"]}}},Ms=ks,$s=Object(y["a"])(Ms,cs,ls,!1,null,null,null),Os=$s.exports,Ds=t("7e85"),ws=t("e516"),As=t("9c54"),Ps=t("56a4"),Ts=function(){var e=this,a=e._self._c;return a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",sm:"9",md:"9",lg:"9",xl:"9"}},[a(Ds["a"],{model:{value:e.e1,callback:function(a){e.e1=a},expression:"e1"}},[a(As["a"],[a(Ps["a"],{attrs:{complete:e.e1>1,step:"1"}},[e._v(" Paso 1 "),a("br"),e._v(" Inmuebles ")]),a($["a"]),a(Ps["a"],{attrs:{complete:e.e1>2,step:"2"}},[e._v(" Paso 2 "),a("br"),e._v(" Trabajos ")]),a($["a"]),a(Ps["a"],{attrs:{step:"3"}},[e._v(" Paso 3 "),a("br"),e._v(" Asignar ")])],1),a(As["b"],[a(ws["a"],{attrs:{step:"1"}},[a("CompPru10"),a("br"),a(u["a"],{attrs:{color:"success",block:"",disabled:e.isInmueblesSeleccionados},on:{click:function(a){e.e1=2}}},[e._v(" Continue ")])],1),a(ws["a"],{attrs:{step:"2"}},[a(u["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=1}}},[e._v(" Regresar ")]),a("br"),a("CompPru11"),a("br"),a(u["a"],{attrs:{color:"primary",block:"",disabled:0==e.asignaciones_v.length},on:{click:function(a){e.e1=3}}},[e._v(" Continue ")])],1),a(ws["a"],{attrs:{step:"3"}},[a(u["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=2}}},[e._v(" Regresar ")]),a("br"),a("CompPru12"),a("br"),a(u["a"],{attrs:{color:"primary",block:""},on:{click:function(a){e.e1=1,e.asignar()}}},[e._v(" Finalizar ")])],1)],1)],1)],1),a(ya["a"],{attrs:{cols:"12",sm:"3",md:"3",lg:"3",xl:"3"}},[a(M["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(g["d"],[e._v("Resumen ")]),a("div",{staticClass:"text-end"},[a(u["a"],{attrs:{rounded:"",color:"error"},on:{click:function(a){return e.$router.go(-1)}}},[e._v(" Cancelar "),a(d["a"],{attrs:{right:""}},[e._v("mdi-close-circle-outline")])],1)],1)],1)],1)],1)},Es=[],Ss=function(){var e=this,a=e._self._c;return a(M["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a(g["d"],[e._v(" Inmuebles seleccionados: "+e._s(e.inmueblesSeleccionados.length)+"/"+e._s(e.inmuebles.length)+" ")]),a(g["a"],[a(m["a"]),a("listar-territorios-de-inmuebles-existentes")],1),a(g["c"],[a("tabla-inmuebles",{attrs:{isMostrarSeleccion:!0,isMostrarMenuInmuebles:!1}})],1)],1)},Rs=[],Is={components:{"tabla-inmuebles":Qt,"listar-territorios-de-inmuebles-existentes":ss},computed:{inmuebles(){return this.$store.getters["MOD_inmuebles/getInmuebles"]},inmueblesSeleccionados(){return this.$store.getters["MOD_inmuebles/getInmueblesSeleccionados"]}}},Us=Is,Fs=Object(y["a"])(Us,Ss,Rs,!1,null,null,null),Ns=Fs.exports,zs=function(){var e=this,a=e._self._c;return a(M["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a(g["c"],[a(ua["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Ca["a"],{attrs:{"no-gutters":"",justify:"space-around"}},[a(ya["a"],{attrs:{cols:"6"}},[a(Qa["a"],{attrs:{label:"Proyectos",items:e.proyectos,rules:[e=>Boolean(Object.keys(e||{})[0])||"Se debe elejir un proyecto"],"item-text":"nombre",loading:e.isCargando,"no-data-text":"Datos no disponibles",clearable:"","return-object":""},model:{value:e.proyecto,callback:function(a){e.proyecto=a},expression:"proyecto"}})],1),a(ya["a"],{attrs:{cols:"6"}},[a("FormularioPOSTCrearProyecto")],1),a(ya["a"],{attrs:{cols:"6"}},[a(Qa["a"],{attrs:{label:"Conceptos",items:e.conceptos,rules:[e=>!!e.length>0||"Se debe elejir por lo menos un concepto"],"item-text":"nombre","item-value":"id","no-data-text":"Datos no disponibles",loading:e.isCargandoConcepto,"small-chips":"",multiple:"",clearable:"",disabled:!e.proyecto.id},model:{value:e.conceptosSeleccionados,callback:function(a){e.conceptosSeleccionados=a},expression:"conceptosSeleccionados"}})],1),a(ya["a"],{attrs:{cols:"6"}},[e.proyecto?a("div",[a("FormularioPOSTCrearConcepto")],1):e._e()]),a(ya["a"],{attrs:{cols:"12"}},[a(Qa["a"],{attrs:{label:"Estado",items:e.status,"item-text":"nombre","item-value":"id",rules:[e=>!!e>0||"Se debe elejir el estado del trabajo"],clearable:""},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}})],1),a(ya["a"],{attrs:{cols:"12"}},[a(Qa["a"],{attrs:{label:"Usuario",items:e.usuarios,"item-text":"nombre_completo","item-value":"id",rules:[e=>!!e>0||"Se debe elejir un usuario"],clearable:"",required:""},model:{value:e.usuario,callback:function(a){e.usuario=a},expression:"usuario"}})],1)],1)],1)],1),a(g["a"],[a(m["a"]),a(u["a"],{attrs:{color:"green",disabled:!e.valid,outlined:""},domProps:{textContent:e._s("Agregar")},on:{click:function(a){return e.agregar()}}})],1)],1)},Bs=[],Vs=function(){var e=this,a=e._self._c;return a($a["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(u["a"],e._g(e._b({attrs:{color:"primary","x-large":"",icon:"",fab:"",disabled:!e.isProyecto}},"v-btn",s,!1),t),[a(d["a"],[e._v("mdi-plus")])],1)]}},{key:"default",fn:function(t){return[a(M["a"],{staticClass:"mx-auto",attrs:{elevation:"5",loading:e.cargando}},[a(g["d"],{staticClass:"grey lighten-2"},[e._v(" Crear un concepto nuevo para "+e._s(e.proyecto.nombre)+" "),a(m["a"]),a(u["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(d["a"],[e._v("mdi-close")])],1)],1),a($["a"]),a(g["c"],[a(pa["a"],{attrs:{label:"Nombre del concepto"},model:{value:e.concepto,callback:function(a){e.concepto=a},expression:"concepto"}})],1),a(g["a"],{staticClass:"justify-end"},[a(u["a"],{attrs:{text:"",color:"green",outlined:"",disabled:!e.concepto},on:{click:function(a){return e.create()}}},[e._v("Crear")])],1)],1)]}}])})},Ls=[],qs={data:()=>({concepto:null}),computed:{proyecto(){return this.$store.getters["proyecto/getProyecto"]},isProyecto(){return Boolean(Object.keys(this.proyecto).length)},cargando(){return this.$store.getters["proyecto/getCargando"]}},methods:{async create(){const{concepto:e,proyecto:a}=this,{mensaje:t,estado:s,error:r}=await this.$store.dispatch("proyecto/crearConcepto",{nombre:e,proyecto:a.id});this.$store.commit("alerta/addAlertas",{estado:s,mensaje:t,error:r})},cerrrarDialogo(e){e.value=!1,this.nombre=null}}},Xs=qs,Hs=Object(y["a"])(Xs,Vs,Ls,!1,null,null,null),Gs=Hs.exports,Js=function(){var e=this,a=e._self._c;return a($a["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(u["a"],e._g(e._b({attrs:{color:"primary","x-large":"",icon:"",fab:""}},"v-btn",s,!1),t),[a(d["a"],[e._v("mdi-plus")])],1)]}},{key:"default",fn:function(t){return[a(M["a"],{staticClass:"mx-auto",attrs:{elevation:"5",loading:e.cargando}},[a(g["d"],{staticClass:"grey lighten-2"},[e._v(" Crear un nuevo proyecto "),a(m["a"]),a(u["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(d["a"],[e._v("mdi-close")])],1)],1),a($["a"]),a(g["c"],[a(pa["a"],{attrs:{label:"Nombre del proyecto"},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}})],1),a(g["a"],{staticClass:"justify-end"},[a(u["a"],{attrs:{color:"green",outlined:"",disabled:!e.nombre},on:{click:function(a){return e.crear()}}},[e._v("Crear")])],1)],1)]}}])})},Ys=[],Ks={data:()=>({nombre:null}),computed:{cargando(){return this.$store.getters["proyecto/getCargando"]}},methods:{async crear(){const{nombre:e}=this,{mensaje:a,estado:t,error:s}=await this.$store.dispatch("proyecto/crearProyecto",e);this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:s})},cerrrarDialogo(e){e.value=!1,this.nombre=null}}},Qs=Ks,Zs=Object(y["a"])(Qs,Js,Ys,!1,null,null,null),Ws=Zs.exports,er={data:()=>({estado:0,usuario:0,valid:!0,conceptosSeleccionados:[]}),components:{FormularioPOSTCrearConcepto:Gs,FormularioPOSTCrearProyecto:Ws},created(){this.inicializarProyectos(),this.inicializarUsuario(),this.inicializarStatus()},computed:{proyectos(){return this.$store.getters["proyecto/getProyectos"]},proyecto:{get(){return this.$store.getters["proyecto/getProyecto"]},async set(e){e?(this.$store.dispatch("proyecto/obtenerProyecto",e),this.obtenerConceptos(e)):(this.$store.commit("proyecto/clearProyecto"),this.conceptosSeleccionados=[])}},conceptos(){return this.$store.getters["proyecto/getConceptos"]},usuarios(){return this.$store.getters["MOD_usuarios/getUsuarios"]},status(){return this.$store.getters["MOD_trabajos/getStatusTrabajo"]},inmuebles(){return this.$store.getters["MOD_inmuebles/getInmueblesSeleccionados"]},isCargando(){return this.$store.getters["proyecto/getCargando"]},isCargandoConcepto(){return this.$store.getters["proyecto/getCargandoConceptos"]},id_usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},asignacionesVerificadas(){return this.$store.getters["MOD_trabajos/getAsignacionesVerificadas"]}},methods:{async agregar(){if(this.$refs.form.validate()){const{inmuebles:a,id_usuario:t,conceptosSeleccionados:s,usuario:r,estado:o}=this;var e=[];const i=[];for(const e of s)i.push({concepto:e,usuario_area:t,estado:o});for(const l of a)this.verificarAsignaciones(l,i),e.push({inmueble:l.id,usuario_asignado:r,trabajos:i});const{mensaje:n,error:c}=this.$store.dispatch("MOD_trabajos/verificarAsignaciones",e);if(c)return void alert(c);alert(n),this.$refs.form.reset()}},verificarAsignaciones({id:e}){const{asignacionesVerificadas:a}=this;a.forEach((a,t)=>{if(a.inmueble==e)for(const e of a.trabajos)a[t].trabajos.find(({concepto:a})=>a==e.concept)})},async inicializarProyectos(){await this.$store.dispatch("proyecto/obtenerProyectos")},async inicializarStatus(){await this.$store.dispatch("MOD_trabajos/obtenerStatusTrabajos")},async obtenerConceptos({id:e}){const{mensaje:a,estado:t,error:s}=await this.$store.dispatch("proyecto/obtenerConceptos",e);s&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:s})},async inicializarUsuario(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("MOD_usuarios/getUsuarios");t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},ar=er,tr=Object(y["a"])(ar,zs,Bs,!1,null,null,null),sr=tr.exports,rr=function(){var e=this,a=e._self._c;return a(i["a"],{staticClass:"pa-0",attrs:{fluid:""}},e._l(e.asignaciones,(function(t){return a(M["a"],{key:t.id},[a(g["d"],[e._v("Inmueble: "+e._s(t.inmueble))]),e._l(t.trabajos,(function(t){return a(g["b"],{key:t.id},[e._v(e._s(t))])}))],2)})),1)},or=[],ir={data:()=>({headers:[{value:"status",text:"Status",sortable:!1},{value:"clave_inmueble",text:"Clave",sortable:!1},{value:"nombre_inmueble",text:"Inmueble",sortable:!1},{value:"direccion_inmueble",text:"Direccion",sortable:!1},{value:"nombre_proyecto",text:"Proyectos",sortable:!1},{value:"nombre_conceptos",text:"Conceptos",sortable:!1},{value:"accion",text:"",sortable:!1}]}),computed:{items(){return this.$store.state.MOD_inmuebles.inmuebles},asignaciones(){return this.$store.getters["MOD_trabajos/getAsignacionesVerificadas"]}},methods:{EliminarInmuebleAgregado(e){this.$store.commit("MOD_inmuebles/eliminarInmueble",e)}}},nr=ir,cr=Object(y["a"])(nr,rr,or,!1,null,null,null),lr=cr.exports,ur={name:"Eliminar",components:{CompPru10:Ns,CompPru11:sr,CompPru12:lr},data:()=>({e1:1,inmuebles:[]}),computed:{asignaciones(){return this.$store.getters["MOD_trabajos/getAsignaciones"]},asignaciones_v(){return this.$store.getters["MOD_trabajos/getAsignacionesVerificadas"]},isInmueblesSeleccionados(){return!this.$store.getters["MOD_inmuebles/getInmueblesSeleccionados"].length}},methods:{async asignar(){const{asignaciones_v:e}=this,{error:a,estado:t,mensaje:s}=await this.$store.dispatch("MOD_trabajos/confirmarAsignacion",e);this.$store.commit("alerta/addAlertas",{estado:t,mensaje:s,error:a})}}},dr=ur,mr=Object(y["a"])(dr,Ts,Es,!1,null,null,null),pr=mr.exports,br=t("a609"),gr=function(){var e=this,a=e._self._c;return a(Ca["a"],{attrs:{dense:"",justify:"center"}},[a(ya["a"],{attrs:{cols:"12",sm:"8"}},[a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",sm:"10",xs:"10"}},[a(br["a"],{model:{value:e.icon,callback:function(a){e.icon=a},expression:"icon"}},[a(u["a"],{attrs:{value:"No disponible"}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Asignado")])]),a(u["a"],{attrs:{value:"En proceso"}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Revisión")])]),a(u["a"],{attrs:{value:"Concluido"}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Concluido")])])],1)],1),a(ya["a"],{attrs:{cols:"12",sm:"2",xs:"2"}},[a(u["a"],{attrs:{outlined:"",color:"primary"},on:{click:function(a){return e.$router.push({name:"recursos-usuario"})}}},[e._v(" Ver recursos "),a(d["a"],{attrs:{right:""}},[e._v("mdi-chevron-right")])],1)],1)],1)],1),a(ya["a"],{attrs:{cols:"12",sm:"8"}},[a("tabla-trabajos-usuario")],1)],1)},hr=[],_r=function(){var e=this,a=e._self._c;return a(dt["a"],{staticClass:"elevation-5",attrs:{loading:e.cargando,headers:e.headers,items:e.trabajos,"items-per-page":-1,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",pageText:""},"no-data-text":"No tienes trabajos.","show-select":e.mostrar_seleccionados,"single-select":e.singleSelect},scopedSlots:e._u([{key:"top",fn:function(){return[a(Da["a"],{staticClass:"grey lighten-2",attrs:{flat:""}},[a(wa["a"],[e._v(" "+e._s(e.trabajos.length)+" "),a("span",{domProps:{textContent:e._s(1==e.trabajos.length?"Trabajo":"Trabajos")}})]),a(m["a"]),e.is_peticion?a(u["a"],{attrs:{disabled:e.isTrabajos},on:{click:function(a){return e.$router.push({name:"peticion-recursos"})}}},[e._v(" Petición ")]):e._e()],1),a($["a"],{staticClass:"black"})]},proxy:!0},{key:"item.modificado",fn:function({item:t}){return[a(F["a"],{attrs:{color:e.getColor(t.modificado),dark:""}},[e._v(" "+e._s(t.modificado)+" ")])]}}]),model:{value:e.trabajos_seleccionados,callback:function(a){e.trabajos_seleccionados=a},expression:"trabajos_seleccionados"}})},fr=[],vr={props:{mostrar_seleccionados:{type:Boolean,default:!1},is_peticion:{type:Boolean,default:!0}},data:()=>({headers:[{text:"Proyecto",value:"proyecto"},{text:"Concepto",value:"concepto"},{text:"Estado",value:"estado"},{text:"Inmueble",value:"inmueble.name"},{text:"Asignación",value:"crado"},{text:"Actualizado",value:"modificado"}],singleSelect:!1}),computed:{cargando(){return this.$store.getters["MOD_trabajos/getCargando"]},trabajos(){return this.$store.getters["MOD_trabajos/getTrabajos"]},isTrabajos(){return!this.trabajos.length},trabajos_seleccionados:{get(){return this.$store.getters["MOD_trabajos/getTrabajosSeleccionados"]},set(e){const a=[];for(const t of e)a.push({trabajo:t.id,monto:0});this.$store.commit("MOD_pagos/setVerificarPeticiones",a),this.$store.commit("MOD_trabajos/setSeleccionados",e)}}},methods:{holgura(e){var a=new Date(e),t=new Date,s=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r=new Date(s),o=(r.valueOf()-a.valueOf())/864e5;return this.blue<o&&(this.blue=o),o},getColor(e){return this.holgura(e)>30?"red":this.holgura(e)>15?"orange":"green"}}},yr=vr,Cr=Object(y["a"])(yr,_r,fr,!1,null,null,null),jr=Cr.exports,xr={data:()=>({headers:[{text:"Proyecto",value:"proyecto"},{text:"Concepto",value:"concepto"},{text:"Estado",value:"estado"},{text:"Inmueble",value:"inmueble.name"},{text:"Asignación",value:"crado"},{text:"Actualizado",value:"modificado"}],icon:"No disponible"}),components:{"tabla-trabajos-usuario":jr},created(){this.inicializarTrabajos()},computed:{username(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},methods:{async inicializarTrabajos(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("MOD_trabajos/obtenerTrabajosUsuario",{username:this.username});t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})},verTrabajo(e){this.$store.commit("MOD_trabajos/setTrabajo",e),this.$router.push({name:"ArchivosTrabajo",params:{nombreUsuario:this.username}})},setTrabajo({peticion:e}){const a=this.trabajos.indexOf(e);this.trabajos[a].formaPago="re",console.log(this.trabajos[a],e.formaPago)}}},kr=xr,Mr=(t("69ac"),Object(y["a"])(kr,gr,hr,!1,null,null,null)),$r=Mr.exports,Or=function(){var e=this,a=e._self._c;return a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",md:"12",lg:"12",sm:"12"}},[a(u["a"],{attrs:{title:"",outlined:""}},[a(d["a"],{attrs:{left:""}},[e._v("mdi-chevron-left")]),e._v("Volver")],1)],1),a(ya["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a(M["a"],{staticClass:"mx-auto",attrs:{elevation:"12",color:"primary"}},[a(g["d"],[e._v(" Estado del trabajo ")]),a(g["c"],[a(O["a"],{staticClass:"transparent",attrs:{dense:""}},[a(D["a"],[a(w["a"],[e._v("Estado del trabajo:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.status.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Fecha de creación:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.created_date)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Fecha modificada:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.modified_date)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Inmueble:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.name)+" ("+e._s(e.trabajo.property_office.client.name)+") ")])],1),a(D["a"],[a(w["a"],[e._v("Estado:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.province.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Proyecto:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.proyect.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Concepto:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.concept.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Mi trabajo:")]),a(w["a"],{staticClass:"align-end"},[a(Ca["a"],e._l(e.archivos,(function(t,s){return a(ya["a"],{key:s,attrs:{cols:"12"}},[a(M["a"],{staticClass:"mx-auto",attrs:{elevation:"2",color:"primary"}},[a(g["a"],[a(u["a"],{attrs:{dark:"",depressed:"",small:"",href:t.file,color:"blue-grey"}},[a(d["a"],{attrs:{left:""}},[e._v(" mdi-file ")]),e._v(" "+e._s(t.title)+" ")],1),a(m["a"]),a(u["a"],{attrs:{icon:""}},[a(d["a"],[e._v("mdi-dots-vertical")])],1),a("br")],1)],1)],1)})),1)],1)],1)],1)],1)],1)],1),a(ya["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a(M["a"],{staticClass:"mx-auto"},[a(g["b"],[e._v("Comentarios")]),e._l(e.trabajo.comments,(function(t,s){return a(g["c"],{key:s},[a("div",{staticClass:"text--primary"},[e._v(e._s(t))])])}))],2)],1),a(ya["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a(M["a"],{staticClass:"mx-auto",attrs:{color:"primary"}},[a($a["a"],{attrs:{transition:"dialog-bottom-transition","max-width":"600"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(u["a"],e._g(e._b({},"v-btn",s,!1),t),[a(d["a"],{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" Agregar trabajo ")],1)]}},{key:"default",fn:function(t){return[a(M["a"],{attrs:{loading:e.loading?"red":null}},[a(Da["a"],{attrs:{color:"indigo",dark:""}},[e._v("Agregar asignación")]),a(g["c"],[a(us["a"],{attrs:{accept:".pdf","show-size":"","truncate-length":"6"},model:{value:e.PDFBase64,callback:function(a){e.PDFBase64=a},expression:"PDFBase64"}})],1),a(g["a"],{staticClass:"justify-end"},[a(u["a"],{attrs:{text:"",color:"success",disabled:!e.PDFBase64},on:{click:function(a){return e.subirArchivo()}}},[e._v("Subir Archivo")]),a(u["a"],{attrs:{text:""},on:{click:function(e){t.value=!1}}},[e._v("Cerrar")])],1)],1)]}}])})],1)],1)],1)},Dr=[],wr={data:()=>({PDFBase64:null,loading:!1,files:[]}),computed:{trabajo(){return this.$store.getters["MOD_trabajos/getTrabajo"]},archivos(){return this.$store.getters["MOD_trabajos/getArchivosTrabajo"]}},created(){this.obtenerTrabajos(),this.TraerStatus(),this.ObtenerUsuarios()},methods:{async obtenerTrabajos(){await this.$store.dispatch("MOD_trabajos/recuperarTrabajo",this.trabajo.id)},async TraerStatus(){await this.$store.dispatch("MOD_trabajos/obtenerStatusTrabajos")},async ObtenerUsuarios(){const e=await this.$store.dispatch("MOD_usuarios/getUsuarios");switch(e){case 2:break;default:alert("Algo inesperado paso");break}},async subirArchivo(){this.loading=!0;const{error:e,message:a}=await this.$store.dispatch("MOD_trabajos/AXN_SubirArchivo",{work:this.trabajo.id,PDFBase64:this.PDFBase64});e?alert(a):(this.enviar(),this.loading=!1)},async enviar(){const{id:e,property_office:a,area_user:t,assigned_user:s,concept:r,proyect:o,status:i}=this.trabajo,{error:n,message:c}=await this.$store.dispatch("MOD_trabajos/updatework",{id:e,status_id:i.id,project_id:o.id,concept_id:r.id,property_office_id:a.id,assigned_user_id:s.id,area_user_id:t.id,send_review:!0});alert(c)}}},Ar=wr,Pr=Object(y["a"])(Ar,Or,Dr,!1,null,null,null),Tr=Pr.exports,Er=function(){var e=this,a=e._self._c;return a(Ca["a"],{attrs:{justify:"center"}},[a(ya["a"],{attrs:{cols:"8"}},[a(M["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a(Ca["a"],{attrs:{"no-gutters":""}},[a(ya["a"],{attrs:{cols:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[a(g["c"],[a(dt["a"],{staticClass:"elevation-5",attrs:{headers:[],items:[],"no-data-text":"No hay trabajos disponibles","loading-text":"Cargando... por favor espere","items-per-page":-1,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"}},scopedSlots:e._u([{key:"top",fn:function(){return[a(Da["a"],{attrs:{flat:""}},[a(m["a"]),a(u["a"],{staticClass:"success",attrs:{disabled:e.isInmuebles},on:{click:function(a){return e.$router.push({name:"asignar-trabajos"})}}},[e._v(" Asignar trabajo "),a(d["a"],{attrs:{right:""}},[e._v("mdi-file-account")])],1)],1)]},proxy:!0}])})],1)],1)],1)],1)],1)],1)},Sr=[],Rr={computed:{isInmuebles(){return!this.$store.getters["MOD_inmuebles/getInmuebles"].length},cliente(){return this.$store.getters["MOD_clientes/getCliente"]}}},Ir=Rr,Ur=Object(y["a"])(Ir,Er,Sr,!1,null,null,null),Fr=Ur.exports,Nr=t("1800"),zr=t("8dd9"),Br=function(){var e=this,a=e._self._c;return a(Ca["a"],[a(ya["a"],{attrs:{cols:"3"}},[a(zr["a"],{staticClass:"pa-4",attrs:{color:"grey lighten-4"}},[a("h1",[a("b",[e._v("Recursos")])])]),a(O["a"],[a(A["a"],{model:{value:e.recursoSeleccionado,callback:function(a){e.recursoSeleccionado=a},expression:"recursoSeleccionado"}},e._l(e.recursos,(function([t]){return a(D["a"],{key:t,attrs:{link:""}},[a(w["a"],[a(w["c"],[e._v(e._s(t))])],1),a(Nr["a"],[e._v(e._s(e.recursos_n.length))])],1)})),1)],1)],1),a(ya["a"],{attrs:{cols:"9"}},[a("peticiones",{attrs:{isConfirmarRecurso:e.isConfirmarRecurso}})],1)],1)},Vr=[],Lr=function(){var e=this,a=e._self._c;return a("div",[a(dt["a"],{staticClass:"elevation-5 row-pointer",attrs:{headers:e.headers,items:e.recursos,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",pageText:""},"no-data-text":"No tienes solicitudes de recursos pendientes",loading:e.cargando},on:{"click:row":e.recuperarRecurso},scopedSlots:e._u([e.isConfirmarRecurso||e.isValidarRecurso?{key:"item.actions",fn:function({item:t,index:s}){return[e.isConfirmarRecurso?a("confirmar",{attrs:{mensaje:"Estás a punto de confirmar la solicitud de recurso. ¿Estás seguro?",id:t.id,indice:s,tipo_pago:"¿Confirmar "+t.tipo_pago+"?",icon:"mdi-check",color:"success"},on:{emitConfirmacion:e.confirmarRecurso}}):e._e(),e.isValidarRecurso?a("confirmar",{attrs:{mensaje:"Estás a punto de verificar la solicitud de recurso. ¿Estás seguro?",id:t.id,indice:s,tipo_pago:"¿Verificar "+t.tipo_pago+"?",icon:"mdi-check",color:"success"},on:{emitConfirmacion:e.confirmarValidacion}}):e._e(),a(d["a"],{attrs:{color:"error"}},[e._v(" mdi-close ")])]}}:null,{key:"item.solicitud",fn:function({item:t}){return[a(d["a"],{attrs:{color:t.solicitud?"success":"error"}},[e._v(e._s(t.solicitud?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}},{key:"item.validado",fn:function({item:t}){return[a(d["a"],{attrs:{color:t.validado?"success":"error"}},[e._v(e._s(t.validado?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}}],null,!0)}),a("recuperar-solicitud-recurso",{attrs:{dialog:e.dialogRecurso,id_recurso:e.peticion,nombre_archivo:e.isValidarRecurso?"Comprobante de validación":"Facturas"},on:{emitDialog:e.setDialogRecurso}})],1)},qr=[],Xr=t("e0c7"),Hr=function(){var e=this,a=e._self._c;return a($a["a"],{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialogRecurso,callback:function(a){e.dialogRecurso=a},expression:"dialogRecurso"}},[a(M["a"],{staticClass:"mx-auto ma-5"},[a(Da["a"],{attrs:{dark:"",color:"primary",flat:""}},[a(u["a"],{attrs:{"x-large":"",icon:"",dark:""},on:{click:function(a){e.dialogRecurso=!1}}},[a(d["a"],[e._v("mdi-close")])],1)],1),a(g["c"],[a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",sm:"8"}},[a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",sm:"12"}},[a(dt["a"],{staticClass:"elevation-5 row-pointer",attrs:{headers:e.headers,items:e.recurso.peticiones,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",pageText:""},"no-data-text":"No tienes trabajos.",loading:e.cargando}})],1),a(ya["a"],{attrs:{cols:"12",sm:"12"}},[a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",sm:"6"}},[a(pa["a"],{attrs:{dense:"",solo:"",label:"Nombre del archivo"},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}})],1),a(ya["a"],{attrs:{cols:"12",sm:"6"}},[a(us["a"],{attrs:{solo:"",dense:"",accept:".pdf, .xmls","show-size":"","truncate-length":"6","append-outer-icon":e.PDFBase64?"mdi-cloud-upload":"mdi-send-off"},on:{"click:append-outer":e.subirArchivo},model:{value:e.PDFBase64,callback:function(a){e.PDFBase64=a},expression:"PDFBase64"}})],1),a(ya["a"],{attrs:{cols:"12",sm:"12"}},[a(M["a"],{staticClass:"mx-auto"},[a(O["a"],[a(Xr["a"],[e._v(e._s(e.archivos.length?"Comprobantes":"No se han subido comprobantes."))]),e._l(e.archivos,(function(t,s){return a(D["a"],{key:s},[a(w["a"],[a("a",{attrs:{href:t.archivo}},[e._v(e._s(t.nombre))])]),a(Nr["a"],[a("confirmar",{attrs:{mensaje:"Estás a punto de eliminar esta archivo. ¿Estás seguro?",id:t.id,indice:s,tipo_pago:"¿Eliminar "+t.nombre+"?",icon:"mdi-delete",color:"error"},on:{emitConfirmacion:e.eliminarArchivoRecurso}})],1)],1)}))],2)],1)],1)],1)],1)],1)],1),a(ya["a"],{attrs:{cols:"12",sm:"4"}},[a("Comentarios")],1)],1)],1)],1)],1)},Gr=[],Jr=function(){var e=this,a=e._self._c;return a($a["a"],{attrs:{persistent:"","max-width":"300"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(d["a"],e._g(e._b({staticClass:"mr-2",attrs:{color:e.color}},"v-icon",s,!1),t),[e._v(" "+e._s(e.icon)+" ")])]}},{key:"default",fn:function(t){return[a(M["a"],{staticClass:"mx-auto"},[a(g["d"],{staticClass:"text-h6"},[e._v(" "+e._s(e.tipo_pago)+" ")]),a(g["c"],[e._v(e._s(e.mensaje))]),a(g["a"],[a(m["a"]),a(u["a"],{attrs:{color:"error darken-1",text:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[e._v(" Cancelar ")]),a(u["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(a){return e.aceptarConfirmacion(t)}}},[e._v(" Aceptar ")])],1)],1)]}}])})},Yr=[],Kr={props:{id:{type:Number,default:0},indice:{type:Number,default:0},mensaje:{type:String,default:""},tipo_pago:{type:String,default:""},icon:{type:String,default:"mdi-blank"},color:{type:String,default:"primary"}},methods:{aceptarConfirmacion(e){e.value=!1,this.$emit("emitConfirmacion",{confirmacion:!0,id:this.id,indice:this.indice})},cerrrarDialogo(e){e.value=!1,this.$emit("emitConfirmacion",{confirmacion:!1,id:this.id,indice:this.indice})}}},Qr=Kr,Zr=Object(y["a"])(Qr,Jr,Yr,!1,null,null,null),Wr=Zr.exports,eo=function(){var e=this,a=e._self._c;return a(i["a"],{attrs:{fluid:""}},[e._l(e.comentarios,(function(t){return a(o["a"],{key:t.id,staticClass:"mb-16",attrs:{color:"rgba(0,0,0,0)",flat:""}},[e.usuario==t.usuario.id?a(M["a"],{staticClass:"mt-10 mr-2",attrs:{"max-width":"350px",color:"blue",dark:""}},[a(D["a"],{attrs:{"three-line":""}},[a(w["a"],[a("div",{staticClass:"mb-4"},[e._v(e._s(t.comentario))]),a(w["b"],[e._v("Hace 16 mins "),a("span",{staticClass:"ml-16"},[e._v("Visto 1:03PM")])])],1)],1)],1):a(k["a"],{attrs:{bordered:"",bottom:"",color:"grey",dot:"","offset-x":"16","offset-y":"9"}},[a(x["a"],{staticClass:"mt-n5 mr-2",attrs:{size:"30",elevation:"10"}},[a("img",{attrs:{src:"https://content.throwbacks.com/images/2017/11/panthro8.JPG"}})])],1),e.usuario==t.usuario.id?a(k["a"],{attrs:{bordered:"",bottom:"",color:"green",dot:"","offset-x":"10","offset-y":"10"}},[a(x["a"],{staticClass:"mt-n5",attrs:{size:"30",elevation:"10"}},[a("img",{attrs:{src:"https://i.ytimg.com/vi/MZr4KirBYtQ/hqdefault.jpg"}})])],1):a(M["a"],{staticClass:"mt-10",attrs:{"max-width":"350px"}},[a(D["a"],{attrs:{"three-line":""}},[a(w["a"],[a("div",{staticClass:"mb-4"},[e._v(" "+e._s(t.comentario)+" ")]),a(w["b"],[e._v("Hace 12 mins")])],1)],1)],1)],1)})),a(o["a"],{attrs:{color:"rgba(0,0,0,0)",flat:""}},[a(pa["a"],{attrs:{loading:e.cargando,"append-outer-icon":"mdi-send",filled:"","clear-icon":"mdi-close-circle",clearable:"",label:"Message",type:"text"},on:{"click:append-outer":e.sendMessage,"click:clear":e.clearMessage},model:{value:e.comentario,callback:function(a){e.comentario=a},expression:"comentario"}})],1)],2)},ao=[],to={data:()=>({comentario:""}),computed:{comentarios(){return this.$store.getters["MOD_pagos/getComentarios"]},usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},recurso(){return this.$store.getters["MOD_pagos/getRecurso"]},cargando(){return this.$store.getters["MOD_pagos/getCargando"]}},methods:{async sendMessage(){const{id:e}=this.recurso;if(this.comentario){const a={recurso:e,usuario:this.usuario,comentario:this.comentario},{mensaje:t,estado:s,error:r}=await this.$store.dispatch("MOD_pagos/hacerComentario",a);r?this.$store.commit("alerta/addAlertas",{estado:s,mensaje:t,error:r}):this.clearMessage()}},clearMessage(){this.comentario=""}}},so=to,ro=Object(y["a"])(so,eo,ao,!1,null,null,null),oo=ro.exports,io={props:{id_recurso:{type:Number,default:0},dialog:{type:Boolean,default:!1},nombre_archivo:{type:String,default:""}},data:()=>({headers:[{text:"Solicitado",value:"trabajo.solicitado"},{text:"Gestor",value:"trabajo.gestor"},{text:"Cliente",value:"inmueble.cliente"},{text:"Clave",value:"inmueble.clave"},{text:"Sucursal",value:"inmueble.nombre",sortable:!1},{text:"Estado",value:"inmueble.estado",sortable:!1},{text:"Municipio",value:"inmueble.municipio",sortable:!1},{text:"Concepto",value:"trabajo.concepto",sortable:!1},{text:"Importe",value:"importe",sortable:!1}],PDFBase64:null,nombre:"Comprobante de validación"}),components:{Comentarios:oo,Confirmar:Wr},computed:{recurso(){return this.$store.getters["MOD_pagos/getRecurso"]},archivos(){return this.$store.getters["MOD_pagos/getArchivos"]},dialogRecurso:{get(){return this.dialog},set(e){this.$emit("emitDialog",e),this.$store.commit("MOD_pagos/cleanRecurso"),this.$store.commit("MOD_pagos/cleanComentarios"),this.$store.commit("MOD_pagos/clearArchivos")}},cargando(){return this.$store.getters["MOD_pagos/getCargando"]}},methods:{async subirArchivo(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("MOD_pagos/subirArchivo",{nombre:this.nombre_archivo,archivo:this.PDFBase64,recurso:this.recurso.id});this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})},async eliminarArchivoRecurso({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:e,estado:s,error:r}=await this.$store.dispatch("MOD_pagos/eliminarArhivoRecurso",{id:a,indice:t});this.$store.commit("alerta/addAlertas",{estado:s,mensaje:e,error:r})}}}},no=io,co=Object(y["a"])(no,Hr,Gr,!1,null,null,null),lo=co.exports,uo={props:{isConfirmarRecurso:{type:Boolean,default:!1},isValidarRecurso:{type:Boolean,default:!1},addHeaders:{tyepe:Object,default:()=>[]}},data:()=>({headers:[{text:"Tipo de pago",value:"tipo_pago"},{text:"Creado",value:"creado"},{text:"Datos bancarios",value:"datos_bancarios"},{text:"Banco",value:"banco"},{text:"Concepto",value:"concepto"},{text:"Importe",value:"importe"},{text:"Solicitud de recursos",value:"actions",align:"center"}],dialogRecurso:!1,peticion:0}),components:{"recuperar-solicitud-recurso":lo,confirmar:Wr},mounted(){if(this.addHeaders.length)for(const e of this.addHeaders)this.headers.push(e)},computed:{recursos(){return this.$store.getters["MOD_pagos/getRecursos"]},cargando(){return this.$store.getters["MOD_pagos/getCargando"]}},methods:{setDialogRecurso(e){this.dialogRecurso=e},async confirmarRecurso({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:s,estado:r,error:o}=await this.$store.dispatch("MOD_pagos/confirmarValidarRecuruso",{id:a,confirmacion:e,indice:t});this.$store.commit("alerta/addAlertas",{estado:r,mensaje:s,error:o})}},async confirmarValidacion({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:s,estado:r,error:o}=await this.$store.dispatch("MOD_pagos/confirmarValidarRecuruso",{id:a,validacion:e,indice:t});this.$store.commit("alerta/addAlertas",{estado:r,mensaje:s,error:o})}},async recuperarRecurso(e){this.peticion=e.id,this.dialogRecurso=!0;const{mensaje:a,estado:t,error:s}=await this.$store.dispatch("MOD_pagos/recuperarRecurso",e.id);if(s)this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:s});else{const{error:a,estado:t,mensaje:s}=await this.$store.dispatch("MOD_pagos/recuperarComentariosRecurso",e.id);a&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:s,error:a}),await this.$store.dispatch("MOD_pagos/recuperarArchivoRecurso",e.id)}}}},mo=uo,po=(t("98fc"),Object(y["a"])(mo,Lr,qr,!1,null,"1ef032cc",null)),bo=po.exports,go={data:()=>({recursos:[["Solicitudes de recursos"],["Recurosos"],["Transferencias"],["Cheques"]],recurso:0,isConfirmarRecurso:!0}),components:{peticiones:bo},computed:{recursos_n(){return this.$store.getters["MOD_pagos/getRecursos"]},recursoSeleccionado:{get(){return this.recurso},set(e){const a=void 0===e?this.recurso:e;this.recurso=a,0===this.recurso?(this.inicializarRecursos({solicitud:"False"}),this.isConfirmarRecurso=!0):1===this.recurso?this.inicializarRecursos({solicitud:"True"},this.isConfirmarRecurso=!1):2===this.recurso?this.inicializarRecursos({tipo_pago:"Transferencia"},this.isConfirmarRecurso=!1):(this.inicializarRecursos({tipo_pago:"Cheque"}),this.isConfirmarRecurso=!1)}},usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},created(){this.inicializarRecursos({solicitud:"False"})},methods:{async inicializarRecursos({solicitud:e,tipo_pago:a}){const{mensaje:t,estado:s,error:r}=await this.$store.dispatch("MOD_pagos/recuperarRecursosUsuario",{solicitud:e,gestor:this.usuario,tipo_pago:a});r&&this.$store.commit("alerta/addAlertas",{estado:s,mensaje:t,error:r})}}},ho=go,_o=Object(y["a"])(ho,Br,Vr,!1,null,null,null),fo=_o.exports,vo=function(){var e=this,a=e._self._c;return a(Ca["a"],[a(ya["a"],{attrs:{cols:"3"}},[a(zr["a"],{staticClass:"pa-4",attrs:{color:"grey lighten-4"}},[a("h1",[a("b",[e._v("Pagos")])])]),a(O["a"],[a(A["a"],{model:{value:e.pago_seleccionado,callback:function(a){e.pago_seleccionado=a},expression:"pago_seleccionado"}},e._l(e.tipo_pago,(function([t]){return a(D["a"],{key:t,attrs:{link:""}},[a(w["a"],[a(w["c"],[e._v(e._s(t))])],1),a(Nr["a"],[e._v(e._s(e.recursos_n.length))])],1)})),1)],1)],1),a(ya["a"],{attrs:{cols:"9"}},[a("peticiones",{attrs:{isValidarRecurso:e.isValidarRecurso}})],1)],1)},yo=[],Co={data:()=>({tipo_pago:[["Transferencia"],["Cheque"],["Reembolso"],["Comprobacion"]],pago:0,isValidarRecurso:!0}),components:{peticiones:bo},computed:{recursos_n(){return this.$store.getters["MOD_pagos/getRecursos"]},pago_seleccionado:{get(){return this.pago},set(e){const a=void 0===e?this.pago:e;this.pago=a,0===this.pago?(this.inicializarRecursos({pago:"Transferencia",bool:"False"}),this.isValidarRecurso=!0):1===this.pago?(this.inicializarRecursos({pago:"Cheque",bool:"False"}),this.isValidarRecurso=!0):2===this.pago?(this.inicializarRecursos({pago:"Cheque",bool:"True"}),this.isValidarRecurso=!1):(this.inicializarRecursos({pago:"Transferencia",bool:"True"}),this.isValidarRecurso=!1)}}},created(){this.inicializarRecursos({pago:"Transferencia",bool:"False"})},methods:{async inicializarRecursos({pago:e,bool:a}){const{mensaje:t,estado:s,error:r}=await this.$store.dispatch("MOD_pagos/recuperarRecursos",{tipo_pago:e,validado:a});r&&this.$store.commit("alerta/addAlertas",{estado:s,mensaje:t,error:r})}}},jo=Co,xo=Object(y["a"])(jo,vo,yo,!1,null,null,null),ko=xo.exports,Mo=function(){var e=this,a=e._self._c;return a(ma["a"],[a(Ca["a"],{attrs:{dense:""}},[a(ya["a"],{attrs:{cols:"12",sm:"9",md:"9",lg:"9",xl:"9"}},[a(Ds["a"],{model:{value:e.e1,callback:function(a){e.e1=a},expression:"e1"}},[a(As["a"],[a(Ps["a"],{attrs:{complete:e.e1>1,step:"1"}},[e._v(" Paso 1 "),a("br"),e._v(" Trabajos ")]),a($["a"]),a(Ps["a"],{attrs:{complete:e.e1>2,step:"2"}},[e._v(" Paso 2 "),a("br"),e._v(" Fondos ")]),a($["a"]),a(Ps["a"],{attrs:{complete:e.e1>3,step:"3"}},[e._v(" Paso 3 "),a("br"),e._v(" Pago ")]),a($["a"]),a(Ps["a"],{attrs:{step:"4"}},[e._v(" Paso 4 "),a("br"),e._v(" Confirmacion ")])],1),a(As["b"],[a(ws["a"],{attrs:{step:"1"}},[a("tabla-trabajos-usuario",{attrs:{mostrar_seleccionados:!0,is_peticion:!1}}),a("br"),a(u["a"],{attrs:{color:"success",block:"",disabled:e.isTrabajosSeleccionados},on:{click:function(a){return e.verificarPeticiones()}}},[e._v(" Continue ")])],1),a(ws["a"],{attrs:{step:"2"}},[a(u["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=1}}},[e._v(" Regresar ")]),a("br"),a("formulario-solcitud-recursos",{on:{eventoContinuar:e.setValid}}),a(u["a"],{attrs:{color:"success",block:"",disabled:!e.valid},on:{click:function(a){e.e1=3}}},[e._v(" Continue ")])],1),a(ws["a"],{attrs:{step:"3"}},[a(u["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=2}}},[e._v(" Regresar ")]),a("br"),a("formulario-crear-recurso",{on:{eventoContinuar:e.setValidP3}}),a(u["a"],{attrs:{color:"success",block:"",disabled:!e.valid_p3},on:{click:function(a){e.e1=4}}},[e._v(" Continuar ")])],1),a(ws["a"],{attrs:{step:"4"}},[a(u["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=3}}},[e._v(" Regresar ")]),a("crear-recurso"),a(u["a"],{attrs:{color:"error",block:""},on:{click:function(a){e.e1=1}}},[e._v(" Finalizar ")])],1)],1)],1)],1),a(ya["a"],{attrs:{cols:"12",sm:"3",md:"3",lg:"3",xl:"3"}},[a(M["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(Da["a"],{attrs:{dense:"",elevation:"1"}},[a(wa["a"],[e._v("Resumen de la solicitud de recursos ")])],1),a(g["c"],[e._v(" Trabajos: ... "),a("br"),e._v(" Innmuebles: ... "),a("br"),e._v(" Fecha: ... "),a("br"),e._v(" Solicitudes: # "),a("br"),e._v(" Tipo: Cheque | Transferencia ")]),a($["a"]),a(g["d"],[e._v("Total: #")]),a("div",{staticClass:"text-end"},[a(u["a"],{attrs:{rounded:"",color:"error"},on:{click:function(a){return e.$router.go(-1)}}},[e._v(" Cancelar "),a(d["a"],{attrs:{right:""}},[e._v("mdi-close-circle-outline")])],1)],1)],1)],1)],1)],1)},$o=[],Oo=function(){var e=this,a=e._self._c;return a(ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Ca["a"],{attrs:{"no-gutters":""}},[a(ya["a"],{attrs:{cols:"12"}},[a(Da["a"],{attrs:{flat:""}},[a(wa["a"],[e._v("Fondos necesarios: ")]),a(m["a"]),a(wa["a"],[e._v("MX$ "+e._s(e.total))])],1)],1)],1),a($["a"],{staticClass:"black"}),e._l(e.peticiones_verificadas,(function(t,s){return a(Ca["a"],{key:t.trabajo,attrs:{"no-gutters":"",dense:""}},[a(ya["a"],{attrs:{cols:"5"}},[a("b",[e._v(e._s(e.trabajos_seleccionados[s].concepto))]),e._v(": "+e._s(e.trabajos_seleccionados[s].inmueble.name)+" ")]),a(ya["a"],{attrs:{cols:"5"}},[t.error?a(F["a"],{staticClass:"error",attrs:{outlined:""}},[e._v(e._s(t.error))]):a(pa["a"],{attrs:{label:"Importe",solo:"",dense:"",autofocus:"",prefix:"$",type:"number",placeholder:"1.00",step:"1",min:"1",rules:[e=>e>0||"Es necesario escribir el monto mayor a 0.00"]},model:{value:t.monto,callback:function(a){e.$set(t,"monto",a)},expression:"peticion.monto"}})],1),a(m["a"]),a(ya["a"],{attrs:{cols:"1"}},[a(u["a"],{attrs:{icon:""}},[a(d["a"],[e._v("mdi-trash-can")])],1)],1)],1)}))],2)},Do=[],wo={data:()=>({continuar_p3:!0}),computed:{trabajos_seleccionados(){return this.$store.getters["MOD_trabajos/getTrabajosSeleccionados"]},peticiones_verificadas(){return this.$store.getters["MOD_pagos/getPeticionesVerificadas"]},total(){var e=0;for(const a of this.peticiones_verificadas)e=a.monto?Number(a.monto)+e:0+e;return e.toFixed(2)},valid:{get(){return this.continuar_p3},set(e){this.continuar_p3=e,this.$emit("eventoContinuar",e)}}},methods:{cambiarMonto(e,a){this.$store.commit("MOD_pagos/setMontoPeticionesVerificadas",{editar_peticion:e,editar_index:a})}}},Ao=wo,Po=Object(y["a"])(Ao,Oo,Do,!1,null,null,null),To=Po.exports,Eo=t("2b5d"),So=t("1f4f"),Ro=function(){var e=this,a=e._self._c;return a(ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Ca["a"],{attrs:{dense:""}},[a(ya["a"],{attrs:{cols:"12"}},[a(Eo["a"],{attrs:{items:e.pagos,label:"Tipo de pago",rules:[e=>!!e||"Es necesario elegir el tipo de pago"],chips:""},model:{value:e.solicitud_recurso.tipo_pago,callback:function(a){e.$set(e.solicitud_recurso,"tipo_pago",a)},expression:"solicitud_recurso.tipo_pago"}})],1),a(ya["a"],{attrs:{cols:"6"}},[a(Eo["a"],{attrs:{items:e.beneficiarios,label:"Nombre del beneficiario","item-text":"nombre",rules:[e=>!!e||"Es necesario elegir un beneficiario"],chips:"",clearable:"","return-object":""},on:{change:function(a){e.beneficiario?e.setBeneficiario(e.beneficiario):e.setBeneficiario({nombre:"",clave:null,numero_tarjeta:null})}},model:{value:e.beneficiario,callback:function(a){e.beneficiario=a},expression:"beneficiario"}})],1),a(ya["a"],{attrs:{cols:"6"}},[a("formulario-crear-beneficiario")],1),a(ya["a"],{attrs:{cols:"6"}},[a(pa["a"],{attrs:{label:"Clave",rules:[e=>!!e||"Es necesario escribir la clave"]},model:{value:e.solicitud_recurso.clave,callback:function(a){e.$set(e.solicitud_recurso,"clave",a)},expression:"solicitud_recurso.clave"}})],1),a(ya["a"],{attrs:{cols:"6"}},[a(pa["a"],{attrs:{label:"Numero de tarjeta",rules:[e=>!!e||"Es necesario escribir el numero de la tarjeta"]},model:{value:e.solicitud_recurso.numero_tarjeta,callback:function(a){e.$set(e.solicitud_recurso,"numero_tarjeta",a)},expression:"solicitud_recurso.numero_tarjeta"}})],1),a(ya["a"],{attrs:{cols:"6"}},[a(pa["a"],{attrs:{label:"Banco",rules:[e=>!!e||"Es necesario escribir el banco"]},model:{value:e.solicitud_recurso.banco,callback:function(a){e.$set(e.solicitud_recurso,"banco",a)},expression:"solicitud_recurso.banco"}})],1),a(ya["a"],{attrs:{cols:"6"}},[a(pa["a"],{attrs:{type:"number",label:"Importe",value:e.total,disabled:""}})],1),a(ya["a"],{attrs:{cols:"12"}},[a(Oa["a"],{attrs:{dense:"",outlined:"",label:"Concepto de pago",rules:[e=>!!e||"Es necesario escribir los datos bancarios"]},model:{value:e.solicitud_recurso.concepto_pago,callback:function(a){e.$set(e.solicitud_recurso,"concepto_pago",a)},expression:"solicitud_recurso.concepto_pago"}})],1),a(m["a"])],1),a(Ca["a"],{attrs:{"no-gutters":"",dense:""}},[a(ya["a"],[a(So["a"],{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v(" Trabajo ")]),a("th",{staticClass:"text-left"},[e._v(" Inmueble ")]),a("th",{staticClass:"text-left"},[e._v(" Importe ")])])]),a("tbody",e._l(e.peticiones_verificadas,(function(t,s){return a("tr",{key:t.trabajo},[a("td",[e._v(e._s(e.trabajos_seleccionados[s].concepto))]),a("td",[e._v(e._s(e.trabajos_seleccionados[s].inmueble.name))]),a("td",[e._v("$ "+e._s(t.monto))])])})),0)]},proxy:!0}])})],1)],1)],1)},Io=[],Uo=function(){var e=this,a=e._self._c;return a($a["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(u["a"],e._g(e._b({attrs:{color:"primary","x-large":"",icon:"",fab:""}},"v-btn",s,!1),t),[a(d["a"],[e._v("mdi-plus")])],1)]}},{key:"default",fn:function(t){return[a(M["a"],{staticClass:"mx-auto",attrs:{elevation:"5"}},[a(g["d"],{staticClass:"grey lighten-2"},[e._v(" Crear nuevo beneficiario "),a(m["a"]),a(u["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(d["a"],[e._v("mdi-close")])],1)],1),a(g["c"],[a(ua["a"],{ref:"formularioNuevoBeneficiario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Ca["a"],{attrs:{dense:""}},[a(ya["a"],{attrs:{cols:"12"}},[a(pa["a"],{attrs:{label:"Beneficiario",rules:[e=>!!e||"Es necesario escribir un nombre del para el beneficiario"]},model:{value:e.beneficiario.nombre,callback:function(a){e.$set(e.beneficiario,"nombre",a)},expression:"beneficiario.nombre"}})],1),a(ya["a"],{attrs:{cols:"12"}},[a(pa["a"],{attrs:{label:"Clave",rules:[e=>!!e||"Es necesario escribir la clave"],type:"number"},model:{value:e.beneficiario.clave,callback:function(a){e.$set(e.beneficiario,"clave",a)},expression:"beneficiario.clave"}})],1),a(ya["a"],{attrs:{cols:"12"}},[a(pa["a"],{attrs:{label:"Numero tarjeta",rules:[e=>!!e||"Es necesario escribir el número de la tarjeta"],type:"number"},model:{value:e.beneficiario.numero_tarjeta,callback:function(a){e.$set(e.beneficiario,"numero_tarjeta",a)},expression:"beneficiario.numero_tarjeta"}})],1)],1)],1)],1),a(g["a"],[a(m["a"]),a(u["a"],{attrs:{color:"success",disabled:!e.valid,outlined:""},on:{click:function(a){return e.crearBeneficiario(t)}}},[e._v("Crear")]),a(u["a"],{attrs:{color:"error",outlined:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[e._v("Cancelar")])],1)],1)]}}])})},Fo=[],No={data:()=>({valid:!0,beneficiario:{nombre:"",clave:null,numero_tarjeta:null}}),methods:{cerrrarDialogo(e){e.value=!1,this.$refs.formularioNuevoBeneficiario.reset()},async crearBeneficiario(e){if(this.$refs.formularioNuevoBeneficiario.validate()){const{mensaje:a,estado:t,error:s}=await this.$store.dispatch("beneficiario/crearBeneficiario",this.beneficiario);this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:s}),s||this.cerrrarDialogo(e)}}}},zo=No,Bo=Object(y["a"])(zo,Uo,Fo,!1,null,null,null),Vo=Bo.exports,Lo={data:()=>({pagos:["Transferencia","Cheque"],continuar_p4:!0,solicitud_recurso:{trabajos:[],tipo_pago:"",beneficiario:"",banco:"",clave:"",numero_tarjeta:"",concepto_pago:""}}),components:{"formulario-crear-beneficiario":Vo},computed:{peticiones_verificadas(){return this.$store.getters["MOD_pagos/getPeticionesVerificadas"]},trabajos_seleccionados(){return this.$store.getters["MOD_trabajos/getTrabajosSeleccionados"]},beneficiarios(){return this.$store.getters["beneficiario/getBeneficiarios"]},valid:{get(){return this.continuar_p4},set(e){this.continuar_p4=e,this.$emit("eventoContinuar",e),this.valid&&this.$store.commit("MOD_pagos/setSolicitudRecurso",this.solicitud_recurso)}},beneficiario:{get(){return this.$store.getters["beneficiario/getBeneficiario"]},set(e){e?this.$store.commit("beneficiario/setBeneficiario",e):this.$store.commit("beneficiario/clearBeneficiario")}},total(){var e=0;for(const a of this.peticiones_verificadas)e=a.monto?Number(a.monto)+e:0+e;return e.toFixed(2)}},created(){this.inicializarBeneficiarios()},methods:{setBeneficiario({nombre:e,clave:a,numero_tarjeta:t}){this.solicitud_recurso.beneficiario=e,this.solicitud_recurso.clave=a,this.solicitud_recurso.numero_tarjeta=t},async inicializarBeneficiarios(){const{mensaje:e,estado:a,error:t}=this.$store.dispatch("beneficiario/obtenerBeneficiarios");t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},qo=Lo,Xo=Object(y["a"])(qo,Ro,Io,!1,null,null,null),Ho=Xo.exports,Go=function(){var e=this,a=e._self._c;return a(M["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(g["c"],[e._v(" "+e._s(e.peticiones_verificadas)+" "),a("br"),e._v(" "+e._s(e.solicitud_recurso)+" ")]),a(u["a"],{attrs:{block:"",color:"success"},on:{click:function(a){return e.crearPeticiones()}}},[e._v("Crear")])],1)},Jo=[],Yo={computed:{peticiones_verificadas(){return this.$store.getters["MOD_pagos/getPeticionesVerificadas"]},solicitud_recurso(){return this.$store.getters["MOD_pagos/getSolicitudRecurso"]}},methods:{async crearPeticiones(){const{mensaje:e,estado:a,peticiones:t,error:s}=await this.$store.dispatch("MOD_pagos/confirmarPeticiones",this.peticiones_verificadas);s?this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:s}):this.crearSolicitudRecurso(t)},async crearSolicitudRecurso(e){const a=[];for(const o of e)a.push(o.id);this.solicitud_recurso.trabajos=a;const{mensaje:t,estado:s,error:r}=await this.$store.dispatch("MOD_pagos/crearRecurso",this.solicitud_recurso);this.$store.commit("alerta/addAlertas",{estado:s,mensaje:t,error:r})}}},Ko=Yo,Qo=Object(y["a"])(Ko,Go,Jo,!1,null,null,null),Zo=Qo.exports,Wo={data:()=>({e1:1,mostrar_seleccionados:!0,valid:!1,valid_p3:!1}),components:{"tabla-trabajos-usuario":jr,"formulario-solcitud-recursos":To,"formulario-crear-recurso":Ho,"crear-recurso":Zo},computed:{trabajos(){return this.$store.getters["MOD_trabajos/getTrabajos"]},isTrabajosSeleccionados(){return!this.$store.getters["MOD_trabajos/getTrabajosSeleccionados"].length},verificar_peticiones(){return this.$store.getters["MOD_pagos/getVerificarPeticiones"]}},methods:{setValid(e){this.valid=e},setValidP3(e){this.valid_p3=e},async verificarPeticiones(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("MOD_pagos/verificarPeticiones",this.verificar_peticiones);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t}),this.e1=2}}},ei=Wo,ai=Object(y["a"])(ei,Mo,$o,!1,null,null,null),ti=ai.exports,si=function(){var e=this,a=e._self._c;return a("recursos-usuario",{attrs:{addHeaders:e.headers}})},ri=[],oi={data:()=>({headers:[{text:"Solicitado",value:"solicitud",align:"center"},{text:"Validado",value:"validado",align:"center"}]}),components:{"recursos-usuario":bo},computed:{username(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},created(){this.inicializarRecursosUsuario()},methods:{async inicializarRecursosUsuario(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("MOD_pagos/recuperarRecursosUsuario",{solicitado:this.username});t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},ii=oi,ni=Object(y["a"])(ii,si,ri,!1,null,null,null),ci=ni.exports,li=function(){var e=this,a=e._self._c;return a(ma["a"],[a(i["a"],{attrs:{fluid:""}},[a("router-view")],1)],1)},ui=[],di={},mi=Object(y["a"])(di,li,ui,!1,null,null,null),pi=mi.exports,bi=t("c671"),gi=t("aac8"),hi=function(){var e=this,a=e._self._c;return a(M["a"],{staticClass:"mx-auto"},[a(Da["a"],{attrs:{flat:"",color:"blue-grey",dark:""},scopedSlots:e._u([{key:"extension",fn:function(){return[a(At["a"],{attrs:{centered:""},model:{value:e.tabs,callback:function(a){e.tabs=a},expression:"tabs"}},e._l(e.items,(function(t,s){return a(wt["a"],{key:s},[e._v(" "+e._s(t)+" ")])})),1)]},proxy:!0}])}),a(gi["a"],{model:{value:e.tabs,callback:function(a){e.tabs=a},expression:"tabs"}},[a(bi["a"],[a("MostrarPersonal")],1),a(bi["a"]),a(bi["a"],[a("Configuraciones")],1)],1)],1)},_i=[],fi=function(){var e=this,a=e._self._c;return a(M["a"],{attrs:{flat:""}},[a(g["a"],[a(m["a"]),a("FormularioCrearMiembro")],1),a(g["c"],[a("MostrarMiembrosConsultores")],1)],1)},vi=[],yi=t("ac7c"),Ci=t("8e36"),ji=function(){var e=this,a=e._self._c;return a($a["a"],{attrs:{persistent:"","max-width":"800"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(u["a"],e._g(e._b({staticClass:"ma-2",attrs:{color:"success",dark:""}},"v-btn",s,!1),t),[a(d["a"],{attrs:{dark:"",left:""}},[e._v(" mdi-account-plus ")]),e._v(" Agregar miembro ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(M["a"],[a(Ci["a"],{attrs:{color:"info",indeterminate:e.cargandoDatos}}),a(g["d"],[e._v("Agregar miembro a Systema ADVR")]),a(ua["a"],{ref:"form",attrs:{disabled:e.cargandoDatos},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(i["a"],[a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",md:"6"}},[a(pa["a"],{attrs:{rules:[e=>!!e||"Se requiere el nombre"],label:"Nombre",required:""},model:{value:e.name,callback:function(a){e.name=a},expression:"name"}})],1),a(ya["a"],{attrs:{cols:"12",md:"6"}},[a(pa["a"],{attrs:{label:"Apellidos",rules:[e=>!!e||"El apellido es obligatorio"],required:""},model:{value:e.last_name,callback:function(a){e.last_name=a},expression:"last_name"}})],1),a(ya["a"],{attrs:{cols:"12",md:"12"}},[a(pa["a"],{attrs:{label:"Nombre usuario",rules:[e=>!!e||"Se requiere nombre de usuario"],required:""},model:{value:e.username,callback:function(a){e.username=a},expression:"username"}})],1),a(ya["a"],{attrs:{cols:"12",md:"6"}},[a(pa["a"],{attrs:{label:"Correo",rules:[e=>!!e||"Correo electronico es requerido"]},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}})],1),a(ya["a"],{attrs:{cols:"12",md:"6"}},[a(Qa["a"],{attrs:{items:e.dominios,label:"Dominios",required:""},model:{value:e.dominio,callback:function(a){e.dominio=a},expression:"dominio"}})],1),a(ya["a"],{attrs:{cols:"12",md:"12"}},[a(pa["a"],{attrs:{"append-icon":e.mostrarContrasena?"mdi-eye":"mdi-eye-off",rules:[e=>!!e||"Requerido."],type:e.mostrarContrasena?"text":"password",name:"input-10-1",label:"Contraseña"},on:{"click:append":function(a){e.mostrarContrasena=!e.mostrarContrasena}},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}})],1),a(ya["a"],{attrs:{cols:"12",md:"6"}},[a(yi["a"],{attrs:{label:"¿Es un miembro del personal?"},model:{value:e.is_staff,callback:function(a){e.is_staff=a},expression:"is_staff"}})],1)],1),a(g["a"],[a(m["a"]),a(u["a"],{attrs:{color:"green"},on:{click:function(a){return e.crearMiembro()}}},[e._v("Agregar")]),a(u["a"],{staticClass:"ma-5",attrs:{color:"red"},on:{click:function(a){return e.cerrar()}}},[e._v("Cerrar")])],1)],1)],1)],1)],1)},xi=[],ki={data:()=>({username:null,email:null,password:null,dominio:"@advr.mx",name:null,last_name:null,is_staff:!0,groups:[],grupos_permisos:[],valid:!0,dialog:!1,dominios:["@advr.mx","@gesscorpzero.com"],mostrarContrasena:!1,cargandoDatos:!1}),methods:{async crearMiembro(){if(this.$refs.form.validate()){this.cargandoDatos=!0;const{username:e,email:a,dominio:t,password:s,name:r,last_name:o,is_staff:i}=this,{message:n,error:c}=await this.$store.dispatch("MOD_usuarios/AUX_CrearUsuaurio",{email:a.concat(t),username:e,password:s,name:r,last_name:o,is_staff:i});this.cargandoDatos=!1,c&&Object.getOwnPropertyNames(c).forEach((function(e){alert(c[e])})),alert(n)}},cerrar(){this.$refs.form.reset(),this.$refs.form.resetValidation(),this.dialog=!1}}},Mi=ki,$i=Object(y["a"])(Mi,ji,xi,!1,null,null,null),Oi=$i.exports,Di=t("cd55"),wi=t("49e2"),Ai=t("c865"),Pi=t("0393"),Ti=function(){var e=this,a=e._self._c;return a(Pi["a"],{attrs:{multiple:""}},[a(Di["a"],[a(Ai["a"],[e._v("Administrador("+e._s(this.adm.length)+") ")]),a(wi["a"],[a(dt["a"],{staticClass:"elevation-1",attrs:{headers:e.encabezados,items:e.adm,"hide-default-footer":"","items-per-page":-1},scopedSlots:e._u([{key:"top",fn:function(){return[a("FormularioAsignarRolUsuario",{attrs:{dialog:e.dialog,groups:e.groups,idMiembro:e.idMiembro,rolUsuarioEncontrado:e.rolUsuarioEncontrado},on:{establecerDialog:e.establecerDialog}})]},proxy:!0},{key:"item.actions",fn:function({item:t}){return[a(d["a"],{attrs:{small:""},on:{click:function(a){return e.obtenerRolMiembro(t)}}},[e._v(" mdi-account-settings ")])]}}])})],1)],1),a(Di["a"],[a(Ai["a"],[e._v("Coordinadores("+e._s(this.coor.length)+") ")]),a(wi["a"],[a(dt["a"],{staticClass:"elevation-1",attrs:{headers:e.encabezados,items:e.coor,"hide-default-footer":"","items-per-page":-1},scopedSlots:e._u([{key:"top",fn:function(){return[a("FormularioAsignarRolUsuario",{attrs:{dialog:e.dialog,groups:e.groups,idMiembro:e.idMiembro,rolUsuarioEncontrado:e.rolUsuarioEncontrado},on:{establecerDialog:e.establecerDialog}})]},proxy:!0},{key:"item.actions",fn:function({item:t}){return[a(d["a"],{attrs:{small:""},on:{click:function(a){return e.obtenerRolMiembro(t)}}},[e._v(" mdi-account-settings ")])]}}])})],1)],1),a(Di["a"],[a(Ai["a"],[e._v("Coordinadores("+e._s(this.con.length)+") ")]),a(wi["a"],[a(dt["a"],{staticClass:"elevation-1",attrs:{headers:e.encabezados,items:e.con,"hide-default-footer":"","items-per-page":-1},scopedSlots:e._u([{key:"top",fn:function(){return[a("FormularioAsignarRolUsuario",{attrs:{dialog:e.dialog,groups:e.groups,idMiembro:e.idMiembro,rolUsuarioEncontrado:e.rolUsuarioEncontrado},on:{establecerDialog:e.establecerDialog}})]},proxy:!0},{key:"item.actions",fn:function({item:t}){return[a(d["a"],{attrs:{small:""},on:{click:function(a){return e.obtenerRolMiembro(t)}}},[e._v(" mdi-account-settings ")])]}}])})],1)],1),a(Di["a"],[a(Ai["a"],[e._v("Coordinadores("+e._s(this.personal.length)+") ")]),a(wi["a"],[a(dt["a"],{staticClass:"elevation-1",attrs:{headers:e.encabezados,items:e.personal,"hide-default-footer":"","items-per-page":-1},scopedSlots:e._u([{key:"top",fn:function(){return[a("FormularioAsignarRolUsuario",{attrs:{dialog:e.dialog,groups:e.groups,idMiembro:e.idMiembro,rolUsuarioEncontrado:e.rolUsuarioEncontrado},on:{establecerDialog:e.establecerDialog}})]},proxy:!0},{key:"item.actions",fn:function({item:t}){return[a(d["a"],{attrs:{small:""},on:{click:function(a){return e.obtenerRolMiembro(t)}}},[e._v(" mdi-account-settings ")])]}}])})],1)],1)],1)},Ei=[],Si=function(){var e=this,a=e._self._c;return a(Da["a"],{attrs:{flat:""}},[a($a["a"],{attrs:{persistent:"","retain-focus":!1,"max-width":"700"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(M["a"],[a(g["d"],[e._v(" Asignar rol ")]),a(g["c"],[a(i["a"],[a(Bt["a"],{attrs:{items:e.grupos_permisos,"item-text":"name","item-value":"id",label:"Grupos",required:""},model:{value:e.rol,callback:function(a){e.rol=a},expression:"rol"}})],1)],1),a(g["a"],[a(m["a"]),e.rolUsuarioEncontrado?e._e():a(u["a"],{staticClass:"ma-5",attrs:{color:"green"},on:{click:function(a){return e.asignarRolMiembro()}}},[e._v("Asignar rol")]),e.rolUsuarioEncontrado?a(u["a"],{staticClass:"ma-5",attrs:{color:"warning"},on:{click:function(a){return e.actualizarRolMiembro()}}},[e._v("Actualizar rol")]):e._e(),a(u["a"],{staticClass:"ma-5",attrs:{color:"red"},on:{click:function(a){return e.cerrar()}}},[e._v("Cerrar")])],1)],1)],1)],1)},Ri=[],Ii={props:{dialog:{type:Boolean,default:!1},groups:{type:Number,default:null},idMiembro:{type:Number,default:null},rolUsuarioEncontrado:{type:Boolean,default:!1}},data:()=>({rol:null,grupos_permisos:[]}),created(){this.listarGrupos()},methods:{async listarGrupos(){const{items:e,error:a}=await this.$store.dispatch("MOD_grupos/obtenerGrupos");if(a)return alert(a),0;this.grupos_permisos=e},async actualizarRolMiembro(){const{rol:e,idMiembro:a}=this,{message:t,error:s}=await this.$store.dispatch("MOD_grupos/AXN_ActualizarRolMiembro",{usuario:a,rol:e});s&&alert(t),alert(t)},async asignarRolMiembro(){const{rol:e,idMiembro:a}=this,{message:t,error:s}=await this.$store.dispatch("MOD_grupos/AXN_AsignarRolMiembro",{usuario:a,rol:e});s&&alert(t),alert(t)},cerrar(){this.$emit("establecerDialog",!1)}},watch:{groups(e){this.rol=e}}},Ui=Ii,Fi=Object(y["a"])(Ui,Si,Ri,!1,null,null,null),Ni=Fi.exports,zi={data:()=>({dialog:!1,idMiembro:0,value:null,groups:null,rolUsuarioEncontrado:!1,grupos_permisos:[],encabezados:[{text:"Usuario",value:"usuario_usuario"},{text:"Nombre",value:"nombre_usuario"},{text:"Apellidos",value:"apellido_usuario"},{text:"Número de trabajos",value:""},{text:"Rol",value:"actions"}]}),components:{FormularioAsignarRolUsuario:Ni},computed:{personal(){return this.$store.state.MOD_usuarios.lista_usuarios},adm(){return this.$store.state.MOD_usuarios.usuarios_roles},con(){return this.$store.state.MOD_usuarios.usuarios_roles2},coor(){return this.$store.state.MOD_usuarios.usuarios_roles3}},created(){this.ObtenerUsuarios(),this.ObtenerAd(),this.ObtenerCon(),this.ObtenerCoo()},methods:{async obtenerRolMiembro({id_usuario:e}){this.idMiembro=e;const{idMiembro:a}=this,{error:t}=await this.$store.dispatch("MOD_grupos/AXN_ObtenerRolMiembro",{id:a});if(t)return this.dialog=!0,this.groups=null,this.rolUsuarioEncontrado=!1,0;this.dialog=!0,this.groups=this.$store.getters["MOD_grupos/GET_idRolMiembro"],this.rolUsuarioEncontrado=!0},async ObtenerUsuarios(){await this.$store.dispatch("MOD_usuarios/getUsuarios")},async ObtenerAd(){await this.$store.dispatch("MOD_usuarios/AXN_ObtenerPersonalRol",{rol:"Administrador"})},async ObtenerCon(){await this.$store.dispatch("MOD_usuarios/AXN_ObtenerPersonalRol",{rol:"Consultor"})},async ObtenerCoo(){await this.$store.dispatch("MOD_usuarios/AXN_ObtenerPersonalRol",{rol:"Coordinador"})},establecerDialog(e){this.dialog=e}}},Bi=zi,Vi=Object(y["a"])(Bi,Ti,Ei,!1,null,null,null),Li=Vi.exports,qi={components:{FormularioCrearMiembro:Oi,MostrarMiembrosConsultores:Li}},Xi=qi,Hi=Object(y["a"])(Xi,fi,vi,!1,null,null,null),Gi=Hi.exports,Ji=t("0789"),Yi=function(){var e=this,a=e._self._c;return a(M["a"],{attrs:{flat:""}},[a(g["a"],[a(m["a"])],1),a(g["c"],[a(Pi["a"],[a(Di["a"],[a(Ai["a"],[a(ya["a"],{attrs:{cols:"4"}},[e._v("Permisos de administrador")]),a(Ca["a"],{attrs:{"no-gutters":""}},[a(ya["a"],{staticClass:"text--secondary",attrs:{cols:"8"}},[a(Ji["c"],{attrs:{"leave-absolute":""}},[a(Ca["a"],{staticStyle:{width:"100%"},attrs:{"no-gutters":""}},[a(ya["a"],{attrs:{cols:"6"}},[e._v(" Habilitar permisos ")])],1)],1)],1)],1)],1)],1),a(Di["a"],[a(Ai["a"],[e._v(" Permisos de coordinador ")])],1),a(Di["a"],[a(Ai["a"],[e._v("Permisos de consultor")])],1)],1)],1)],1)},Ki=[],Qi={},Zi=Object(y["a"])(Qi,Yi,Ki,!1,null,null,null),Wi=Zi.exports,en={data:()=>({tabs:"tab-2",items:["Miembros","Análisis","Configuración"]}),components:{MostrarPersonal:Gi,Configuraciones:Wi}},an=en,tn=Object(y["a"])(an,hi,_i,!1,null,null,null),sn=tn.exports,rn=t("a75b"),on=function(){var e=this,a=e._self._c;return a(rn["a"],[a(i["a"],[a(Ca["a"],{attrs:{"no-gutters":""}},[a(ya["a"],{attrs:{cols:"2"}},[a(x["a"],{attrs:{color:"indigo"}},[a(d["a"],{attrs:{dark:""}},[e._v(" mdi-account-circle ")])],1)],1),a(ya["a"],{attrs:{cols:"8"}},[e._v(" "+e._s(e.nombreUsuario)+" "),a("br"),e._v(" Tu cuenta personal ")]),a(ya["a"],{attrs:{cols:"2"}},[a(u["a"],{attrs:{"x-small":""},on:{click:function(a){return e.$router.push({name:"HomeUsuario",params:{nombreUsuario:e.$store.getters["MOD_autenticacion/getNombreUsuario"]}})}}},[e._v("Ir al perfil personal ")])],1)],1)],1),a("router-view")],1)},nn=[],cn={data:()=>({}),computed:{nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}}},ln=cn,un=Object(y["a"])(ln,on,nn,!1,null,null,null),dn=un.exports,mn=function(){var e=this,a=e._self._c;return a(i["a"],[a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",sm:"4"}},[a(M["a"],{staticClass:"mx-auto",attrs:{"max-width":"500"}},[a(O["a"],[a(A["a"],{model:{value:e.model,callback:function(a){e.model=a},expression:"model"}},e._l(e.items,(function(t,s){return a(D["a"],{key:s},[a(w["a"],[a(w["c"],{domProps:{textContent:e._s(t.text)}})],1)],1)})),1)],1)],1)],1),a(ya["a"],{attrs:{cols:"12",sm:"8"}},[a(M["a"],[a(i["a"],[a(pa["a"],{attrs:{label:"Nombre",required:""},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}}),a(pa["a"],{attrs:{label:"Apellidos",required:""},model:{value:e.apellidos,callback:function(a){e.apellidos=a},expression:"apellidos"}}),a(u["a"],{staticClass:"mr-4",attrs:{type:"submit"},on:{click:function(a){return e.actualizarPerfil({nombre:e.nombre,apellidos:e.apellidos})}}},[e._v(" Actualizar perfil ")])],1)],1)],1)],1)],1)},pn=[],bn={data:()=>({items:[{text:"Pefil"},{text:"Cuenta"},{text:"Seguridad de la cuenta"},{text:"Email"}],model:1}),computed:{nombre:{get(){return this.$store.getters["MOD_autenticacion/obtenerNombreUsuario"]},set(e){this.nombre=e}},apellidos:{get(){return this.$store.getters["MOD_autenticacion/obtenerApellidosUsuario"]},set(e){this.apellidos=e}}},methods:{actualizarPerfil({nombre:e,apellidos:a}){null!=a&&""!=a&&null!=e&&""!=e&&alert("En mantenimiento por el momento.")}}},gn=bn,hn=Object(y["a"])(gn,mn,pn,!1,null,null,null),_n=hn.exports,fn=t("2f62");s["a"].use(fn["a"]);var vn=new fn["a"].Store({modules:Fe}),yn=t("9a96"),Cn=t("0de5"),jn=function(){var e=this,a=e._self._c;return a(ma["a"],{staticClass:"grey"},[a(i["a"],{attrs:{fluid:""}},[a(Da["a"],{staticClass:"mb-2",attrs:{color:"indigo darken-5",dark:"",flat:""}},[a(wa["a"],[e._v("Estado del trabajo")])],1),a(Ca["a"],[a(ya["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[a(M["a"],[a(g["d"],{staticClass:"subheading font-weight-bold"},[e._v(" Estado del trabajo ")]),a($["a"]),a(O["a"],{attrs:{dense:""}},[a(D["a"],[a(w["a"],[e._v("Status:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.status.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Asignado:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.created_date)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Última actualización:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.modified_date)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Inmueble:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Proyecto:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.proyect.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Concepto:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.concept.name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Asignado:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.area_user.name)+" "+e._s(e.trabajo.area_user.last_name)+" ")])],1),a(D["a"],[a(w["a"],[e._v("Ácargo:")]),a(w["a"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.assigned_user.name)+" "+e._s(e.trabajo.area_user.last_name)+" ")])],1)],1),a(At["a"],{attrs:{"background-color":"deep-purple accent-4",centered:"",dark:"","icons-and-text":""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(yn["a"]),a(wt["a"],{attrs:{href:"#tab-1"}},[e._v(" Archivo "),a(d["a"],[e._v("mdi-file-pdf")])],1),a(wt["a"],{attrs:{href:"#tab-2"}},[e._v(" Comentario "),a(d["a"],[e._v("mdi-comment-multiple-outline")])],1)],1),a(gi["a"],{model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(bi["a"],{attrs:{value:"tab-1"}},[a(M["a"],{staticClass:"mx-auto"},[Boolean(e.trabajo.files.length)?e._e():a(g["c"],{staticClass:"pt-4"},[e._v(" No han subido archivos. ")]),a(Cn["a"],{attrs:{items:e.trabajo.files,"item-height":50},scopedSlots:e._u([{key:"default",fn:function({item:t}){return[a(D["a"],[a(w["a"],[a(w["c"],[e._v(e._s(t.title))])],1),a(Nr["a"],[a(u["a"],{attrs:{depressed:"",small:"",href:t.file}},[e._v(" Ver archivo "),a(d["a"],{attrs:{color:"orange darken-4",right:""}},[e._v(" mdi-open-in-new ")])],1)],1)],1)]}}])})],1)],1),a(bi["a"],{attrs:{value:"tab-2"}},[a("Comentarios")],1)],1)],1)],1)],1)],1)],1)},xn=[],kn=t("8414"),Mn=t("1e06"),$n=function(){var e=this,a=e._self._c;return a(i["a"],{staticClass:"grey lighten-2"},[a(Ca["a"],{staticClass:"mb-6",attrs:{"no-gutters":""}},[a(ya["a"],{attrs:{cols:"12"}},[a(kn["a"],{attrs:{"align-top":"",dense:""}},e._l(e.trabajo.comments,(function(t){return a(Mn["a"],{key:t.time,attrs:{small:""}},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[e._v(e._s(t))])])])])})),1)],1)],1),a(Ca["a"],{attrs:{"no-gutters":""}},[a(ya["a"],{attrs:{cols:"12"}},[a(M["a"],{staticClass:"elevation-3"},[a(g["c"],[a(Oa["a"],{attrs:{solo:"",name:"input-7-4",label:"Escribir comentario"},model:{value:e.comment,callback:function(a){e.comment=a},expression:"comment"}})],1),a(g["a"],[a(m["a"]),a(u["a"],[a(d["a"],{attrs:{left:"",color:"red"}},[e._v("mdi-source-commit-end")]),e._v(" Terminar trabajo ")],1),a(u["a"],{attrs:{color:"success",disabled:0==e.comment.length},on:{click:function(a){return e.subirComentario()}}},[e._v(" Comentar ")])],1)],1)],1)],1)],1)},On=[],Dn={data:()=>({comment:""}),computed:{trabajo(){return this.$store.getters["MOD_trabajos/getTrabajo"]}},methods:{async subirComentario(){const{trabajo:e,comment:a}=this,{message:t}=await this.$store.dispatch("MOD_trabajos/AXN_ComentarTrabajo",{id_trabajo:e.id,comentario:a});alert(t)}}},wn=Dn,An=Object(y["a"])(wn,$n,On,!1,null,null,null),Pn=An.exports,Tn={components:{Comentarios:Pn},data:()=>({tab:null,bottonEnviar:!1,files:[]}),computed:{trabajo(){return this.$store.getters["MOD_trabajos/getTrabajo"]},grups(){return this.$store.getters["MOD_autenticacion/getGrupos"]}},created(){this.obtenerTrabajo()},methods:{async obtenerTrabajo(){await this.$store.dispatch("MOD_trabajos/recuperarTrabajo",this.trabajo.id)}}},En=Tn,Sn=Object(y["a"])(En,jn,xn,!1,null,null,null),Rn=Sn.exports;s["a"].use(ca["a"]);const In=(e,a,t)=>{vn.getters["MOD_autenticacion/isUsuarioAutenticado"]?t():t("/login")},Un=[{path:"/login",name:"Login",component:va},{path:"/:nombreUsuario",name:"HomeUsuario",component:pi,meta:{requiereAuth:!0},children:[{path:"cuenta"},{path:"personal",name:"Personal",component:sn},{path:"trabajos",name:"TrabajoUsuario",component:$r},{path:"trabajo/archivos",name:"ArchivosTrabajo",component:Tr,props:!0},{path:"solicitudes",name:"peticion",component:fo},{path:"recursos",name:"recursos-usuario",component:ci},{path:"pagos",name:"pagos",component:ko}]},{path:"/",name:"Home",component:$t,beforeEnter:In},{path:"/de",name:"De",component:Rn},{path:"/recurso",name:"peticion-recursos",component:ti},{path:"/:cliente",component:It,meta:{requiereAuth:!0},children:[{path:"inmuebles",name:"inmuebles",component:ns},{path:"trabajos",name:"trabajos-inmuebles",component:Fr},{path:"trabajos/nuevos",name:"asignar-trabajos",component:pr}]},{path:"/inmueble",component:It,meta:{requiereAuth:!0},children:[{path:"cargar/:cliente",name:"cargar-archivo",component:Os}]},{path:"/confuguracion",component:dn,children:[{path:"perfil",name:"Editar-perfil",component:_n}]}],Fn=new ca["a"]({mode:"history",base:"/antasoft/",routes:Un});Fn.beforeEach((e,a,t)=>{e.matched.some(e=>e.meta.requiereAuth)?vn.getters["MOD_autenticacion/isUsuarioAutenticado"]?t():t({name:"Login"}):t()});var Nn=Fn,zn=t("f309");s["a"].use(zn["a"]);var Bn=new zn["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#6c96bb",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#4d6c85"}}}});s["a"].config.productionTip=!1,ze.forEach(e=>{vn.dispatch(`${e}/${V}`)}),new s["a"]({router:Nn,store:vn,vuetify:Bn,render:e=>e(na)}).$mount("#app")},"69ac":function(e,a,t){"use strict";t("ab53")},"98fc":function(e,a,t){"use strict";t("0751")},ab53:function(e,a,t){}});
//# sourceMappingURL=app.f16267de.js.map