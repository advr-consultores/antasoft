(function(e){function a(a){for(var o,i,n=a[0],c=a[1],l=a[2],d=0,m=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(a);while(m.length)m.shift()();return s.push.apply(s,l||[]),t()}function t(){for(var e,a=0;a<s.length;a++){for(var t=s[a],o=!0,n=1;n<t.length;n++){var c=t[n];0!==r[c]&&(o=!1)}o&&(s.splice(a--,1),e=i(i.s=t[0]))}return e}var o={},r={app:0},s=[];function i(a){if(o[a])return o[a].exports;var t=o[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=o,i.d=function(e,a,t){i.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,a){if(1&a&&(e=i(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)i.d(t,o,function(a){return e[a]}.bind(null,o));return t},i.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},i.p="/antasoft/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=a,n=n.slice();for(var l=0;l<n.length;l++)a(n[l]);var u=c;s.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"0ab6":function(e,a,t){},"11e7":function(e,a,t){"use strict";t("0ab6")},"248b":function(e,a,t){},"56d7":function(e,a,t){"use strict";t.r(a);var o=t("2b0e"),r=t("7496"),s=t("40dc"),i=t("a523"),n=t("553a"),c=t("2fa4"),l=t("2a7f"),u=function(){var e=this,a=e._self._c;return a(r["a"],[a(s["a"],{attrs:{app:"",color:"info",flat:"",dark:""}},[e.isUsuarioAutenticado?a("encabezado"):a(i["a"],{staticClass:"py-0 fill-height"},[a(l["a"],[e._v("Antasoft")]),a(c["a"])],1)],1),a(i["a"],{staticClass:"grey lighten-2",staticStyle:{height:"100vh"},attrs:{fluid:""}},[a("router-view"),a("alerta")],1),a(n["a"],{attrs:{app:""}})],1)},d=[],m=t("8336"),p=t("132d"),b=(t("14d9"),function(){var e=this,a=e._self._c;return a(i["a"],{staticClass:"py-0 fill-height"},[a(m["a"],{attrs:{icon:""},on:{click:function(a){e.$router.push({name:"Home"}).catch(()=>{})}}},[a(p["a"],{attrs:{"x-large":""}},[e._v("mdi-home-circle")])],1),a("menu-navegacion-principal"),a(c["a"]),a("notificaciones"),a("ver-perfil-y-mas")],1)}),g=[],f=t("99d9"),_=function(){var e=this,a=e._self._c;return a(f["a"],e._l(e.links,(function(t,o){return a(m["a"],{key:o,attrs:{text:""},on:{click:function(a){return e.redireccionar(t.nombre)}}},[e._v(" "+e._s(t.texto)+" ")])})),1)},h=[],v={data:()=>({links:[{texto:"Trabajos",nombre:"TrabajoUsuario"},{texto:"Recursos",nombre:"recursos-usuario"},{texto:"Pagos",nombre:"pagos"}]}),computed:{usernname(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},methods:{redireccionar(e){this.$router.push({name:e,params:{nombreUsuario:this.usernname}}).catch(()=>{})}}},y=v,C=t("2877"),j=Object(C["a"])(y,_,h,!1,null,null,null),x=j.exports,k=t("8212"),$=t("4ca6"),w=t("b0af"),I=t("ce7e"),S=t("8860"),A=t("da13"),M=t("1800"),P=t("5d23"),E=t("1baa"),D=t("e449"),T=t("afd9"),O=function(){var e=this,a=e._self._c;return a(D["a"],{attrs:{bottom:"",rounded:"","min-width":"50px",left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a($["a"],{attrs:{overlap:"",bordered:"",content:e.numeroNotificaciones,color:"green"}},[a(k["a"],e._g(e._b({attrs:{size:"30"}},"v-avatar",t,!1),o),[a(k["a"],[a(p["a"],[e._v(" mdi-bell ")])],1)],1)],1)]}}])},[a(w["a"],[a(T["a"],[a("span",[e._v("Tus notificaciones")]),a(c["a"]),a(m["a"],{attrs:{icon:""}},[a(p["a"],{on:{click:e.traerNotificaciones}},[e._v("mdi-reload")])],1)],1),a(I["a"]),a(S["a"],{attrs:{"two-line":""}},[a(E["a"],{attrs:{"active-class":"blue--text"},model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}},[e._l(e.items,(function(t,o){return[a(A["a"],{key:t.title,scopedSlots:e._u([{key:"default",fn:function({}){return[a(P["b"],[a(P["d"],{domProps:{textContent:e._s(t.title)}}),a(P["c"],{staticClass:"text--primary",domProps:{textContent:e._s(t.headline)}}),a(P["c"],{domProps:{textContent:e._s(t.subtitle)}})],1),a(M["a"],[a(P["a"],{domProps:{textContent:e._s(t.action)}})],1)]}}],null,!0)}),o<e.items.length-1?a(I["a"],{key:o}):e._e()]}))],2)],1),a(I["a"]),a(T["a"],[a(c["a"]),a(m["a"],{attrs:{small:"",text:""}},[e._v("Ver todas")])],1)],1)],1)},V=[],U={data:()=>({selected:[],items:[{action:"1 dia",headline:"trabajo id 1",subtitle:"Este tabajo fue modificado",title:"Trabajos notificación prueba #8"},{action:"2 dia",headline:"Recurso 3 comentario 2",subtitle:"El usuario 2 hizo un comentario",title:"Comentarios recursos notificación prueba #4"},{action:"6 dia",headline:"Recurso 3 archivo 2",subtitle:"El usuario 1 subió un archivo",title:"Archivo recursos notificación prueba #3"}]}),computed:{notificaciones(){return this.$store.getters["MOD_notificaciones/getNotificaciones"]},id_usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},numeroNotificaciones(){var e=0;const{notificaciones:a,selected:t}=this;for(let o=0;o<a.length;o++)a[o].is_read||(e+=1,t.push(o));return e}},created(){},methods:{async traerNotificaciones(){const{id_usuario:e}=this,{error:a}=await this.$store.dispatch("MOD_notificaciones/traerNotificaciones",{id_usuario:e});a&&alert(a)},isComentario(e){return"comentario"==e},async verTrabajo({id:e,user:a,is_read:t,extra_id:o}){this.$store.commit("trabajo/setTrabajo",{id:o,name:""}),console.log(!t),t||this.$store.dispatch("MOD_notificaciones/actualizarNotificaciones",{id:e,user:a,is_read:!0}),this.$router.push({name:"ArchivosTrabajo",params:{nombreUsuario:this.$store.getters["MOD_autenticacion/getNombreUsuario"]}})}}},F=U,R=Object(C["a"])(F,O,V,!1,null,null,null),N=R.exports,B=t("cc20"),z=t("adda"),L=function(){var e=this,a=e._self._c;return a(D["a"],{attrs:{bottom:"","offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(B["a"],e._g(e._b({staticClass:"ma-2"},"v-chip",t,!1),o),[a(k["a"],{attrs:{color:"grey",left:""}},[null!==e.fotoUsuario?a(z["a"],{attrs:{src:e.$store.getters["MOD_autenticacion/getFotoUsuario"]}}):a(p["a"],[e._v(e._s(e.usernname[0])+" ")])],1),e._v(" "+e._s(e.usernname)+" "),a(p["a"],{attrs:{right:""}},[e._v(e._s("true"===t["aria-expanded"]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}])},[a(S["a"],[a(A["a"],{attrs:{link:""}},[a(P["d"],{domProps:{textContent:e._s("Administrat personal")},on:{click:function(a){return e.$router.push({name:"home-personal"})}}})],1),a(A["a"],{attrs:{link:""}},[a(P["d"],{domProps:{textContent:e._s("Salir")},on:{click:function(a){return e.cerrarSesion()}}})],1)],1)],1)},G=[];const q="initStoreModule",X="logoutFunction";var H=t("bc3a");const J=H["a"].create({baseURL:"https://advrapi.advr.mx"});var Y={instance:J};const K=e=>{const a=localStorage.getItem(e);try{return JSON.parse(a)}catch(t){return console.error({error:t,propertyName:e,stringProperty:a}),null}},Q=(e,a)=>{const t=JSON.stringify(a);localStorage.setItem(e,t)},Z={token:null,usuario:[]},W={[q]({dispatch:e}){e("iniciarAutenticacion")},[X]({commit:e}){e("limpiarTokens"),e("limpiarUsuario")},iniciarAutenticacion({commit:e}){const a=K("token"),t=K("usuario");e("setTokens",a),e("setUsuario",t)},async login({commit:e},{email:a,nombreUsuario:t,password:o}){try{const{data:r,status:s}=await Y.instance.post("login/",{email:a,username:t,password:o}),{token:i,user:n,message:c}=r,{groups:l,id:u,username:d,is_staff:m,name:p,last_name:b,image:g,is_active:f}=n;return e("setTokens",i),e("setUsuario",{id:u,grupos:l,usuario:d,email:a,nombre:p,apellidos:b,imagen:g,is_active:f,is_staff:m}),{mensaje:c,estado:s}}catch(r){return{error:r}}},async cerrarSesion(e,a){try{const{data:e}=await Y.instance.post("logout/?token="+a),{session_messege:t}=e;return{message:t}}catch(t){const e=String(t.response.data.error);return{error:e,message:e}}}},ee={setTokens(e,a){Q("token",a),e.token=a},setUsuario(e,a){Q("usuario",a),e.usuario=a},limpiarTokens(e){Q("token",null),e.token=null},limpiarUsuario(e){Q("usuario",null),e.usuario=null}},ae={isUsuarioAutenticado:e=>Boolean(e.token),getGrupos:e=>e.usuario.grupos,getUserPermissions:e=>e.usuario.permisoUsuario,getFotoUsuario:e=>e.usuario.imagen,getNombreUsuario:e=>e.usuario.usuario,obtenerNombreUsuario:e=>e.usuario.nombre,obtenerApellidosUsuario:e=>e.usuario.apellidos,obtenerIdUsuario:e=>e.usuario.id,getToken:e=>e.token};var te={namespaced:!0,state:Z,actions:W,mutations:ee,getters:ae},oe={namespaced:!0,state:{usuario:{},usuarios:[],usuarios_roles:[],usuarios_roles2:[],usuarios_roles3:[],mensaje:"",is_cargando:!1},mutations:{setUsuario(e,a){e.usuario=a},setUsuarios(e,a){e.usuarios=a},addUsuario(e,a){e.usuarios.push(a)},updateUsuarioPermisos(e,{indice:a,is_activo:t,is_personal:o}){e.usuarios[a].is_activo=t,e.usuarios[a].is_personal=o},setCargando(e,a){e.is_cargando=a}},actions:{async obtenerUsuarios({commit:e},{privilegio:a}){try{const{data:o,status:r}=await Y.instance.get("usuarios/usuario/?grupo="+a),{items:s,message:i}=o;var t=[];return s.forEach(e=>{t.push({id:e.id,nombre:e.name,apellidos:e.last_name,nombre_usuario:e.username,correo_electronico:e.email,imagen:e.image,is_activo:e.is_active,is_personal:e.is_staff,is_superusuario:e.is_superuser,ultimo_acceso:e.last_login,grupos:e.groups})}),e("setUsuarios",t),{mensaje:i,estado:r}}catch(o){return{error:o}}},async crearUsuario({commit:e},{nombre:a,apellidos:t,nombre_usuario:o,correo_electronico:r,"contraseña":s,is_personal:i}){try{e("setCargando",!0);const{data:n,status:c}=await Y.instance.post("/usuarios/usuario/",{username:o,email:r,password:s,name:a,last_name:t,is_staff:i}),{message:l,items:u}=n,{id:d,username:m,email:p,name:b,last_name:g,image:f,is_active:_,is_staff:h,is_superuser:v}=u,y={id:d,nombre:b,apellidos:g,nombre_usuario:m,correo_electronico:p,imagen:f,is_superusuario:v,is_activo:_,is_personal:h};return e("setUsuario",y),e("addUsuario",y),e("setCargando",!1),{mensaje:l,estado:c}}catch(n){return e("setCargando",!1),{error:n}}},async actulizarPermisos({commit:e},{id:a,indice:t,is_activo:o,is_personal:r}){try{const{data:s,status:i}=await Y.instance.put(`usuarios/usuario/${a}/permisos/`,{is_active:o,is_staff:r}),{items:n,message:c}=s,{is_active:l,is_staff:u}=n;return e("updateUsuarioPermisos",{indice:t,is_activo:l,is_personal:u}),{mensaje:c,estado:i}}catch(s){return{error:s}}},async actulizarPrivilegios({commit:e},{id:a,indice:t,is_activo:o,is_personal:r}){try{const{data:s,status:i}=await Y.instance.put(`usuarios/usuario/${a}/permisos/`,{is_active:o,is_staff:r}),{items:n,message:c}=s,{is_active:l,is_staff:u}=n;return e("updateUsuarioPermisos",{indice:t,is_activo:l,is_personal:u}),{mensaje:c,estado:i}}catch(s){return{error:s}}},async recuperarUsuario(e,a){try{const{data:e,status:t}=await Y.instance.get(`/usuarios/usuario/${a}/`),{message:o}=e;return{mensaje:o,estado:t}}catch(t){return{error:t}}}},getters:{getUsuarios:e=>e.usuarios,getUsuario:e=>e.usuario,getCargando:e=>e.is_cargando}};const re={grupos:[],grupos_permisos:[],rolMiembro:{},is_cargando:!1},se={MUT_EstablecerRolMiembro(e,a){e.rolMiembro=a},clearRolMiembro(e){e.rolMiembro={}},setGrupos(e,a){e.grupos=a},addGrupo(e,a){e.grupos.push(a)},setCargando(e,a){e.is_cargando=a}},ie={async obtenerGrupos({commit:e}){try{e("setCargando",!0);const{data:a,status:t}=await Y.instance.get("grupos/grupo/"),{items:o,message:r}=a,s=[];for(const e of o)s.push({id:e.id,nombre:e.name,permisos:e.permissions.length});return e("setGrupos",s),e("setCargando",!1),{mensaje:r,estado:t}}catch(a){return e("setCargando",!1),{error:a}}},async obtenerPermisos(){try{const{data:e}=await Y.instance.get("roles/permiso/"),{items:a}=e;return{items:a}}catch(e){const a=String(e.response.data.error);return{error:a}}},async AXN_ActualizarRolMiembro(e,{usuario:a,rol:t}){try{const{data:e}=await Y.instance.put(`roles/usuario/${a}/`,{user:a,rol:t}),{message:o}=e;return{message:o}}catch(o){const e=String(o.response.data.error);return{error:e}}},async AXN_AsignarRolMiembro(e,{usuario:a,rol:t}){try{const{data:e}=await Y.instance.post("roles/usuario/",{user:a,rol:t}),{message:o}=e;return{message:o}}catch(o){const e=String(o.response.data.error);return{error:e}}},async AXN_ObtenerRolMiembro({commit:e},{id:a}){try{const{data:t}=await Y.instance.get(`/roles/usuario/${a}/`),{items:o}=t;return e("MUT_EstablecerRolMiembro",o.rol),{message:"Ok"}}catch(t){return{message:"No tiene un rol.",error:t}}}},ne={GET_idRolMiembro:e=>e.rolMiembro.id,getCargando:e=>e.is_cargando,getGrupos:e=>e.grupos};var ce={namespaced:!0,state:re,mutations:se,actions:ie,getters:ne},le={namespaced:!0,state:{cliente:null,clientes:[],cargando:!1},mutations:{setClientes(e,a){Q("clientes",a),e.clientes=a},setCliente(e,a){Q("cliente",a),e.cliente=a},setCargando(e,a){e.cargando=a},cleanModCliente(e){Q("clientes",[]),Q("cliente",null),e.clientes=[],e.cliente=null},deleteCliente(e,a){e.clientes.splice(a,1)}},actions:{[q]({dispatch:e}){e("iniciarModCliente")},[X]({commit:e}){e("cleanModCliente")},iniciarModCliente({commit:e}){const a=K("clientes"),t=K("cliente");e("setClientes",a),e("setCliente",t)},async obtenerClientes({commit:e}){try{e("setCargando",!0);const{data:t,status:o}=await Y.instance.get("/clientes/cliente/"),{items:r,message:s}=t;var a=[];return r.forEach(e=>{a.push({id:e.id,nombre:e.name,rfc:e.rfc,direccion:e.address})}),e("setClientes",a),e("setCargando",!1),{mensaje:s,estado:o}}catch(t){return e("cleanModCliente"),e("setCargando",!1),{error:t}}},async recuperarCliente({commit:e},a){try{return e("setCliente",a),{mensaje:"Se pudo establecer el cliente.",status:200}}catch(t){return{mensaje:"No se establecio el cliente.",error:"error",status:400}}},async nuevo({state:e,commit:a},{nombre:t,direccion:o,rfc:r}){try{a("setCargando",!0);const s={name:t,address:o,rfc:r},{data:i,status:n}=await Y.instance.post("clientes/cliente/",s),{items:c,message:l}=i,u={nombre:c.name,rfc:c.rfc,id:c.id,direccion:c.address};return e.clientes.push(u),a("setCliente",u),a("setCargando",!1),{mensaje:l,estado:n}}catch(s){return a("setCargando",!1),{error:s}}},async eliminar({commit:e},{id:a,indice:t}){try{const{data:o}=await Y.instance.delete(`clientes/cliente/${a}/`),{message:r}=o;return e("deleteCliente",t),{mensaje:r}}catch(o){return{error:o.response.data.error,mensaje:o.response.data.message}}}},getters:{getCliente:e=>e.cliente,getClientes:e=>e.clientes,getCargando:e=>e.cargando,isClientes:e=>Boolean(e.clientes.length)}},ue={namespaced:!0,state:{respuesta:null,inmueble:{},inmuebles:[],inmueblesSeleccionados:[],inmueblesVerificados:[],verificarInmuebles:[],numeroInmueblesCreados:0,total_inmuebles_verificados:0,cargando:!1},mutations:{setInmueble(e,a){e.inmueble=a},setInmuebles(e,a){e.inmuebles=a},addInmuebles(e,a){e.inmuebles.push(a)},cleanInmuebles(e){e.inmuebles=[]},clearInmueble(e){e.inmueble={}},setCargando(e,a){e.cargando=a},setInmueblesSeleccionados(e,a){e.inmueblesSeleccionados=a},clearInmueblesSeleccionados(e){e.inmueblesSeleccionados=[]},eliminarInmueble(e,a){e.inmuebles.splice(a,1)},splitInmueblesVerificados(e,a){e.inmueblesVerificados.splice(a,1)},splitVerificarInmuebles(e,a){e.verificarInmuebles.splice(a,1)},setInmueblesVerificados(e,a){e.inmueblesVerificados=a},setVerificarInmuebles(e,a){e.verificarInmuebles=a},clearInmueblesVerificados(e){e.inmueblesVerificados=[]},clearVerificarInmuebles(e){e.verificarInmuebles=[]},updateInmueblVerificado(e,{indice:a,inmueble:t}){"property_key"in t&&(e.inmueblesVerificados[a].clave=t.property_key[0]+"("+e.verificarInmuebles[a].clave+")"),"name"in t&&(e.inmueblesVerificados[a].nombre=t.name[0]+"("+e.verificarInmuebles[a].nombre+")"),"province"in t&&(e.inmueblesVerificados[a].estado=t.province[0]+"("+e.verificarInmuebles[a].estado+")"),"municipality"in t&&(e.inmueblesVerificados[a].municipio=t.municipality[0]+"("+e.verificarInmuebles[a].municipio+")")},setNumeroInmueblesCreados(e,a){e.numeroInmueblesCreados=a},setTotalInmueblesVerificados(e,a){e.total_inmuebles_verificados=a},setStatusInmuebleVerificado(e,{indice:a,status:t}){e.inmueblesVerificados[a].status=t}},actions:{async crearInmueble({commit:e},{nombre:a,clave:t,clave_2:o,direccion:r,estado:s,municipio:i,localidad:n,cliente:c}){try{e("setCargando",!0);const{data:l,status:u}=await Y.instance.post("inmuebles/inmueble/",{name:a,property_key:t,sirh:o,address:r,province:s.id,municipality:i.id,locality:n,client:c}),{items:d,message:m}=l,{id:p,name:b,property_key:g,address:f,province:_,municipality:h,locality:v,client:y}=d,C={id:p,nombre:b,clave:g,direccion:f,estado:_,municipio:h,localidad:v,cliente:y};return e("addInmuebles",C),e("setCargando",!1),{mensaje:m,estado:u}}catch(l){return e("setCargando",!1),{error:l}}},async verificarInmuebles({commit:e,dispatch:a},t){try{e("setCargando",!0);var o=[];t.forEach(e=>{o.push({name:e.nombre,property_key:e.clave,sirh:e.clave_2,address:e.direccion,province:e.estado,municipality:e.municipio,locality:e.localidad,client:e.cliente.id})});const{data:r,status:s}=await Y.instance.post("inmuebles/inmueble/verificacion/",{properties:o}),{items:i,message:n}=r;let c=[];for(let e of i)c.push({status:await a("isValidoInmueble",e),nombre:e.name,clave:e.property_key,clave_2:e.sirh,cliente:e.client?{id:e.client.id,nombre:e.client.name}:null,estado:e.province?{id:e.province.id,nombre:e.province.name}:null,municipio:e.municipality?{id:e.municipality.id,nombre:e.municipality.name}:null,localidad:e.locality?{id:e.locality.id,nombre:e.locality.name}:null,direccion:e.address});return e("setInmueblesVerificados",c),e("setCargando",!1),{mensaje:n,estado:s}}catch(r){return e("setCargando",!1),{error:r}}},async crearMultiplesInmuebles({commit:e,state:a},t){try{e("setCargando",!0);var o=[];t.forEach(e=>{o.push({name:e.nombre,property_key:e.clave,sirh:e.clave_2,address:e.direccion,province:e.estado?e.estado.id:null,municipality:e.municipio?e.municipio.id:null,locality:e.localidad?e.localidad.id:null,client:e.cliente?e.cliente.id:null})}),e("setTotalInmueblesVerificados",t.length);const{data:s,status:i}=await Y.instance.post("inmuebles/inmueble/confirmacion/",{properties:o});var r=0;const{items:n,message:c}=s;for(const t of n)"error"in t?(e("updateInmueblVerificado",{indice:r,inmueble:t.error}),e("setStatusInmuebleVerificado",{inmueble:a.inmueblesVerificados[r],indice:r}),r+=1):(e("splitInmueblesVerificados",r),e("splitVerificarInmuebles",r));return e("setNumeroInmueblesCreados",n.length-r),e("setCargando",!1),{mensaje:c,estado:i}}catch(s){return e("setCargando",!1),{error:s}}},async recuperarInmueble({commit:e},a){try{e("setCargando",!0);const{data:t,status:o}=await Y.instance.get("inmuebles/inmueble/"+a),{items:r,message:s}=t,{id:i,name:n,property_key:c,address:l,province:u,municipality:d,locality:m,client:p}=r,b={id:i,clave:c,nombre:n,estado:u,municipio:d,localidad:m,direccion:l,cliente:p};return e("setInmueble",b),e("setCargando",!1),{mensaje:s,status:o}}catch(t){return e("setCargando",!1),{mensaje:t.response.data.error}}},async listarPorClientesTerritorio({commit:e},{cliente:a,estado:t,municipio:o,localidad:r}){try{e("cleanInmuebles"),e("setCargando",!0);const{data:i,status:n}=await Y.instance.get(`inmuebles/inmueble/filtrado/?clientes=${a}&estado=${t?t.id:""}&municipio=${o?o.id:""}&localidad=${r?r.id:""}`),{items:c}=i;var s=[];return c.forEach(e=>{s.push({id:e.id,clave:e.property_key,nombre:e.name,estado:e.province,municipio:e.municipality,localidad:e.locality,direccion:e.address,cliente:e.client})}),e("setInmuebles",s),e("setCargando",!1),{mensaje:"Consulta satisfactoria.",estadoHTTP:n}}catch(i){return e("setCargando",!1),{error:i}}},async eliminar({commit:e},a){e("MUT_Flag_EliminarInmueble",1);try{const{data:t}=await Y.instance.delete(`inmuebles/inmueble/${a}/`);e("MUT_Respuesta",t),e("MUT_Flag_EliminarInmueble",2)}catch(t){e("MUT_Flag_EliminarInmueble",3)}},async listar({commit:e},a){try{e("setCargando",!0),e("cleanInmuebles");const{data:t,status:o}=await Y.instance.get(a?"/inmuebles/inmueble/?clientes="+a.id:"/inmuebles/inmueble/"),{items:r,message:s}=t,i=[];return r.forEach(e=>{i.push({id:e.id,clave:e.property_key,nombre:e.name,estado:e.province,municipio:e.municipality,localidad:e.locality,direccion:e.address,cliente:e.client})}),e("setInmuebles",i),e("setCargando",!1),{mensaje:s,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async setStatusInmuebleVerificado({commit:e,dispatch:a},{inmueble:t,indice:o}){const r={name:t.nombre,province:t.estado,municipality:t.municipio,client:t.cliente,property_key:t.clave},s=await a("isValidoInmueble",r);e("setStatusInmuebleVerificado",{indice:o,status:s})},isValidoInmueble(e,{name:a,province:t,municipality:o,client:r,property_key:s}){let i=/Este campo es requerido\.\([^)]*\)/i,n=/Ya existe Inmueble con este Clave\.\([^)]*\)/i,c=/Asegúrese de que este campo no tenga más de 10 caracteres\.\([^)]*\)/i,l=/Este campo no puede ser nulo\.\([^)]*\)/i;return!i.test(a)&&null!==a&&(!(null===s||i.test(s)||n.test(s)||c.test(s)||l.test(s))&&(null!==t&&!i.test(t)&&!l.test(t)&&(null!==o&&!i.test(o)&&!l.test(o)&&(null!==r&&!i.test(r)&&!l.test(r)))))}},getters:{getInmuebles:e=>e.inmuebles,getInmueble:e=>e.inmueble,getCargando:e=>e.cargando,getInmueblesSeleccionados:e=>e.inmueblesSeleccionados,getInmueblesVerificados:e=>e.inmueblesVerificados,getVerificarInmuebles:e=>e.verificarInmuebles,getNumeroInmueblesCreados:e=>e.numeroInmueblesCreados,getTotalInmueblesVerificados:e=>e.total_inmuebles_verificados}},de={namespaced:!0,state:{estado:null,estados:[],isCargandoEstados:!1,municipio:null,municipios:[],isCargandoMunicipios:!1,localidad:null,localidades:[],isCargandoLocalidades:!1},mutations:{setEstado(e,a){e.estado=a},setEstados(e,a){e.estados=a},setCargandoEstados(e,a){e.isCargandoEstados=a},clearEstado(e){e.estado=null},clearAllEstado(e){e.estados=[],e.estado=null},setMunicipio(e,a){e.municipio=a},setMunicipios(e,a){e.municipios=a},setCargandoMunicipios(e,a){e.isCargandoMunicipios=a},clearMunicipios(e){e.municipios=[]},clearMunicipio(e){e.municipio=null},clearAllMunicipio(e){e.municipios=[],e.municipio=null},setLocalidad(e,a){e.localidad=a},setLocalidades(e,a){e.localidades=a},setCargandoLocalidades(e,a){e.isCargandoLocalidades=a},clearLocalidades(e){e.localidades=[]},clearLocalidad(e){e.localidad=null},clearAllLocalidad(e){e.localidades=[],e.localidad=null},clearModuloUbicacion({commit:e}){e("clearAllEstado"),e("clearAllMunicipio"),e("clearAllLocalidad")}},actions:{async obtenerEstados({commit:e}){try{e("setCargandoEstados",!0);const{data:t,status:o}=await Y.instance.get("territorios/estados/"),{items:r,message:s}=t;var a=[];return r.forEach(e=>{a.push({id:e.id,nombre:e.name,abreviatura:e.abbreviation})}),e("setEstados",a),e("setCargandoEstados",!1),{mensaje:s,estado:o}}catch(t){return e("setCargandoEstados",!1),{error:t}}},async obtenerEstado({commit:e},a){await e("setEstado",a)},async obtenerMunicipio({commit:e},a){await e("setMunicipio",a)},async obtenerLocalidad({commit:e},a){await e("setLocalidad",a)},async obtenerMunicipiosDeEstado({commit:e},a){try{e("setCargandoMunicipios",!0),e("clearMunicipio");const{data:o}=await Y.instance.get("territorios/municipios/?province="+a),{items:r,status:s}=o;var t=[];return r.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setMunicipios",t),e("setCargandoMunicipios",!1),{mensaje:"Consulta satisfactoria.",status:s}}catch(o){return e("setCargandoMunicipios",!1),e("clearMunicipios"),{mensaje:o.response.data.message,status:404}}},async obtenerLocalidadesDeMunicipio({commit:e},a){try{e("setCargandoLocalidades",!0),e("clearLocalidad");const{data:o}=await Y.instance.get("territorios/localidades/?municipality="+a),{items:r,status:s}=o;var t=[];return r.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setLocalidades",t),e("setCargandoLocalidades",!1),{mensaje:"Consulta satisfactoria.",status:s}}catch(o){return e("setCargandoLocalidades",!1),e("clearLocalidades"),{mensaje:o.response.data.message,status:o.response.status}}},async obtenerMunicipiosDeInmueblesExistentes({commit:e},{cliente:a,estado:t}){try{e("setCargandoMunicipios",!0),e("clearMunicipio");const{data:r}=await Y.instance.get(`territorios/municipios/sucursales/?clients=${a}&province=${t.id}`),{items:s,status:i}=r;var o=[];return s.forEach(e=>{o.push({id:e.id,nombre:e.name})}),e("setMunicipios",o),e("setCargandoMunicipios",!1),{mensaje:"Consulta satisfactoria.",status:i}}catch(r){return e("setCargandoMunicipios",!1),e("clearMunicipios"),{mensaje:r.response.data.message,status:r.response.status}}},async obtenerLocalidadesDeInmueblesExistentes({commit:e},{cliente:a,estado:t,municipio:o}){try{e("setCargandoLocalidades",!0),e("clearLocalidad");const{data:s,status:i}=await Y.instance.get(`territorios/localidades/sucursales/?clients=${a}&province=${t.id}&municipality=${o.id}`),{items:n}=s;var r=[];return n.forEach(e=>{r.push({id:e.id,nombre:e.name})}),e("setLocalidades",r),e("setCargandoLocalidades",!1),{mensaje:"Consulta satisfactoria.",estado:i}}catch(s){return e("clearLocalidades"),e("setCargandoLocalidades",!1),{error:s}}}},getters:{getEstado:e=>e.estado,getEstados:e=>e.estados,getCargandoEstados:e=>e.isCargandoEstados,getMunicipio:e=>e.municipio,getMunicipios:e=>e.municipios,getCargandoMunicipios:e=>e.isCargandoMunicipios,getLocalidad:e=>e.localidad,getLocalidades:e=>e.localidades,getCargandoLocalidades:e=>e.isCargandoLocalidades}};t("0541");function me(e){let a=e.getFullYear(),t=(1+e.getMonth()).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return t+"/"+o+"/"+a}const pe=()=>"comprobante_"+toString(me()),be=async e=>{if(e)try{const a=await fetch(e),t=await a.blob();return t}catch(a){return}},ge={trabajo:{},trabajos:[],cargando:!1,asignacionesVerificadas:[],seleccionados:[],estados_trabajo:[],estado_trabajo:{},mensajes:[],mensaje:""},fe={setTrabajo(e,a){e.trabajo=a},setTrabajos(e,a){e.trabajos=a},limpiarTrabajo(e){e.trabajo=null},cleanTrabajos(e){e.trabajos=[]},setCargando(e,a){e.cargando=a},setStatusTrabajo(e,a){e.estados_trabajo=a},setEstadoTrabajo(e,a){e.estado_trabajo=a},pushEstadosTrabajo(e,a){e.estados_trabajo.push(a)},setAsignacionesVerificadas(e,a){e.asignacionesVerificadas=a},addAsignacionesVerificadas(e,{index:a,payload:t}){e.asignacionesVerificadas[a].trabajos=e.asignacionesVerificadas[a].trabajos.concat(t.trabajos)},pushAsignacionesVerificadas(e,a){e.asignacionesVerificadas.push(a)},clearAsignacionesVerificadas(e){e.asignacionesVerificadas=[]},setSeleccionados(e,a){e.seleccionados=a},spliceAsignacionVerificada(e,a){e.asignacionesVerificadas.splice(a,1)},spliceTrabajoAsignacionVerificada(e,{indice_asignacion:a,indice_trabajo:t}){e.asignacionesVerificadas[a].trabajos.splice(t,1)},setUsuarioAsignacionVerificada(e,{indice_asignacion:a,indice_trabajo:t,objetoUsuario:o}){e.asignacionesVerificadas[a].trabajos[t].usuario_asignado=o},setConfirmacionConfirmacionTrabajo(e,{indice_asignacion:a,indice_trabajo:t,payload:o}){e.asignacionesVerificadas[a].trabajos[t].confirmacion=o},deleteSeleccionado(e,a){e.seleccionados.splice(a,1)},clearSeleccionados(e){e.seleccionados=[]},setMensaje(e,a){e.mensaje=a},clearMensaje(e){e.mensaje=""}},_e={async obtenerEstadosTrabajo({commit:e}){try{e("setCargando",!0);const{data:a,status:t}=await Y.instance.get("/trabajos/status/"),{items:o,message:r}=a,s=[];for(const e of o)s.push({id:e.id,nombre:e.name});return e("setStatusTrabajo",s),e("setCargando",!1),{mensaje:r,estado:t}}catch(a){return e("setCargando",!1),{error:a}}},async crearEstadoTrabajo({commit:e},a){try{e("setCargando",!0);const{data:t,status:o}=await Y.instance.post("/trabajos/status/",{name:a}),{items:r,message:s}=t,i={id:r.id,nombre:r.name};return e("pushEstadosTrabajo",i),e("setCargando",!1),{mensaje:s,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async obtenerTrabajosPendietes({commit:e,dispatch:a},{client:t,province:o,menorIgualFecha:r,mayorIgualFecha:s}){try{e("clearMensaje"),e("setCargando",!0);var i="trabajos/pendiente/";(t||o)&&(i+=`?client=${t||""}&province=${o||""}`),(r||s)&&(i+=`?date_gte=${r||""}&date_lte=${s||""}`);const{data:n,status:c}=await Y.instance.get(i),{items:l,message:u}=n,{trabajos:d}=await a("defineClaves",l);return e("setMensaje",u),e("setTrabajos",d),e("setCargando",!1),{mensaje:u,estado:c}}catch(n){return e("cleanTrabajos"),"Network Error"===n.message?e("setMensaje","Hubo un error de red"):e("setMensaje",n.response.data.message),e("setCargando",!1),{error:n}}},async obtenerTrabajosCliente({commit:e,dispatch:a},{cliente:t}){try{e("setCargando",!0);const{data:o,status:r}=await Y.instance.get("trabajos/cliente/?cliente="+t),{items:s,message:i}=o,{trabajos:n}=await a("defineClaves",s);return e("setTrabajos",n),e("setCargando",!1),{mensaje:i,estado:r}}catch(o){return e("cleanTrabajos"),e("setCargando",!1),{error:o}}},async recuperarTrabajo({commit:e},a){try{const{data:t}=await Y.instance.get(`trabajos/trabajo/${a}/`),{items:o}=t;return void e("setTrabajo",o)}catch(t){return void alert("Error.")}},async AXN_SubirArchivo(e,{work:a,PDFBase64:t}){const o=pe(),r=await be(t),s=new FormData;s.append("work",a),s.append("title",o),r&&s.append("file",t,o+".pdf");try{return await Y.instance.post("/trabajos/archivo/",s),{message:"Archivo subido."}}catch(i){const e=String(i.response.data.error);return{message:"No se pudo subir el archivo.",error:e}}},async AXN_ActualizaArchivo(e,{id:a,work:t,title:o,PDFBase64:r}){const s=await be(r),i=new FormData;i.append("work",t),i.append("title",o),s&&i.append("file",r,o+".pdf");try{return await Y.instance.put(`/trabajos/archivo/${a}/`,i),{message:"Archivo actualizado."}}catch(n){const e=String(n.response.data.error);return{message:"No se pudo actualizar el archivo.",error:e}}},async updatework({commit:e},{id:a,status_id:t,project_id:o,concept_id:r,property_office_id:s,assigned_user_id:i,area_user_id:n,send_review:c}){try{const{data:l}=await Y.instance.put(`/trabajos/trabajo/${a}/`,{status_id:t,project_id:o,concept_id:r,property_office_id:s,assigned_user_id:i,area_user_id:n,send_review:c});return e("setTrabajo",l),{message:"Enviado para revisar"}}catch(l){const e=String(l.response.data.error);return{message:"No se pudo enviar el trabajo",error:e}}},async AXN_ComentarTrabajo(e,{id_trabajo:a,comentario:t}){try{const{data:e}=await Y.instance.post("/trabajos/comentario/",{work:a,comment:t}),{message:o}=e;return{message:o}}catch(o){const e=String(o.response.data.error);return{message:e}}},async obtenerTrabajosUsuario({commit:e},{username:a}){try{e("setCargando",!0);const{data:t,status:o}=await Y.instance.get("trabajos/usuario/?username="+a),{items:r,message:s}=t,i=[];return r.forEach(e=>{i.push({id:e.id,proyecto:e.concept.project,concepto:e.concept.name,status:e.status,inmueble:{nombre:e.property_office.name,clave:e.property_office.property_key,estado:e.property_office.province,municipio:e.property_office.municipality},enviado:e.send_review,creado:e.created_date,modificado:e.modified_date})}),e("setTrabajos",i),e("setCargando",!1),{mensaje:s,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async verificarAsignaciones({commit:e,dispatch:a,getters:t},o){try{const r=await a("serializarAsignacion",o),{data:s,status:i}=await Y.instance.post("trabajos/trabajo/verificar_asignacion/",{assignments:r}),{items:n,message:c}=s,l=[];return n.forEach((e,a)=>{l.push({inmueble:e.property_office,usuario_area:e.area_user,trabajos:[]});for(const t of e.works)l[a].trabajos.push({concepto:t.concept,usuario_asignado:t.assigned_user,estado:t.status,codido_estado:t.status_code,mensaje:t.message,confirmacion:t.confirmation})}),t["getAsignacionesVerificadas"].length?await a("compararAsignaciones",l):e("setAsignacionesVerificadas",l),{mensaje:c,estado:i}}catch(r){return{error:r}}},async confirmarAsignacion({state:e,dispatch:a,commit:t},o){try{const r=await a("serializarAsignacion",o),{data:s,status:i}=await Y.instance.post("trabajos/trabajo/confirmar_asignacion/",{assignments:r}),{items:n}=s;for(const{property_office:a,concept:o}of n){const r=e.asignacionesVerificadas.findIndex(e=>e.inmueble.id==a);if(r>-1){const a=e.asignacionesVerificadas[r].trabajos.findIndex(e=>e.concepto.id==o);a>-1&&e.asignacionesVerificadas[r].trabajos[a].confirmacion&&t("spliceTrabajoAsignacionVerificada",{indice_asignacion:r,indice_trabajo:a}),e.asignacionesVerificadas[r].trabajos.length||t("spliceAsignacionVerificada",r)}}return{mensaje:`Se acaban de asignar ${n.length} trabajos.`,estado:i}}catch(r){return{error:r}}},async serializarAsignacion(e,a){const t=[];return await a.forEach((e,a)=>{t.push({property_office:Object.hasOwn(e.inmueble,"id")?e.inmueble.id:e.inmueble,area_user:Object.hasOwn(e.usuario_area,"id")?e.usuario_area.id:e.usuario_area,works:[]});for(const o of e.trabajos)t[a].works.push({concept:Object.hasOwn(o.concepto,"id")?o.concepto.id:o.concepto,assigned_user:Object.hasOwn(o.usuario_asignado,"id")?o.usuario_asignado.id:o.usuario_asignado,status:Object.hasOwn(o.estado,"id")?o.estado.id:o.estado,message:o.mensaje,confirmation:o.confirmacion})}),t},async defineClaves(e,a){var t=[];return a.forEach(e=>{t.push({id:e.id,proyecto:e.concept.project,concepto:e.concept.name,status:e.status,inmueble:{nombre:e.property_office.name,clave:e.property_office.property_key,estado:e.property_office.province,cliente:e.property_office.client},usuario_asignado:e.assigned_user,usuario_area:e.area_user,creado:e.created_date,modificado:e.modified_date})}),{trabajos:t}},async compararAsignaciones({getters:e,commit:a},t){const o=e["getAsignacionesVerificadas"];for(let r of t){const e=await o.find(e=>e.inmueble.id===r.inmueble.id);if(e){const t=o.indexOf(e);a("addAsignacionesVerificadas",{index:t,payload:r})}else a("pushAsignacionesVerificadas",r)}}},he={getStatusTrabajo:e=>e.estados_trabajo,getEstadoTrabajo:e=>e.estado_trabajo,getTrabajo:e=>e.trabajo,getTrabajos:e=>e.trabajos,getArchivosTrabajo:e=>e.trabajo.files,getCargando:e=>e.cargando,getAsignacionesVerificadas:e=>e.asignacionesVerificadas,getTrabajosSeleccionados:e=>e.seleccionados,getMensaje:e=>e.mensaje};var ve={namespaced:!0,state:ge,actions:_e,mutations:fe,getters:he};const ye={proyectos:[],proyecto:{},conceptos:[],concepto:{},cargando:!1,cargandoConceptos:!1},Ce={setProyectos(e,a){e.proyectos=a},setProyecto(e,a){e.proyecto=a},clearProyecto(e){e.proyecto={},e.concepto={},e.conceptos=[]},setCargando(e,a){e.cargando=a},setConceptos(e,a){e.conceptos=a},setConcepto(e,a){e.concepto.push(a)},setCargandoConceptos(e,a){e.cargandoConceptos=a},clearConcepto(e){e.concepto={}}},je={async obtenerProyectos({commit:e}){e("setCargando",!0);try{const{data:a}=await Y.instance.get("/proyectos/proyecto/"),{items:t,message:o}=a,r=[];return t.forEach(e=>{r.push({id:e.id,nombre:e.name})}),e("setProyectos",r),e("setCargando",!1),{mensaje:o}}catch(a){return e("setCargando",!1),{error:a.response.data.errors}}},async obtenerProyecto({state:e,commit:a},{id:t}){a("setCargando",!0);const o=e.proyectos.find(e=>e.id==t);a("setProyecto",o),a("setCargando",!1)},async crearProyecto({state:e,commit:a},t){a("setCargando",!0);try{const{data:o,status:r}=await Y.instance.post("proyectos/proyecto/",{name:t}),{items:s,message:i}=o,n={id:s.id,nombre:s.name};return a("setProyecto",n),e.proyectos.push(n),a("setCargando",!1),{mensaje:i,estado:r}}catch(o){return a("setCargando",!1),{error:o}}},async crearConcepto({commit:e,state:a},{nombre:t,proyecto:o}){try{e("setCargandoConceptos",!0);const{data:r,status:s}=await Y.instance.post("proyectos/conceptos/",{name:t,project:o}),{items:i,message:n}=r,c={id:i.id,nombre:i.name};return a.conceptos.push(c),e("setCargandoConceptos",!1),{mensaje:n,estado:s}}catch(r){return{error:r.response.data.errors.name[0]}}},async obtenerConceptos({commit:e},a){e("setCargandoConceptos",!0);try{const{data:o,status:r}=await Y.instance.get(`proyectos/proyecto/${a}/`),{items:s,message:i}=o,{concepts:n}=s;var t=[];return n.forEach(e=>{t.push({id:e.id,nombre:e.name})}),e("setConceptos",t),e("setCargandoConceptos",!1),{mensaje:i,estado:r}}catch(o){return e("setCargandoConceptos",!1),{error:o}}}},xe={getCargando:e=>e.cargando,getCargandoConceptos:e=>e.cargandoConceptos,getProyectos:e=>e.proyectos,getProyecto:e=>e.proyecto,getConceptos:e=>e.conceptos};var ke={namespaced:!0,state:ye,mutations:Ce,actions:je,getters:xe},$e={namespaced:!0,state:{notificaciones:[],numeroNotificaciones:0,numeroNotificacionesDiferencia:0},mutations:{MUT_setNotificaciones(e,a){Q("notificaciones",a),e.notificaciones=a},limpiarNotificaciones(e){Q("notificaciones",[]),e.notificaciones=[]}},actions:{iniciarNotificaciones({commit:e}){const a=K("notificaciones");e("MUT_setNotificaciones",a||[])},async traerNotificaciones({commit:e},{id_usuario:a}){try{const{data:t}=await Y.instance.get(`/notificaciones/notificacion/${a}/`),{items:o,message:r}=t;return e("MUT_setNotificaciones",o),{message:r}}catch(t){const e=String(t.response.data.error);return{erorr:e}}},async actualizarNotificaciones(e,{id:a,user:t,is_read:o}){try{const{data:e}=await Y.instance.put(`/notificaciones/notificacion/${a}/`,{user:t,is_read:o}),{message:r}=e;return{message:r}}catch(r){const e=String(r.response.data.error);return{erorr:e}}}},getters:{getNotificaciones:e=>e.notificaciones,getNumeroNotificacionesDiferencia:e=>e.numeroNotificacionesDiferencia}};const we={verificarPeticiones:[],peticionesVerificadas:[],cargando:!1,recurso:{},solicitud_recurso:{trabajos:[],tipo_pago:"",concepto_pago:"",pago_separado:!1},recursos:[],comentarios:[],pago:{},pagos:[],archivo:{},archivos:[]},Ie={deleteRecurso(e,a){e.recursos.splice(a,1)},setRecursos(e,a){e.recursos=a},cleanRecursos(e){e.recursos=[]},cleanRecurso(e){e.recurso={}},claerSolicitudRecurso(e){e.solicitud_recurso={trabajos:[],tipo_pago:"",metodo_pago:"",pago_separado:!1},e.verificarPeticiones=[],e.peticionesVerificadas=[]},cleanComentarios(e){e.comentarios=[]},clearArchivos(e){e.archivos=[]},deleteArchivo(e,a){e.archivos.splice(a,1)},setVerificarPeticiones(e,a){e.verificarPeticiones=a},assignPeticionVerificada(e,{editar_index:a,editar_peticion:t}){e.peticionesVerificadas[a]=Object.assign(e.peticionesVerificadas[a],t)},setPeticionesVerificadas(e,a){e.peticionesVerificadas=a},deleteVerificarPeticionesVerificadas(e,a){e.verificarPeticiones.splice(a,1),e.peticionesVerificadas.splice(a,1)},setRecurso(e,a){e.recurso=a},setSolicitudRecurso(e,a){e.solicitud_recurso=a},setSolicitudRecursoPagoSeparado(e,a){e.solicitud_recurso.pago_separado=a},assignSolicitudRecurso(e,a){e.solicitud_recurso=Object.assign({},e.solicitud_recurso,a)},setComentarios(e,a){e.comentarios=a},addComentario(e,a){e.comentarios.push(a)},setPago(e,a){e.pago=a},setArchivos(e,a){e.archivos=a},addArchivo(e,a){e.archivos.push(a)},setPagos(e,a){e.pagos=a},setCargando(e,a){e.cargando=a}},Se={async recuperarRecursos({commit:e},{request:a,tipo_pago:t,validado:o}){try{e("cleanRecursos"),e("setCargando",!0);const r=[],{data:s,status:i}=await Y.instance.get(a?"peticiones/recursos/?request="+a:`peticiones/recursos/?type_pay=${t}&validate=${o}`),{items:n,message:c}=s;return n.forEach(e=>{r.push({id:e.id,tipo_pago:e.type_pay,importe:e.total_amout,creado:e.created_date,banco:e.bank,datos_bancarios:e.bank_data,solicitud:e.request,validado:e.validate,concepto:e.concept})}),e("setRecursos",r),e("setCargando",!1),{mensaje:c,estado:i}}catch(r){return e("setCargando",!1),{error:r}}},async recuperarRecursosUsuario({commit:e},{solicitado:a,gestor:t,solicitud:o,tipo_pago:r}){try{e("cleanRecursos"),e("setCargando",!0);var s="peticiones/recursos/trabajo/";a?s=s+"?solicitado="+a:s+=void 0!==r?`?gestor=${t}&tipo_pago=${r}`:`?gestor=${t}&request=${o}`;const i=[],{data:n,status:c}=await Y.instance.get(s),{items:l,message:u}=n;return l.forEach(e=>{i.push({id:e.id,tipo_pago:e.type_pay,importe:e.total_amout,creado:e.created_date,pago_separado:e.pay_separately,solicitud:e.request,validado:e.validate,concepto:e.concept})}),e("setRecursos",i),e("setCargando",!1),{mensaje:u,estado:c}}catch(i){return e("setCargando",!1),{error:i}}},async recuperarRecurso({commit:e},a){try{e("setCargando",!0);const{data:t}=await Y.instance.get(`peticiones/recursos/${a}/`),{items:o,message:r}=t,s={id:o.id,creado:o.created_date,importe:o.total_amout,banco:o.bank,tipo_pago:o.type_pay,datos_bancarios:o.bank_data,solicitud:o.request,concepto:o.concept,peticiones:[]};for(const e of o.petitions)s.peticiones.push({trabajo:{id:e.work.id,concepto:e.work.concept,gestor:e.work.area_user,solicitado:e.work.assigned_user},inmueble:{cliente:e.work.property_office.client,nombre:e.work.property_office.name,clave:e.work.property_office.property_key,estado:e.work.property_office.province,municipio:e.work.property_office.municipality},importe:e.amount});return e("setCargando",!1),e("setRecurso",s),{mensaje:r}}catch(t){return e("setCargando",!1),{mensaje:t.response.data.message}}},async crearRecurso({state:e,commit:a}){try{const{tipo_pago:t,concepto_pago:o,pago_separado:r}=e.solicitud_recurso,s=r?"peticiones/recursos/multiple/":"peticiones/recursos/",{peticionesVerificadas:i}=e,n={type_pay:t,concept:o,pay_separately:r,works:[]};for(const e of i)n.works.push({amount:e.monto,work:e.trabajo,method_pay:e.metodo_pago,bank_data:e.datos_bancarios,beneficiary:e.beneficiario.nombre,bank:e.banco});const{data:c,status:l}=await Y.instance.post(s,n),{message:u}=c;return a("claerSolicitudRecurso"),{mensaje:u,estado:l}}catch(t){return{error:t}}},async confirmarValidarRecuruso({commit:e},{id:a,confirmacion:t,validacion:o,indice:r}){try{e("setCargando",!0);const s=t?{request:t}:{validate:o},{data:i,status:n}=await Y.instance.patch(`peticiones/recursos/${a}/`,s),{message:c}=i;return e("deleteRecurso",r),e("setCargando",!1),{mensaje:c,estado:n}}catch(s){return e("setCargando",!1),{error:s}}},async eliminarSolicitudRecurso({commit:e},{id:a,indice:t}){try{e("setCargando",!0);const{data:o,status:r}=await Y.instance.delete(`peticiones/recursos/${a}/`),{message:s}=o;return e("deleteRecurso",t),e("setCargando",!1),{mensaje:s,estado:r}}catch(o){return e("setCargando",!1),{error:o}}},async deletePeticion({commit:e},{id:a,editedIndex:t}){try{return await Y.instance.delete(`peticiones/peticion/${a}/`),e("deletePeticion",t),{mensaje:"Eliminación exitosa."}}catch(o){return{error:"404",message:"No se elimino el pago."}}},async verificarPeticiones({commit:e},a){try{const t=[],o=[];for(const e of a)t.push({work:e.trabajo,amount:e.monto,method_pay:"",bank_data:null,beneficiary:"",bank:""});const{data:r,status:s}=await Y.instance.post("peticiones/peticion/verificar_peticiones/",{works:t}),{message:i,items:n}=r;return n.forEach(e=>{e.error?o.push({error:"Este trabajo ya fue mandado a solicitud de recursos"}):o.push({trabajo:e.work,monto:e.amount,metodo_pago:"",datos_bancarios:null,beneficiario:"",banco:""})}),e("setPeticionesVerificadas",o),{mensaje:i,estado:s}}catch(t){return{error:t}}},async confirmarPeticiones(e,a){try{const e=[],t=[];for(const n of a)n.error||e.push({work:n.trabajo,amount:n.monto});const{data:o,status:r}=await Y.instance.post("peticiones/peticion/confirmar_peticiones/",{works:e}),{message:s,items:i}=o;return i.forEach(e=>{e.error||t.push({id:e.id,trabajo:e.work,monto:e.amount})}),{mensaje:s,estado:r,peticiones:t}}catch(t){return{error:t}}},async subirArchivo({commit:e},{archivos:a,recurso:t,usuario:o}){try{e("setCargando",!0);const r=new FormData;r.append("resource",t),r.append("changed_by",o);for(const e of a)r.append("files",e);const{data:s,status:i}=await Y.instance.post("peticiones/comprobante/",r),{items:n,message:c}=s;for(const a in n){const t={id:a.id,usuario:a.changed_by,archivo:a.file};e("addArchivo",t)}return e("setCargando",!1),{mensaje:c,estado:i}}catch(r){return e("setCargando",!1),{error:r}}},async recuperarArchivoRecurso({commit:e},a){try{e("setCargando",!0);const{data:t,status:o}=await Y.instance.get("peticiones/comprobante/?resource="+a),{items:r,message:s}=t,i=[];for(const e of r)i.push({id:e.id,archivo:e.file});return e("setArchivos",i),e("setCargando",!1),{mensaje:s,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async eliminarArhivoRecurso({commit:e},{id:a,indice:t}){try{e("setCargando",!0);const{data:o,status:r}=await Y.instance.delete(`peticiones/comprobante/${a}/`),{message:s}=o;return e("deleteArchivo",t),e("setCargando",!1),{mensaje:s,estado:r}}catch(o){return e("setCargando",!1),{error:o}}},async getPagos({commit:e}){try{const{data:a}=await Y.instance.get("peticiones/pagos/"),{items:t}=a,o=[];return t.forEach(e=>{o.push({id:e.id,nombre:e.name,total:e.total,recipo:e.receipt,creado:e.created_date})}),e("setPagos",o),{error:null}}catch(a){return{error:"Consulta satisfactoria."}}},async getPago(e,a){try{const{data:e}=await Y.instance.get(`peticiones/pagos/${a}/`),{items:t}=e;window.open(t.receipt.file)}catch(t){return{error:"Consulta satisfactoria."}}},async recuperarComentariosRecurso({commit:e},a){try{e("setCargando",!0);const{data:t,status:o}=await Y.instance.get("peticiones/comentario/?resource="+a),{items:r,message:s}=t,i=[];for(const e of r)i.push({id:e.id,usuario:e.changed_by,comentario:e.comment});return e("setComentarios",i),e("setCargando",!1),{mensaje:s,estado:o}}catch(t){return e("setCargando",!1),{error:t}}},async hacerComentario({commit:e},{usuario:a,recurso:t,comentario:o}){try{const{data:r,status:s}=await Y.instance.post("peticiones/comentario/",{resource:t,changed_by:a,comment:o}),{items:i,message:n}=r,c={id:i.id,comentario:i.comment,usuario:i.changed_by};return e("addComentario",c),{mensaje:n,estado:s}}catch(r){return{error:r}}}},Ae={getRecursos:e=>e.recursos,getVerificarPeticiones:e=>e.verificarPeticiones,getPeticionesVerificadas:e=>e.peticionesVerificadas,getSolicitudRecurso:e=>e.solicitud_recurso,getRecurso:e=>e.recurso,getComentarios:e=>e.comentarios,getArchivo:e=>e.archivo,getArchivos:e=>e.archivos,getPago:e=>e.pago,getPagos:e=>e.pagos,getCargando:e=>e.cargando};var Me={namespaced:!0,state:we,mutations:Ie,actions:Se,getters:Ae};const Pe={beneficiario:null,beneficiarios:[],cargando:!1},Ee={setBeneficiario(e,a){e.beneficiario=a},setBeneficiarios(e,a){e.beneficiarios=a},addBeneficiario(e,a){e.beneficiarios.push(a)},setCargando(e,a){e.cargando=a},deleteBeneficiario(e,a){e.beneficiarios.splice(a,1)},clearBeneficiario(e){e.beneficiario=null}},De={async obtenerBeneficiarios({commit:e}){try{const a=[{nombre:"Pepe",clave:0x18b241f756c6550,numero_tarjeta:"8000001234567899",cuenta:1234567890},{nombre:"Municipio las brisas",clave:0x18b241f756c6550,numero_tarjeta:0xe35fadcb002db,cuenta:"n/a"}];return e("setBeneficiarios",a),{mensaje:"ok",estado:200}}catch(a){return{error:a}}},async crearBeneficiario({commit:e},{nombre:a,clave:t,numero_tarjeta:o}){try{const r={id:0,nombre:a,clave:t,numero_tarjeta:o};return e("setBeneficiario",r),e("addBeneficiario",r),{mensaje:"ok",estado:200}}catch(r){return{error:r}}},async actualizarBeneficiario({commit:e},{beneficiario:a}){try{return e("setBeneficiario",a),{mensaje:"ok",estado:200}}catch(t){return{error:t}}},async eliminarBeneficiario({commit:e},{editar_index:a}){try{return e("deleteBeneficiario",a),e("clearBeneficiario"),{mensaje:"ok",estado:200}}catch(t){return{error:t}}}},Te={getBeneficiarios:e=>e.beneficiarios,getBeneficiario:e=>e.beneficiario};var Oe={namespaced:!0,state:Pe,mutations:Ee,actions:De,getters:Te};const Ve={alertas:[]},Ue={setAlertas(e,a){e.alertas=a},addAlertas(e,a){e.alertas.push(a)},clearAleras(e){e.alertas=[]},removeAlerta(e,a){e.alertas.splice(a,1)}},Fe={},Re={getAlertas:e=>e.alertas};var Ne={namespaced:!0,state:Ve,mutations:Ue,actions:Fe,getters:Re};const Be={cargando:!1},ze={setCargando(e,a){e.cargando=a}},Le={async ping({commit:e}){try{return e("setCargando",!0),await Y.instance.get(),!0}catch(a){return e("setCargando",!1),!1}}},Ge={getCargando:e=>e.cargando};var qe={namespaced:!0,state:Be,mutations:ze,actions:Le,getters:Ge};const Xe={MOD_autenticacion:te,usuario:oe,grupo:ce,cliente:le,inmueble:ue,ubicacion:de,trabajo:ve,MOD_notificaciones:$e,recurso:Me,proyecto:ke,beneficiario:Oe,alerta:Ne,conexion:qe};function He(e,a){return Object.keys(e).filter(t=>{const{actions:o,namespaced:r}=e[t];return!0===r&&Object.prototype.hasOwnProperty.call(o,a)})}const Je=He(Xe,q),Ye=He(Xe,X);var Ke={computed:{fotoUsuario(){return this.$store.getters["MOD_autenticacion/getFotoUsuario"]},usernname(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]},rolUsuario(){return this.$store.getters["MOD_autenticacion/getUserPermissions"]}},methods:{async cerrarSesion(){await Ye.forEach(e=>{this.$store.dispatch(`${e}/${X}`)}),this.$router.push({name:"Login"})}}},Qe=Ke,Ze=Object(C["a"])(Qe,L,G,!1,null,null,null),We=Ze.exports,ea={components:{notificaciones:N,"menu-navegacion-principal":x,"ver-perfil-y-mas":We},computed:{rolUsuario(){return this.$store.getters["MOD_autenticacion/getUserPermissions"]},isAdministrador(){return"Administrador"==this.rolUsuario||"Coordinador"==this.rolUsuario}}},aa=ea,ta=Object(C["a"])(aa,b,g,!1,null,null,null),oa=ta.exports,ra=t("0798"),sa=t("2db4"),ia=function(){var e=this,a=e._self._c;return a(sa["a"],{attrs:{right:"",top:"",color:"transparent"},model:{value:e.snackbar,callback:function(a){e.snackbar=a},expression:"snackbar"}},e._l(e.alertas,(function(t,o){return a(ra["a"],{key:o,attrs:{type:e.tipoAlerta(t),border:"left","colored-border":""},scopedSlots:e._u([{key:"close",fn:function(){return[a(m["a"],{attrs:{icon:"",right:""},on:{click:function(a){return e.cerrarAlerta(o)}}},[a(p["a"],[e._v("mdi-close")])],1)]},proxy:!0}],null,!0)},[t.error?a("div",[t.error.response.data.message?a("span",[e._v(" "+e._s(t.error.response.data.message)),a("br"),a("b",[e._v(e._s(Object.hasOwn(t.error.response.data,"error")?Object.values(t.error.response.data.error)[0][0]:""))])]):a("span",[e._v(e._s(t.error.response.data.error)+" "),a("br")])]):a("div",[a("span",{domProps:{textContent:e._s(t.mensaje)}})])])})),1)},na=[],ca={data:()=>({snackbar:!1}),computed:{alertas(){return this.$store.getters["alerta/getAlertas"]}},methods:{tipoAlerta({estado:e,error:a}){const t=a?a.response.status:e;switch(!0){case t<226:return"success";case t<451:return"warning";default:return"error"}},cerrarAlerta(e){this.$store.commit("alerta/removeAlerta",e),this.snackbar=!!this.alertas.length}},watch:{alertas(){this.snackbar=!!this.alertas.length},snackbar(e){e||this.$store.commit("alerta/clearAleras")}}},la=ca,ua=Object(C["a"])(la,ia,na,!1,null,null,null),da=ua.exports,ma={components:{encabezado:oa,alerta:da},methods:{TemaOscuro(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}},computed:{isUsuarioAutenticado(){return this.$store.getters["MOD_autenticacion/isUsuarioAutenticado"]}}},pa=ma,ba=Object(C["a"])(pa,u,d,!1,null,null,null),ga=ba.exports,fa=t("8c4f"),_a=t("0e8f"),ha=t("a722"),va=t("f6c4"),ya=t("8654"),Ca=function(){var e=this,a=e._self._c;return a(r["a"],{attrs:{id:"inspire"}},[a(va["a"],{staticClass:"grey"},[a(i["a"],{attrs:{fluid:"","fill-height":""}},[a(ha["a"],{attrs:{"align-center":"","justify-center":""}},[a(_a["a"],{attrs:{xs12:"",sm8:"",md4:""}},[a(w["a"],{attrs:{lass:"mx-auto",elevation:"5",loading:e.loading}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Iniciar sesión ")]),a(f["c"],{staticClass:"pt-5"},[a(ya["a"],{attrs:{label:"Nombre de usuario o correo",type:"text",outlined:""},model:{value:e.cuenta,callback:function(a){e.cuenta=a},expression:"cuenta"}}),a(ya["a"],{attrs:{label:"Contraseña",type:e.valor?"password":"text","append-icon":e.valor?"mdi-eye":"mdi-eye-off",outlined:""},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.login()},"click:append":()=>e.valor=!e.valor},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),a("div",{staticClass:"p"},[a("a",{attrs:{href:"#"}},[e._v("¿Olvidaste tu contraseña?")])])],1),a(f["a"],[a(m["a"],{attrs:{color:"primary",block:""},on:{click:function(a){return e.login()}}},[e._v(" Iniciar sesión ")])],1),a(f["c"],[e._v(" ¿No tienes cuenta? "),a("a",{attrs:{href:""}},[e._v(" Crear una cuenta")])])],1)],1)],1)],1)],1)],1)},ja=[],xa={name:"Login",data:()=>({cuenta:null,email:null,nombre_usuario:null,password:null,loading:!1,valor:String}),computed:{nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},methods:{async login(){const{email:e,nombre_usuario:a,password:t}=this;this.loading=!0;const{error:o,estado:r,mensaje:s}=await this.$store.dispatch("MOD_autenticacion/login",{email:e,nombreUsuario:a,password:t});if(this.loading=!1,this.$store.commit("alerta/addAlertas",{estado:r,mensaje:s,error:o}),!o){const{nombreUsuario:e}=this;this.$router.push({name:"TrabajoUsuario",params:{nombreUsuario:e}})}},validarCuenta(e){/^\w+([/.-]?\w+)*@\w+([/.-]?\w+)*(\.\w{2,4})+$/.test(e)?(this.email=e,this.nombre_usuario=null):(this.email=null,this.nombre_usuario=e)}},watch:{cuenta:function(){this.validarCuenta(this.cuenta)}}},ka=xa,$a=Object(C["a"])(ka,Ca,ja,!1,null,null,null),wa=$a.exports,Ia=t("62ad"),Sa=t("0fd9"),Aa=t("8414"),Ma=t("1e06"),Pa=function(){var e=this,a=e._self._c;return a(va["a"],[a(Sa["a"],{attrs:{justify:"center",dense:""}},[a(Ia["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2",xs:"2"}},[a("cliente")],1),a(Ia["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a("trabajos")],1),a(Ia["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2",xs:"2"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"grey lighten-2"},[e._v("Últimos cambios")]),a(f["c"],[a(Aa["a"],[a(Ma["a"],{staticClass:"text-right"},[e._v(" Se eliminó el recurso ")]),a(Ma["a"],[e._v("Se modificó la solicitud de recurso")]),a(Ma["a"],[e._v("Se creó un nuevo inmuebles")])],1)],1)],1)],1)],1)],1)},Ea=[],Da=t("8e36"),Ta=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"grey lighten-2",attrs:{dense:""}},[e._v(" Cliente "),a(c["a"]),a("nuevo-cliente")],1),a(I["a"]),a("listar-clientes"),a(Sa["a"],[e.isCargando?a(Ia["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Obteniendo los clientes ")]):e._e(),e.isCargando||e.isCliente?e._e():a(Ia["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" No hay clientes ")]),a(Ia["a"],{attrs:{cols:"6"}},[a(Da["a"],{attrs:{active:e.isCargando,indeterminate:e.isCargando,absolute:"",bottom:"",color:"deep-purple accent-4"}})],1)],1)],1)},Oa=[],Va=t("169a"),Ua=t("4bd4"),Fa=t("a844"),Ra=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{width:"500",persistent:"",transition:"dialog-top-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({attrs:{small:"",color:"success"}},"v-btn",o,!1),t),[a(p["a"],{attrs:{left:""}},[e._v("mdi-bank")]),e._v("Crear ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(w["a"],{staticClass:"mx-auto",attrs:{"max-width":"500"}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Crear nuevo cliente "),a(c["a"]),a(m["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){return e.cerrarDialogo()}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(f["c"],[a(Ua["a"],{ref:"formulario",staticClass:"container",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(ya["a"],{attrs:{label:"Nombre cliente *",rules:[e=>!!e||"El nombre del cliente o razón social es necesario"],dense:"",outlined:"",clearable:"",filled:""},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}}),a(ya["a"],{attrs:{label:"RFC",dense:"",clearable:"",outlined:"",filled:""},model:{value:e.rfc,callback:function(a){e.rfc=a},expression:"rfc"}}),a(Fa["a"],{attrs:{label:"Dirección",dense:"",outlined:"",clearable:"",filled:""},model:{value:e.direccion,callback:function(a){e.direccion=a},expression:"direccion"}})],1),a(f["a"],{staticClass:"justify-end"},[a(m["a"],{attrs:{color:"error",outlined:""},on:{click:function(a){return e.cerrarDialogo()}}},[e._v("Cancelar")]),a(m["a"],{attrs:{color:"success",disabled:!e.validacion,outlined:""},on:{click:function(a){return e.crear()}}},[e._v("Crear")])],1)],1)],1)],1)},Na=[],Ba={data:()=>({validacion:!1,nombre:null,rfc:null,direccion:null,dialog:!1,uploadDialog:!0,multiple:!0}),methods:{async crear(){if(this.$refs.formulario.validate()){const{nombre:e,rfc:a,direccion:t}=this,{error:o,mensaje:r,estado:s}=await this.$store.dispatch("cliente/nuevo",{nombre:e,rfc:a,direccion:t});o||this.cerrarDialogo(),this.$store.commit("alerta/addAlertas",{estado:s,mensaje:r,error:o})}},cerrarDialogo(){this.$refs.formulario.reset(),this.dialog=!1}}},za=Ba,La=Object(C["a"])(za,Ra,Na,!1,null,null,null),Ga=La.exports,qa=t("8270"),Xa=function(){var e=this,a=e._self._c;return a(S["a"],{attrs:{dense:""}},[a(E["a"],{attrs:{rounded:""}},e._l(e.clientes,(function(t,o){return a(A["a"],{key:o,attrs:{link:""}},[a(qa["a"],{on:{click:function(a){return e.irInmuebles(t)}}},[a(k["a"],{attrs:{color:"grey"}},[a("span",{staticClass:"white--text"},[e._v(e._s(t.nombre[0].toUpperCase()))])])],1),a(P["b"],{on:{click:function(a){return e.irInmuebles(t)}}},[a(P["d"],{domProps:{textContent:e._s(t.nombre)}})],1)],1)})),1)],1)},Ha=[],Ja={computed:{clientes(){return this.$store.getters["cliente/getClientes"]}},created(){this.inicializarClientes()},methods:{async inicializarClientes(){const{error:e,mensaje:a,estado:t}=await this.$store.dispatch("cliente/obtenerClientes");e&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:e})},irInmuebles(e){this.$store.dispatch("cliente/recuperarCliente",e),this.$router.push({name:"inmuebles",params:{cliente:e.nombre}})}}},Ya=Ja,Ka=Object(C["a"])(Ya,Xa,Ha,!1,null,null,null),Qa=Ka.exports,Za={components:{"nuevo-cliente":Ga,"listar-clientes":Qa},computed:{isCargando(){return this.$store.getters["cliente/getCargando"]},isCliente(){return this.$store.getters["cliente/isClientes"]}}},Wa=Za,et=Object(C["a"])(Wa,Ta,Oa,!1,null,null,null),at=et.exports,tt=function(){var e=this,a=e._self._c;return a("listar-trabajos",{attrs:{isFiltadoBtn:!0,headers:e.headers,objAsignar:{isAsignarBtn:!0,redireccionar:"asignar-trabajos-usuario"}}})},ot=[],rt=t("8fea"),st=t("6b53"),it=t("71d9"),nt=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Trabajos "),a(c["a"]),a(ya["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),a(f["b"],{staticClass:"grey lighten-2"},[e._v(" "+e._s(e.trabajos.length+(1===e.trabajos.length?" Trabajo":" Trabajos"))+" ")]),a(f["c"],[a(st["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(rt["a"],{staticClass:"elevation-5",attrs:{loading:e.isCargando,headers:e.headers,items:e.trabajos,"items-per-page":-1,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de n"},"no-data-text":e.mensaje,search:e.search,"show-select":e.mostrar_seleccionados,"single-select":e.singleSelect},scopedSlots:e._u([{key:"top",fn:function(){return[a(it["a"],{attrs:{flat:""}},[a(c["a"]),e.is_peticion?a(D["a"],{attrs:{"offset-y":"",left:"",disabled:e.isTrabajos},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({staticClass:"ma-5 primary"},"v-btn",o,!1),t),[e._v(" Solicitar recurso "),a(p["a"],{attrs:{right:""}},[e._v(e._s("true"===o["aria-expanded"]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}],null,!1,3105911617)},[a(S["a"],[a(A["a"],{attrs:{link:""},on:{click:function(a){return e.$router.push({name:"peticion-recursos"})}}},[a(P["d"],[e._v(" Crear nueva solicitud de recurso ")])],1),a(A["a"],{attrs:{link:""}},[a(P["d"],[e._v(" Crear +1 solicitud de recurso ")])],1)],1)],1):e._e(),e.objAsignar.isAsignarBtn?a(m["a"],{staticClass:"success ma-1",attrs:{disabled:e.objAsignar.deshabilitar},on:{click:function(a){return e.redirecionar()}}},[e._v(" Asignar trabajo "),a(p["a"],{attrs:{right:""}},[e._v("mdi-file-account")])],1):e._e(),e.isFiltadoBtn?a("filtrado-trabajos"):e._e()],1)]},proxy:!0},{key:"item.inmueble.nombre",fn:function({item:t}){return[a("span",[e._v(e._s(t.inmueble.nombre)+" ("),a("b",[e._v(e._s(t.inmueble.clave)+")")])])]}},{key:"item.creado",fn:function({item:a}){return[e._v(" "+e._s(e.getFecha(a.creado))+" ")]}},{key:"item.modificado",fn:function({item:t}){return[a("span",{class:e.getColor(t.modificado)+" lighten-3 ",staticStyle:{display:"flex","text-align":"center"}},[e._v(e._s(e.getFecha(t.modificado)))])]}},{key:"item.property_office",fn:function({item:a}){return[e._v(" "+e._s(a.property_office?a.property_office.name:"")+" ("+e._s(a.property_office?a.property_office.property_key:"")+") ")]}}]),model:{value:e.trabajos_seleccionados,callback:function(a){e.trabajos_seleccionados=a},expression:"trabajos_seleccionados"}})],1)],1)],1)},ct=[],lt=t("b974"),ut=t("7e85"),dt=t("e516"),mt=t("9c54"),pt=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{scrollable:"","max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({staticClass:"ma-1",attrs:{color:"primary"}},"v-btn",o,!1),t),[a(p["a"],{attrs:{left:""}},[e._v("mdi-filter-variant")]),e._v(" Filtros ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],[1===e.paso_filtro?a(m["a"],{attrs:{icon:""},on:{click:function(a){e.dialog=!1}}},[a(p["a"],[e._v("mdi-chevron-left")])],1):a(m["a"],{attrs:{icon:""},on:{click:function(a){e.paso_filtro=1,e.filtro=-1}}},[a(p["a"],[e._v("mdi-chevron-left")])],1),a(c["a"]),e._v(" "+e._s(e.filtro>-1?e.opciones_filtrado[e.filtro].text:"")+" "),a(c["a"]),a(m["a"],{attrs:{icon:"",color:"primary"},on:{click:function(a){return e.cleanAll()}}},[a(p["a"],[e._v("mdi-eraser")])],1)],1),a(I["a"]),a(ut["a"],{attrs:{elevation:"0"},model:{value:e.paso_filtro,callback:function(a){e.paso_filtro=a},expression:"paso_filtro"}},[a(mt["b"],[a(dt["a"],{attrs:{step:"1"}},[a(S["a"],[a(E["a"],{model:{value:e.filtro,callback:function(a){e.filtro=a},expression:"filtro"}},e._l(e.opciones_filtrado,(function(t,o){return a(A["a"],{key:o,on:{click:function(a){e.paso_filtro=o+2}},scopedSlots:e._u([{key:"default",fn:function({active:o}){return[a(P["b"],[a(P["d"],[e._v(e._s(t.text))]),"Cliente"===t.text?a(P["c"],[e._v(e._s(e.cliente?e.cliente.nombre:""))]):e._e(),"Estado"===t.text?a(P["c"],[e._v(e._s(e.estado?e.estado.nombre:""))]):e._e(),"Fecha"===t.text?a(P["c"],[e._v(" "+e._s(e.fecha_menor?e.fecha_menor:"")+" "+e._s(e.fecha_mayor?e.fecha_mayor:"")+" ")]):e._e()],1),a(M["a"],[a(m["a"],{attrs:{"input-value":o,icon:""}},[a(p["a"],[e._v("mdi-chevron-right")])],1)],1)]}}],null,!0)})})),1)],1)],1),a(dt["a"],{attrs:{step:"2"}},[a(lt["a"],{staticClass:"mt-1",attrs:{items:e.clientes,label:"Cliente","item-text":"nombre","return-object":"",outlined:"",dense:"",clearable:""},model:{value:e.cliente,callback:function(a){e.cliente=a},expression:"cliente"}})],1),a(dt["a"],{attrs:{step:"3"}},[a(lt["a"],{staticClass:"mt-1",attrs:{items:e.estados,label:"Estado","item-text":"nombre","return-object":"",outlined:"",dense:"",clearable:""},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}})],1),a(dt["a"],{attrs:{step:"4"}},[a("seleccionar-fecha",{on:{eventoFecha:e.setFechas}})],1)],1)],1),a(f["a"],[a(m["a"],{attrs:{block:"",color:"primary"},on:{click:function(a){return e.inicializarTrabajos()}}},[e._v("Ver trabajos")])],1)],1)],1)},bt=[],gt=t("2e4b"),ft=function(){var e=this,a=e._self._c;return a(Sa["a"],{staticClass:"mt-1",attrs:{justify:"center"}},[a(Ia["a"],{attrs:{cols:"auto"}},[a(D["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.menorIgualFechaSeleccionada,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(a){e.menorIgualFechaSeleccionada=a},"update:return-value":function(a){e.menorIgualFechaSeleccionada=a}},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(ya["a"],e._g(e._b({attrs:{label:"Fecha de inicio","prepend-icon":"mdi-calendar",readonly:"",clearable:"",outlined:"",dense:""},model:{value:e.menorIgualFechaSeleccionada,callback:function(a){e.menorIgualFechaSeleccionada=a},expression:"menorIgualFechaSeleccionada"}},"v-text-field",o,!1),t))]}}]),model:{value:e.menu,callback:function(a){e.menu=a},expression:"menu"}},[a(gt["a"],{attrs:{"no-title":"",scrollable:"",locale:"es-es"},model:{value:e.menorIgualFechaSeleccionada,callback:function(a){e.menorIgualFechaSeleccionada=a},expression:"menorIgualFechaSeleccionada"}})],1)],1),a(Ia["a"],{attrs:{cols:"auto"}},[a(D["a"],{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.mayorIgualFechaSeleccionada,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(a){e.mayorIgualFechaSeleccionada=a},"update:return-value":function(a){e.mayorIgualFechaSeleccionada=a}},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(ya["a"],e._g(e._b({attrs:{label:"Fecha final","prepend-icon":"mdi-calendar",readonly:"",clearable:"",dense:"",outlined:""},model:{value:e.mayorIgualFechaSeleccionada,callback:function(a){e.mayorIgualFechaSeleccionada=a},expression:"mayorIgualFechaSeleccionada"}},"v-text-field",o,!1),t))]}}]),model:{value:e.menu2,callback:function(a){e.menu2=a},expression:"menu2"}},[a(gt["a"],{attrs:{"no-title":"",scrollable:"",locale:"es-es"},model:{value:e.mayorIgualFechaSeleccionada,callback:function(a){e.mayorIgualFechaSeleccionada=a},expression:"mayorIgualFechaSeleccionada"}})],1)],1)],1)},_t=[],ht={data:()=>({menu:!1,menu2:!1,menorIgualFecha:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),mayorIgualFecha:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}),computed:{menorIgualFechaSeleccionada:{get(){return this.menorIgualFecha},set(e){this.$refs.menu.save(e),this.menorIgualFecha=e,this.$emit("eventoFecha",{menorIgualFecha:e,mayorIgualFecha:this.mayorIgualFecha})}},mayorIgualFechaSeleccionada:{get(){return this.mayorIgualFecha},set(e){this.$refs.menu2.save(e),this.mayorIgualFecha=e,this.$emit("eventoFecha",{menorIgualFecha:this.menorIgualFecha,mayorIgualFecha:e})}}}},vt=ht,yt=Object(C["a"])(vt,ft,_t,!1,null,null,null),Ct=yt.exports,jt={data:()=>({dialog:!1,opciones_filtrado:[{text:"Cliente"},{text:"Estado"},{text:"Fecha"}],paso_filtro:1,filtro:-1,cliente:null,estado:null,fecha_mayor:null,fecha_menor:null}),components:{"seleccionar-fecha":Ct},computed:{clientes(){return this.$store.getters["cliente/getClientes"]},estados(){return this.$store.getters["ubicacion/getEstados"]}},created(){this.inicializarTrabajos()},methods:{setFechas({menorIgualFecha:e,mayorIgualFecha:a}){this.fecha_mayor=a,this.fecha_menor=e,this.cliente=null,this.estado=null},async inicializarTrabajos(){const{cliente:e,estado:a,fecha_menor:t,fecha_mayor:o}=this;this.$store.commit("trabajo/cleanTrabajos");const r={client:e?e.id:null,province:a?a.id:null,menorIgualFecha:e||a?null:t,mayorIgualFecha:e||a?null:o},{mensaje:s,error:i,estados:n}=await this.$store.dispatch("trabajo/obtenerTrabajosPendietes",r);i&&await this.$store.commit("alerta/addAlertas",{estado:n,mensaje:s,error:i})},async inicializarClientes(){await this.$store.dispatch("cliente/obtenerClientes")},async inicializarEstados(){await this.$store.dispatch("ubicacion/obtenerEstados")},cleanAll(){this.cliente=null,this.estado=null,this.fecha_mayor=null,this.fecha_menor=null}},watch:{paso_filtro(e){2===e&&this.inicializarClientes(),3===e&&this.inicializarEstados()}}},xt=jt,kt=Object(C["a"])(xt,pt,bt,!1,null,null,null),$t=kt.exports,wt={props:{isFiltadoBtn:{type:Boolean,default:!1},objAsignar:{type:Object,default:()=>({isAsignarBtn:!1,deshabilitar:!1,redireccionar:""})},mostrar_seleccionados:{type:Boolean,default:!1},is_peticion:{type:Boolean,default:!1},headers:{type:Array,default:()=>{}}},data:()=>({search:"",blue:3,singleSelect:!1}),components:{"filtrado-trabajos":$t},computed:{trabajos(){return this.$store.getters["trabajo/getTrabajos"]},isCargando(){return this.$store.getters["trabajo/getCargando"]},isInmuebles(){return this.$store.getters["inmueble/getInmuebles"].length},isTrabajos(){return!this.trabajos.length},trabajos_seleccionados:{get(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},set(e){const a=[];for(const t of e)a.push({trabajo:t.id,monto:0,datos_bancarios:2,tipo_pago:"",beneficiario:"",banco:""});this.$store.commit("recurso/setVerificarPeticiones",a),this.$store.commit("trabajo/setSeleccionados",e)}},mensaje(){return this.$store.getters["trabajo/getMensaje"]}},methods:{holgura(e){var a=new Date(e),t=new Date,o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r=new Date(o),s=(r.valueOf()-a.valueOf())/864e5;return this.blue<s&&(this.blue=s),s},getColor(e){return this.holgura(e)>=5?"red":this.holgura(e)>=2?"orange":"green"},getFecha(e){const a=new Date(e);a.setDate(a.getDate()+1);const t={weekday:"short",year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("es-Mx",t)},verTrabajo(e){this.$store.commit("trabajo/setTrabajo",e),this.$router.push({name:"De"})},redirecionar(){this.$router.push({name:this.objAsignar.redireccionar,params:{nombreUsuario:"fernando",sinClienteSeleccionado:!0}})}}},It=wt,St=Object(C["a"])(It,nt,ct,!1,null,null,null),At=St.exports,Mt={data:()=>({headers:[{value:"proyecto",text:"Proyecto"},{value:"concepto",text:"Concepto"},{value:"status",text:"Status"},{value:"inmueble.cliente",text:"Cliente"},{value:"inmueble.nombre",text:"Inmueble"},{value:"inmueble.estado",text:"Estado inmueble"},{value:"usuario_asignado",text:"Asignado"},{value:"usuario_area",text:"Responsable"},{value:"creado",text:"Creado"},{value:"modificado",text:"Modificado"}]}),components:{"listar-trabajos":At}},Pt=Mt,Et=Object(C["a"])(Pt,tt,ot,!1,null,null,null),Dt=Et.exports,Tt={components:{cliente:at,trabajos:Dt}},Ot=Tt,Vt=Object(C["a"])(Ot,Pa,Ea,!1,null,null,null),Ut=Vt.exports,Ft=t("2bc5"),Rt=t("f625"),Nt=t("71a3"),Bt=t("fe57"),zt=function(){var e=this,a=e._self._c;return a(va["a"],[a(w["a"],{staticClass:"mx-auto"},[a(Ft["a"],{attrs:{items:e.items},scopedSlots:e._u([{key:"item",fn:function({item:t}){return[a(Rt["a"],{attrs:{href:t.href,disabled:t.disabled}},[e._v(" "+e._s(t.text.toUpperCase())+" ")])]}}])}),a(Bt["a"],[a(Nt["a"],{attrs:{to:{name:"inmuebles"}}},[e._v("Inmuebles")]),a(Nt["a"],{attrs:{to:{name:"trabajos-inmuebles"}}},[e._v("Trabajos")]),a(Nt["a"],{attrs:{disabled:""}},[e._v("Recursos")]),a(Nt["a"],{attrs:{to:{name:"configuraciones-cliente"}}},[e._v("Configuraciones")])],1)],1),a("br"),a("router-view")],1)},Lt=[],Gt={data:()=>({items:[]}),computed:{cliente(){return this.$store.getters["cliente/getCliente"]},nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},created(){this.agregarMigas({text:this.nombreUsuario,disable:!1,href:"#"}),this.agregarMigas({text:this.cliente.nombre,disable:!1,href:"#"})},methods:{agregarMigas(e){this.items.push(e)}}},qt=Gt,Xt=Object(C["a"])(qt,zt,Lt,!1,null,null,null),Ht=Xt.exports,Jt=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{"no-gutters":"",justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a(w["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a(f["c"],[a("tabla-inmuebles",{attrs:{cabecera:e.cabecera,inmuebles:e.inmuebles,isMostrarMenuInmuebles:!0,ObjFiltrar:{isBtnFiltrar:!0,isAutocompleteCliente:!1},isCardCabecera:!0}})],1)],1)],1)],1)},Yt=[],Kt=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[e.isCardCabecera?a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Inmuebles ")]):e._e(),e.isCardCabecera?a(f["b"],{staticClass:"grey lighten-2"},[e.seleccionados.length?a("span",[e._v(" Seleccionados "+e._s(e.seleccionados.length)+" de "+e._s(e.inmuebles.length)+" ")]):a("span",[e._v(" "+e._s(1==e.inmuebles.length?e.inmuebles.length+" Inmueble":e.inmuebles.length+" Inmuebles")+" ")])]):e._e(),a(f["d"],[a(c["a"]),a(ya["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar inmueble","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),a(f["c"],[a(st["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(rt["a"],{staticClass:"elevation-5",attrs:{headers:e.cabecera,items:e.inmuebles,"item-key":"id","no-data-text":e.texto_sin_datos,"no-results-text":"No se encontraron registros coincidentes",loading:e.isCargando,"loading-text":"Cargando... por favor espere","items-per-page":10,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"},"show-select":e.isMostrarSeleccion,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a(it["a"],{attrs:{flat:""}},[a(c["a"]),e.verificarInmuebles.length&&e.obj_grupo_btn_verificar_inmuebles.is_btn_borror_inmuebles_verificados?a(m["a"],{attrs:{color:"warning"},on:{click:function(a){return e.clearInmueblesVerificados()}}},[a(p["a"],{attrs:{left:""}},[e._v("mdi-eraser-variant")]),e._v("Borrar inmuebles ")],1):e._e(),e.verificarInmuebles.length&&e.obj_grupo_btn_verificar_inmuebles.is_btn_verificar_inmuebles?a(m["a"],{staticClass:"ma-5",attrs:{color:"success"},on:{click:function(a){return e.crearMultipleInmuebles()}}},[a(p["a"],{attrs:{left:""}},[e._v("mdi-cloud-upload")]),e._v("Crear inmuebles ")],1):e._e(),e.isMostrarMenuInmuebles?a(D["a"],{attrs:{left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(m["a"],e._g(e._b({staticClass:"ma-5 info"},"v-btn",t,!1),o),[e._v(" Añadir inmueble "),a(p["a"],{attrs:{right:""}},[e._v(e._s("true"===t["aria-expanded"]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}],null,!1,622034535)},[a(S["a"],[a(A["a"],{attrs:{link:""}},[a(Va["a"],{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(P["d"],e._g(e._b({},"v-list-item-title",o,!1),t),[e._v("Crear nuevo inmueble")])]}}],null,!1,2952342574),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a("crear-inmueble",{attrs:{dialog:e.dialog},on:{eventSetDialog:e.setDialog}})],1)],1),a(A["a"],{attrs:{link:""},on:{click:function(a){return e.$router.push({name:"cargar-archivo",params:e.cliente.name})}}},[a(P["d"],[e._v(" Cargar archivo ")])],1)],1)],1):e._e(),e.ObjFiltrar.isBtnFiltrar?a("filtrado-inmueble",{attrs:{isAutocompleteCliente:e.ObjFiltrar.isAutocompleteCliente}}):e._e(),a(Va["a"],{attrs:{"max-width":"500"},on:{"click:outside":function(a){return e.setDialogModificarInmueble({isDialog:!1})}},model:{value:e.dialogModificarInmueble,callback:function(a){e.dialogModificarInmueble=a},expression:"dialogModificarInmueble"}},[a("actuliza-inmueble",{attrs:{dialog:e.dialogModificarInmueble},on:{eventSetDialog:e.setDialogModificarInmueble}})],1)],1)]},proxy:!0},{key:"item.status",fn:function({item:t}){return[a(p["a"],{attrs:{color:t.status?"success":"red"}},[e._v(" "+e._s(t.status?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline")+" ")])]}},{key:"item.estado",fn:function({item:t}){return[null===t.estado?a("span",[a(B["a"],{attrs:{color:"error",outlined:""}},[e._v(" "+e._s("No se encontró el estado".concat(" ",e.verificarInmuebles[e.inmuebles.indexOf(t)].estado))+" ")])],1):a("span",[e._v(e._s("string"===typeof t.estado?t.estado:t.estado.nombre))])]}},{key:"item.municipio",fn:function({item:t}){return[null===t.municipio?a("span",[a(B["a"],{attrs:{color:"error",outlined:""}},[e._v(e._s("No se encontró ".concat(" ",e.verificarInmuebles[e.inmuebles.indexOf(t)].municipio))+" ")])],1):a("span",[e._v(e._s("string"===typeof t.municipio?t.municipio:t.municipio.nombre))])]}},{key:"item.localidad",fn:function({item:t}){return[null===t.localidad?a("span",[e._v("No encontrado")]):a("span",[e._v(e._s("string"===typeof t.localidad?t.localidad:t.localidad.nombre))])]}},{key:"item.accion",fn:function({item:t}){return[a(m["a"],{attrs:{icon:"",color:"info"},on:{click:function(a){return e.setInmueble(t)}}},[a(p["a"],[e._v("mdi-pencil")])],1),a("confirmar",{attrs:{mensaje:`Estás a punto de eliminar el inmueble "${t.nombre}". ¿Estás seguro?`,indice:e.inmuebles.indexOf(t),id:t.id,tipo_pago:"¿Eliminar inmueble?",icon:"mdi-delete",color:"error"},on:{emitConfirmacion:e.eliminarInmueble}})]}}]),model:{value:e.seleccionados,callback:function(a){e.seleccionados=a},expression:"seleccionados"}})],1)],1)],1)},Qt=[],Zt=t("c6a6"),Wt=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto",attrs:{outlined:"","max-width":"500"}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v("Crear nuevo inmueble "),a(c["a"]),a(m["a"],{attrs:{icon:"",fab:"",color:"error"},on:{click:function(a){return e.cerrarDialgo({isInmuebl_creado:!1})}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(f["c"],{staticClass:"mt-4"},[a(Ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(ya["a"],{attrs:{label:"Nombre*",rules:[e=>!!e||"Es necesario un nombre"],dense:"",outlined:"",filled:"",clearable:""},model:{value:e.inmueble.nombre,callback:function(a){e.$set(e.inmueble,"nombre",a)},expression:"inmueble.nombre"}}),a(ya["a"],{attrs:{label:"Clave*",rules:[e=>!!e||"Es necesario una clave"],outlined:"",filled:"",clearable:""},model:{value:e.inmueble.clave,callback:function(a){e.$set(e.inmueble,"clave",a)},expression:"inmueble.clave"}}),a(ya["a"],{attrs:{label:"Clave (SIRH, Convive)",rules:[e=>!!e||"Es necesario una clave"],outlined:"",filled:"",clearable:""},model:{value:e.inmueble.clave_2,callback:function(a){e.$set(e.inmueble,"clave_2",a)},expression:"inmueble.clave_2"}}),a(Zt["a"],{attrs:{label:"Estado*",rules:[e=>!!e||"Es necesario elejir un Estado"],items:e.estados,"item-text":"nombre","no-data-text":"No se encontraron estados.","return-object":"",outlined:"",filled:"",clearable:""},on:{change:function(a){e.inmueble.estado?e.obtenerMunicipiosDeEstado(e.inmueble.estado):e.$store.commit("ubicacion/clearMunicipios")}},model:{value:e.inmueble.estado,callback:function(a){e.$set(e.inmueble,"estado",a)},expression:"inmueble.estado"}}),a(Zt["a"],{attrs:{label:"Municipio*",rules:[e=>!!e||"Es necesario elejir un Municipio"],items:e.municipios,"item-text":"nombre","no-data-text":"No se encontraron municipios.","return-object":"",outlined:"",filled:"",clearable:""},model:{value:e.inmueble.municipio,callback:function(a){e.$set(e.inmueble,"municipio",a)},expression:"inmueble.municipio"}}),a(Zt["a"],{attrs:{label:"Localidad","item-text":"nombre",items:e.localidades,"return-object":"","no-data-text":"No se encontraron localidades.",outlined:"",filled:"",clearable:""},model:{value:e.inmueble.localidad,callback:function(a){e.$set(e.inmueble,"localidad",a)},expression:"inmueble.localidad"}}),a(Fa["a"],{attrs:{label:"Direccion","auto-grow":"",rows:"1","row-height":"15",outlined:"",filled:"",clearable:""},model:{value:e.inmueble.direccion,callback:function(a){e.$set(e.inmueble,"direccion",a)},expression:"inmueble.direccion"}})],1)],1),a(f["a"],[a(c["a"]),a(m["a"],{attrs:{disabled:!e.validacion,color:"success"},on:{click:function(a){return e.crearInmueble()}}},[e._v("Crear inmueble")]),a(m["a"],{attrs:{disabled:!e.validacion,color:"error"},on:{click:function(a){return e.cerrarDialgo({isInmuebl_creado:!1})}}},[e._v("Cerrar")])],1)],1)},eo=[],ao={props:{dialog:{type:Boolean,default:!1}},data:()=>({validacion:!1}),computed:{inmueble(){return this.$store.getters["inmueble/getInmueble"]},cliente(){return this.$store.getters["cliente/getCliente"]},estados(){return this.$store.getters["ubicacion/getEstados"]},municipios(){return this.$store.getters["ubicacion/getMunicipios"]},localidades(){return this.$store.getters["ubicacion/getLocalidades"]}},methods:{async inicializarEstados(){await this.$store.dispatch("ubicacion/obtenerEstados")},async obtenerMunicipiosDeEstado({id:e}){await this.$store.dispatch("ubicacion/obtenerMunicipiosDeEstado",e)},async obtenerLocalidadesDeMunicipio({id:e}){await this.$store.dispatch("ubicacion/obtenerLocalidadesDeMunicipio",e)},async crearInmueble(){if(this.$refs.formulario.validate()){this.inmueble.cliente=this.cliente.id;const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("inmueble/crearInmueble",this.inmueble);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t}),t||this.cerrarDialgo({isInmuebl_creado:!0})}},cerrarDialgo({isInmuebl_creado:e}){this.$emit("eventSetDialog",{isDialog:!1,isInmuebl_creado:e}),this.$refs.formulario.reset()}}},to=ao,oo=Object(C["a"])(to,Wt,eo,!1,null,null,null),ro=oo.exports,so=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{scrollable:"","max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({attrs:{color:"primary"}},"v-btn",o,!1),t),[a(p["a"],{attrs:{left:""}},[e._v("mdi-filter-variant")]),e._v(" Filtros ")],1)]}}]),model:{value:e.dialogo,callback:function(a){e.dialogo=a},expression:"dialogo"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"grey lighten-2"},[a(m["a"],{attrs:{icon:"",color:"primary","x-large":""},on:{click:function(a){e.dialogo=!1}}},[a(p["a"],[e._v("mdi-chevron-left")])],1),a(c["a"]),a(m["a"],{attrs:{icon:"",color:"primary","x-large":""},on:{click:function(a){return e.cleanAll()}}},[a(p["a"],[e._v("mdi-eraser")])],1)],1),a(f["c"],{staticClass:"pt-2"},[e.isAutocompleteCliente?a(Zt["a"],{attrs:{label:"Clientes",outlined:"",items:e.clientes,disabled:!e.isClientes,"item-text":"nombre","return-object":"",loading:e.isCargandoCliente,clearable:""},model:{value:e.cliente,callback:function(a){e.cliente=a},expression:"cliente"}}):e._e(),a(Zt["a"],{attrs:{label:"Estados",outlined:"",items:e.estados,disabled:e.isEstados,"item-text":"nombre","return-object":"",loading:e.isCargandoEstados,clearable:""},model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}}),a(Zt["a"],{attrs:{label:"Municipios",outlined:"",items:e.municipios,disabled:e.isMunicipios,"item-text":"nombre",loading:e.isCargandoMunuicipios,clearable:"","return-object":""},model:{value:e.municipio,callback:function(a){e.municipio=a},expression:"municipio"}}),a(Zt["a"],{attrs:{label:"Localidades",outlined:"",items:e.localidades,disabled:e.isLocalidades,"item-text":"nombre",loading:e.isCargandoLocalidades,clearable:"","return-object":""},model:{value:e.localidad,callback:function(a){e.localidad=a},expression:"localidad"}})],1),a(f["a"],[a(m["a"],{attrs:{block:"",color:"primary"},on:{click:function(a){return e.buscarInmueblesTerritorio()}}},[e._v("Ver Inmuebles")])],1)],1)],1)},io=[],no={props:{isAutocompleteCliente:{type:Boolean,default:!0}},data:()=>({dialogo:!1,localidad:null}),computed:{clientes(){return this.$store.getters["cliente/getClientes"]},cliente:{get(){return this.$store.getters["cliente/getCliente"]},set(e){this.$store.commit("cliente/setCliente",e)}},isClientes(){return!!this.clientes.length},isCargandoCliente(){return this.$store.getters["cliente/getCargando"]},estados(){return this.$store.getters["ubicacion/getEstados"]},estado:{get(){return this.$store.getters["ubicacion/getEstado"]},async set(e){e?(await this.$store.dispatch("ubicacion/obtenerEstado",e),await this.obtenerMunicipiosEstado()):(this.$store.commit("ubicacion/clearEstado"),this.$store.commit("ubicacion/clearAllMunicipio"),this.$store.commit("ubicacion/clearAllLocalidad"))}},isEstados(){return!this.estados.length},isCargandoEstados(){return this.$store.getters["ubicacion/getCargandoEstados"]},municipios(){return this.$store.getters["ubicacion/getMunicipios"]},municipio:{get(){return this.$store.getters["ubicacion/getMunicipio"]},async set(e){e?(await this.$store.dispatch("ubicacion/obtenerMunicipio",e),await this.obtenerLocalidadesMunicipio()):(this.$store.commit("ubicacion/clearMunicipio"),this.$store.commit("ubicacion/clearAllLocalidad"))}},isMunicipios(){return!this.municipios.length},isCargandoMunuicipios(){return this.$store.getters["ubicacion/getCargandoMunicipios"]},localidades(){return this.$store.getters["ubicacion/getLocalidades"]},isLocalidades(){return!this.localidades.length},isCargandoLocalidades(){return this.$store.getters["ubicacion/getCargandoLocalidades"]}},created(){this.inicializarEstados()},methods:{async inicializarEstados(){await this.$store.dispatch("ubicacion/obtenerEstados")},async obtenerMunicipiosEstado(){const{cliente:e,estado:a}=this,{id:t}=e;await this.$store.dispatch("ubicacion/obtenerMunicipiosDeInmueblesExistentes",{cliente:t,estado:a})},async obtenerLocalidadesMunicipio(){const{cliente:e,estado:a,municipio:t}=this,{id:o}=e;await this.$store.dispatch("ubicacion/obtenerLocalidadesDeInmueblesExistentes",{cliente:o,estado:a,municipio:t})},async buscarInmueblesTerritorio(){const{cliente:e,estado:a,municipio:t,localidad:o}=this,{id:r}=e,{mensaje:s,estadoHttp:i,error:n}=await this.$store.dispatch("inmueble/listarPorClientesTerritorio",{cliente:[r],estado:a,municipio:t,localidad:o});n&&this.$store.commit("alerta/addAlertas",{mensaje:s,estado:i,error:n})},cleanAll(){this.$store.commit("ubicacion/clearEstado"),this.$store.commit("ubicacion/clearMunicipio"),this.$store.commit("ubicacion/clearLocalidad")}}},co=no,lo=Object(C["a"])(co,so,io,!1,null,null,null),uo=lo.exports,mo=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{persistent:"","max-width":"300"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(p["a"],e._g(e._b({staticClass:"mr-2",attrs:{color:e.color}},"v-icon",o,!1),t),[e._v(" "+e._s(e.icon)+" ")])]}},{key:"default",fn:function(t){return[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"text-h6 grey lighten-2"},[e._v(" "+e._s(e.tipo_pago)+" ")]),a(f["c"],[e._v(e._s(e.mensaje))]),a(f["a"],[a(c["a"]),a(m["a"],{attrs:{color:"error darken-1",text:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[e._v(" Cancelar ")]),a(m["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(a){return e.aceptarConfirmacion(t)}}},[e._v(" Aceptar ")])],1)],1)]}}])})},po=[],bo={props:{id:{type:Number,default:-1},indice:{type:Number,default:-1},mensaje:{type:String,default:""},tipo_pago:{type:String,default:""},icon:{type:String,default:"mdi-blank"},color:{type:String,default:""}},methods:{aceptarConfirmacion(e){e.value=!1,this.$emit("emitConfirmacion",{confirmacion:!0,id:this.id,indice:this.indice})},cerrrarDialogo(e){e.value=!1,this.$emit("emitConfirmacion",{confirmacion:!1,id:this.id,indice:this.indice})}}},go=bo,fo=Object(C["a"])(go,mo,po,!1,null,null,null),_o=fo.exports,ho={props:{isMostrarSeleccion:{type:Boolean,default:!1},isMostrarMenuInmuebles:{type:Boolean,default:!1},ObjFiltrar:{type:Object,default:()=>({isBtnFiltrar:!1,isAutocompleteCliente:!1})},cabecera:{type:Array,default:()=>[]},inmuebles:{type:Array,default:()=>[]},texto_sin_datos:{type:String,default:"No hay inmuebles disponibles"},isCardCabecera:{type:Boolean,default:!1},obj_grupo_btn_verificar_inmuebles:{type:Object,default:()=>({is_btn_borror_inmuebles_verificados:!1,is_btn_verificar_inmuebles:!1})}},data:()=>({dialog:!1,dialogModificarInmueble:!1,isDialog_eliminar_inmueble:!1,search:""}),components:{"crear-inmueble":ro,"actuliza-inmueble":ro,"filtrado-inmueble":uo,confirmar:_o},computed:{isCargando(){return this.$store.getters["inmueble/getCargando"]},seleccionados:{get(){return this.$store.getters["inmueble/getInmueblesSeleccionados"]},set(e){this.$store.commit("inmueble/setInmueblesSeleccionados",e)}},cliente(){return this.$store.getters["cliente/getCliente"]},verificarInmuebles(){return this.$store.getters["inmueble/getVerificarInmuebles"]},inmueble(){return this.$store.getters["inmueble/getInmueble"]},inmuebles_verificados(){return this.$store.getters["inmueble/getTotalInmueblesVerificados"]},numeroInmueblesCreados(){return this.$store.getters["inmueble/getNumeroInmueblesCreados"]}},methods:{async setInmueble(e){this.$store.commit("inmueble/setInmueble",e),e.estado&&!this.$store.getters["ubicacion/getEstados"].length&&await this.$store.dispatch("ubicacion/obtenerEstados"),e.estado&&await this.$store.dispatch("ubicacion/obtenerMunicipiosDeEstado",e.estado.id),this.dialogModificarInmueble=!0},setDialog({isDialogo:e}){this.dialog=e},setDialogModificarInmueble({isDialog:e,isInmuebl_creado:a}){this.dialogModificarInmueble=e;const t=this.inmuebles.indexOf(this.inmueble);this.inmuebles.length&&a&&this.splitInmueble(t),this.$store.dispatch("inmueble/setStatusInmuebleVerificado",{inmueble:this.inmueble,indice:t}),this.$store.commit("inmueble/clearInmueble")},eliminarInmueble({confirmacion:e,indice:a}){e&&(this.$store.commit("inmueble/clearInmueble"),this.splitInmueble(a))},clearInmueblesVerificados(){this.$store.commit("inmueble/clearInmueblesVerificados"),this.$store.commit("inmueble/clearVerificarInmuebles")},splitInmueble(e){this.$store.commit("inmueble/splitInmueblesVerificados",e),this.$store.commit("inmueble/splitVerificarInmuebles",e)},async crearMultipleInmuebles(){const{error:e,estado:a}=await this.$store.dispatch("inmueble/crearMultiplesInmuebles",this.inmuebles);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:`Se crearon ${this.numeroInmueblesCreados} de ${this.inmuebles_verificados} inmuebles.`,error:e})}}},vo=ho,yo=Object(C["a"])(vo,Kt,Qt,!1,null,null,null),Co=yo.exports,jo={data:()=>({cabecera:[{value:"cliente",text:"Cliente",sortable:!1},{value:"clave",text:"Clave"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"localidad",text:"Localidad"},{value:"direccion",text:"Direccion",sortable:!1}]}),components:{"tabla-inmuebles":Co},computed:{inmuebles(){return this.$store.getters["inmueble/getInmuebles"]},cliente(){return this.$store.getters["cliente/getCliente"]}},created(){this.inicializarInmuebles()},methods:{async inicializarInmuebles(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("inmueble/listar",this.cliente);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},xo=jo,ko=Object(C["a"])(xo,Jt,Yt,!1,null,null,null),$o=ko.exports,wo=t("3a2f"),Io=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8"}},[a(w["a"],{staticClass:"mx-auto",attrs:{loading:e.getCargando,disabled:e.getCargando}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" "+e._s(e.cliente.nombre)+"/ "),a(c["a"]),a(wo["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({attrs:{icon:"",color:"warning"}},"v-btn",o,!1),t),[a(p["a"],[e._v("mdi-alert")])],1)]}}])},[a("span",[e._v(" Los encabezados del Excel deberán contener los siguientes datos del inmueble."),a("br"),a("ul",[a("li",[e._v("Clave")]),a("li",[e._v("Clave 2 opcional (SIRH, Convive)")]),a("li",[e._v("Nombre")]),a("li",[e._v("Estado")]),a("li",[e._v("Municipio")]),a("li",[e._v("Dirección")])])])])],1),a(f["b"],{staticClass:"grey lighten-2"},[e._v(" "+e._s(e.inmuebles.length)+" "+e._s(1===e.inmuebles.length?"Inmuebl":"Inmuebles")+" ")]),a(f["c"],{staticClass:"pt-2"},[a("formulario-leer-inmuebles"),a("tabla-inmuebles",{attrs:{cabecera:e.cabecera,inmuebles:e.inmuebles,texto_sin_datos:"Seleccione un archivo, para verificar los inmuebles.",obj_grupo_btn_verificar_inmuebles:{is_btn_borror_inmuebles_verificados:!0,is_btn_verificar_inmuebles:!0}}})],1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"8"}},[a(f["a"],[a(c["a"]),a(m["a"],{attrs:{color:"error"},on:{click:function(a){return e.$router.push({name:"inmuebles",params:{cliente:e.cliente.nombre}})}}},[e._v("Cancelar")])],1)],1)],1)},So=[],Ao=t("23a7"),Mo=function(){var e=this,a=e._self._c;return a(Ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.validacion,callback:function(a){e.validacion=a},expression:"validacion"}},[a(Ao["a"],{attrs:{accept:".xlsx",label:"Elige tu archivo",outlined:"",dense:"","append-outer-icon":e.archivo&&!e.is_cargando?"mdi-cloud-upload":"mdi-send-off",rules:[e=>!!e||"Es necesario escoger un archivo de tipo .xlsx para verificar los inmuebles"]},on:{change:e.cargar,"click:clear":function(a){return e.clearInmueblesVerificados()},"click:append-outer":function(a){return e.crearMultipleInmuebles()}},model:{value:e.archivo,callback:function(a){e.archivo=a},expression:"archivo"}}),a("confirmar-aviso",{attrs:{dialog:e.is_dialogo_aviso,tipo_mensaje:e.tipo_mensaje,obj_mensaje:e.mensaje,color:e.color},on:{emitConfirmarAviso:e.setDialogoAviso}})],1)},Po=[],Eo=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{persistent:"","max-width":"300"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"text-h6 grey lighten-2"},[e._v(" "+e._s(e.tipo_mensaje)+" ")]),a(f["c"],{staticClass:"mt-5"},[e._v(" "+e._s(e.obj_mensaje.mensaje)+" "),Object.keys(e.obj_mensaje.informacion).length?a(S["a"],{attrs:{subheader:""}},e._l(Object.keys(e.obj_mensaje.informacion),(function(t){return a(A["a"],{key:t,attrs:{dense:""}},[a(P["b"],[a(P["d"],[e._v(e._s(t.toUpperCase()))])],1),a(M["a"],[null===e.obj_mensaje.informacion[t]?a(p["a"],{attrs:{color:"error"}},[e._v("mdi-close")]):a(p["a"],{attrs:{color:"success"}},[e._v("mdi-check")])],1)],1)})),1):e._e()],1),a(f["a"],[a(c["a"]),a(m["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(a){return e.aceptarConfirmacion()}}},[e._v(" Aceptar ")])],1)],1)],1)},Do=[],To={props:{dialog:{type:Boolean,default:!1},obj_mensaje:{type:Object,default:()=>({mensaje:"",informacion:{}})},tipo_mensaje:{type:String,default:""},color:{type:String,default:"primary"}},methods:{aceptarConfirmacion(){this.$emit("emitConfirmarAviso",{confirmacion:!1})}}},Oo=To,Vo=Object(C["a"])(Oo,Eo,Do,!1,null,null,null),Uo=Vo.exports,Fo=t("8134"),Ro={data:()=>({archivo:null,validacion:!1,is_dialogo_aviso:!1,tipo_mensaje:"",mensaje:{mensaje:"",informacion:{}},color:"warning"}),components:{"confirmar-aviso":Uo},computed:{cliente(){return this.$store.getters["cliente/getCliente"]},inmuebles(){return this.$store.getters["inmueble/getInmueblesVerificados"]},verificarIn(){return this.$store.getters["inmueble/getVerificarInmuebles"]},is_cargando(){return this.$store.getters["inmueble/getCargando"]},numeroInmueblesCreados(){return this.$store.getters["inmueble/getNumeroInmueblesCreados"]},inmuebles_verificados(){return this.$store.getters["inmueble/getTotalInmueblesVerificados"]}},methods:{setDialogoAviso({confirmacion:e}){this.is_dialogo_aviso=e},async cargar(){var e=[];if(this.$refs.formulario.validate()){const{is_valido:a,cabecera:t}=await Object(Fo["a"])(this.archivo).then(a=>{const t=this.getIndiceCabecera(a);if(-1==t.fila)return void console.log("Index_not_found");const{is_valido:o,cabecera:r}=this.setIndexCabecera(a[t.fila]);if(o)for(var s=t.fila+1;s<a.length;++s)e.push({cliente:this.cliente,nombre:null!=a[s][r.nombre]?a[s][r.nombre]:"",clave:null!=a[s][r.clave]?a[s][r.clave]:"",clave_2:null!=a[s][r.clave_2]?a[s][r.clave_2]:"",direccion:null!=a[s][r.direccion]?a[s][r.direccion]:"Dirección no asignada.",estado:null!=a[s][r.estado]?a[s][r.estado]:"",municipio:null!=a[s][r.municipio]?a[s][r.municipio]:"",localidad:null!=a[s][r.localidad]?a[s][r.localidad]:""});return{is_valido:o,cabecera:r}});a?(this.$store.commit("inmueble/setVerificarInmuebles",e),await this.verificarInmuebles()):(this.tipo_mensaje="Faltan datos en la cabecera",this.mensaje.mensaje="No se encontraron los datos en la cabecera del Excel, para poder verificar los inmuebles.",this.mensaje.informacion=t,this.is_dialogo_aviso=!0,this.clearInmueblesVerificados(),this.archivo=null)}},async verificarInmuebles(){const{error:e,estado:a}=await this.$store.dispatch("inmueble/verificarInmuebles",this.verificarIn);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:`Se verificaron ${this.inmuebles.length} inmuebles.`,error:e})},async crearMultipleInmuebles(){const{error:e,estado:a}=await this.$store.dispatch("inmueble/crearMultiplesInmuebles",this.inmuebles);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:`Se crearon ${this.numeroInmueblesCreados} de ${this.inmuebles_verificados} inmuebles.`,error:e})},clearInmueblesVerificados(){this.$store.commit("inmueble/clearInmueblesVerificados"),this.$store.commit("inmueble/clearVerificarInmuebles")},getIndiceCabecera(e){for(var a=0;a<e.length;++a){for(var t=0,o=0;o<e[a].length;++o){if(5==t)break;null==e[a][o]?t+=1:t=0}if(t<5)return{fila:a}}return{fila:-1}},normalizarPalabra(e){const a={"á":"a","é":"e","í":"i","ó":"o","ú":"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U"};return null===e||Number.isInteger(e)?"":e.split("").map(e=>a[e]||e).join("").toString().toLowerCase()},setIndexCabecera(e){var a={nombre:null,clave:null,direccion:null,estado:null,municipio:null,localidad:-1,clave_2:-1};e.forEach((e,t)=>{let o=this.normalizarPalabra(e);o.length&&("nombre"===o||"nombre del inmueble"===o?a.nombre=t:"clave"===o||"cr"===o||"codigo"===o||"id"===o||"id inmueble"===o?a.clave=t:"direccion"===o||"calle y numero"===o?a.direccion=t:"edo."===o||"estado"===o?a.estado=t:"municipio"===o||"municipio"===o?a.municipio=t:"ciudad"===o||"localidad"===o?a.localidad=t:"convive"!==o&&"sirh"!==o&&"convivencia"!==o||(a.clave_2=t))});const t=Object.values(a),o=void 0===t.find(e=>null===e);return{is_valido:o,cabecera:a}}}},No=Ro,Bo=Object(C["a"])(No,Mo,Po,!1,null,null,null),zo=Bo.exports,Lo={components:{"formulario-leer-inmuebles":zo,"tabla-inmuebles":Co},data:()=>({cabecera:[{value:"status",text:"Status"},{value:"clave",text:"Clave",sortable:!1},{value:"clave_2",text:"Clave 2"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"localidad",text:"Localidad"},{value:"direccion",text:"Direccion"},{value:"accion",text:"Act. & Eli.",align:"center"}]}),computed:{cliente(){return this.$store.getters["cliente/getCliente"]},getCargando(){return this.$store.getters["inmueble/getCargando"]},inmuebles(){return this.$store.getters["inmueble/getInmueblesVerificados"]}}},Go=Lo,qo=Object(C["a"])(Go,Io,So,!1,null,null,null),Xo=qo.exports,Ho=t("56a4"),Jo=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{dense:"",justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"9",md:"9",lg:"9",xl:"9"}},[a(ut["a"],{model:{value:e.e1,callback:function(a){e.e1=a},expression:"e1"}},[a(mt["a"],[a(Ho["a"],{attrs:{complete:e.e1>1,step:"1"}},[e._v(" Paso 1 "),a("br"),e._v(" Inmuebles ")]),a(I["a"]),a(Ho["a"],{attrs:{complete:e.e1>2,step:"2"}},[e._v(" Paso 2 "),a("br"),e._v(" Datos genereales ")]),a(I["a"]),a(Ho["a"],{attrs:{step:"3"}},[e._v(" Paso 3 "),a("br"),e._v(" Asignar ")])],1),a(mt["b"],[a(dt["a"],{attrs:{step:"1"}},[a("inmuebles-tabla",{attrs:{sinClienteSeleccionado:e.sinClienteSeleccionado}}),a("br"),a(m["a"],{attrs:{color:"success",block:"",disabled:e.isInmueblesSeleccionados},on:{click:function(a){e.e1=2}}},[e._v(" Continue ")])],1),a(dt["a"],{attrs:{step:"2"}},[a(m["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=1}}},[e._v(" Regresar ")]),a("br"),a("formulario-crear-trabajo"),a("br"),a(m["a"],{attrs:{color:"primary",block:"",disabled:!e.asignaciones_v.length},on:{click:function(a){e.e1=3}}},[e._v(" Continue ")])],1),a(dt["a"],{attrs:{step:"3"}},[a(m["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=2}}},[e._v(" Regresar ")]),a("br"),a("CompPru12"),a("br"),a(m["a"],{attrs:{color:"primary",block:""},on:{click:function(a){e.dialogoAlertaFormulario=!0}}},[e._v(" Finalizar ")])],1)],1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"3",md:"3",lg:"3",xl:"3"}},[a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(f["d"],[e._v("Resumen ")]),a(I["a"]),a(f["c"],[e._v(" Inmuebles: "),a("br"),e._v(" Num. trabajos: "),a("br"),e._v(" Num. trabajos por confirmar: ")]),a(f["a"],[a(c["a"]),a(m["a"],{attrs:{rounded:"",color:"error"},on:{click:function(a){return e.cancelarAsignacion()}}},[e._v(" Cancelar "),a(p["a"],{attrs:{right:""}},[e._v("mdi-close-circle-outline")])],1)],1)],1)],1),a("dialogo-alerta-formulario",{attrs:{dialogo:e.dialogoAlertaFormulario,tipo_mensaje:"Formulario crear múltiples trabajos",mensaje:"Estás a punto de borrar toda la información. ¿Estás seguro?"},on:{emitConfirmacion:e.setDialogoAlertaFormulario}})],1)},Yo=[],Ko=function(){var e=this,a=e._self._c;return a("tabla-inmuebles",{attrs:{isMostrarSeleccion:!0,isMostrarMenuInmuebles:!1,ObjFiltrar:{isBtnFiltrar:!0,isAutocompleteCliente:e.sinClienteSeleccionado},cabecera:e.cabecera,inmuebles:e.inmuebles,isCardCabecera:!0}})},Qo=[],Zo={props:{sinClienteSeleccionado:{type:Boolean,default:!1}},data:()=>({cabecera:[{value:"cliente",text:"Cliente",sortable:!1},{value:"clave",text:"Clave"},{value:"nombre",text:"Inmueble"},{value:"estado",text:"Estado"},{value:"municipio",text:"Municipio"},{value:"localidad",text:"Localidad"},{value:"direccion",text:"Direccion",sortable:!1}]}),components:{"tabla-inmuebles":Co},computed:{inmuebles(){return this.$store.getters["inmueble/getInmuebles"]},cliente(){return this.$store.getters["cliente/getCliente"]}},created(){this.inicializarInmuebles()},methods:{async inicializarInmuebles(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("inmueble/listar",this.sinClienteSeleccionado?null:this.cliente);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},Wo=Zo,er=Object(C["a"])(Wo,Ko,Qo,!1,null,null,null),ar=er.exports,tr=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Datos generales de la asignación de trabajos ")]),a("br"),a(f["c"],[a(Ua["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Sa["a"],{attrs:{justify:"space-around"}},[a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a(lt["a"],{attrs:{label:"Proyectos",items:e.proyectos,rules:[e=>Boolean(Object.keys(e||{})[0])||"Se debe elejir un proyecto"],"item-text":"nombre",loading:e.isCargando,"no-data-text":"Proyectos no disponibles",clearable:"","return-object":"",outlined:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(p["a"],{attrs:{color:"info"},on:{click:function(a){e.isDialogCrearNuevoProyecto=!0}}},[e._v("mdi-plus")])]},proxy:!0}]),model:{value:e.proyecto,callback:function(a){e.proyecto=a},expression:"proyecto"}})],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a(lt["a"],{attrs:{label:"Conceptos",items:e.conceptos,rules:[e=>!!e.length>0||"Se debe elejir por lo menos un concepto"],"item-text":"nombre","item-value":"id","no-data-text":"Conceptos no disponibles",loading:e.isCargandoConcepto,"small-chips":"",multiple:"",outlined:"",clearable:"",disabled:!e.proyecto.id},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(p["a"],{attrs:{disabled:!1 in e.proyecto,color:"info"},on:{click:function(a){e.isDialogCrearNuevoConcepto=!0}}},[e._v("mdi-plus")])]},proxy:!0}]),model:{value:e.conceptosSeleccionados,callback:function(a){e.conceptosSeleccionados=a},expression:"conceptosSeleccionados"}})],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a(lt["a"],{attrs:{label:"Estado",items:e.status,"item-text":"nombre","item-value":"id",rules:[e=>!!e>0||"Se debe elejir el estado del trabajo"],"no-data-text":"Estados no disponibles",outlined:"",clearable:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(p["a"],{attrs:{color:"info"},on:{click:function(a){e.isDialogCrearNuevoEstadoTrabjo=!0}}},[e._v("mdi-plus")])]},proxy:!0}]),model:{value:e.estado,callback:function(a){e.estado=a},expression:"estado"}})],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a(lt["a"],{attrs:{label:"Usuario",items:e.usuarios,"item-text":"nombre","item-value":"id",rules:[e=>!!e>0||"Se debe elejir un usuario"],"no-data-text":"Usuarios no disponibles",outlined:"",clearable:""},model:{value:e.usuario,callback:function(a){e.usuario=a},expression:"usuario"}})],1)],1)],1)],1),a(f["a"],[a(c["a"]),a(m["a"],{attrs:{color:"green",disabled:!e.valid,loading:e.isCargandoBtn,block:""},on:{click:function(a){return e.agregar()}}},[e._v("Asignar")])],1),a("formulario-crear-nuevo-proyecto",{attrs:{dialog:e.isDialogCrearNuevoProyecto},on:{emitDialog:e.setDialogoFormularioCrearNuevoProyecto}}),a("formulario-crear-nuevo-concepto",{attrs:{dialogo:e.isDialogCrearNuevoConcepto},on:{emitDialogo:e.setDialogoFormularioCrearNuevoConcepto}}),a("formulario-crear-nuevo-estado-trabajo",{attrs:{dialogo:e.isDialogCrearNuevoEstadoTrabjo},on:{emitDialogo:e.setDialogoFormularioCrearEstadoTrabajo}})],1)},or=[],rr=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([null,{key:"default",fn:function(t){return[a(w["a"],{staticClass:"mx-auto",attrs:{elevation:"5",loading:e.cargando}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Crear un concepto nuevo para "+e._s(e.proyecto.nombre)+" "),a(c["a"]),a(m["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(I["a"]),a(f["c"],[a(ya["a"],{attrs:{label:"Nombre del concepto"},model:{value:e.concepto,callback:function(a){e.concepto=a},expression:"concepto"}})],1),a(f["a"],{staticClass:"justify-end"},[a(m["a"],{attrs:{text:"",color:"green",outlined:"",disabled:!e.concepto},on:{click:function(a){return e.create(t)}}},[e._v("Crear")])],1)],1)]}}],null,!0),model:{value:e.dialogo,callback:function(a){e.dialogo=a},expression:"dialogo"}})},sr=[],ir={props:{dialogo:{type:Boolean,default:!1}},data:()=>({concepto:null}),computed:{proyecto(){return this.$store.getters["proyecto/getProyecto"]},isProyecto(){return Boolean(Object.keys(this.proyecto).length)},cargando(){return this.$store.getters["proyecto/getCargando"]}},methods:{async create(e){const{concepto:a,proyecto:t}=this,{mensaje:o,estado:r,error:s}=await this.$store.dispatch("proyecto/crearConcepto",{nombre:a,proyecto:t.id});this.$store.commit("alerta/addAlertas",{estado:r,mensaje:o,error:s}),s||this.cerrrarDialogo(e)},cerrrarDialogo(e){e.value=!1,this.$emit("emitDialogo",{dialogo:!1}),this.concepto=null}}},nr=ir,cr=Object(C["a"])(nr,rr,sr,!1,null,null,null),lr=cr.exports,ur=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a(w["a"],{staticClass:"mx-auto",attrs:{elevation:"5",loading:e.cargando}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Crear un nuevo proyecto "),a(c["a"]),a(m["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(I["a"]),a(f["c"],[a(ya["a"],{attrs:{label:"Nombre del proyecto"},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}})],1),a(f["a"],{staticClass:"justify-end"},[a(m["a"],{attrs:{color:"green",outlined:"",disabled:!e.nombre},on:{click:function(a){return e.crear(t)}}},[e._v("Crear")])],1)],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}})},dr=[],mr={props:{dialog:{type:Boolean,default:!1}},data:()=>({nombre:null}),computed:{cargando(){return this.$store.getters["proyecto/getCargando"]}},methods:{async crear(e){const{nombre:a}=this,{mensaje:t,estado:o,error:r}=await this.$store.dispatch("proyecto/crearProyecto",a);this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r}),r||this.cerrrarDialogo(e)},cerrrarDialogo(e){e.value=!1,this.$emit("emitDialog",{dialog:!1}),this.nombre=""}}},pr=mr,br=Object(C["a"])(pr,ur,dr,!1,null,null,null),gr=br.exports,fr=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a(w["a"],{staticClass:"mx-auto",attrs:{elevation:"5",loading:e.cargando}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Crear nuevo estado para el trabajo "),a(c["a"]),a(m["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(I["a"]),a(f["c"],[a(Ua["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(ya["a"],{attrs:{label:"Nombre del estado del trabajo",rules:[e=>!!e||"Es necesario escribir el estado del trabajo."]},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}})],1)],1),a(f["a"],{staticClass:"justify-end"},[a(m["a"],{attrs:{color:"success",outlined:"",disabled:!e.valid},on:{click:function(a){return e.crear(t)}}},[e._v("Crear")])],1)],1)]}}]),model:{value:e.dialogo,callback:function(a){e.dialogo=a},expression:"dialogo"}})},_r=[],hr={props:{dialogo:{type:Boolean,default:!0}},data:()=>({nombre:"",valid:!0}),computed:{cargando(){return this.$store.getters["proyecto/getCargando"]}},methods:{async crear(e){if(this.$refs.form.validate()){const{nombre:a}=this,{mensaje:t,estado:o,error:r}=await this.$store.dispatch("trabajo/crearEstadoTrabajo",a);this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r}),r||this.cerrrarDialogo(e)}},cerrrarDialogo(e){e.value=!1,this.$emit("emitDialogo",{dialogo:!1}),this.nombre="",this.$refs.form.reset()}}},vr=hr,yr=Object(C["a"])(vr,fr,_r,!1,null,null,null),Cr=yr.exports,jr={data:()=>({estado:0,usuario:0,valid:!0,conceptosSeleccionados:[],isCargandoBtn:!1,isDialogCrearNuevoProyecto:!1,isDialogCrearNuevoConcepto:!1,isDialogCrearNuevoEstadoTrabjo:!1}),components:{"formulario-crear-nuevo-concepto":lr,"formulario-crear-nuevo-proyecto":gr,"formulario-crear-nuevo-estado-trabajo":Cr},created(){this.inicializarProyectos(),this.inicializarUsuario(),this.inicializarStatus()},computed:{proyectos(){return this.$store.getters["proyecto/getProyectos"]},proyecto:{get(){return this.$store.getters["proyecto/getProyecto"]},async set(e){e?(this.$store.dispatch("proyecto/obtenerProyecto",e),this.obtenerConceptos(e)):(this.$store.commit("proyecto/clearProyecto"),this.conceptosSeleccionados=[])}},conceptos(){return this.$store.getters["proyecto/getConceptos"]},usuarios(){return this.$store.getters["usuario/getUsuarios"]},status(){return this.$store.getters["trabajo/getStatusTrabajo"]},inmuebles(){return this.$store.getters["inmueble/getInmueblesSeleccionados"]},isCargando(){return this.$store.getters["proyecto/getCargando"]},isCargandoConcepto(){return this.$store.getters["proyecto/getCargandoConceptos"]},id_usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},asignacionesVerificadas(){return this.$store.getters["trabajo/getAsignacionesVerificadas"]}},methods:{async agregar(){if(this.$refs.form.validate()&&!this.isCargandoBtn){this.isCargandoBtn=!0;const{inmuebles:a,id_usuario:t,conceptosSeleccionados:o,usuario:r,estado:s}=this;var e=[];const i=[];for(const e of o)i.push({concepto:e,usuario_asignado:r,estado:s});for(const l of a)e.push({inmueble:l.id,usuario_area:t,trabajos:i});const{mensaje:n,error:c}=await this.$store.dispatch("trabajo/verificarAsignaciones",e);this.$store.commit("alerta/addAlertas",{estado:s,mensaje:n,error:c}),c||this.$refs.form.reset()}this.isCargandoBtn=!1},async inicializarProyectos(){await this.$store.dispatch("proyecto/obtenerProyectos")},async inicializarStatus(){await this.$store.dispatch("trabajo/obtenerEstadosTrabajo")},async obtenerConceptos({id:e}){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("proyecto/obtenerConceptos",e);o&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o})},async inicializarUsuario(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("usuario/obtenerUsuarios",{privilegio:""});t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})},setDialogoFormularioCrearNuevoProyecto({dialog:e}){this.isDialogCrearNuevoProyecto=e},setDialogoFormularioCrearNuevoConcepto({dialogo:e}){this.isDialogCrearNuevoConcepto=e},setDialogoFormularioCrearEstadoTrabajo({dialogo:e}){this.isDialogCrearNuevoEstadoTrabjo=e}}},xr=jr,kr=Object(C["a"])(xr,tr,or,!1,null,null,null),$r=kr.exports,wr=t("1f4f"),Ir=function(){var e=this,a=e._self._c;return a(w["a"],{attrs:{outlined:""}},[a(f["c"],[a(st["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(Sa["a"],{attrs:{justify:"center"}},e._l(e.asignaciones,(function(t,o){return a(Ia["a"],{key:o,attrs:{cols:"12",sm:"6"}},[a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Inmueble: "+e._s(t.inmueble.name)+" ("+e._s(t.inmueble.property_key)+") "),a(c["a"]),a("confirmar",{attrs:{mensaje:"Estás a punto de eliminar la asignación junto con todos sus trabajos.",indice:o,tipo_pago:"¿Confirmar eliminacion "+t.inmueble.name+"?",icon:"mdi-delete",color:"error"},on:{emitConfirmacion:e.confirmarRecurso}})],1),a(f["b"],{staticClass:"grey lighten-2"},[e._v(" "+e._s(t.trabajos.length)+" "+e._s(1==t.trabajos.length?"trabajo":"trabajos")+" por asignar ")]),a(f["c"],[a(wr["a"],{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[e._v("Concepto")]),a("th",[e._v("Asignado")]),a("th",[e._v("Estado")]),a("th",[e._v("Mensaje")]),a("th",[e._v("Confirmar")]),a("th",[e._v("Eliminar")])])]),a("tbody",e._l(t.trabajos,(function(r,s){return a("tr",{key:s},[a("td",[e._v(e._s(r.concepto.name)+" ("+e._s(r.concepto.project__name)+")")]),a("td",[a(wo["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:i}){return[a($["a"],{attrs:{bordered:"",color:"error",icon:"mdi-close",overlap:"",disabled:""}},[a(m["a"],e._g(e._b({attrs:{color:"primary",icon:"",outlined:""},on:{click:function(a){return e.activarDialogoUsuario({id_usuario:r.usuario_asignado.id,indice_inmueble:o,indice_trabajo:s})}}},"v-btn",i,!1),t),[e._v(" "+e._s(r.usuario_asignado.name[0].toUpperCase())+" ")])],1)]}}],null,!0)},[a("span",[e._v(e._s(r.usuario_asignado.name))])])],1),a("td",[e._v(e._s(r.estado.name))]),a("td",[a("span",{class:"A este inmueble ya se le asignó este trabajo."===r.mensaje?"warning":"success",staticStyle:{display:"flex","text-align":"center"}},[e._v(" "+e._s(r.mensaje)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a(m["a"],{attrs:{icon:"",color:r.confirmacion?"success":"error"},on:{click:function(a){return e.setConfirmacionTrabajo({indice_asignacion:o,indice_trabajo:s,confirmacion:r.confirmacion})}}},[a(p["a"],[e._v(e._s(r.confirmacion?"mdi-check":"mdi-close"))])],1)],1),a("td",{staticStyle:{"text-align":"center"}},[a("confirmar",{attrs:{mensaje:"Estás a punto de eliminar el trabajo "+r.concepto.name+" del inmueble "+t.inmueble.name+".",indice:o,id:s,tipo_pago:"¿Confirmar eliminacion "+r.concepto.name+"?",icon:"mdi-close",color:"error"},on:{emitConfirmacion:e.confirmarTrabajo}})],1)])})),0)]},proxy:!0}],null,!0)})],1)],1)],1)})),1)],1)],1),a(f["a"],{attrs:{persistent:""}},[a(m["a"],{attrs:{block:"",color:"success"},on:{click:e.asignar}},[e._v("Crea trabajos")])],1),a("cambiar-usuario",{attrs:{objetoDialgoCambiarUsario:e.objetoDialgoCambiarUsario},on:{setDialogo:e.setDialogoCambiarUsuario}})],1)},Sr=[],Ar=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{"max-width":"300"},on:{"click:outside":function(a){return e.cerrarDialogo()}},model:{value:e.objetoDialgoCambiarUsario.is_dialogo,callback:function(a){e.$set(e.objetoDialgoCambiarUsario,"is_dialogo",a)},expression:"objetoDialgoCambiarUsario.is_dialogo"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],[a(c["a"]),e._v(" Usuarios "),a(c["a"]),a(p["a"],[e._v("mdi-reload")])],1),a(I["a"]),a(f["c"],[a(S["a"],[a(E["a"],{model:{value:e.id_usuario_seleccionado,callback:function(a){e.id_usuario_seleccionado=a},expression:"id_usuario_seleccionado"}},e._l(e.usuarios,(function(t){return a(A["a"],{key:t.id,attrs:{value:t.id}},[a(qa["a"],[a("img",{attrs:{src:t.nombre,alt:t.imagen}})]),a(P["b"],[a(P["d"],[e._v(" "+e._s(t.nombre)+" ")])],1)],1)})),1)],1)],1)],1)],1)},Mr=[],Pr={props:{objetoDialgoCambiarUsario:{type:Object,default:()=>({})}},computed:{usuarios(){return this.$store.getters["usuario/getUsuarios"]},id_usuario_seleccionado:{get(){return this.objetoDialgoCambiarUsario.id_usuario},set(e){const{indice_inmueble:a,indice_trabajo:t}=this.objetoDialgoCambiarUsario,o=this.usuarios.find(a=>a.id==e);this.$emit("setDialogo",{is_dialogo:!0,objetoUsuario:void 0===o?{id:0,name:""}:{id:o.id,name:o.nombre},indice_inmueble:a,indice_trabajo:t})}}},methods:{cerrarDialogo(){this.$emit("setDialogo",{is_dialogo:!1,objetoUsuario:{id:0,name:""},indice_inmueble:-1,indice_trabajo:-1})}}},Er=Pr,Dr=Object(C["a"])(Er,Ar,Mr,!1,null,null,null),Tr=Dr.exports,Or={data:()=>({objetoDialgoCambiarUsario:{is_dialogo:!1,id_usuario:0,indice_inmueble:-1,indice_trabajo:-1}}),components:{confirmar:_o,"cambiar-usuario":Tr},computed:{asignaciones(){return this.$store.getters["trabajo/getAsignacionesVerificadas"]},inmueblesSeleccionados(){return this.$store.getters["inmueble/getInmueblesSeleccionados"]}},methods:{setDialogoCambiarUsuario({is_dialogo:e,objetoUsuario:a,indice_inmueble:t,indice_trabajo:o}){const{objetoDialgoCambiarUsario:r}=this;r.is_dialogo=e,r.id_usuario=a.id,r.indice_inmueble=t,r.indice_trabajo=o,a.id&&this.$store.commit("trabajo/setUsuarioAsignacionVerificada",{indice_asignacion:t,indice_trabajo:o,objetoUsuario:a})},confirmarRecurso({confirmacion:e,indice:a}){e&&this.$store.commit("trabajo/spliceAsignacionVerificada",a)},confirmarTrabajo({confirmacion:e,indice:a,id:t}){e&&this.asignaciones[a].trabajos.length>1?this.$store.commit("trabajo/spliceTrabajoAsignacionVerificada",{indice_asignacion:a,indice_trabajo:t}):this.confirmarRecurso({confirmacion:e,indice:a})},activarDialogoUsuario({id_usuario:e,indice_inmueble:a,indice_trabajo:t}){const{objetoDialgoCambiarUsario:o}=this;o.is_dialogo=!0,o.id_usuario=e,o.indice_inmueble=a,o.indice_trabajo=t},setConfirmacionTrabajo({indice_asignacion:e,indice_trabajo:a,confirmacion:t}){this.$store.commit("trabajo/setConfirmacionConfirmacionTrabajo",{indice_asignacion:e,indice_trabajo:a,payload:!t})},async asignar(){const{asignaciones:e}=this,{error:a,estado:t,mensaje:o}=await this.$store.dispatch("trabajo/confirmarAsignacion",e);this.$store.commit("alerta/addAlertas",{estado:t,mensaje:o,error:a})}}},Vr=Or,Ur=Object(C["a"])(Vr,Ir,Sr,!1,null,null,null),Fr=Ur.exports,Rr=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{persistent:"","max-width":"300"},model:{value:e.dialogo,callback:function(a){e.dialogo=a},expression:"dialogo"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"text-h6 grey lighten-2"},[e._v(" "+e._s(e.tipo_mensaje)+" ")]),a(f["c"],[e._v(e._s(e.mensaje))]),a(f["a"],[a(c["a"]),a(m["a"],{attrs:{color:"error darken-1",text:""},on:{click:function(a){return e.cerrrarDialogo()}}},[e._v(" Cancelar ")]),a(m["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(a){return e.aceptarConfirmacion()}}},[e._v(" Aceptar ")])],1)],1)],1)},Nr=[],Br={props:{mensaje:{type:String,default:""},tipo_mensaje:{type:String,default:""},dialogo:{type:Boolean,default:!1}},methods:{aceptarConfirmacion(){this.$emit("emitConfirmacion",{confirmacion:!0,dialogo:!1})},cerrrarDialogo(){this.$emit("emitConfirmacion",{confirmacion:!1,dialogo:!1})}}},zr=Br,Lr=Object(C["a"])(zr,Rr,Nr,!1,null,null,null),Gr=Lr.exports,qr={props:{sinClienteSeleccionado:{type:Boolean,default:!1}},data:()=>({e1:1,inmuebles:[],isValid_p2:!1,dialogoAlertaFormulario:!1}),components:{"inmuebles-tabla":ar,"formulario-crear-trabajo":$r,CompPru12:Fr,"dialogo-alerta-formulario":Gr},computed:{asignaciones_v(){return this.$store.getters["trabajo/getAsignacionesVerificadas"]},isInmueblesSeleccionados(){return!this.$store.getters["inmueble/getInmueblesSeleccionados"].length},cliente(){return this.$store.getters["cliente/getCliente"]}},methods:{setValidP2({validacion:e}){this.isValid_p2=!!e&&e.validate()},setDialogoAlertaFormulario({confirmacion:e,dialogo:a}){e&&this.cancelarAsignacion(),this.dialogoAlertaFormulario=a},cancelarAsignacion(){this.$store.commit("inmueble/clearInmueblesSeleccionados"),this.$store.commit("trabajo/clearAsignacionesVerificadas"),this.$router.push({name:"trabajos-inmuebles",params:{cliente:this.cliente.nombre}})}}},Xr=qr,Hr=Object(C["a"])(Xr,Jo,Yo,!1,null,null,null),Jr=Hr.exports,Yr=t("a609"),Kr=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{dense:"",justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8"}},[a(Sa["a"],[a(Ia["a"],{attrs:{cols:"12",sm:"10",xs:"10"}},[a(Yr["a"],{model:{value:e.icon,callback:function(a){e.icon=a},expression:"icon"}},[a(m["a"],{attrs:{value:"No disponible"}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Asignado")])]),a(m["a"],{attrs:{value:"En proceso"}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Revisión")])]),a(m["a"],{attrs:{value:"Concluido"}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Concluido")])])],1)],1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"8"}},[a("tabla-trabajos-usuario",{attrs:{is_peticion:!0,headers:e.headers}})],1)],1)},Qr=[],Zr={data:()=>({headers:[{text:"Proyecto",value:"proyecto"},{text:"Concepto",value:"concepto"},{text:"Status",value:"status"},{text:"Inmueble",value:"inmueble.nombre"},{text:"Estado",value:"inmueble.estado"},{text:"Municipio",value:"inmueble.municipio"},{text:"Creado",value:"creado"},{text:"Actualizado",value:"modificado"}],icon:"No disponible"}),components:{"tabla-trabajos-usuario":At},created(){this.inicializarTrabajos()},computed:{username(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}},methods:{async inicializarTrabajos(){this.$store.commit("trabajo/cleanTrabajos");const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("trabajo/obtenerTrabajosUsuario",{username:this.username});t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})},verTrabajo(e){this.$store.commit("trabajo/setTrabajo",e),this.$router.push({name:"ArchivosTrabajo",params:{nombreUsuario:this.username}})},setTrabajo({peticion:e}){const a=this.trabajos.indexOf(e);this.trabajos[a].formaPago="re",console.log(this.trabajos[a],e.formaPago)}}},Wr=Zr,es=(t("6450"),Object(C["a"])(Wr,Kr,Qr,!1,null,null,null)),as=es.exports,ts=function(){var e=this,a=e._self._c;return a(Sa["a"],[a(Ia["a"],{attrs:{cols:"12",md:"12",lg:"12",sm:"12"}},[a(m["a"],{attrs:{title:"",outlined:""}},[a(p["a"],{attrs:{left:""}},[e._v("mdi-chevron-left")]),e._v("Volver")],1)],1),a(Ia["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a(w["a"],{staticClass:"mx-auto",attrs:{elevation:"12",color:"primary"}},[a(f["d"],[e._v(" Estado del trabajo ")]),a(f["c"],[a(S["a"],{staticClass:"transparent",attrs:{dense:""}},[a(A["a"],[a(P["b"],[e._v("Estado del trabajo:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.status.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Fecha de creación:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.created_date)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Fecha modificada:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.modified_date)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Inmueble:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.name)+" ("+e._s(e.trabajo.property_office.client.name)+") ")])],1),a(A["a"],[a(P["b"],[e._v("Estado:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.province.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Proyecto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.proyect.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Concepto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.concept.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Mi trabajo:")]),a(P["b"],{staticClass:"align-end"},[a(Sa["a"],e._l(e.archivos,(function(t,o){return a(Ia["a"],{key:o,attrs:{cols:"12"}},[a(w["a"],{staticClass:"mx-auto",attrs:{elevation:"2",color:"primary"}},[a(f["a"],[a(m["a"],{attrs:{dark:"",depressed:"",small:"",href:t.file,color:"blue-grey"}},[a(p["a"],{attrs:{left:""}},[e._v(" mdi-file ")]),e._v(" "+e._s(t.title)+" ")],1),a(c["a"]),a(m["a"],{attrs:{icon:""}},[a(p["a"],[e._v("mdi-dots-vertical")])],1),a("br")],1)],1)],1)})),1)],1)],1)],1)],1)],1)],1),a(Ia["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["b"],[e._v("Comentarios")]),e._l(e.trabajo.comments,(function(t,o){return a(f["c"],{key:o},[a("div",{staticClass:"text--primary"},[e._v(e._s(t))])])}))],2)],1),a(Ia["a"],{attrs:{cols:"12",md:"6",lg:"6",sm:"6"}},[a(w["a"],{staticClass:"mx-auto",attrs:{color:"primary"}},[a(Va["a"],{attrs:{transition:"dialog-bottom-transition","max-width":"600"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({},"v-btn",o,!1),t),[a(p["a"],{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" Agregar trabajo ")],1)]}},{key:"default",fn:function(t){return[a(w["a"],{attrs:{loading:e.loading?"red":null}},[a(it["a"],{attrs:{color:"indigo",dark:""}},[e._v("Agregar asignación")]),a(f["c"],[a(Ao["a"],{attrs:{accept:".pdf","show-size":"","truncate-length":"6"},model:{value:e.PDFBase64,callback:function(a){e.PDFBase64=a},expression:"PDFBase64"}})],1),a(f["a"],{staticClass:"justify-end"},[a(m["a"],{attrs:{text:"",color:"success",disabled:!e.PDFBase64},on:{click:function(a){return e.subirArchivo()}}},[e._v("Subir Archivo")]),a(m["a"],{attrs:{text:""},on:{click:function(e){t.value=!1}}},[e._v("Cerrar")])],1)],1)]}}])})],1)],1)],1)},os=[],rs={data:()=>({PDFBase64:null,loading:!1,files:[]}),computed:{trabajo(){return this.$store.getters["trabajo/getTrabajo"]},archivos(){return this.$store.getters["trabajo/getArchivosTrabajo"]}},created(){this.obtenerTrabajos(),this.TraerStatus(),this.ObtenerUsuarios()},methods:{async obtenerTrabajos(){await this.$store.dispatch("trabajo/recuperarTrabajo",this.trabajo.id)},async TraerStatus(){await this.$store.dispatch("trabajo/obtenerEstadosTrabajo")},async ObtenerUsuarios(){const e=await this.$store.dispatch("usuario/getUsuarios");switch(e){case 2:break;default:alert("Algo inesperado paso");break}},async subirArchivo(){this.loading=!0;const{error:e,message:a}=await this.$store.dispatch("trabajo/AXN_SubirArchivo",{work:this.trabajo.id,PDFBase64:this.PDFBase64});e?alert(a):(this.enviar(),this.loading=!1)},async enviar(){const{id:e,property_office:a,area_user:t,assigned_user:o,concept:r,proyect:s,status:i}=this.trabajo,{error:n,message:c}=await this.$store.dispatch("trabajo/updatework",{id:e,status_id:i.id,project_id:s.id,concept_id:r.id,property_office_id:a.id,assigned_user_id:o.id,area_user_id:t.id,send_review:!0});alert(c)}}},ss=rs,is=Object(C["a"])(ss,ts,os,!1,null,null,null),ns=is.exports,cs=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{justify:"center"}},[a(Ia["a"],{attrs:{cols:"8"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["c"],[a("listar-trabajos",{attrs:{objAsignar:{isAsignarBtn:!0,deshabilitar:!e.isInmuebles,redireccionar:"asignar-trabajos"},headers:e.headers}})],1)],1)],1)],1)},ls=[],us={data:()=>({headers:[{value:"proyecto",text:"Proyecto"},{value:"concepto",text:"Concepto"},{value:"status",text:"Status"},{value:"inmueble.cliente",text:"Cliente"},{value:"inmueble.nombre",text:"Inmueble"},{value:"inmueble.estado",text:"Estado inmueble"},{value:"usuario_asignado",text:"Asignado"},{value:"usuario_area",text:"Responsable"},{value:"creado",text:"Creado"},{value:"modificado",text:"Modificado"}]}),components:{"listar-trabajos":At},computed:{cliente(){return this.$store.getters["cliente/getCliente"]},isInmuebles(){return this.$store.getters["inmueble/getInmuebles"].length}},created(){this.inicializarTrabajosCliente()},methods:{async inicializarTrabajosCliente(){await this.$store.dispatch("trabajo/obtenerTrabajosCliente",{cliente:this.cliente.id})}}},ds=us,ms=Object(C["a"])(ds,cs,ls,!1,null,null,null),ps=ms.exports,bs=function(){var e=this,a=e._self._c;return a(va["a"],[a(Sa["a"],[a(Ia["a"],{attrs:{cols:"12",sm:"12","offset-md":"2"}},[a(Yr["a"],{attrs:{mandatory:""},model:{value:e.icon,callback:function(a){e.icon=a},expression:"icon"}},[a(m["a"],{attrs:{value:"creado"},on:{click:function(a){return e.$router.push({name:"recursos-usuario"})}}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Creado")])]),a(m["a"],{attrs:{value:"asignado"},on:{click:function(a){return e.$router.push({name:"solicitudes"})}}},[a("span",{staticClass:"hidden-sm-and-down"},[e._v("Asignado")])])],1)],1)],1),a("router-view")],1)},gs=[],fs={data:()=>({icon:void 0})},_s=fs,hs=Object(C["a"])(_s,bs,gs,!1,null,null,null),vs=hs.exports,ys=t("8dd9"),Cs=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"2"}},[a(ys["a"],{staticClass:"pa-4",attrs:{color:"grey lighten-4"}},[a("h1",[a("b",[e._v("Recursos")])])]),a(S["a"],[a(E["a"],{model:{value:e.recursoSeleccionado,callback:function(a){e.recursoSeleccionado=a},expression:"recursoSeleccionado"}},e._l(e.recursos,(function([t]){return a(A["a"],{key:t,attrs:{link:""}},[a(P["b"],[a(P["d"],[e._v(e._s(t))])],1),a(M["a"],[e._v(e._s(e.recursos_n.length))])],1)})),1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a("peticiones",{attrs:{isConfirmarRecurso:e.isConfirmarRecurso}})],1)],1)},js=[],xs=function(){var e=this,a=e._self._c;return a("div",[a(rt["a"],{staticClass:"elevation-5 row-pointer",attrs:{headers:e.headers,items:e.recursos,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",pageText:""},"no-data-text":"No tienes solicitudes de recursos pendientes",loading:e.cargando},on:{"click:row":e.recuperarRecurso},scopedSlots:e._u([e.isConfirmarRecurso||e.isValidarRecurso?{key:"item.actions",fn:function({item:t,index:o}){return[e.isConfirmarRecurso?a("confirmar",{attrs:{mensaje:"Estás a punto de confirmar la solicitud de recurso. ¿Estás seguro?",id:t.id,indice:o,tipo_pago:"¿Confirmar "+t.tipo_pago+"?",icon:"mdi-check",color:"success"},on:{emitConfirmacion:e.confirmarRecurso}}):e._e(),e.isValidarRecurso?a("confirmar",{attrs:{mensaje:"Estás a punto de verificar la solicitud de recurso. ¿Estás seguro?",id:t.id,indice:o,tipo_pago:"¿Verificar "+t.tipo_pago+"?",icon:"mdi-check",color:"success"},on:{emitConfirmacion:e.confirmarValidacion}}):e._e(),a(p["a"],{attrs:{color:"error"}},[e._v(" mdi-close ")])]}}:null,{key:"item.solicitud",fn:function({item:t}){return[a(p["a"],{attrs:{color:t.solicitud?"success":"error"}},[e._v(e._s(t.solicitud?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}},{key:"item.validado",fn:function({item:t}){return[a(p["a"],{attrs:{color:t.validado?"success":"error"}},[e._v(e._s(t.validado?"mdi-checkbox-marked-circle":"mdi-close-circle"))])]}},{key:"item.pago_separado",fn:function({item:a}){return[e._v(" "+e._s(a.pago_separado?"Si":"No")+" ")]}}],null,!0)}),a("recuperar-solicitud-recurso",{attrs:{dialog:e.dialogRecurso,id_recurso:e.peticion,nombre_archivo:e.isValidarRecurso?"Comprobante de validación":"Facturas",indice_recuros:e.indice},on:{emitDialog:e.setDialogRecurso}})],1)},ks=[],$s=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{transition:"dialog-bottom-transition"},model:{value:e.dialogRecurso,callback:function(a){e.dialogRecurso=a},expression:"dialogRecurso"}},[a(it["a"],{attrs:{dark:"",color:"primary",flat:""}},[a(c["a"]),a(D["a"],{attrs:{"offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({attrs:{"x-large":"",icon:""}},"v-btn",o,!1),t),[a(p["a"],[e._v("mdi-dots-horizontal")])],1)]}}])},[a(S["a"],[a(A["a"],[a(M["a"],[a(P["d"],[e._v("Modificar")])],1)],1),a(A["a"],[a("confirmar",{attrs:{mensaje:"Estás a punto de eliminar esta solicitud de recursos. ¿Estás seguro?",id:e.recurso.id,indice:e.indice_recuros,tipo_pago:"¿Eliminar "+e.recurso.tipo_pago+"?",icon:"mdi-delete",color:"error"},on:{emitConfirmacion:e.eliminarSolicitudRecurso}})],1)],1)],1),a(m["a"],{attrs:{"x-large":"",icon:""},on:{click:function(a){e.dialogRecurso=!1}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(Sa["a"],{attrs:{"no-gutters":""}},[a(Ia["a"],{staticClass:"flex-grow-1 flex-shrink-0",attrs:{cols:"12",sm:"8"}},[a("tabla-peticiones",{attrs:{cabecera:e.headers,recurso:e.recurso}}),a("archivo",{attrs:{recurso_id:e.recurso.id}})],1),a(Ia["a"],{staticClass:"flex-grow-1 flex-shrink-0",attrs:{cols:"12",sm:"4"}},[a("Comentarios")],1)],1)],1)},ws=[],Is=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"d-flex flex-column fill-height",attrs:{fluid:""}},[a(f["c"],{staticClass:"flex-grow-1 overflow-y-auto"},e._l(e.comentarios,(function(t){return a(s["a"],{key:t.id,staticClass:"mb-16",attrs:{color:"rgba(0,0,0,0)",flat:""}},[e.usuario==t.usuario.id?a(w["a"],{staticClass:"mt-10 mr-2",attrs:{"max-width":"350px",color:"blue",dark:""}},[a(A["a"],{attrs:{"three-line":""}},[a(P["b"],[a("div",{staticClass:"mb-4"},[e._v(e._s(t.comentario))]),a(P["c"],[e._v("Hace 16 mins "),a("span",{staticClass:"ml-16"},[e._v("Visto 1:03PM")])])],1)],1)],1):a($["a"],{attrs:{bordered:"",bottom:"",color:"grey",dot:"","offset-x":"16","offset-y":"9"}},[a(k["a"],{staticClass:"mt-n5 mr-2",attrs:{size:"30",elevation:"10"}},[a("img",{attrs:{src:"https://content.throwbacks.com/images/2017/11/panthro8.JPG"}})])],1),e.usuario==t.usuario.id?a($["a"],{attrs:{bordered:"",bottom:"",color:"green",dot:"","offset-x":"10","offset-y":"10"}},[a(k["a"],{staticClass:"mt-n5",attrs:{size:"30",elevation:"10"}},[a("img",{attrs:{src:"https://i.ytimg.com/vi/MZr4KirBYtQ/hqdefault.jpg"}})])],1):a(w["a"],{staticClass:"mt-10",attrs:{"max-width":"350px"}},[a(A["a"],{attrs:{"three-line":""}},[a(P["b"],[a("div",{staticClass:"mb-4"},[e._v(" "+e._s(t.comentario)+" ")]),a(P["c"],[e._v("Hace 12 mins")])],1)],1)],1)],1)})),1),a(f["c"],{staticClass:"flex-shrink-1"},[a(ya["a"],{attrs:{loading:e.cargando,"append-outer-icon":"mdi-send",filled:"","clear-icon":"mdi-close-circle",clearable:"",label:"Message",type:"text"},on:{"click:append-outer":e.sendMessage,"click:clear":e.clearMessage},model:{value:e.comentario,callback:function(a){e.comentario=a},expression:"comentario"}})],1)],1)},Ss=[],As={data:()=>({comentario:""}),computed:{comentarios(){return this.$store.getters["recurso/getComentarios"]},usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]},recurso(){return this.$store.getters["recurso/getRecurso"]},cargando(){return this.$store.getters["recurso/getCargando"]}},methods:{async sendMessage(){const{id:e}=this.recurso;if(this.comentario){const a={recurso:e,usuario:this.usuario,comentario:this.comentario},{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/hacerComentario",a);r?this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r}):this.clearMessage()}},clearMessage(){this.comentario=""}}},Ms=As,Ps=Object(C["a"])(Ms,Is,Ss,!1,null,null,null),Es=Ps.exports,Ds=function(){var e=this,a=e._self._c;return a(Sa["a"],[a(Ia["a"],{attrs:{cols:"12",sm:"12"}},[a(rt["a"],{staticClass:"elevation-5 row-pointer",attrs:{headers:e.cabecera,items:e.recurso.peticiones,"loading-text":"Cargando... por favor espere","footer-props":{itemsPerPageText:"Filas por página",pageText:""},"no-data-text":"No tienes trabajos.",loading:e.cargando},scopedSlots:e._u([{key:"item.importe",fn:function({item:a}){return[e._v(" $ "+e._s(a.importe.toFixed(2))+" ")]}},{key:"item.creado",fn:function({}){return[e._v(" "+e._s([new Date(e.recurso.creado).getMonth()+1,new Date(e.recurso.creado).getDate(),new Date(e.recurso.creado).getFullYear()].join("/"))+" ")]}}])})],1)],1)},Ts=[],Os={props:{cabecera:{type:Array,default:()=>[]},recurso:{type:Object,default:()=>({})}},computed:{cargando(){return this.$store.getters["recurso/getCargando"]}}},Vs=Os,Us=Object(C["a"])(Vs,Ds,Ts,!1,null,null,null),Fs=Us.exports,Rs=function(){var e=this,a=e._self._c;return a(w["a"],{attrs:{flat:""}},[a("listar-archivos-recurso"),a(f["c"],[a(Ao["a"],{attrs:{label:"Entrada de archivo (PDF, XML)",dense:"",outlined:"",accept:".pdf, .xml","show-size":"",disabled:e.cargando,loading:e.cargando,clearable:"",multiple:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(m["a"],{attrs:{icon:"",disabled:!e.archivoBase64.length},on:{click:function(a){return e.subirArchivo(e.archivoBase64)}}},[a(p["a"],{attrs:{color:"primary"}},[e._v("mdi-cloud-upload")])],1)]},proxy:!0}]),model:{value:e.archivoBase64,callback:function(a){e.archivoBase64=a},expression:"archivoBase64"}})],1)],1)},Ns=[],Bs=t("ce87"),zs=function(){var e=this,a=e._self._c;return a(Sa["a"],{staticClass:"container"},e._l(e.archivos,(function(t,o){return a(Ia["a"],{key:o,attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2"}},[a(Bs["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:r}){return[a(w["a"],{attrs:{elevation:r?12:2}},[a(f["c"],[a(k["a"],{attrs:{tile:"",size:"100",color:"grey lighten-2"}},[a(p["a"],{attrs:{"x-large":""}},[e._v("mdi-paperclip")])],1)],1),a("span",{class:{"show-btns":r}},[e._v("Nombre archivo")]),a(f["a"],[a(m["a"],{class:{"show-btns":!r},attrs:{icon:""},on:{click:function(a){return e.d(t)}}},[a(p["a"],[e._v(" mdi-download ")])],1),a("confirmar-eliminar-archivo",{attrs:{mensaje:"Estás a punto de eliminar esta archivo. ¿Estás seguro?",id:t.id,indice:o,tipo_pago:"¿Eliminar "+t.nombre+"?",icon:"mdi-delete",color:r?"":"rgba(255, 255, 255, 1) !important"},on:{emitConfirmacion:e.eliminarArchivoRecurso}})],1)],1)]}}],null,!0)})],1)})),1)},Ls=[],Gs={components:{"confirmar-eliminar-archivo":_o},computed:{archivos(){return this.$store.getters["recurso/getArchivos"]}},methods:{async eliminarArchivoRecurso({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:e,estado:o,error:r}=await this.$store.dispatch("recurso/eliminarArhivoRecurso",{id:a,indice:t});this.$store.commit("alerta/addAlertas",{estado:o,mensaje:e,error:r})}},d({archivo:e}){window.open(e)}}},qs=Gs,Xs=(t("11e7"),Object(C["a"])(qs,zs,Ls,!1,null,"52784cd4",null)),Hs=Xs.exports,Js={props:{recurso_id:{type:Number,default:0}},data:()=>({archivoBase64:[],overlay:!1}),components:{"listar-archivos-recurso":Hs},computed:{cargando(){return this.$store.getters["recurso/getCargando"]},archivos(){return this.$store.getters["recurso/getArchivos"]},usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},methods:{async subirArchivo(e){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("recurso/subirArchivo",{archivos:e,recurso:this.recurso_id,usuario:this.usuario});this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o}),o||this.clearArchivoBase64()},clearArchivoBase64(){this.archivoBase64=[]}}},Ys=Js,Ks=Object(C["a"])(Ys,Rs,Ns,!1,null,null,null),Qs=Ks.exports,Zs={props:{dialog:{type:Boolean,default:!1},indice_recuros:{type:Number,default:-1}},data:()=>({headers:[{text:"Solicitado",value:"trabajo.solicitado"},{text:"Fecha solicitado",value:"creado"},{text:"Gestor",value:"trabajo.gestor"},{text:"Cliente",value:"inmueble.cliente"},{text:"Clabe",value:"inmueble.clave"},{text:"Sucursal",value:"inmueble.nombre",sortable:!1},{text:"Estado",value:"inmueble.estado",sortable:!1},{text:"Municipio",value:"inmueble.municipio",sortable:!1},{text:"Concepto",value:"trabajo.concepto",sortable:!1},{text:"Importe",value:"importe",sortable:!1}]}),components:{Comentarios:Es,Confirmar:_o,"tabla-peticiones":Fs,archivo:Qs},computed:{recurso(){return this.$store.getters["recurso/getRecurso"]},dialogRecurso:{get(){return this.dialog},set(e){this.$emit("emitDialog",e),this.$store.commit("recurso/cleanRecurso"),this.$store.commit("recurso/cleanComentarios"),this.$store.commit("recurso/clearArchivos")}},cargando(){return this.$store.getters["recurso/getCargando"]}},methods:{async eliminarSolicitudRecurso({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:e,estado:o,error:r}=await this.$store.dispatch("recurso/eliminarSolicitudRecurso",{id:a,indice:t});this.$store.commit("alerta/addAlertas",{estado:o,mensaje:e,error:r}),this.dialogRecurso=!1}}}},Ws=Zs,ei=Object(C["a"])(Ws,$s,ws,!1,null,null,null),ai=ei.exports,ti={props:{isConfirmarRecurso:{type:Boolean,default:!1},isValidarRecurso:{type:Boolean,default:!1},addHeaders:{tyepe:Object,default:()=>[]}},data:()=>({headers:[{text:"Fcha solicitado",value:"creado"},{text:"Solicitado por",value:"usuario_asignado"},{text:"Tipo de pago",value:"tipo_pago"},{text:"Pago por separado",value:"pago_separado"},{text:"Concepto",value:"concepto"},{text:"Importe",value:"importe"},{text:"Solicitud de recursos",value:"actions",align:"center"}],dialogRecurso:!1,peticion:-1,indice:-1}),components:{"recuperar-solicitud-recurso":ai,confirmar:_o},mounted(){if(this.addHeaders.length)for(const e of this.addHeaders)this.headers.push(e)},computed:{recursos(){return this.$store.getters["recurso/getRecursos"]},cargando(){return this.$store.getters["recurso/getCargando"]}},methods:{setDialogRecurso(e){this.dialogRecurso=e},async confirmarRecurso({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:o,estado:r,error:s}=await this.$store.dispatch("recurso/confirmarValidarRecuruso",{id:a,confirmacion:e,indice:t});this.$store.commit("alerta/addAlertas",{estado:r,mensaje:o,error:s})}},async confirmarValidacion({confirmacion:e,id:a,indice:t}){if(e){const{mensaje:o,estado:r,error:s}=await this.$store.dispatch("recurso/confirmarValidarRecuruso",{id:a,validacion:e,indice:t});this.$store.commit("alerta/addAlertas",{estado:r,mensaje:o,error:s})}},async recuperarRecurso({id:e},{index:a}){this.peticion=e,this.dialogRecurso=!0,this.indice=a;const{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/recuperarRecurso",e);if(r)this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r});else{const{error:a,estado:t,mensaje:o}=await this.$store.dispatch("recurso/recuperarComentariosRecurso",e);a&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:o,error:a}),await this.$store.dispatch("recurso/recuperarArchivoRecurso",e)}}}},oi=ti,ri=(t("db19"),Object(C["a"])(oi,xs,ks,!1,null,"6d2c1f74",null)),si=ri.exports,ii={data:()=>({recursos:[["Solicitudes de recursos"],["Recursos"],["Transferencias"],["Cheques"]],recurso:0,isConfirmarRecurso:!0,icon:"creado"}),components:{peticiones:si},computed:{recursos_n(){return this.$store.getters["recurso/getRecursos"]},recursoSeleccionado:{get(){return this.recurso},set(e){const a=void 0===e?this.recurso:e;this.recurso=a,0===this.recurso?(this.inicializarRecursos({solicitud:"False"}),this.isConfirmarRecurso=!0):1===this.recurso?this.inicializarRecursos({solicitud:"True"},this.isConfirmarRecurso=!1):2===this.recurso?this.inicializarRecursos({tipo_pago:"Transferencia"},this.isConfirmarRecurso=!1):(this.inicializarRecursos({tipo_pago:"Cheque"}),this.isConfirmarRecurso=!1)}},usuario(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},created(){this.inicializarRecursos({solicitud:"False"})},methods:{async inicializarRecursos({solicitud:e,tipo_pago:a}){const{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/recuperarRecursosUsuario",{solicitud:e,gestor:this.usuario,tipo_pago:a});r&&this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r})}}},ni=ii,ci=Object(C["a"])(ni,Cs,js,!1,null,null,null),li=ci.exports,ui=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"2"}},[a(ys["a"],{staticClass:"pa-4",attrs:{color:"grey lighten-4"}},[a("h1",[a("b",[e._v("Pagos")])])]),a(S["a"],[a(E["a"],{model:{value:e.pago_seleccionado,callback:function(a){e.pago_seleccionado=a},expression:"pago_seleccionado"}},e._l(e.tipo_pago,(function([t]){return a(A["a"],{key:t,attrs:{link:""}},[a(P["b"],[a(P["d"],[e._v(e._s(t))])],1),a(M["a"],[e._v(e._s(e.recursos_n.length))])],1)})),1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a("peticiones",{attrs:{isValidarRecurso:e.isValidarRecurso}})],1)],1)},di=[],mi={data:()=>({tipo_pago:[["Transferencia"],["Cheque"],["Reembolso"],["Comprobacion"]],pago:0,isValidarRecurso:!0}),components:{peticiones:si},computed:{recursos_n(){return this.$store.getters["recurso/getRecursos"]},pago_seleccionado:{get(){return this.pago},set(e){const a=void 0===e?this.pago:e;this.pago=a,0===this.pago?(this.inicializarRecursos({pago:"Transferencia",bool:"False"}),this.isValidarRecurso=!0):1===this.pago?(this.inicializarRecursos({pago:"Cheque",bool:"False"}),this.isValidarRecurso=!0):2===this.pago?(this.inicializarRecursos({pago:"Cheque",bool:"True"}),this.isValidarRecurso=!1):(this.inicializarRecursos({pago:"Transferencia",bool:"True"}),this.isValidarRecurso=!1)}}},created(){this.inicializarRecursos({pago:"Transferencia",bool:"False"})},methods:{async inicializarRecursos({pago:e,bool:a}){const{mensaje:t,estado:o,error:r}=await this.$store.dispatch("recurso/recuperarRecursos",{tipo_pago:e,validado:a});r&&this.$store.commit("alerta/addAlertas",{estado:o,mensaje:t,error:r})}}},pi=mi,bi=Object(C["a"])(pi,ui,di,!1,null,null,null),gi=bi.exports,fi=function(){var e=this,a=e._self._c;return a(va["a"],[a(Sa["a"],{attrs:{dense:"",justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8"}},[a(ut["a"],{model:{value:e.e1,callback:function(a){e.e1=a},expression:"e1"}},[a(mt["a"],[a(Ho["a"],{attrs:{complete:e.e1>1,step:"1"}},[e._v(" Paso 1 "),a("br"),e._v(" Trabajos ")]),a(I["a"]),a(Ho["a"],{attrs:{complete:e.e1>2,step:"2"}},[e._v(" Paso 2 "),a("br"),e._v(" Fondos ")]),a(I["a"]),a(Ho["a"],{attrs:{complete:e.e1>3,step:"3"}},[e._v(" Paso 3 "),a("br"),e._v(" Datos general ")]),a(I["a"]),a(Ho["a"],{attrs:{step:"4"}},[e._v(" Paso 4 "),a("br"),e._v(" Confirmacion ")])],1),a(mt["b"],[a(dt["a"],{attrs:{step:"1"}},[a("tabla-trabajos-usuario",{attrs:{mostrar_seleccionados:!0,is_peticion:!1,headers:e.headers}}),a("br"),a(m["a"],{attrs:{color:"success",block:"",disabled:e.isTrabajosSeleccionados},on:{click:function(a){return e.verificarPeticiones()}}},[e._v(" Continue ")])],1),a(dt["a"],{attrs:{step:"2"}},[a(m["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=1}}},[e._v(" Regresar ")]),a("br"),a("formulario-solcitud-recursos",{on:{eventoContinuar:e.setValidP2}}),a("br"),a(m["a"],{attrs:{color:"success",block:"",disabled:!e.isValid_p2},on:{click:function(a){e.e1=3}}},[e._v(" Continue ")])],1),a(dt["a"],{attrs:{step:"3"}},[a(m["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=2}}},[e._v(" Regresar ")]),a("br"),a("formulario-crear-recurso",{on:{eventoContinuar:e.setValidP3}}),a("br"),a(m["a"],{attrs:{color:"success",block:"",disabled:!e.isValid_p3},on:{click:function(a){e.e1=4}}},[e._v(" Continuar ")])],1),a(dt["a"],{attrs:{step:"4"}},[a(m["a"],{attrs:{color:"warning",block:""},on:{click:function(a){e.e1=3}}},[e._v(" Regresar ")]),a("br"),a("crear-recurso"),a("br"),a(m["a"],{attrs:{color:"primary",block:""},on:{click:function(a){return e.crearSolicitudRecurso()}}},[e._v(" Finalizar ")])],1)],1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"2",md:"2",lg:"2",xl:"2"}},[a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(it["a"],{attrs:{dense:"",elevation:"1"}},[a(l["a"],[e._v("Resumen de la solicitud de recursos ")])],1),a(f["c"],[e._v(" Trabajos: ... "),a("br"),e._v(" Innmuebles: ... "),a("br"),e._v(" Fecha: "+e._s(e.getFechaMod())+" "),a("br"),e._v(" Pagar por separado: "+e._s(e.solicitud_recurso.pago_separado?"Si":"No")+" "),a("br"),e._v(" Tipo: "+e._s(e.solicitud_recurso.tipo_pago?e.solicitud_recurso.tipo_pago:"n/a")+" ")]),a(I["a"]),a(f["d"],[e._v("Total: "+e._s(e.total))]),a("div",{staticClass:"text-end"},[a(m["a"],{attrs:{rounded:"",color:"error"},on:{click:function(a){return e.$router.go(-1)}}},[e._v(" Cancelar "),a(p["a"],{attrs:{right:""}},[e._v("mdi-close-circle-outline")])],1)],1)],1)],1)],1)],1)},_i=[],hi=t("b73d"),vi=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(f["d"],{staticClass:"grey white--text"},[e._v(" Fondos necesarios: "),a(c["a"]),e._v(" MX$ "+e._s(e.total)+" ")],1),a(f["d"],{staticClass:"warning lighten-4"},[a(hi["a"],{attrs:{label:"¿Efectuar el pago por separado? "+(e.isPagar_separado_solicitud_recuros?"SI":"NO"),inset:""},model:{value:e.isPagar_separado_solicitud_recuros,callback:function(a){e.isPagar_separado_solicitud_recuros=a},expression:"isPagar_separado_solicitud_recuros"}})],1),a(f["c"],[a(Ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(st["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(rt["a"],{attrs:{items:e.peticiones_verificadas,headers:e.cabecera,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:" p - Tp de n"}},scopedSlots:e._u([{key:"item.concepto",fn:function({index:t}){return[a("b",[e._v(e._s(e.trabajos_seleccionados[t].concepto))]),e._v(" ("+e._s(e.trabajos_seleccionados[t].proyecto)+") ")]}},{key:"item.inmueble",fn:function({index:a}){return[e._v(" "+e._s(e.trabajos_seleccionados[a].inmueble.nombre)+" ("+e._s(e.trabajos_seleccionados[a].inmueble.clave)+") ")]}},{key:"item.monto",fn:function({item:t}){return[t.error?a(w["a"],{staticClass:"text-subtitle-2 text-center ma-1",attrs:{color:"error lighten-3",width:"200"}},[e._v(" "+e._s(t.error)+" ")]):a(w["a"],{staticClass:"ma-1",attrs:{width:"200"}},[a(ya["a"],{attrs:{label:"Importe",solo:"",dense:"",autofocus:"",prefix:"$",type:"number",placeholder:"1.00",step:"0.1",min:"1",rules:[e=>e>0||"Es necesario escribir el monto mayor a 0.00"]},model:{value:t.monto,callback:function(a){e.$set(t,"monto",a)},expression:"item.monto"}})],1)]}},{key:"item.metodo_pago",fn:function({item:t,index:o}){return[t.error?e._e():a(w["a"],{attrs:{icon:"",width:"200"}},[a(ya["a"],{attrs:{solo:"",dense:"",autofocus:"",disabled:"",rules:[e=>!!e||"Seleccione un método de pago"],type:"number"},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a(p["a"],{attrs:{color:"success"},on:{click:function(a){return e.asignarMetodoPago({peticion:t,indice:o})}}},[e._v("mdi-credit-card-plus")])]},proxy:!0}],null,!0),model:{value:t.datos_bancarios,callback:function(a){e.$set(t,"datos_bancarios",a)},expression:"item.datos_bancarios"}})],1)]}},{key:"item.banco",fn:function({item:t}){return[t.error?e._e():a(w["a"],{staticClass:"ma-1",attrs:{width:"200"}},[a(ya["a"],{attrs:{label:"Banco",solo:"",dense:"",autofocus:"",rules:[e=>!!e||"Es necesario escribir el banco"]},model:{value:t.banco,callback:function(a){e.$set(t,"banco",a)},expression:"item.banco"}})],1)]}},{key:"item.eliminar",fn:function({index:t}){return[a(m["a"],{attrs:{icon:""},on:{click:function(a){return e.confirmarEliminacion(t)}}},[a(p["a"],{attrs:{color:"error"}},[e._v("mdi-trash-can")])],1)]}}])})],1)],1),a(Va["a"],{attrs:{"max-width":"700",persistent:""},model:{value:e.dialog_metodo_pago,callback:function(a){e.dialog_metodo_pago=a},expression:"dialog_metodo_pago"}},[a("seleccionar-metodo-pago",{attrs:{peticion:e.peticion,editar_indice_peticion:e.indice_peticion},on:{emitDialogMetodoPago:e.setDialogMetodoPago}})],1)],1)],1)},yi=[],Ci=t("ac7c"),ji=t("2b5d"),xi=t("34c3"),ki=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v("Seleccione un método de pago "),a(c["a"]),a(m["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.$emit("emitDialogMetodoPago",{isDialogo:!1})}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a("br"),a(f["c"],[a(Ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Sa["a"],{attrs:{dense:""}},[a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a(ji["a"],{attrs:{items:e.beneficiarios,label:"Nombre del beneficiario","item-text":"nombre",rules:[e=>!!e||"Es necesario elegir un beneficiario"],clearable:"","clear-icon":"mdi-close","return-object":"",outlined:""},on:{"click:clear":function(a){e.solicitud_recurso.datos_bancarios=null,e.solicitud_recurso.metodo_pago=""}},scopedSlots:e._u([{key:"append-outer",fn:function(){return[e.solicitud_recurso.beneficiario?e._e():a("formulario-crear-beneficiario")]},proxy:!0}]),model:{value:e.solicitud_recurso.beneficiario,callback:function(a){e.$set(e.solicitud_recurso,"beneficiario",a)},expression:"solicitud_recurso.beneficiario"}})],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},["Convenio"===e.solicitud_recurso.metodo_pago?a(ya["a"],{attrs:{outlined:"",label:"Pago por convenio",rules:e.regla_convenio,counter:"6",type:"number"},model:{value:e.convenio,callback:function(a){e.convenio=a},expression:"convenio"}}):e._e(),"Referencia"===e.solicitud_recurso.metodo_pago?a(ya["a"],{attrs:{outlined:"",rules:e.regla_referencia,label:"Pago por referencia",counter:"16",type:"number"},model:{value:e.referencia,callback:function(a){e.referencia=a},expression:"referencia"}}):e._e(),"Linea de captura"==e.solicitud_recurso.metodo_pago?a(ya["a"],{attrs:{outlined:"",rules:e.regla_linea_captura,label:"Liena de captura",counter:"20",type:"number"},model:{value:e.linea_captura,callback:function(a){e.linea_captura=a},expression:"linea_captura"}}):e._e(),e.isMetodoPagoGenereal?a(ya["a"],{attrs:{rules:[e=>!!e||"Es necesario escoger un tipo de pago general"],outlined:"",disabled:""},model:{value:e.solicitud_recurso.datos_bancarios,callback:function(a){e.$set(e.solicitud_recurso,"datos_bancarios",a)},expression:"solicitud_recurso.datos_bancarios"}}):e._e()],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a(f["d"],[e._v("Genereal")]),a(I["a"]),a(S["a"],{attrs:{disabled:!e.isMetodoPagoGenereal||null===e.solicitud_recurso.beneficiario,color:e.isMetodoPagoGenereal?"":"grey"}},[a(E["a"],{model:{value:e.solicitud_recurso.datos_bancarios,callback:function(a){e.$set(e.solicitud_recurso,"datos_bancarios",a)},expression:"solicitud_recurso.datos_bancarios"}},e._l(e.metodos_pago,(function(t){return a(A["a"],{key:t.keys,attrs:{value:null!=e.solicitud_recurso.beneficiario?e.solicitud_recurso.beneficiario[t.keys]:""},on:{click:function(a){e.solicitud_recurso.metodo_pago=t.texto}},scopedSlots:e._u([{key:"default",fn:function({active:o}){return[a(M["a"],[a(Ci["a"],{attrs:{"input-value":o,color:"primary"}})],1),a(P["b"],[a(P["d"],[a("b",[e._v(e._s(null!=e.solicitud_recurso.beneficiario?e.solicitud_recurso.beneficiario[t.keys]:"Seleccione un beneficiario"))])]),a(P["c"],[e._v(e._s(t.texto))])],1),a(xi["a"],[a(p["a"],[e._v(e._s(t.icono))])],1)]}}],null,!0)})})),1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"6"}},[a(f["d"],[e._v("Otro")]),a(I["a"]),a(S["a"],[a(E["a"],{model:{value:e.solicitud_recurso.metodo_pago,callback:function(a){e.$set(e.solicitud_recurso,"metodo_pago",a)},expression:"solicitud_recurso.metodo_pago"}},e._l(e.otros_metodos_pago,(function(t){return a(A["a"],{key:t.pago,attrs:{value:t.texto},scopedSlots:e._u([{key:"default",fn:function({active:o}){return[a(M["a"],[a(Ci["a"],{attrs:{"input-value":o,color:"primary"}})],1),a(P["b"],[a(P["d"],[a("b",[e._v("Seleccionar para escribir")])]),a(P["c"],[e._v(e._s(t.texto))])],1),a(xi["a"],[a(p["a"],[e._v(e._s(t.icono))])],1)]}}],null,!0)})})),1)],1)],1)],1)],1)],1),a(f["a"],[a(m["a"],{attrs:{block:"",color:"success",disabled:!e.valid},on:{click:function(a){return e.asignarMetodPagoPeticion()}}},[e._v("Asignar método pago")])],1)],1)},$i=[],wi=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{transition:"dialog-top-transition","max-width":"500",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({attrs:{color:"success",icon:""}},"v-btn",o,!1),t),[a(p["a"],[e._v("mdi-plus")])],1)]}},{key:"default",fn:function(t){return[a(w["a"],{staticClass:"mx-auto",attrs:{elevation:"5"}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Crear nuevo beneficiario "),a(c["a"]),a(m["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(f["c"],[a(Ua["a"],{ref:"formularioNuevoBeneficiario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Sa["a"],{attrs:{dense:""}},[a(Ia["a"],{attrs:{cols:"12"}},[a(ya["a"],{attrs:{label:"Beneficiario",rules:[e=>!!e||"Es necesario escribir un nombre del para el beneficiario"]},model:{value:e.beneficiario.nombre,callback:function(a){e.$set(e.beneficiario,"nombre",a)},expression:"beneficiario.nombre"}})],1),a(Ia["a"],{attrs:{cols:"12"}},[a(ya["a"],{attrs:{label:"Clave",rules:[e=>!!e||"Es necesario escribir la clave"],type:"number"},model:{value:e.beneficiario.clave,callback:function(a){e.$set(e.beneficiario,"clave",a)},expression:"beneficiario.clave"}})],1),a(Ia["a"],{attrs:{cols:"12"}},[a(ya["a"],{attrs:{label:"Numero tarjeta",rules:[e=>!!e||"Es necesario escribir el número de la tarjeta"],type:"number"},model:{value:e.beneficiario.numero_tarjeta,callback:function(a){e.$set(e.beneficiario,"numero_tarjeta",a)},expression:"beneficiario.numero_tarjeta"}})],1)],1)],1)],1),a(f["a"],[a(c["a"]),a(m["a"],{attrs:{color:"success",disabled:!e.valid,outlined:""},on:{click:function(a){return e.crearBeneficiario(t)}}},[e._v("Crear")]),a(m["a"],{attrs:{color:"error",outlined:""},on:{click:function(a){return e.cerrrarDialogo(t)}}},[e._v("Cancelar")])],1)],1)]}}])})},Ii=[],Si={data:()=>({valid:!0,beneficiario:{nombre:"",clave:null,numero_tarjeta:null}}),methods:{cerrrarDialogo(e){e.value=!1,this.$refs.formularioNuevoBeneficiario.reset()},async crearBeneficiario(e){if(this.$refs.formularioNuevoBeneficiario.validate()){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("beneficiario/crearBeneficiario",this.beneficiario);this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o}),o||this.cerrrarDialogo(e)}}}},Ai=Si,Mi=Object(C["a"])(Ai,wi,Ii,!1,null,null,null),Pi=Mi.exports,Ei={props:{peticion:{typeof:Object,default:()=>{}},editar_indice_peticion:{type:Number,default:-1}},data:()=>({valid:!1,solicitud_recurso:{beneficiario:null,datos_bancarios:null,metodo_pago:""},metodos_pago:[{texto:"Clabe",keys:"clave",icono:"mdi-key-variant"},{texto:"Cuenta",keys:"cuenta",icono:"mdi-account"},{texto:"Numero tarjeta",keys:"numero_tarjeta",icono:"mdi-credit-card"}],otros_metodos_pago:[{texto:"Convenio",icono:"mdi-book-open"},{texto:"Referencia",icono:"mdi-account-switch"},{texto:"Linea de captura",icono:"mdi-barcode"}],regla_convenio:[e=>!!e||"Es necesario escribir un número de convenio",e=>e&&e.length<=6&&e.length>=5||"Es necesario escbibir de 5 a 6 digitos"],regla_referencia:[e=>!!e||"Es necesario escribir un número de referencia",e=>e&&16===e.length||"Es necesario escbibir de 16 digitos"],regla_linea_captura:[e=>!!e||"Es necesario escribir un número de capturea",e=>e&&20===e.length||"Es necesario escbibir de 20 digitos"]}),components:{"formulario-crear-beneficiario":Pi},computed:{linea_captura:{get(){return this.solicitud_recurso.datos_bancarios},set(e){this.$refs.formulario&&this.$refs.formulario.validate()&&(this.solicitud_recurso.datos_bancarios=e)}},convenio:{get(){return this.solicitud_recurso.datos_bancarios},set(e){this.$refs.formulario&&this.$refs.formulario.validate()&&(this.solicitud_recurso.datos_bancarios=e)}},referencia:{get(){return this.solicitud_recurso.datos_bancarios},set(e){this.$refs.formulario&&this.$refs.formulario.validate()&&(this.solicitud_recurso.datos_bancarios=e)}},beneficiarios(){return this.$store.getters["beneficiario/getBeneficiarios"]},isMetodoPagoGenereal(){const{metodo_pago:e}=this.solicitud_recurso;return"Convenio"!==e&&"Referencia"!==e&&"Linea de captura"!==e}},created(){this.inicializarBeneficiarios()},methods:{async inicializarBeneficiarios(){await this.$store.dispatch("beneficiario/obtenerBeneficiarios")},asignarMetodPagoPeticion(){if(this.$refs.formulario.validate()){const{editar_indice_peticion:e,solicitud_recurso:a}=this;this.$store.commit("recurso/assignPeticionVerificada",{editar_index:e,editar_peticion:a}),this.$emit("emitDialogMetodoPago",{isDialogo:!1})}}}},Di=Ei,Ti=Object(C["a"])(Di,ki,$i,!1,null,null,null),Oi=Ti.exports,Vi={data:()=>({continuar_p3:!0,checkbok:!1,dialog_metodo_pago:!1,peticion:null,indice_peticion:-1,cabecera:[{text:"Concepto",value:"concepto"},{text:"Inmueble",value:"inmueble"},{text:"Importe",value:"monto"},{text:"Metodo pago",value:"metodo_pago",sortable:!1},{text:"Banco",value:"banco"},{text:"Eliminar",value:"eliminar"}]}),components:{"seleccionar-metodo-pago":Oi},computed:{trabajos_seleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},peticiones_verificadas(){return this.$store.getters["recurso/getPeticionesVerificadas"]},total(){var e=0;for(const a of this.peticiones_verificadas)e=a.monto?Number(a.monto)+e:0+e;return new Number(e.toFixed(2)).toLocaleString("es-MX",{style:"currency",currency:"MXN"})},valid:{get(){return this.continuar_p3},set(e){this.$emit("eventoContinuar",{isValid_p2:e,validacion:this.$refs.formulario})}},isPagar_separado_solicitud_recuros:{get(){return this.$store.getters["recurso/getSolicitudRecurso"].pago_separado},set(e){this.$store.commit("recurso/setSolicitudRecursoPagoSeparado",e)}}},methods:{setDialogMetodoPago({isDialogo:e}){this.dialog_metodo_pago=e},confirmarEliminacion(e){this.$store.commit("trabajo/deleteSeleccionado",e),this.$store.commit("recurso/deleteVerificarPeticionesVerificadas",e)},asignarMetodoPago({peticion:e,indice:a}){this.indice_peticion=a,this.peticion=e,this.dialog_metodo_pago=!0}}},Ui=Vi,Fi=Object(C["a"])(Ui,vi,yi,!1,null,null,null),Ri=Fi.exports,Ni=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v("Datos generales de la solicitud de recurso")]),a("br"),a(f["c"],[a(Ua["a"],{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(Sa["a"],{attrs:{dense:""}},[a(Ia["a"],{attrs:{cols:"12",sm:"4"}},[a(ji["a"],{attrs:{items:e.pagos,label:"Tipo de pago",rules:[e=>!!e||"Es necesario elegir el tipo de pago"],outlined:"",clearable:""},model:{value:e.solicitud_recurso.tipo_pago,callback:function(a){e.$set(e.solicitud_recurso,"tipo_pago",a)},expression:"solicitud_recurso.tipo_pago"}})],1),a(Ia["a"],{attrs:{cols:"12",sm:"4"}},[a(Fa["a"],{attrs:{outlined:"",label:"Concepto de pago",rules:[e=>!!e||"Es necesario escribir los datos bancarios"],"auto-grow":"",rows:"1","row-height":"15"},model:{value:e.solicitud_recurso.concepto_pago,callback:function(a){e.$set(e.solicitud_recurso,"concepto_pago",a)},expression:"solicitud_recurso.concepto_pago"}})],1),a(Ia["a"],{attrs:{cols:"12",sm:"4"}},[a(ya["a"],{attrs:{type:"number",label:"Importe",value:e.total,disabled:"",outlined:""}})],1),a(Ia["a"],{attrs:{cols:"12",sm:"12"}},[a(st["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(wr["a"],{staticClass:"container",attrs:{dense:""},scopedSlots:e._u([{key:"top",fn:function(){return[a(it["a"],{attrs:{flat:"",color:"primary lighten-2"}},[a(l["a"],[e._v("Peticiones")])],1)]},proxy:!0},{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v(" Concepto ")]),a("th",{staticClass:"text-left"},[e._v(" Inmueble ")]),a("th",{staticClass:"text-left"},[e._v(" Beneficiario ")]),a("th",{staticClass:"text-left"},[e._v(" Datos bancarios ")]),a("th",{staticClass:"text-left"},[e._v(" Banco ")]),a("th",{staticClass:"text-left"},[e._v(" Importe ")])])]),a("tbody",e._l(e.peticiones_verificadas,(function(t,o){return a("tr",{key:t.trabajo,class:t.error?"error lighten-3":""},[a("td",[a("b",[e._v(e._s(e.trabajos_seleccionados[o].concepto))]),e._v(" ("+e._s(e.trabajos_seleccionados[o].proyecto)+")")]),a("td",[e._v(e._s(e.trabajos_seleccionados[o].inmueble.nombre)+" ("),a("b",[e._v(e._s(e.trabajos_seleccionados[o].inmueble.clave))]),e._v(")")]),a("td",[e._v(e._s(t.beneficiario?t.beneficiario.nombre:"n/a"))]),a("td",[a("b",[e._v(e._s(t.metodo_pago)+":")]),e._v(" "+e._s(t.datos_bancarios))]),a("td",[e._v(e._s(t.banco))]),a("td",[e._v(e._s(t.monto?"$"+parseFloat(t.monto).toFixed(2):""))])])})),0)]},proxy:!0}])})],1)],1)],1)],1)],1)],1)},Bi=[],zi={data:()=>({pagos:["Transferencia","Cheque"],continuar_p4:!1,solicitud_recurso:{tipo_pago:"",concepto_pago:"",pago_separado:!1}}),computed:{peticiones_verificadas(){return this.$store.getters["recurso/getPeticionesVerificadas"]},trabajos_seleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]},valid:{get(){return this.continuar_p4},set(e){this.$emit("eventoContinuar",{isValid_p3:e,validacion:this.$refs.formulario}),this.$refs.formulario&&this.$store.commit("recurso/setSolicitudRecurso",this.solicitud_recurso)}},total(){var e=0;for(const a of this.peticiones_verificadas)e=a.monto?Number(a.monto)+e:0+e;return e.toFixed(2)}}},Li=zi,Gi=Object(C["a"])(Li,Ni,Bi,!1,null,null,null),qi=Gi.exports,Xi=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto",attrs:{outlined:""}},[a(f["d"],{staticClass:"grey white--text"},[e._v(" Resumen de la solicitud recurso ")]),a(f["c"],[a(st["a"],{staticClass:"overflow-y-auto",attrs:{"max-height":"500"}},[a(wr["a"],{staticClass:"container",attrs:{dense:""},scopedSlots:e._u([{key:"top",fn:function(){return[a(it["a"],{attrs:{flat:"",color:"primary lighten-2"}},[a(Sa["a"],{attrs:{justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"4"}},[a("b",[e._v("Tipo de pago")]),e._v(" "),a("br"),e._v(" "+e._s(e.solicitud_recurso.tipo_pago))]),a(Ia["a"],{attrs:{cols:"12",sm:"4"}},[a("b",[e._v("¿Efectuar el pago en una sola Solicitud de recurso?")]),e._v(" "),a("br"),e._v(" "+e._s(e.solicitud_recurso.pago_separado?"NO":"SI"))]),a(Ia["a"],{attrs:{cols:"12",sm:"4"}},[a("b",[e._v("Concepto")]),e._v(" "),a("br"),e._v(" "+e._s(e.solicitud_recurso.concepto_pago))])],1)],1)]},proxy:!0},{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v(" Concepto ")]),a("th",{staticClass:"text-left"},[e._v(" Inmueble ")]),a("th",{staticClass:"text-left"},[e._v(" Beneficiario ")]),a("th",{staticClass:"text-left"},[e._v(" Datos bancarios ")]),a("th",{staticClass:"text-left"},[e._v(" Banco ")]),a("th",{staticClass:"text-left"},[e._v(" Importe ")])])]),a("tbody",e._l(e.peticiones_verificadas,(function(t,o){return a("tr",{key:t.trabajo,class:t.error?"error lighten-3":""},[a("td",[a("b",[e._v(e._s(e.trabajos_seleccionados[o].concepto))]),e._v(" ("+e._s(e.trabajos_seleccionados[o].proyecto)+")")]),a("td",[e._v(e._s(e.trabajos_seleccionados[o].inmueble.nombre)+" ("),a("b",[e._v(e._s(e.trabajos_seleccionados[o].inmueble.clave))]),e._v(")")]),a("td",[e._v(e._s(t.beneficiario?t.beneficiario.nombre:"n/a"))]),a("td",[a("b",[e._v(e._s(t.metodo_pago)+":")]),e._v(" "+e._s(t.datos_bancarios))]),a("td",[e._v(e._s(t.banco))]),a("td",[e._v(e._s(t.monto?new Number(parseFloat(t.monto).toFixed(2)).toLocaleString("es-MX",{style:"currency",currency:"MXN"}):""))])])})),0)]},proxy:!0}])})],1)],1)],1)},Hi=[],Ji={computed:{peticiones_verificadas(){return this.$store.getters["recurso/getPeticionesVerificadas"]},solicitud_recurso(){return this.$store.getters["recurso/getSolicitudRecurso"]},trabajos_seleccionados(){return this.$store.getters["trabajo/getTrabajosSeleccionados"]}}},Yi=Ji,Ki=Object(C["a"])(Yi,Xi,Hi,!1,null,null,null),Qi=Ki.exports,Zi={data:()=>({e1:1,mostrar_seleccionados:!0,isValid_p2:!1,isValid_p3:!1,isValid_p4:!1,headers:[{text:"Proyecto",value:"proyecto"},{text:"Concepto",value:"concepto"},{text:"Status",value:"status"},{text:"Inmueble",value:"inmueble.nombre"},{text:"Clave",value:"inmueble.clave"},{text:"Estado",value:"inmueble.estado"},{text:"Municipio",value:"inmueble.municipio"},{text:"Asignación",value:"creado"},{text:"Actualizado",value:"modificado"}]}),components:{"tabla-trabajos-usuario":At,"formulario-solcitud-recursos":Ri,"formulario-crear-recurso":qi,"crear-recurso":Qi},computed:{trabajos(){return this.$store.getters["trabajo/getTrabajos"]},isTrabajosSeleccionados(){return!this.$store.getters["trabajo/getTrabajosSeleccionados"].length},verificar_peticiones(){return this.$store.getters["recurso/getVerificarPeticiones"]},isPeticiones_verificadas(){return!!this.$store.getters["recurso/getPeticionesVerificadas"].length},solicitud_recurso(){return this.$store.getters["recurso/getSolicitudRecurso"]},total(){var e=0;for(const a of this.$store.getters["recurso/getPeticionesVerificadas"])e=a.monto?Number(a.monto)+e:0+e;return new Number(e.toFixed(2)).toLocaleString("es-MX",{style:"currency",currency:"MXN"})}},methods:{setValidP2({validacion:e}){this.isValid_p2=!!e&&e.validate(),this.isValid_p2=this.isValid_p2?this.isPeticiones_verificadas:this.isValid_p2},setValidP3({validacion:e}){this.isValid_p3=!!e&&e.validate()},async verificarPeticiones(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("recurso/verificarPeticiones",this.verificar_peticiones);this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t}),this.e1=2},getFechaMod(){let e=new Date;return e.toLocaleDateString()},async crearSolicitudRecurso(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("recurso/crearRecurso");t||(this.$store.commit("trabajo/clearSeleccionados"),this.$router.push({name:"recursos-usuario"})),this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},Wi=Zi,en=Object(C["a"])(Wi,fi,_i,!1,null,null,null),an=en.exports,tn=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{dense:"",justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8"}},[a("recursos-usuario",{attrs:{addHeaders:e.headers}})],1)],1)},on=[],rn={data:()=>({headers:[{text:"Solicitado",value:"solicitud",align:"center"},{text:"Validado",value:"validado",align:"center"}]}),components:{"recursos-usuario":si},computed:{username(){return this.$store.getters["MOD_autenticacion/obtenerIdUsuario"]}},created(){this.inicializarRecursosUsuario()},methods:{async inicializarRecursosUsuario(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("recurso/recuperarRecursosUsuario",{solicitado:this.username});t&&this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},sn=rn,nn=Object(C["a"])(sn,tn,on,!1,null,null,null),cn=nn.exports,ln=function(){var e=this,a=e._self._c;return a(va["a"],[a(w["a"],{staticClass:"mx-auto"},[a(Bt["a"],{model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(Nt["a"],{attrs:{to:{name:"home-personal"}}},[e._v("Usuarios")]),a(Nt["a"],{attrs:{to:{name:"configuraciones"}}},[e._v("Configuraciones")])],1)],1),a("br"),a("router-view")],1)},un=[],dn={data:()=>({tab:1})},mn=dn,pn=Object(C["a"])(mn,ln,un,!1,null,null,null),bn=pn.exports,gn=function(){var e=this,a=e._self._c;return a(va["a"],[a(i["a"],{attrs:{fluid:""}},[a("router-view")],1)],1)},fn=[],_n={},hn=Object(C["a"])(_n,gn,fn,!1,null,null,null),vn=hn.exports,yn=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{"no-gutters":"",justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a(w["a"],[a("grupos-permisos",{attrs:{grupos:e.grupos,cabecera:e.cabecera}})],1)],1)],1)},Cn=[],jn=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto"},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Grupos y permisos ")]),a(f["c"],[a(rt["a"],{attrs:{items:e.grupos,headers:e.cabecera,loading:e.is_cargando,"no-data-text":"No se encontraron grupos.","footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"}}})],1)],1)},xn=[],kn={props:{grupos:{type:Array,default:()=>[]},cabecera:{type:Array,default:()=>[]}},computed:{is_cargando(){return this.$store.getters["grupo/getCargando"]}}},$n=kn,wn=Object(C["a"])($n,jn,xn,!1,null,null,null),In=wn.exports,Sn={components:{"grupos-permisos":In},data:()=>({cabecera:[{text:"Nombre",value:"nombre"},{text:"Num. de permisos",value:"permisos"},{text:"Accion"}]}),computed:{grupos(){return this.$store.getters["grupo/getGrupos"]}},created(){this.obtenerGrupos()},methods:{async obtenerGrupos(){const{mensaje:e,error:a,estado:t}=await this.$store.dispatch("grupo/obtenerGrupos");this.$store.commit("alerta/addAlertas",{estado:t,mensaje:e,error:a})}}},An=Sn,Mn=Object(C["a"])(An,yn,Cn,!1,null,null,null),Pn=Mn.exports,En=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{"no-gutters":"",justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8",md:"8",lg:"8",xl:"8",xs:"8"}},[a(w["a"],{staticClass:"mx-auto",attrs:{outlined:"",elevation:"5"}},[a("tabla-usario",{attrs:{usuarios:e.usuarios,cabeceras:e.cabeceras}})],1)],1)],1)},Dn=[],Tn=function(){var e=this,a=e._self._c;return a(w["a"],{attrs:{flat:""}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Usuarios "),a(c["a"]),a(ya["a"],{staticClass:"white",attrs:{"append-icon":"mdi-magnify",label:"Buscar usuaros","single-line":"","hide-details":"",clearable:"",dense:"",filled:"",outlined:"",rounded:""},model:{value:e.buscar,callback:function(a){e.buscar=a},expression:"buscar"}})],1),a(f["c"],[a(rt["a"],{attrs:{items:e.usuarios,headers:e.cabeceras,"no-data-text":e.mensaje,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAllText:"Todos",pageText:"p - Tp de Fp"},search:e.buscar},scopedSlots:e._u([{key:"top",fn:function(){return[a(it["a"],{attrs:{flat:""}},[a(c["a"]),a("formulario-crear-nuevo-usuario"),a("filtrar-usuarios")],1)]},proxy:!0},{key:"item.nombre",fn:function({item:a}){return[e._v(" "+e._s(a.nombre)+" "+e._s(a.apellidos)+" ")]}},{key:"item.is_activo",fn:function({item:t,index:o}){return[a("confirmar-permisos",{attrs:{indice:o,tipo_pago:`Confirmar ${t.is_activo?"desactivación":"activación "} de ${t.nombre_usuario}`,mensaje:`Estás a punto de ${t.is_activo?"desactivar":"activar "} el siguiente usuario. ¿Estás seguro?`,icon:t.is_activo?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline",color:t.is_activo?"success":"error"},on:{emitConfirmacion:e.cambiarPermisoActivo}})]}},{key:"item.is_personal",fn:function({item:t,index:o}){return[a("confirmar-permisos",{attrs:{indice:o,tipo_pago:"Confirmar personal",mensaje:`Estás a punto de ${t.is_personal?"desactivar":"confirmar "} el siguiente personal. ¿Estás seguro?`,icon:t.is_personal?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline",color:t.is_personal?"success":"error"},on:{emitConfirmacion:e.cambiarPermisoPersonal}})]}},{key:"item.is_superusuario",fn:function({item:t}){return[a(p["a"],{attrs:{color:t.is_superusuario?"success":"error",disabled:""}},[e._v(" "+e._s(t.is_superusuario?"mdi-checkbox-marked-circle-outline":"mdi-close-circle-outline")+" ")])]}},{key:"item.accion",fn:function({item:t}){return[a(D["a"],{attrs:{left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({attrs:t,on:o}){return[a(m["a"],e._g(e._b({attrs:{icon:"",color:"info"}},"v-btn",t,!1),o),[a(p["a"],[e._v("mdi-account-edit")])],1)]}}],null,!0)},[a(S["a"],[a(A["a"],{attrs:{link:"",disabled:!(t.is_activo&&t.is_personal)}},[a(P["d"],[a("formulario-asignar-privilegios-usuario",{attrs:{usuario:t}})],1)],1),a(A["a"],{attrs:{link:"",color:"erro"}},[a(P["d"],[e._v(" Eliminar ")])],1)],1)],1)]}}])})],1)],1)},On=[],Vn=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{"max-width":"300"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a("span",e._g(e._b({},"span",o,!1),t),[e._v("Gestionar privilegios")])]}}]),model:{value:e.is_dialogo,callback:function(a){e.is_dialogo=a},expression:"is_dialogo"}},[a(w["a"],[a(f["d"],{staticClass:"grey lighten-2"},[e._v("Permisos de "+e._s(e.usuario.nombre))]),a(f["c"],e._l(e.grupos,(function(t){return a(ys["a"],{key:t.id},[a(hi["a"],{attrs:{label:`${t.nombre}: ${t.is_active?"SI":"NO"}`,inset:""},on:{change:function(a){return e.setActivar(e.grupos)}},model:{value:t.is_active,callback:function(a){e.$set(t,"is_active",a)},expression:"grupo.is_active"}})],1)})),1),a(f["a"],[a(c["a"]),a(m["a"],{staticClass:"ma-2",attrs:{color:"error"}},[e._v("Cancelar")]),a(m["a"],{attrs:{color:"success"}},[e._v("Aceptar")])],1)],1)],1)},Un=[],Fn={props:{usuario:{type:Object,default:()=>({})}},data:()=>({dialogo:!1,is_administrador:!0,is_coordinador:!1}),computed:{is_dialogo:{get(){return this.dialogo},set(e){this.dialogo=e,e&&this.obtenerGrupos()}},grupos(){const e=[],{grupos:a}=this.usuario;for(const t of this.$store.getters["grupo/getGrupos"]){let o=!!a.includes(t.id);e.push({id:t.id,nombre:t.nombre,is_active:o})}return e}},methods:{async obtenerGrupos(){await this.$store.dispatch("grupo/obtenerGrupos")},setActivar(e){console.log(e),console.log(this.grupos)}}},Rn=Fn,Nn=Object(C["a"])(Rn,Vn,Un,!1,null,null,null),Bn=Nn.exports,zn=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{persistent:"","max-width":"800"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({staticClass:"ma-2",attrs:{color:"success",dark:""}},"v-btn",o,!1),t),[a(p["a"],{attrs:{dark:"",left:""}},[e._v(" mdi-account-plus ")]),e._v(" Agregar miembro ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(w["a"],{staticClass:"mx-auto",attrs:{loading:e.is_cargando,disabled:e.is_cargando}},[a(f["d"],{staticClass:"grey lighten-2"},[e._v(" Agregar miembro "),a(c["a"]),a(m["a"],{attrs:{icon:"",color:"error"},on:{click:function(a){return e.cerrar()}}},[a(p["a"],[e._v("mdi-close")])],1)],1),a(f["c"],[a(Ua["a"],{ref:"form",staticClass:"container",attrs:{"lazy-validation":""}},[a(Sa["a"],{attrs:{dense:""}},[a(Ia["a"],{attrs:{cols:"12",md:"4"}},[a(ya["a"],{attrs:{rules:[e=>!!e||"Se requiere un nombre"],label:"Nombre*",outlined:"",dense:""},model:{value:e.usuario.nombre,callback:function(a){e.$set(e.usuario,"nombre",a)},expression:"usuario.nombre"}})],1),a(Ia["a"],{attrs:{cols:"12",md:"4"}},[a(ya["a"],{attrs:{label:"Apellidos*",rules:[e=>!!e||"El apellido es obligatorio"],outlined:"",dense:""},model:{value:e.usuario.apellidos,callback:function(a){e.$set(e.usuario,"apellidos",a)},expression:"usuario.apellidos"}})],1),a(Ia["a"],{attrs:{cols:"12",md:"4"}},[a(ya["a"],{attrs:{label:"Nombre usuario*",rules:[e=>!!e||"Se requiere nombre de usuario"],outlined:"",dense:""},model:{value:e.usuario.nombre_usuario,callback:function(a){e.$set(e.usuario,"nombre_usuario",a)},expression:"usuario.nombre_usuario"}})],1),a(Ia["a"],{attrs:{cols:"12",md:"6"}},[a(ya["a"],{attrs:{label:"Correo*",rules:[e=>!!e||"Correo electronico es requerido"],outlined:"",dense:""},model:{value:e.usuario.correo,callback:function(a){e.$set(e.usuario,"correo",a)},expression:"usuario.correo"}})],1),a(Ia["a"],{attrs:{cols:"12",md:"6"}},[a(lt["a"],{attrs:{items:e.dominios,label:"Dominios",outlined:"",dense:""},model:{value:e.dominio,callback:function(a){e.dominio=a},expression:"dominio"}})],1),a(Ia["a"],{attrs:{cols:"12",md:"12"}},[a(ya["a"],{attrs:{"append-icon":e.mostrarContrasena?"mdi-eye":"mdi-eye-off",rules:[e=>!!e||"Requerido."],type:e.mostrarContrasena?"text":"password",name:"input-10-1",label:"Contraseña*",outlined:"",dense:""},on:{"click:append":function(a){e.mostrarContrasena=!e.mostrarContrasena}},model:{value:e.usuario.contraseña,callback:function(a){e.$set(e.usuario,"contraseña",a)},expression:"usuario.contraseña"}})],1),a(Ia["a"],{attrs:{cols:"12",md:"6"}},[a(Ci["a"],{attrs:{label:"¿Es un miembro del personal?"},model:{value:e.is_personal,callback:function(a){e.is_personal=a},expression:"is_personal"}})],1)],1)],1)],1),a(f["a"],[a(c["a"]),a(m["a"],{staticClass:"ma-3",attrs:{color:"red",dark:""},on:{click:function(a){return e.cerrar()}}},[e._v("Cerrar")]),a(m["a"],{attrs:{color:"green",dark:""},on:{click:function(a){return e.crearMiembro()}}},[e._v("Agregar")])],1)],1)],1)},Ln=[],Gn={data:()=>({dominio:"@advr.mx",groups:[],grupos_permisos:[],dialog:!1,dominios:["@advr.mx","@gesscorpzero.com"],mostrarContrasena:!1,is_personal:!0}),computed:{usuario(){return this.$store.getters["usuario/getUsuario"]},is_cargando(){return this.$store.getters["usuario/getCargando"]}},methods:{async crearMiembro(){if(this.$refs.form.validate()){const{nombre_usuario:e,correo:a,"contraseña":t,nombre:o,apellidos:r}=this.usuario,s=a.concat(this.dominio),{mensaje:i,estado:n,error:c}=await this.$store.dispatch("usuario/crearUsuario",{nombre_usuario:e,correo_electronico:s,"contraseña":t,nombre:o,apellidos:r,is_personal:this.is_personal});this.$store.commit("alerta/addAlertas",{estado:n,mensaje:i,error:c}),c||this.cerrar()}},cerrar(){this.$refs.form.reset(),this.$refs.form.resetValidation(),this.dialog=!1,this.dominio="@advr.mx"}}},qn=Gn,Xn=Object(C["a"])(qn,zn,Ln,!1,null,null,null),Hn=Xn.exports,Jn=function(){var e=this,a=e._self._c;return a(Va["a"],{attrs:{scrollable:"","max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:o}){return[a(m["a"],e._g(e._b({staticClass:"ma-1",attrs:{color:"primary"}},"v-btn",o,!1),t),[a(p["a"],{attrs:{left:""}},[e._v("mdi-filter-variant")]),e._v(" Filtros ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(w["a"],{staticClass:"mx-auto"},[a(f["d"],[1===e.paso_filtro?a(m["a"],{attrs:{icon:""},on:{click:function(a){e.dialog=!1}}},[a(p["a"],[e._v("mdi-chevron-left")])],1):a(m["a"],{attrs:{icon:""},on:{click:function(a){e.paso_filtro=1,e.filtro=-1}}},[a(p["a"],[e._v("mdi-chevron-left")])],1),a(c["a"]),e._v(" "+e._s(e.filtro>-1?e.opciones_filtrado[e.filtro].text:"")+" "),a(c["a"]),a(m["a"],{attrs:{icon:"",color:"primary"},on:{click:function(a){return e.cleanAll()}}},[a(p["a"],[e._v("mdi-eraser")])],1)],1),a(I["a"]),a(ut["a"],{attrs:{elevation:"0"},model:{value:e.paso_filtro,callback:function(a){e.paso_filtro=a},expression:"paso_filtro"}},[a(mt["b"],[a(dt["a"],{attrs:{step:"1"}},[a(S["a"],[a(E["a"],{model:{value:e.filtro,callback:function(a){e.filtro=a},expression:"filtro"}},e._l(e.opciones_filtrado,(function(t,o){return a(A["a"],{key:o,on:{click:function(a){e.paso_filtro=o+2}},scopedSlots:e._u([{key:"default",fn:function({active:o}){return[a(P["b"],[a(P["d"],[e._v(e._s(t.text))]),a(P["c"],[e._v(e._s(e.privilegio.nombre))])],1),a(M["a"],[a(m["a"],{attrs:{"input-value":o,icon:""}},[a(p["a"],[e._v("mdi-chevron-right")])],1)],1)]}}],null,!0)})})),1)],1)],1),a(dt["a"],{attrs:{step:"2"}},[a(lt["a"],{staticClass:"mt-1",attrs:{items:e.privilegios,label:"Privilegios","item-text":"nombre","return-object":"",outlined:"",dense:"",clearable:""},model:{value:e.privilegio,callback:function(a){e.privilegio=a},expression:"privilegio"}})],1)],1)],1),a(f["a"],[a(m["a"],{attrs:{block:"",color:"primary"},on:{click:function(a){return e.obtenerUsuariosPrivilegios(e.privilegio)}}},[e._v("Ver Usuarios")])],1)],1)],1)},Yn=[],Kn={data:()=>({dialog:!1,privilegio_selecconado:"",opciones_filtrado:[{text:"Privilegios"}],paso_filtro_seleccionado:1,filtro:-1}),computed:{privilegios(){return this.$store.getters["grupo/getGrupos"]},privilegio:{get(){return this.privilegio_selecconado},set(e){null===e&&this.obtenerUsuariosPrivilegios(""),this.privilegio_selecconado=e||""}},paso_filtro:{get(){return this.paso_filtro_seleccionado},set(e){this.paso_filtro_seleccionado=e,2==e&&0==this.privilegios.length&&this.obtenerGrupos()}}},methods:{async obtenerGrupos(){await this.$store.dispatch("grupo/obtenerGrupos")},async obtenerUsuariosPrivilegios({id:e}){const{mensaje:a,estado:t,error:o}=await this.$store.dispatch("usuario/obtenerUsuarios",{privilegio:e||""});this.privilegio&&this.$store.commit("alerta/addAlertas",{estado:t,mensaje:a,error:o})},cleanAll(){this.privilegio_selecconado=""}}},Qn=Kn,Zn=Object(C["a"])(Qn,Jn,Yn,!1,null,null,null),Wn=Zn.exports,ec={props:{usuarios:{type:Array,default:()=>[]},cabeceras:{type:Array,default:()=>[]}},data:()=>({buscar:""}),computed:{mensaje(){return"No se encontraron usuarios."}},components:{"formulario-crear-nuevo-usuario":Hn,"confirmar-permisos":_o,"formulario-asignar-privilegios-usuario":Bn,"filtrar-usuarios":Wn},methods:{async cambiarPermisoActivo({indice:e,confirmacion:a}){if(a){const{id:a,is_activo:t,is_personal:o}=this.usuarios[e],{mensaje:r,error:s,estado:i}=await this.$store.dispatch("usuario/actulizarPermisos",{id:a,indice:e,is_activo:!t,is_personal:o});this.$store.commit("alerta/addAlertas",{estado:i,mensaje:r,error:s})}},async cambiarPermisoPersonal({indice:e,confirmacion:a}){if(a){const{id:a,is_activo:t,is_personal:o}=this.usuarios[e],{mensaje:r,error:s,estado:i}=await this.$store.dispatch("usuario/actulizarPermisos",{id:a,indice:e,is_activo:t,is_personal:!o});this.$store.commit("alerta/addAlertas",{estado:i,mensaje:r,error:s})}}}},ac=ec,tc=Object(C["a"])(ac,Tn,On,!1,null,null,null),oc=tc.exports,rc={data:()=>({cabeceras:[{text:"Correo",value:"correo_electronico"},{text:"Usuario",value:"nombre_usuario"},{text:"Nombre",value:"nombre"},{text:"Activo",value:"is_activo",align:"center"},{text:"Personal",value:"is_personal",align:"center"},{text:"Super usuario",value:"is_superusuario",align:"center"},{text:"Acciones",value:"accion"}]}),components:{"tabla-usario":oc},computed:{usuarios(){return this.$store.getters["usuario/getUsuarios"]}},created(){this.listarUsuarios()},methods:{async listarUsuarios(){const{mensaje:e,estado:a,error:t}=await this.$store.dispatch("usuario/obtenerUsuarios",{privilegio:""});this.$store.commit("alerta/addAlertas",{estado:a,mensaje:e,error:t})}}},sc=rc,ic=Object(C["a"])(sc,En,Dn,!1,null,null,null),nc=ic.exports,cc=function(){var e=this,a=e._self._c;return a(Sa["a"],{attrs:{justify:"center"}},[a(Ia["a"],{attrs:{cols:"12",sm:"8"}},[a("eliminar-cliente")],1)],1)},lc=[],uc=function(){var e=this,a=e._self._c;return a(w["a"],{staticClass:"mx-auto"},[a(f["d"],[e._v(" D ")]),a(f["c"],[a(S["a"],{attrs:{lines:"three"}},[a(A["a"],[a(P["d"],[e._v(" Cliente ")]),a(P["c"],[e._v(" Eliminar cliente ")])],1)],1)],1)],1)},dc=[],mc={},pc=Object(C["a"])(mc,uc,dc,!1,null,null,null),bc=pc.exports,gc={components:{"eliminar-cliente":bc}},fc=gc,_c=Object(C["a"])(fc,cc,lc,!1,null,null,null),hc=_c.exports,vc=t("a75b"),yc=function(){var e=this,a=e._self._c;return a(vc["a"],[a(i["a"],[a(Sa["a"],{attrs:{"no-gutters":""}},[a(Ia["a"],{attrs:{cols:"2"}},[a(k["a"],{attrs:{color:"indigo"}},[a(p["a"],{attrs:{dark:""}},[e._v(" mdi-account-circle ")])],1)],1),a(Ia["a"],{attrs:{cols:"8"}},[e._v(" "+e._s(e.nombreUsuario)+" "),a("br"),e._v(" Tu cuenta personal ")]),a(Ia["a"],{attrs:{cols:"2"}},[a(m["a"],{attrs:{"x-small":""},on:{click:function(a){return e.$router.push({name:"HomeUsuario",params:{nombreUsuario:e.$store.getters["MOD_autenticacion/getNombreUsuario"]}})}}},[e._v("Ir al perfil personal ")])],1)],1)],1),a("router-view")],1)},Cc=[],jc={computed:{nombreUsuario(){return this.$store.getters["MOD_autenticacion/getNombreUsuario"]}}},xc=jc,kc=Object(C["a"])(xc,yc,Cc,!1,null,null,null),$c=kc.exports,wc=function(){var e=this,a=e._self._c;return a(i["a"],[a(Sa["a"],[a(Ia["a"],{attrs:{cols:"12",sm:"4"}},[a(w["a"],{staticClass:"mx-auto",attrs:{"max-width":"500"}},[a(S["a"],[a(E["a"],{model:{value:e.model,callback:function(a){e.model=a},expression:"model"}},e._l(e.items,(function(t,o){return a(A["a"],{key:o},[a(P["b"],[a(P["d"],{domProps:{textContent:e._s(t.text)}})],1)],1)})),1)],1)],1)],1),a(Ia["a"],{attrs:{cols:"12",sm:"8"}},[a(w["a"],[a(i["a"],[a(ya["a"],{attrs:{label:"Nombre",required:""},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}}),a(ya["a"],{attrs:{label:"Apellidos",required:""},model:{value:e.apellidos,callback:function(a){e.apellidos=a},expression:"apellidos"}}),a(m["a"],{staticClass:"mr-4",attrs:{type:"submit"},on:{click:function(a){return e.actualizarPerfil({nombre:e.nombre,apellidos:e.apellidos})}}},[e._v(" Actualizar perfil ")])],1)],1)],1)],1)],1)},Ic=[],Sc={data:()=>({items:[{text:"Pefil"},{text:"Cuenta"},{text:"Seguridad de la cuenta"},{text:"Email"}],model:1}),computed:{nombre:{get(){return this.$store.getters["MOD_autenticacion/obtenerNombreUsuario"]},set(e){this.nombre=e}},apellidos:{get(){return this.$store.getters["MOD_autenticacion/obtenerApellidosUsuario"]},set(e){this.apellidos=e}}},methods:{actualizarPerfil({nombre:e,apellidos:a}){null!=a&&""!=a&&null!=e&&""!=e&&alert("En mantenimiento por el momento.")}}},Ac=Sc,Mc=Object(C["a"])(Ac,wc,Ic,!1,null,null,null),Pc=Mc.exports,Ec=t("2f62");o["a"].use(Ec["a"]);var Dc=new Ec["a"].Store({modules:Xe}),Tc=t("c671"),Oc=t("aac8"),Vc=t("9a96"),Uc=t("0de5"),Fc=function(){var e=this,a=e._self._c;return a(va["a"],{staticClass:"grey"},[a(i["a"],{attrs:{fluid:""}},[a(it["a"],{staticClass:"mb-2",attrs:{color:"indigo darken-5",dark:"",flat:""}},[a(l["a"],[e._v("Estado del trabajo")])],1),a(Sa["a"],[a(Ia["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[a(w["a"],[a(f["d"],{staticClass:"subheading font-weight-bold"},[e._v(" Estado del trabajo ")]),a(I["a"]),a(S["a"],{attrs:{dense:""}},[a(A["a"],[a(P["b"],[e._v("Status:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.status.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Asignado:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.created_date)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Última actualización:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.modified_date)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Inmueble:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.property_office.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Proyecto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.proyect.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Concepto:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.concept.name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Asignado:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.area_user.name)+" "+e._s(e.trabajo.area_user.last_name)+" ")])],1),a(A["a"],[a(P["b"],[e._v("Ácargo:")]),a(P["b"],{staticClass:"align-end"},[e._v(" "+e._s(e.trabajo.assigned_user.name)+" "+e._s(e.trabajo.area_user.last_name)+" ")])],1)],1),a(Bt["a"],{attrs:{"background-color":"deep-purple accent-4",centered:"",dark:"","icons-and-text":""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(Vc["a"]),a(Nt["a"],{attrs:{href:"#tab-1"}},[e._v(" Archivo "),a(p["a"],[e._v("mdi-file-pdf")])],1),a(Nt["a"],{attrs:{href:"#tab-2"}},[e._v(" Comentario "),a(p["a"],[e._v("mdi-comment-multiple-outline")])],1)],1),a(Oc["a"],{model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(Tc["a"],{attrs:{value:"tab-1"}},[a(w["a"],{staticClass:"mx-auto"},[Boolean(e.trabajo.files.length)?e._e():a(f["c"],{staticClass:"pt-4"},[e._v(" No han subido archivos. ")]),a(Uc["a"],{attrs:{items:e.trabajo.files,"item-height":50},scopedSlots:e._u([{key:"default",fn:function({item:t}){return[a(A["a"],[a(P["b"],[a(P["d"],[e._v(e._s(t.title))])],1),a(M["a"],[a(m["a"],{attrs:{depressed:"",small:"",href:t.file}},[e._v(" Ver archivo "),a(p["a"],{attrs:{color:"orange darken-4",right:""}},[e._v(" mdi-open-in-new ")])],1)],1)],1)]}}])})],1)],1),a(Tc["a"],{attrs:{value:"tab-2"}},[a("Comentarios")],1)],1)],1)],1)],1)],1)],1)},Rc=[],Nc=function(){var e=this,a=e._self._c;return a(i["a"],{staticClass:"grey lighten-2"},[a(Sa["a"],{staticClass:"mb-6",attrs:{"no-gutters":""}},[a(Ia["a"],{attrs:{cols:"12"}},[a(Aa["a"],{attrs:{"align-top":"",dense:""}},e._l(e.trabajo.comments,(function(t){return a(Ma["a"],{key:t.time,attrs:{small:""}},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[e._v(e._s(t))])])])])})),1)],1)],1),a(Sa["a"],{attrs:{"no-gutters":""}},[a(Ia["a"],{attrs:{cols:"12"}},[a(w["a"],{staticClass:"elevation-3"},[a(f["c"],[a(Fa["a"],{attrs:{solo:"",name:"input-7-4",label:"Escribir comentario"},model:{value:e.comment,callback:function(a){e.comment=a},expression:"comment"}})],1),a(f["a"],[a(c["a"]),a(m["a"],[a(p["a"],{attrs:{left:"",color:"red"}},[e._v("mdi-source-commit-end")]),e._v(" Terminar trabajo ")],1),a(m["a"],{attrs:{color:"success",disabled:0==e.comment.length},on:{click:function(a){return e.subirComentario()}}},[e._v(" Comentar ")])],1)],1)],1)],1)],1)},Bc=[],zc={data:()=>({comment:""}),computed:{trabajo(){return this.$store.getters["trabajo/getTrabajo"]}},methods:{async subirComentario(){const{trabajo:e,comment:a}=this,{message:t}=await this.$store.dispatch("trabajo/AXN_ComentarTrabajo",{id_trabajo:e.id,comentario:a});alert(t)}}},Lc=zc,Gc=Object(C["a"])(Lc,Nc,Bc,!1,null,null,null),qc=Gc.exports,Xc={components:{Comentarios:qc},data:()=>({tab:null,bottonEnviar:!1,files:[]}),computed:{trabajo(){return this.$store.getters["trabajo/getTrabajo"]},grups(){return this.$store.getters["MOD_autenticacion/getGrupos"]}},created(){this.obtenerTrabajo()},methods:{async obtenerTrabajo(){await this.$store.dispatch("trabajo/recuperarTrabajo",this.trabajo.id)}}},Hc=Xc,Jc=Object(C["a"])(Hc,Fc,Rc,!1,null,null,null),Yc=Jc.exports;o["a"].use(fa["a"]);const Kc=(e,a,t)=>{Dc.getters["MOD_autenticacion/isUsuarioAutenticado"]?t():t("/login")},Qc=[{path:"/login",name:"Login",component:wa},{path:"/:nombreUsuario",name:"HomeUsuario",component:vn,meta:{requiereAuth:!0},children:[{path:"cuenta"},{path:"trabajos",name:"TrabajoUsuario",component:as},{path:"trabajo/archivos",name:"ArchivosTrabajo",component:ns,props:!0},{path:"trabajos/nuevos",name:"asignar-trabajos-usuario",component:Jr,props:{sinClienteSeleccionado:!0}},{path:"pagos",name:"pagos",component:gi}]},{path:"/:nombreUsuario/recursos",component:vs,meta:{requiereAuth:!0},children:[{path:"",name:"recursos-usuario",component:cn},{path:"solicitudes",name:"solicitudes",component:li}]},{path:"/:nombreUsuario/recursos/nuevo",name:"peticion-recursos",component:an},{path:"/",name:"Home",component:Ut,beforeEnter:Kc},{path:"/personal",component:bn,meta:{requiereAuth:!0},children:[{path:"usuarios",name:"home-personal",component:nc},{path:"configuraciones",name:"configuraciones",component:Pn}]},{path:"/de",name:"De",component:Yc},{path:"/:cliente",component:Ht,meta:{requiereAuth:!0},children:[{path:"inmuebles",name:"inmuebles",component:$o},{path:"inmuebles/cargar/",name:"cargar-archivo",component:Xo},{path:"trabajos",name:"trabajos-inmuebles",component:ps},{path:"trabajos/nuevos",name:"asignar-trabajos",component:Jr},{path:"configuraciones",name:"configuraciones-cliente",component:hc}]},{path:"/confuguracion",component:$c,children:[{path:"perfil",name:"Editar-perfil",component:Pc}]}],Zc=new fa["a"]({mode:"history",base:"/antasoft/",routes:Qc});Zc.beforeEach((e,a,t)=>{e.matched.some(e=>e.meta.requiereAuth)?Dc.getters["MOD_autenticacion/isUsuarioAutenticado"]?t():t({name:"Login"}):t()});var Wc=Zc,el=t("f309");o["a"].use(el["a"]);var al=new el["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#6c96bb",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#4d6c85"}}}});o["a"].config.productionTip=!1,Je.forEach(e=>{Dc.dispatch(`${e}/${q}`)}),new o["a"]({router:Wc,store:Dc,vuetify:al,render:e=>e(ga)}).$mount("#app")},6450:function(e,a,t){"use strict";t("248b")},db19:function(e,a,t){"use strict";t("f4c8")},f4c8:function(e,a,t){}});
//# sourceMappingURL=app.f4736bf3.js.map